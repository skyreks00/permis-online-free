(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var mk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function HI(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Ap={exports:{}},Eu={};var mE;function GI(){if(mE)return Eu;mE=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:s,type:i,key:c,ref:a!==void 0?a:null,props:l}}return Eu.Fragment=e,Eu.jsx=t,Eu.jsxs=t,Eu}var pE;function KI(){return pE||(pE=1,Ap.exports=GI()),Ap.exports}var A=KI(),Ip={exports:{}},Ne={};var gE;function QI(){if(gE)return Ne;gE=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),S=Symbol.iterator;function N(V){return V===null||typeof V!="object"?null:(V=S&&V[S]||V["@@iterator"],typeof V=="function"?V:null)}var Q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K=Object.assign,U={};function ee(V,F,ae){this.props=V,this.context=F,this.refs=U,this.updater=ae||Q}ee.prototype.isReactComponent={},ee.prototype.setState=function(V,F){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,F,"setState")},ee.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function J(){}J.prototype=ee.prototype;function W(V,F,ae){this.props=V,this.context=F,this.refs=U,this.updater=ae||Q}var se=W.prototype=new J;se.constructor=W,K(se,ee.prototype),se.isPureReactComponent=!0;var ue=Array.isArray;function ce(){}var x={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function R(V,F,ae){var fe=ae.ref;return{$$typeof:s,type:V,key:F,ref:fe!==void 0?fe:null,props:ae}}function M(V,F){return R(V.type,F,V.props)}function O(V){return typeof V=="object"&&V!==null&&V.$$typeof===s}function k(V){var F={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ae){return F[ae]})}var C=/\/+/g;function ke(V,F){return typeof V=="object"&&V!==null&&V.key!=null?k(""+V.key):F.toString(36)}function qe(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(ce,ce):(V.status="pending",V.then(function(F){V.status==="pending"&&(V.status="fulfilled",V.value=F)},function(F){V.status==="pending"&&(V.status="rejected",V.reason=F)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function j(V,F,ae,fe,be){var Ie=typeof V;(Ie==="undefined"||Ie==="boolean")&&(V=null);var Me=!1;if(V===null)Me=!0;else switch(Ie){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(V.$$typeof){case s:case e:Me=!0;break;case v:return Me=V._init,j(Me(V._payload),F,ae,fe,be)}}if(Me)return be=be(V),Me=fe===""?"."+ke(V,0):fe,ue(be)?(ae="",Me!=null&&(ae=Me.replace(C,"$&/")+"/"),j(be,F,ae,"",function(Wi){return Wi})):be!=null&&(O(be)&&(be=M(be,ae+(be.key==null||V&&V.key===be.key?"":(""+be.key).replace(C,"$&/")+"/")+Me)),F.push(be)),1;Me=0;var _t=fe===""?".":fe+":";if(ue(V))for(var ct=0;ct<V.length;ct++)fe=V[ct],Ie=_t+ke(fe,ct),Me+=j(fe,F,ae,Ie,be);else if(ct=N(V),typeof ct=="function")for(V=ct.call(V),ct=0;!(fe=V.next()).done;)fe=fe.value,Ie=_t+ke(fe,ct++),Me+=j(fe,F,ae,Ie,be);else if(Ie==="object"){if(typeof V.then=="function")return j(qe(V),F,ae,fe,be);throw F=String(V),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return Me}function oe(V,F,ae){if(V==null)return V;var fe=[],be=0;return j(V,fe,"","",function(Ie){return F.call(ae,Ie,be++)}),fe}function te(V){if(V._status===-1){var F=V._result;F=F(),F.then(function(ae){(V._status===0||V._status===-1)&&(V._status=1,V._result=ae)},function(ae){(V._status===0||V._status===-1)&&(V._status=2,V._result=ae)}),V._status===-1&&(V._status=0,V._result=F)}if(V._status===1)return V._result.default;throw V._result}var pe=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},we={map:oe,forEach:function(V,F,ae){oe(V,function(){F.apply(this,arguments)},ae)},count:function(V){var F=0;return oe(V,function(){F++}),F},toArray:function(V){return oe(V,function(F){return F})||[]},only:function(V){if(!O(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Ne.Activity=b,Ne.Children=we,Ne.Component=ee,Ne.Fragment=t,Ne.Profiler=a,Ne.PureComponent=W,Ne.StrictMode=i,Ne.Suspense=p,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(V){return x.H.useMemoCache(V)}},Ne.cache=function(V){return function(){return V.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(V,F,ae){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var fe=K({},V.props),be=V.key;if(F!=null)for(Ie in F.key!==void 0&&(be=""+F.key),F)!I.call(F,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&F.ref===void 0||(fe[Ie]=F[Ie]);var Ie=arguments.length-2;if(Ie===1)fe.children=ae;else if(1<Ie){for(var Me=Array(Ie),_t=0;_t<Ie;_t++)Me[_t]=arguments[_t+2];fe.children=Me}return R(V.type,be,fe)},Ne.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:l,_context:V},V},Ne.createElement=function(V,F,ae){var fe,be={},Ie=null;if(F!=null)for(fe in F.key!==void 0&&(Ie=""+F.key),F)I.call(F,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(be[fe]=F[fe]);var Me=arguments.length-2;if(Me===1)be.children=ae;else if(1<Me){for(var _t=Array(Me),ct=0;ct<Me;ct++)_t[ct]=arguments[ct+2];be.children=_t}if(V&&V.defaultProps)for(fe in Me=V.defaultProps,Me)be[fe]===void 0&&(be[fe]=Me[fe]);return R(V,Ie,be)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(V){return{$$typeof:d,render:V}},Ne.isValidElement=O,Ne.lazy=function(V){return{$$typeof:v,_payload:{_status:-1,_result:V},_init:te}},Ne.memo=function(V,F){return{$$typeof:g,type:V,compare:F===void 0?null:F}},Ne.startTransition=function(V){var F=x.T,ae={};x.T=ae;try{var fe=V(),be=x.S;be!==null&&be(ae,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(ce,pe)}catch(Ie){pe(Ie)}finally{F!==null&&ae.types!==null&&(F.types=ae.types),x.T=F}},Ne.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},Ne.use=function(V){return x.H.use(V)},Ne.useActionState=function(V,F,ae){return x.H.useActionState(V,F,ae)},Ne.useCallback=function(V,F){return x.H.useCallback(V,F)},Ne.useContext=function(V){return x.H.useContext(V)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(V,F){return x.H.useDeferredValue(V,F)},Ne.useEffect=function(V,F){return x.H.useEffect(V,F)},Ne.useEffectEvent=function(V){return x.H.useEffectEvent(V)},Ne.useId=function(){return x.H.useId()},Ne.useImperativeHandle=function(V,F,ae){return x.H.useImperativeHandle(V,F,ae)},Ne.useInsertionEffect=function(V,F){return x.H.useInsertionEffect(V,F)},Ne.useLayoutEffect=function(V,F){return x.H.useLayoutEffect(V,F)},Ne.useMemo=function(V,F){return x.H.useMemo(V,F)},Ne.useOptimistic=function(V,F){return x.H.useOptimistic(V,F)},Ne.useReducer=function(V,F,ae){return x.H.useReducer(V,F,ae)},Ne.useRef=function(V){return x.H.useRef(V)},Ne.useState=function(V){return x.H.useState(V)},Ne.useSyncExternalStore=function(V,F,ae){return x.H.useSyncExternalStore(V,F,ae)},Ne.useTransition=function(){return x.H.useTransition()},Ne.version="19.2.4",Ne}var yE;function Lg(){return yE||(yE=1,Ip.exports=QI()),Ip.exports}var z=Lg();const xp=HI(z);var Rp={exports:{}},bu={},Cp={exports:{}},Np={};var _E;function $I(){return _E||(_E=1,(function(s){function e(j,oe){var te=j.length;j.push(oe);e:for(;0<te;){var pe=te-1>>>1,we=j[pe];if(0<a(we,oe))j[pe]=oe,j[te]=we,te=pe;else break e}}function t(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var oe=j[0],te=j.pop();if(te!==oe){j[0]=te;e:for(var pe=0,we=j.length,V=we>>>1;pe<V;){var F=2*(pe+1)-1,ae=j[F],fe=F+1,be=j[fe];if(0>a(ae,te))fe<we&&0>a(be,ae)?(j[pe]=be,j[fe]=te,pe=fe):(j[pe]=ae,j[F]=te,pe=F);else if(fe<we&&0>a(be,te))j[pe]=be,j[fe]=te,pe=fe;else break e}}return oe}function a(j,oe){var te=j.sortIndex-oe.sortIndex;return te!==0?te:j.id-oe.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();s.unstable_now=function(){return c.now()-d}}var p=[],g=[],v=1,b=null,S=3,N=!1,Q=!1,K=!1,U=!1,ee=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function se(j){for(var oe=t(g);oe!==null;){if(oe.callback===null)i(g);else if(oe.startTime<=j)i(g),oe.sortIndex=oe.expirationTime,e(p,oe);else break;oe=t(g)}}function ue(j){if(K=!1,se(j),!Q)if(t(p)!==null)Q=!0,ce||(ce=!0,k());else{var oe=t(g);oe!==null&&qe(ue,oe.startTime-j)}}var ce=!1,x=-1,I=5,R=-1;function M(){return U?!0:!(s.unstable_now()-R<I)}function O(){if(U=!1,ce){var j=s.unstable_now();R=j;var oe=!0;try{e:{Q=!1,K&&(K=!1,J(x),x=-1),N=!0;var te=S;try{t:{for(se(j),b=t(p);b!==null&&!(b.expirationTime>j&&M());){var pe=b.callback;if(typeof pe=="function"){b.callback=null,S=b.priorityLevel;var we=pe(b.expirationTime<=j);if(j=s.unstable_now(),typeof we=="function"){b.callback=we,se(j),oe=!0;break t}b===t(p)&&i(p),se(j)}else i(p);b=t(p)}if(b!==null)oe=!0;else{var V=t(g);V!==null&&qe(ue,V.startTime-j),oe=!1}}break e}finally{b=null,S=te,N=!1}oe=void 0}}finally{oe?k():ce=!1}}}var k;if(typeof W=="function")k=function(){W(O)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,ke=C.port2;C.port1.onmessage=O,k=function(){ke.postMessage(null)}}else k=function(){ee(O,0)};function qe(j,oe){x=ee(function(){j(s.unstable_now())},oe)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(j){j.callback=null},s.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<j?Math.floor(1e3/j):5},s.unstable_getCurrentPriorityLevel=function(){return S},s.unstable_next=function(j){switch(S){case 1:case 2:case 3:var oe=3;break;default:oe=S}var te=S;S=oe;try{return j()}finally{S=te}},s.unstable_requestPaint=function(){U=!0},s.unstable_runWithPriority=function(j,oe){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var te=S;S=j;try{return oe()}finally{S=te}},s.unstable_scheduleCallback=function(j,oe,te){var pe=s.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?pe+te:pe):te=pe,j){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=te+we,j={id:v++,callback:oe,priorityLevel:j,startTime:te,expirationTime:we,sortIndex:-1},te>pe?(j.sortIndex=te,e(g,j),t(p)===null&&j===t(g)&&(K?(J(x),x=-1):K=!0,qe(ue,te-pe))):(j.sortIndex=we,e(p,j),Q||N||(Q=!0,ce||(ce=!0,k()))),j},s.unstable_shouldYield=M,s.unstable_wrapCallback=function(j){var oe=S;return function(){var te=S;S=oe;try{return j.apply(this,arguments)}finally{S=te}}}})(Np)),Np}var vE;function YI(){return vE||(vE=1,Cp.exports=$I()),Cp.exports}var Dp={exports:{}},on={};var EE;function XI(){if(EE)return on;EE=1;var s=Lg();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,g,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:p,containerInfo:g,implementation:v}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,on.createPortal=function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,v)},on.flushSync=function(p){var g=c.T,v=i.p;try{if(c.T=null,i.p=2,p)return p()}finally{c.T=g,i.p=v,i.d.f()}},on.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(p,g))},on.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},on.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var v=g.as,b=d(v,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,N=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?i.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:S,fetchPriority:N}):v==="script"&&i.d.X(p,{crossOrigin:b,integrity:S,fetchPriority:N,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},on.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=d(g.as,g.crossOrigin);i.d.M(p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(p)},on.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,b=d(v,g.crossOrigin);i.d.L(p,v,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},on.preloadModule=function(p,g){if(typeof p=="string")if(g){var v=d(g.as,g.crossOrigin);i.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(p)},on.requestFormReset=function(p){i.d.r(p)},on.unstable_batchedUpdates=function(p,g){return p(g)},on.useFormState=function(p,g,v){return c.H.useFormState(p,g,v)},on.useFormStatus=function(){return c.H.useHostTransitionStatus()},on.version="19.2.4",on}var bE;function JI(){if(bE)return Dp.exports;bE=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Dp.exports=XI(),Dp.exports}var TE;function WI(){if(TE)return bu;TE=1;var s=YI(),e=Lg(),t=JI();function i(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var r=n,o=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(o=r.return),n=r.return;while(n)}return r.tag===3?o:null}function c(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function d(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function p(n){if(l(n)!==n)throw Error(i(188))}function g(n){var r=n.alternate;if(!r){if(r=l(n),r===null)throw Error(i(188));return r!==n?null:n}for(var o=n,u=r;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return p(f),n;if(m===u)return p(f),r;m=m.sibling}throw Error(i(188))}if(o.return!==u.return)o=f,u=m;else{for(var _=!1,T=f.child;T;){if(T===o){_=!0,o=f,u=m;break}if(T===u){_=!0,u=f,o=m;break}T=T.sibling}if(!_){for(T=m.child;T;){if(T===o){_=!0,o=m,u=f;break}if(T===u){_=!0,u=m,o=f;break}T=T.sibling}if(!_)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:r}function v(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=v(n),r!==null)return r;n=n.sibling}return null}var b=Object.assign,S=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),Q=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),J=Symbol.for("react.consumer"),W=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function k(n){return n===null||typeof n!="object"?null:(n=O&&n[O]||n["@@iterator"],typeof n=="function"?n:null)}var C=Symbol.for("react.client.reference");function ke(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===C?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case K:return"Fragment";case ee:return"Profiler";case U:return"StrictMode";case ue:return"Suspense";case ce:return"SuspenseList";case R:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case Q:return"Portal";case W:return n.displayName||"Context";case J:return(n._context.displayName||"Context")+".Consumer";case se:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case x:return r=n.displayName||null,r!==null?r:ke(n.type)||"Memo";case I:r=n._payload,n=n._init;try{return ke(n(r))}catch{}}return null}var qe=Array.isArray,j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},pe=[],we=-1;function V(n){return{current:n}}function F(n){0>we||(n.current=pe[we],pe[we]=null,we--)}function ae(n,r){we++,pe[we]=n.current,n.current=r}var fe=V(null),be=V(null),Ie=V(null),Me=V(null);function _t(n,r){switch(ae(Ie,r),ae(be,n),ae(fe,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?L0(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=L0(r),n=z0(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}F(fe),ae(fe,n)}function ct(){F(fe),F(be),F(Ie)}function Wi(n){n.memoizedState!==null&&ae(Me,n);var r=fe.current,o=z0(r,n.type);r!==o&&(ae(be,n),ae(fe,o))}function xe(n){be.current===n&&(F(fe),F(be)),Me.current===n&&(F(Me),gu._currentValue=te)}var Ke,ft;function Je(n){if(Ke===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);Ke=r&&r[1]||"",ft=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ke+n+ft}var Ot=!1;function Wt(n,r){if(!n||Ot)return"";Ot=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(X){var $=X}Reflect.construct(n,[],ie)}else{try{ie.call()}catch(X){$=X}n.call(ie.prototype)}}else{try{throw Error()}catch(X){$=X}(ie=n())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(X){if(X&&$&&typeof X.stack=="string")return[X.stack,$.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),_=m[0],T=m[1];if(_&&T){var D=_.split(`
`),G=T.split(`
`);for(f=u=0;u<D.length&&!D[u].includes("DetermineComponentFrameRoot");)u++;for(;f<G.length&&!G[f].includes("DetermineComponentFrameRoot");)f++;if(u===D.length||f===G.length)for(u=D.length-1,f=G.length-1;1<=u&&0<=f&&D[u]!==G[f];)f--;for(;1<=u&&0<=f;u--,f--)if(D[u]!==G[f]){if(u!==1||f!==1)do if(u--,f--,0>f||D[u]!==G[f]){var Z=`
`+D[u].replace(" at new "," at ");return n.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",n.displayName)),Z}while(1<=u&&0<=f);break}}}finally{Ot=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Je(o):""}function Zi(n,r){switch(n.tag){case 26:case 27:case 5:return Je(n.type);case 16:return Je("Lazy");case 13:return n.child!==r&&r!==null?Je("Suspense Fallback"):Je("Suspense");case 19:return Je("SuspenseList");case 0:case 15:return Wt(n.type,!1);case 11:return Wt(n.type.render,!1);case 1:return Wt(n.type,!0);case 31:return Je("Activity");default:return""}}function Os(n){try{var r="",o=null;do r+=Zi(n,o),o=n,n=n.return;while(n);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var bt=Object.prototype.hasOwnProperty,It=s.unstable_scheduleCallback,gn=s.unstable_cancelCallback,xd=s.unstable_shouldYield,wc=s.unstable_requestPaint,fn=s.unstable_now,Ms=s.unstable_getCurrentPriorityLevel,vl=s.unstable_ImmediatePriority,El=s.unstable_UserBlockingPriority,Vr=s.unstable_NormalPriority,Rd=s.unstable_LowPriority,Ac=s.unstable_IdlePriority,Ic=s.log,xc=s.unstable_setDisableYieldValue,ni=null,Zt=null;function jn(n){if(typeof Ic=="function"&&xc(n),Zt&&typeof Zt.setStrictMode=="function")try{Zt.setStrictMode(ni,n)}catch{}}var xt=Math.clz32?Math.clz32:Cc,Rc=Math.log,za=Math.LN2;function Cc(n){return n>>>=0,n===0?32:31-(Rc(n)/za|0)|0}var Ei=256,ks=262144,Mt=4194304;function bi(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ti(n,r,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,m=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var T=u&134217727;return T!==0?(u=T&~m,u!==0?f=bi(u):(_&=T,_!==0?f=bi(_):o||(o=T&~n,o!==0&&(f=bi(o))))):(T=u&~m,T!==0?f=bi(T):_!==0?f=bi(_):o||(o=u&~n,o!==0&&(f=bi(o)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,o=r&-r,m>=o||m===32&&(o&4194048)!==0)?r:f}function ii(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function Cd(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nc(){var n=Mt;return Mt<<=1,(Mt&62914560)===0&&(Mt=4194304),n}function Si(n){for(var r=[],o=0;31>o;o++)r.push(n);return r}function Ps(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Nd(n,r,o,u,f,m){var _=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var T=n.entanglements,D=n.expirationTimes,G=n.hiddenUpdates;for(o=_&~o;0<o;){var Z=31-xt(o),ie=1<<Z;T[Z]=0,D[Z]=-1;var $=G[Z];if($!==null)for(G[Z]=null,Z=0;Z<$.length;Z++){var X=$[Z];X!==null&&(X.lane&=-536870913)}o&=~ie}u!==0&&Ls(n,u,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(_&~r))}function Ls(n,r,o){n.pendingLanes|=r,n.suspendedLanes&=~r;var u=31-xt(r);n.entangledLanes|=r,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function bl(n,r){var o=n.entangledLanes|=r;for(n=n.entanglements;o;){var u=31-xt(o),f=1<<u;f&r|n[u]&r&&(n[u]|=r),o&=~f}}function Tl(n,r){var o=r&-r;return o=(o&42)!==0?1:zs(o),(o&(n.suspendedLanes|r))!==0?0:o}function zs(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function er(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Dc(){var n=oe.p;return n!==0?n:(n=window.event,n===void 0?32:oE(n.type))}function ri(n,r){var o=oe.p;try{return oe.p=n,r()}finally{oe.p=o}}var si=Math.random().toString(36).slice(2),kt="__reactFiber$"+si,Qt="__reactProps$"+si,wi="__reactContainer$"+si,Ua="__reactEvents$"+si,Dd="__reactListeners$"+si,Vc="__reactHandles$"+si,Oc="__reactResources$"+si,Ai="__reactMarker$"+si;function ja(n){delete n[kt],delete n[Qt],delete n[Ua],delete n[Dd],delete n[Vc]}function Ii(n){var r=n[kt];if(r)return r;for(var o=n.parentNode;o;){if(r=o[wi]||o[kt]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(n=G0(n);n!==null;){if(o=n[kt])return o;n=G0(n)}return r}n=o,o=n.parentNode}return null}function Bn(n){if(n=n[kt]||n[wi]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function In(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(i(33))}function xi(n){var r=n[Oc];return r||(r=n[Oc]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Pt(n){n[Ai]=!0}var Sl=new Set,wl={};function Ri(n,r){Ci(n,r),Ci(n+"Capture",r)}function Ci(n,r){for(wl[n]=r,n=0;n<r.length;n++)Sl.add(r[n])}var Al=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Il={},xl={};function Mc(n){return bt.call(xl,n)?!0:bt.call(Il,n)?!1:Al.test(n)?xl[n]=!0:(Il[n]=!0,!1)}function Ba(n,r,o){if(Mc(r))if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+o)}}function xn(n,r,o){if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+o)}}function Lt(n,r,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(r,o,""+u)}}function $t(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Or(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Rl(n,r,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,m=u.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(_){o=""+_,m.call(this,_)}}),Object.defineProperty(n,r,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function We(n){if(!n._valueTracker){var r=Or(n)?"checked":"value";n._valueTracker=Rl(n,r,""+n[r])}}function Us(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return n&&(u=Or(n)?n.checked?"true":"false":n.value),n=u,n!==o?(r.setValue(n),!0):!1}function Ni(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var js=/[\n"\\]/g;function yn(n){return n.replace(js,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function qa(n,r,o,u,f,m,_,T){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),r!=null?_==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+$t(r)):n.value!==""+$t(r)&&(n.value=""+$t(r)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),r!=null?Cl(n,_,$t(r)):o!=null?Cl(n,_,$t(o)):u!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+$t(T):n.removeAttribute("name")}function kc(n,r,o,u,f,m,_,T){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),r!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){We(n);return}o=o!=null?""+$t(o):"",r=r!=null?""+$t(r):o,T||r===n.value||(n.value=r),n.defaultValue=r}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=T?n.checked:!!u,n.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),We(n)}function Cl(n,r,o){r==="number"&&Ni(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Mr(n,r,o,u){if(n=n.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=r.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+$t(o),r=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function Pc(n,r,o){if(r!=null&&(r=""+$t(r),r!==n.value&&(n.value=r),o==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=o!=null?""+$t(o):""}function kr(n,r,o,u){if(r==null){if(u!=null){if(o!=null)throw Error(i(92));if(qe(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),r=o}o=$t(r),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),We(n)}function _n(n,r){if(r){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=r;return}}n.textContent=r}var Lc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nl(n,r,o){var u=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":u?n.setProperty(r,o):typeof o!="number"||o===0||Lc.has(r)?r==="float"?n.cssFloat=o:n[r]=(""+o).trim():n[r]=o+"px"}function Dl(n,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in r)u=r[f],r.hasOwnProperty(f)&&o[f]!==u&&Nl(n,f,u)}else for(var m in r)r.hasOwnProperty(m)&&Nl(n,m,r[m])}function Fa(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ha(n){return Pr.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function ai(){}var Vl=null;function qn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Lr=null,Di=null;function Bs(n){var r=Bn(n);if(r&&(n=r.stateNode)){var o=n[Qt]||null;e:switch(n=r.stateNode,r.type){case"input":if(qa(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+yn(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==n&&u.form===n.form){var f=u[Qt]||null;if(!f)throw Error(i(90));qa(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<o.length;r++)u=o[r],u.form===n.form&&Us(u)}break e;case"textarea":Pc(n,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&Mr(n,!!o.multiple,r,!1)}}}var Ga=!1;function zr(n,r,o){if(Ga)return n(r,o);Ga=!0;try{var u=n(r);return u}finally{if(Ga=!1,(Lr!==null||Di!==null)&&(Dh(),Lr&&(r=Lr,n=Di,Di=Lr=null,Bs(r),n)))for(r=0;r<n.length;r++)Bs(n[r])}}function oi(n,r){var o=n.stateNode;if(o===null)return null;var u=o[Qt]||null;if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var Fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qs=!1;if(Fn)try{var it={};Object.defineProperty(it,"passive",{get:function(){qs=!0}}),window.addEventListener("test",it,it),window.removeEventListener("test",it,it)}catch{qs=!1}var Vi=null,Ol=null,Fs=null;function Ml(){if(Fs)return Fs;var n,r=Ol,o=r.length,u,f="value"in Vi?Vi.value:Vi.textContent,m=f.length;for(n=0;n<o&&r[n]===f[n];n++);var _=o-n;for(u=1;u<=_&&r[o-u]===f[m-u];u++);return Fs=f.slice(n,1<u?1-u:void 0)}function Hs(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function tr(){return!0}function li(){return!1}function en(n){function r(o,u,f,m,_){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(o=n[T],this[T]=o?o(m):m[T]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?tr:li,this.isPropagationStopped=li,this}return b(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=tr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=tr)},persist:function(){},isPersistent:tr}),r}var nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oi=en(nr),Ur=b({},nr,{view:0,detail:0}),kl=en(Ur),jr,Ka,Mi,Qa=b({},Ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Br,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Mi&&(Mi&&n.type==="mousemove"?(jr=n.screenX-Mi.screenX,Ka=n.screenY-Mi.screenY):Ka=jr=0,Mi=n),jr)},movementY:function(n){return"movementY"in n?n.movementY:Ka}}),Pl=en(Qa),Gs=b({},Qa,{dataTransfer:0}),Uc=en(Gs),jc=b({},Ur,{relatedTarget:0}),Ks=en(jc),Ll=b({},nr,{animationName:0,elapsedTime:0,pseudoElement:0}),Bc=en(Ll),$a=b({},nr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),qc=en($a),Fc=b({},nr,{data:0}),ki=en(Fc),Hc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qc(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Kc[n])?!!r[n]:!1}function Br(){return Qc}var dn=b({},Ur,{key:function(n){if(n.key){var r=Hc[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Hs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Gc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Br,charCode:function(n){return n.type==="keypress"?Hs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Hs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),$c=en(dn),Yc=b({},Qa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ir=en(Yc),h=b({},Ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Br}),y=en(h),E=b({},nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=en(E),q=b({},Qa,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Y=en(q),he=b({},nr,{newState:0,oldState:0}),De=en(he),Rt=[9,13,27,32],Ye=Fn&&"CompositionEvent"in window,pt=null;Fn&&"documentMode"in document&&(pt=document.documentMode);var Hn=Fn&&"TextEvent"in window&&!pt,Pi=Fn&&(!Ye||pt&&8<pt&&11>=pt),ui=" ",ci=!1;function Qs(n,r){switch(n){case"keyup":return Rt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ya(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Xa=!1;function mA(n,r){switch(n){case"compositionend":return Ya(r);case"keypress":return r.which!==32?null:(ci=!0,ui);case"textInput":return n=r.data,n===ui&&ci?null:n;default:return null}}function pA(n,r){if(Xa)return n==="compositionend"||!Ye&&Qs(n,r)?(n=Ml(),Fs=Ol=Vi=null,Xa=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Pi&&r.locale!=="ko"?null:r.data;default:return null}}var gA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $y(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!gA[n.type]:r==="textarea"}function Yy(n,r,o,u){Lr?Di?Di.push(u):Di=[u]:Lr=u,r=zh(r,"onChange"),0<r.length&&(o=new Oi("onChange","change",null,o,u),n.push({event:o,listeners:r}))}var zl=null,Ul=null;function yA(n){D0(n,0)}function Xc(n){var r=In(n);if(Us(r))return n}function Xy(n,r){if(n==="change")return r}var Jy=!1;if(Fn){var Vd;if(Fn){var Od="oninput"in document;if(!Od){var Wy=document.createElement("div");Wy.setAttribute("oninput","return;"),Od=typeof Wy.oninput=="function"}Vd=Od}else Vd=!1;Jy=Vd&&(!document.documentMode||9<document.documentMode)}function Zy(){zl&&(zl.detachEvent("onpropertychange",e_),Ul=zl=null)}function e_(n){if(n.propertyName==="value"&&Xc(Ul)){var r=[];Yy(r,Ul,n,qn(n)),zr(yA,r)}}function _A(n,r,o){n==="focusin"?(Zy(),zl=r,Ul=o,zl.attachEvent("onpropertychange",e_)):n==="focusout"&&Zy()}function vA(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Xc(Ul)}function EA(n,r){if(n==="click")return Xc(r)}function bA(n,r){if(n==="input"||n==="change")return Xc(r)}function TA(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Rn=typeof Object.is=="function"?Object.is:TA;function jl(n,r){if(Rn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var o=Object.keys(n),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!bt.call(r,f)||!Rn(n[f],r[f]))return!1}return!0}function t_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function n_(n,r){var o=t_(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=r&&u>=r)return{node:o,offset:r-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=t_(o)}}function i_(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?i_(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function r_(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=Ni(n.document);r instanceof n.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)n=r.contentWindow;else break;r=Ni(n.document)}return r}function Md(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var SA=Fn&&"documentMode"in document&&11>=document.documentMode,Ja=null,kd=null,Bl=null,Pd=!1;function s_(n,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Pd||Ja==null||Ja!==Ni(u)||(u=Ja,"selectionStart"in u&&Md(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Bl&&jl(Bl,u)||(Bl=u,u=zh(kd,"onSelect"),0<u.length&&(r=new Oi("onSelect","select",null,r,o),n.push({event:r,listeners:u}),r.target=Ja)))}function $s(n,r){var o={};return o[n.toLowerCase()]=r.toLowerCase(),o["Webkit"+n]="webkit"+r,o["Moz"+n]="moz"+r,o}var Wa={animationend:$s("Animation","AnimationEnd"),animationiteration:$s("Animation","AnimationIteration"),animationstart:$s("Animation","AnimationStart"),transitionrun:$s("Transition","TransitionRun"),transitionstart:$s("Transition","TransitionStart"),transitioncancel:$s("Transition","TransitionCancel"),transitionend:$s("Transition","TransitionEnd")},Ld={},a_={};Fn&&(a_=document.createElement("div").style,"AnimationEvent"in window||(delete Wa.animationend.animation,delete Wa.animationiteration.animation,delete Wa.animationstart.animation),"TransitionEvent"in window||delete Wa.transitionend.transition);function Ys(n){if(Ld[n])return Ld[n];if(!Wa[n])return n;var r=Wa[n],o;for(o in r)if(r.hasOwnProperty(o)&&o in a_)return Ld[n]=r[o];return n}var o_=Ys("animationend"),l_=Ys("animationiteration"),u_=Ys("animationstart"),wA=Ys("transitionrun"),AA=Ys("transitionstart"),IA=Ys("transitioncancel"),c_=Ys("transitionend"),h_=new Map,zd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zd.push("scrollEnd");function hi(n,r){h_.set(n,r),Ri(r,[n])}var Jc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Gn=[],Za=0,Ud=0;function Wc(){for(var n=Za,r=Ud=Za=0;r<n;){var o=Gn[r];Gn[r++]=null;var u=Gn[r];Gn[r++]=null;var f=Gn[r];Gn[r++]=null;var m=Gn[r];if(Gn[r++]=null,u!==null&&f!==null){var _=u.pending;_===null?f.next=f:(f.next=_.next,_.next=f),u.pending=f}m!==0&&f_(o,f,m)}}function Zc(n,r,o,u){Gn[Za++]=n,Gn[Za++]=r,Gn[Za++]=o,Gn[Za++]=u,Ud|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function jd(n,r,o,u){return Zc(n,r,o,u),eh(n)}function Xs(n,r){return Zc(n,null,null,r),eh(n)}function f_(n,r,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=n.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&r!==null&&(f=31-xt(o),n=m.hiddenUpdates,u=n[f],u===null?n[f]=[r]:u.push(r),r.lane=o|536870912),m):null}function eh(n){if(50<uu)throw uu=0,Ym=null,Error(i(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var eo={};function xA(n,r,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(n,r,o,u){return new xA(n,r,o,u)}function Bd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function rr(n,r){var o=n.alternate;return o===null?(o=Cn(n.tag,r,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=r,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,r=n.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function d_(n,r){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,r=o.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function th(n,r,o,u,f,m){var _=0;if(u=n,typeof n=="function")Bd(n)&&(_=1);else if(typeof n=="string")_=VI(n,o,fe.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case R:return n=Cn(31,o,r,f),n.elementType=R,n.lanes=m,n;case K:return Js(o.children,f,m,r);case U:_=8,f|=24;break;case ee:return n=Cn(12,o,r,f|2),n.elementType=ee,n.lanes=m,n;case ue:return n=Cn(13,o,r,f),n.elementType=ue,n.lanes=m,n;case ce:return n=Cn(19,o,r,f),n.elementType=ce,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case W:_=10;break e;case J:_=9;break e;case se:_=11;break e;case x:_=14;break e;case I:_=16,u=null;break e}_=29,o=Error(i(130,n===null?"null":typeof n,"")),u=null}return r=Cn(_,o,r,f),r.elementType=n,r.type=u,r.lanes=m,r}function Js(n,r,o,u){return n=Cn(7,n,u,r),n.lanes=o,n}function qd(n,r,o){return n=Cn(6,n,null,r),n.lanes=o,n}function m_(n){var r=Cn(18,null,null,0);return r.stateNode=n,r}function Fd(n,r,o){return r=Cn(4,n.children!==null?n.children:[],n.key,r),r.lanes=o,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var p_=new WeakMap;function Kn(n,r){if(typeof n=="object"&&n!==null){var o=p_.get(n);return o!==void 0?o:(r={value:n,source:r,stack:Os(r)},p_.set(n,r),r)}return{value:n,source:r,stack:Os(r)}}var to=[],no=0,nh=null,ql=0,Qn=[],$n=0,qr=null,Li=1,zi="";function sr(n,r){to[no++]=ql,to[no++]=nh,nh=n,ql=r}function g_(n,r,o){Qn[$n++]=Li,Qn[$n++]=zi,Qn[$n++]=qr,qr=n;var u=Li;n=zi;var f=32-xt(u)-1;u&=~(1<<f),o+=1;var m=32-xt(r)+f;if(30<m){var _=f-f%5;m=(u&(1<<_)-1).toString(32),u>>=_,f-=_,Li=1<<32-xt(r)+f|o<<f|u,zi=m+n}else Li=1<<m|o<<f|u,zi=n}function Hd(n){n.return!==null&&(sr(n,1),g_(n,1,0))}function Gd(n){for(;n===nh;)nh=to[--no],to[no]=null,ql=to[--no],to[no]=null;for(;n===qr;)qr=Qn[--$n],Qn[$n]=null,zi=Qn[--$n],Qn[$n]=null,Li=Qn[--$n],Qn[$n]=null}function y_(n,r){Qn[$n++]=Li,Qn[$n++]=zi,Qn[$n++]=qr,Li=r.id,zi=r.overflow,qr=n}var tn=null,dt=null,Fe=!1,Fr=null,Yn=!1,Kd=Error(i(519));function Hr(n){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Fl(Kn(r,n)),Kd}function __(n){var r=n.stateNode,o=n.type,u=n.memoizedProps;switch(r[kt]=n,r[Qt]=u,o){case"dialog":ze("cancel",r),ze("close",r);break;case"iframe":case"object":case"embed":ze("load",r);break;case"video":case"audio":for(o=0;o<hu.length;o++)ze(hu[o],r);break;case"source":ze("error",r);break;case"img":case"image":case"link":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"input":ze("invalid",r),kc(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":ze("invalid",r);break;case"textarea":ze("invalid",r),kr(r,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||u.suppressHydrationWarning===!0||k0(r.textContent,o)?(u.popover!=null&&(ze("beforetoggle",r),ze("toggle",r)),u.onScroll!=null&&ze("scroll",r),u.onScrollEnd!=null&&ze("scrollend",r),u.onClick!=null&&(r.onclick=ai),r=!0):r=!1,r||Hr(n,!0)}function v_(n){for(tn=n.return;tn;)switch(tn.tag){case 5:case 31:case 13:Yn=!1;return;case 27:case 3:Yn=!0;return;default:tn=tn.return}}function io(n){if(n!==tn)return!1;if(!Fe)return v_(n),Fe=!0,!1;var r=n.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||cp(n.type,n.memoizedProps)),o=!o),o&&dt&&Hr(n),v_(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));dt=H0(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));dt=H0(n)}else r===27?(r=dt,rs(n.type)?(n=pp,pp=null,dt=n):dt=r):dt=tn?Jn(n.stateNode.nextSibling):null;return!0}function Ws(){dt=tn=null,Fe=!1}function Qd(){var n=Fr;return n!==null&&(Tn===null?Tn=n:Tn.push.apply(Tn,n),Fr=null),n}function Fl(n){Fr===null?Fr=[n]:Fr.push(n)}var $d=V(null),Zs=null,ar=null;function Gr(n,r,o){ae($d,r._currentValue),r._currentValue=o}function or(n){n._currentValue=$d.current,F($d)}function Yd(n,r,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),n===o)break;n=n.return}}function Xd(n,r,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var _=f.child;m=m.firstContext;e:for(;m!==null;){var T=m;m=f;for(var D=0;D<r.length;D++)if(T.context===r[D]){m.lanes|=o,T=m.alternate,T!==null&&(T.lanes|=o),Yd(m.return,o,n),u||(_=null);break e}m=T.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(i(341));_.lanes|=o,m=_.alternate,m!==null&&(m.lanes|=o),Yd(_,o,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function ro(n,r,o,u){n=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(i(387));if(_=_.memoizedProps,_!==null){var T=f.type;Rn(f.pendingProps.value,_.value)||(n!==null?n.push(T):n=[T])}}else if(f===Me.current){if(_=f.alternate,_===null)throw Error(i(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(gu):n=[gu])}f=f.return}n!==null&&Xd(r,n,o,u),r.flags|=262144}function ih(n){for(n=n.firstContext;n!==null;){if(!Rn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ea(n){Zs=n,ar=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function nn(n){return E_(Zs,n)}function rh(n,r){return Zs===null&&ea(n),E_(n,r)}function E_(n,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},ar===null){if(n===null)throw Error(i(308));ar=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else ar=ar.next=r;return o}var RA=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){r.aborted=!0,n.forEach(function(o){return o()})}},CA=s.unstable_scheduleCallback,NA=s.unstable_NormalPriority,zt={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jd(){return{controller:new RA,data:new Map,refCount:0}}function Hl(n){n.refCount--,n.refCount===0&&CA(NA,function(){n.controller.abort()})}var Gl=null,Wd=0,so=0,ao=null;function DA(n,r){if(Gl===null){var o=Gl=[];Wd=0,so=tp(),ao={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Wd++,r.then(b_,b_),r}function b_(){if(--Wd===0&&Gl!==null){ao!==null&&(ao.status="fulfilled");var n=Gl;Gl=null,so=0,ao=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function VA(n,r){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=r;for(var f=0;f<o.length;f++)(0,o[f])(r)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var T_=j.S;j.S=function(n,r){s0=fn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&DA(n,r),T_!==null&&T_(n,r)};var ta=V(null);function Zd(){var n=ta.current;return n!==null?n:ut.pooledCache}function sh(n,r){r===null?ae(ta,ta.current):ae(ta,r.pool)}function S_(){var n=Zd();return n===null?null:{parent:zt._currentValue,pool:n}}var oo=Error(i(460)),em=Error(i(474)),ah=Error(i(542)),oh={then:function(){}};function w_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function A_(n,r,o){switch(o=n[o],o===void 0?n.push(r):o!==r&&(r.then(ai,ai),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,x_(n),n;default:if(typeof r.status=="string")r.then(ai,ai);else{if(n=ut,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=r,n.status="pending",n.then(function(u){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=u}},function(u){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,x_(n),n}throw ia=r,oo}}function na(n){try{var r=n._init;return r(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(ia=o,oo):o}}var ia=null;function I_(){if(ia===null)throw Error(i(459));var n=ia;return ia=null,n}function x_(n){if(n===oo||n===ah)throw Error(i(483))}var lo=null,Kl=0;function lh(n){var r=Kl;return Kl+=1,lo===null&&(lo=[]),A_(lo,n,r)}function Ql(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function uh(n,r){throw r.$$typeof===S?Error(i(525)):(n=Object.prototype.toString.call(r),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function R_(n){function r(L,P){if(n){var H=L.deletions;H===null?(L.deletions=[P],L.flags|=16):H.push(P)}}function o(L,P){if(!n)return null;for(;P!==null;)r(L,P),P=P.sibling;return null}function u(L){for(var P=new Map;L!==null;)L.key!==null?P.set(L.key,L):P.set(L.index,L),L=L.sibling;return P}function f(L,P){return L=rr(L,P),L.index=0,L.sibling=null,L}function m(L,P,H){return L.index=H,n?(H=L.alternate,H!==null?(H=H.index,H<P?(L.flags|=67108866,P):H):(L.flags|=67108866,P)):(L.flags|=1048576,P)}function _(L){return n&&L.alternate===null&&(L.flags|=67108866),L}function T(L,P,H,ne){return P===null||P.tag!==6?(P=qd(H,L.mode,ne),P.return=L,P):(P=f(P,H),P.return=L,P)}function D(L,P,H,ne){var Te=H.type;return Te===K?Z(L,P,H.props.children,ne,H.key):P!==null&&(P.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===I&&na(Te)===P.type)?(P=f(P,H.props),Ql(P,H),P.return=L,P):(P=th(H.type,H.key,H.props,null,L.mode,ne),Ql(P,H),P.return=L,P)}function G(L,P,H,ne){return P===null||P.tag!==4||P.stateNode.containerInfo!==H.containerInfo||P.stateNode.implementation!==H.implementation?(P=Fd(H,L.mode,ne),P.return=L,P):(P=f(P,H.children||[]),P.return=L,P)}function Z(L,P,H,ne,Te){return P===null||P.tag!==7?(P=Js(H,L.mode,ne,Te),P.return=L,P):(P=f(P,H),P.return=L,P)}function ie(L,P,H){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=qd(""+P,L.mode,H),P.return=L,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case N:return H=th(P.type,P.key,P.props,null,L.mode,H),Ql(H,P),H.return=L,H;case Q:return P=Fd(P,L.mode,H),P.return=L,P;case I:return P=na(P),ie(L,P,H)}if(qe(P)||k(P))return P=Js(P,L.mode,H,null),P.return=L,P;if(typeof P.then=="function")return ie(L,lh(P),H);if(P.$$typeof===W)return ie(L,rh(L,P),H);uh(L,P)}return null}function $(L,P,H,ne){var Te=P!==null?P.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Te!==null?null:T(L,P,""+H,ne);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case N:return H.key===Te?D(L,P,H,ne):null;case Q:return H.key===Te?G(L,P,H,ne):null;case I:return H=na(H),$(L,P,H,ne)}if(qe(H)||k(H))return Te!==null?null:Z(L,P,H,ne,null);if(typeof H.then=="function")return $(L,P,lh(H),ne);if(H.$$typeof===W)return $(L,P,rh(L,H),ne);uh(L,H)}return null}function X(L,P,H,ne,Te){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return L=L.get(H)||null,T(P,L,""+ne,Te);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case N:return L=L.get(ne.key===null?H:ne.key)||null,D(P,L,ne,Te);case Q:return L=L.get(ne.key===null?H:ne.key)||null,G(P,L,ne,Te);case I:return ne=na(ne),X(L,P,H,ne,Te)}if(qe(ne)||k(ne))return L=L.get(H)||null,Z(P,L,ne,Te,null);if(typeof ne.then=="function")return X(L,P,H,lh(ne),Te);if(ne.$$typeof===W)return X(L,P,H,rh(P,ne),Te);uh(P,ne)}return null}function ye(L,P,H,ne){for(var Te=null,Qe=null,ve=P,Oe=P=0,je=null;ve!==null&&Oe<H.length;Oe++){ve.index>Oe?(je=ve,ve=null):je=ve.sibling;var $e=$(L,ve,H[Oe],ne);if($e===null){ve===null&&(ve=je);break}n&&ve&&$e.alternate===null&&r(L,ve),P=m($e,P,Oe),Qe===null?Te=$e:Qe.sibling=$e,Qe=$e,ve=je}if(Oe===H.length)return o(L,ve),Fe&&sr(L,Oe),Te;if(ve===null){for(;Oe<H.length;Oe++)ve=ie(L,H[Oe],ne),ve!==null&&(P=m(ve,P,Oe),Qe===null?Te=ve:Qe.sibling=ve,Qe=ve);return Fe&&sr(L,Oe),Te}for(ve=u(ve);Oe<H.length;Oe++)je=X(ve,L,Oe,H[Oe],ne),je!==null&&(n&&je.alternate!==null&&ve.delete(je.key===null?Oe:je.key),P=m(je,P,Oe),Qe===null?Te=je:Qe.sibling=je,Qe=je);return n&&ve.forEach(function(us){return r(L,us)}),Fe&&sr(L,Oe),Te}function Ae(L,P,H,ne){if(H==null)throw Error(i(151));for(var Te=null,Qe=null,ve=P,Oe=P=0,je=null,$e=H.next();ve!==null&&!$e.done;Oe++,$e=H.next()){ve.index>Oe?(je=ve,ve=null):je=ve.sibling;var us=$(L,ve,$e.value,ne);if(us===null){ve===null&&(ve=je);break}n&&ve&&us.alternate===null&&r(L,ve),P=m(us,P,Oe),Qe===null?Te=us:Qe.sibling=us,Qe=us,ve=je}if($e.done)return o(L,ve),Fe&&sr(L,Oe),Te;if(ve===null){for(;!$e.done;Oe++,$e=H.next())$e=ie(L,$e.value,ne),$e!==null&&(P=m($e,P,Oe),Qe===null?Te=$e:Qe.sibling=$e,Qe=$e);return Fe&&sr(L,Oe),Te}for(ve=u(ve);!$e.done;Oe++,$e=H.next())$e=X(ve,L,Oe,$e.value,ne),$e!==null&&(n&&$e.alternate!==null&&ve.delete($e.key===null?Oe:$e.key),P=m($e,P,Oe),Qe===null?Te=$e:Qe.sibling=$e,Qe=$e);return n&&ve.forEach(function(FI){return r(L,FI)}),Fe&&sr(L,Oe),Te}function at(L,P,H,ne){if(typeof H=="object"&&H!==null&&H.type===K&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case N:e:{for(var Te=H.key;P!==null;){if(P.key===Te){if(Te=H.type,Te===K){if(P.tag===7){o(L,P.sibling),ne=f(P,H.props.children),ne.return=L,L=ne;break e}}else if(P.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===I&&na(Te)===P.type){o(L,P.sibling),ne=f(P,H.props),Ql(ne,H),ne.return=L,L=ne;break e}o(L,P);break}else r(L,P);P=P.sibling}H.type===K?(ne=Js(H.props.children,L.mode,ne,H.key),ne.return=L,L=ne):(ne=th(H.type,H.key,H.props,null,L.mode,ne),Ql(ne,H),ne.return=L,L=ne)}return _(L);case Q:e:{for(Te=H.key;P!==null;){if(P.key===Te)if(P.tag===4&&P.stateNode.containerInfo===H.containerInfo&&P.stateNode.implementation===H.implementation){o(L,P.sibling),ne=f(P,H.children||[]),ne.return=L,L=ne;break e}else{o(L,P);break}else r(L,P);P=P.sibling}ne=Fd(H,L.mode,ne),ne.return=L,L=ne}return _(L);case I:return H=na(H),at(L,P,H,ne)}if(qe(H))return ye(L,P,H,ne);if(k(H)){if(Te=k(H),typeof Te!="function")throw Error(i(150));return H=Te.call(H),Ae(L,P,H,ne)}if(typeof H.then=="function")return at(L,P,lh(H),ne);if(H.$$typeof===W)return at(L,P,rh(L,H),ne);uh(L,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,P!==null&&P.tag===6?(o(L,P.sibling),ne=f(P,H),ne.return=L,L=ne):(o(L,P),ne=qd(H,L.mode,ne),ne.return=L,L=ne),_(L)):o(L,P)}return function(L,P,H,ne){try{Kl=0;var Te=at(L,P,H,ne);return lo=null,Te}catch(ve){if(ve===oo||ve===ah)throw ve;var Qe=Cn(29,ve,null,L.mode);return Qe.lanes=ne,Qe.return=L,Qe}}}var ra=R_(!0),C_=R_(!1),Kr=!1;function tm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nm(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Qr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function $r(n,r,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Xe&2)!==0){var f=u.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),u.pending=r,r=eh(n),f_(n,null,o),r}return Zc(n,u,r,o),eh(n)}function $l(n,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var u=r.lanes;u&=n.pendingLanes,o|=u,r.lanes=o,bl(n,o)}}function im(n,r){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=_:m=m.next=_,o=o.next}while(o!==null);m===null?f=m=r:m=m.next=r}else f=m=r;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=r:n.next=r,o.lastBaseUpdate=r}var rm=!1;function Yl(){if(rm){var n=ao;if(n!==null)throw n}}function Xl(n,r,o,u){rm=!1;var f=n.updateQueue;Kr=!1;var m=f.firstBaseUpdate,_=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var D=T,G=D.next;D.next=null,_===null?m=G:_.next=G,_=D;var Z=n.alternate;Z!==null&&(Z=Z.updateQueue,T=Z.lastBaseUpdate,T!==_&&(T===null?Z.firstBaseUpdate=G:T.next=G,Z.lastBaseUpdate=D))}if(m!==null){var ie=f.baseState;_=0,Z=G=D=null,T=m;do{var $=T.lane&-536870913,X=$!==T.lane;if(X?(Ue&$)===$:(u&$)===$){$!==0&&$===so&&(rm=!0),Z!==null&&(Z=Z.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var ye=n,Ae=T;$=r;var at=o;switch(Ae.tag){case 1:if(ye=Ae.payload,typeof ye=="function"){ie=ye.call(at,ie,$);break e}ie=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=Ae.payload,$=typeof ye=="function"?ye.call(at,ie,$):ye,$==null)break e;ie=b({},ie,$);break e;case 2:Kr=!0}}$=T.callback,$!==null&&(n.flags|=64,X&&(n.flags|=8192),X=f.callbacks,X===null?f.callbacks=[$]:X.push($))}else X={lane:$,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Z===null?(G=Z=X,D=ie):Z=Z.next=X,_|=$;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;X=T,T=X.next,X.next=null,f.lastBaseUpdate=X,f.shared.pending=null}}while(!0);Z===null&&(D=ie),f.baseState=D,f.firstBaseUpdate=G,f.lastBaseUpdate=Z,m===null&&(f.shared.lanes=0),Zr|=_,n.lanes=_,n.memoizedState=ie}}function N_(n,r){if(typeof n!="function")throw Error(i(191,n));n.call(r)}function D_(n,r){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)N_(o[n],r)}var uo=V(null),ch=V(0);function V_(n,r){n=gr,ae(ch,n),ae(uo,r),gr=n|r.baseLanes}function sm(){ae(ch,gr),ae(uo,uo.current)}function am(){gr=ch.current,F(uo),F(ch)}var Nn=V(null),Xn=null;function Yr(n){var r=n.alternate;ae(Ct,Ct.current&1),ae(Nn,n),Xn===null&&(r===null||uo.current!==null||r.memoizedState!==null)&&(Xn=n)}function om(n){ae(Ct,Ct.current),ae(Nn,n),Xn===null&&(Xn=n)}function O_(n){n.tag===22?(ae(Ct,Ct.current),ae(Nn,n),Xn===null&&(Xn=n)):Xr()}function Xr(){ae(Ct,Ct.current),ae(Nn,Nn.current)}function Dn(n){F(Nn),Xn===n&&(Xn=null),F(Ct)}var Ct=V(0);function hh(n){for(var r=n;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||dp(o)||mp(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var lr=0,Ve=null,rt=null,Ut=null,fh=!1,co=!1,sa=!1,dh=0,Jl=0,ho=null,OA=0;function Tt(){throw Error(i(321))}function lm(n,r){if(r===null)return!1;for(var o=0;o<r.length&&o<n.length;o++)if(!Rn(n[o],r[o]))return!1;return!0}function um(n,r,o,u,f,m){return lr=m,Ve=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,j.H=n===null||n.memoizedState===null?gv:wm,sa=!1,m=o(u,f),sa=!1,co&&(m=k_(r,o,u,f)),M_(n),m}function M_(n){j.H=eu;var r=rt!==null&&rt.next!==null;if(lr=0,Ut=rt=Ve=null,fh=!1,Jl=0,ho=null,r)throw Error(i(300));n===null||jt||(n=n.dependencies,n!==null&&ih(n)&&(jt=!0))}function k_(n,r,o,u){Ve=n;var f=0;do{if(co&&(ho=null),Jl=0,co=!1,25<=f)throw Error(i(301));if(f+=1,Ut=rt=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}j.H=yv,m=r(o,u)}while(co);return m}function MA(){var n=j.H,r=n.useState()[0];return r=typeof r.then=="function"?Wl(r):r,n=n.useState()[0],(rt!==null?rt.memoizedState:null)!==n&&(Ve.flags|=1024),r}function cm(){var n=dh!==0;return dh=0,n}function hm(n,r,o){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~o}function fm(n){if(fh){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}fh=!1}lr=0,Ut=rt=Ve=null,co=!1,Jl=dh=0,ho=null}function mn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?Ve.memoizedState=Ut=n:Ut=Ut.next=n,Ut}function Nt(){if(rt===null){var n=Ve.alternate;n=n!==null?n.memoizedState:null}else n=rt.next;var r=Ut===null?Ve.memoizedState:Ut.next;if(r!==null)Ut=r,rt=n;else{if(n===null)throw Ve.alternate===null?Error(i(467)):Error(i(310));rt=n,n={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},Ut===null?Ve.memoizedState=Ut=n:Ut=Ut.next=n}return Ut}function mh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wl(n){var r=Jl;return Jl+=1,ho===null&&(ho=[]),n=A_(ho,n,r),r=Ve,(Ut===null?r.memoizedState:Ut.next)===null&&(r=r.alternate,j.H=r===null||r.memoizedState===null?gv:wm),n}function ph(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Wl(n);if(n.$$typeof===W)return nn(n)}throw Error(i(438,String(n)))}function dm(n){var r=null,o=Ve.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var u=Ve.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=mh(),Ve.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(n),u=0;u<n;u++)o[u]=M;return r.index++,o}function ur(n,r){return typeof r=="function"?r(n):r}function gh(n){var r=Nt();return mm(r,rt,n)}function mm(n,r,o){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var f=n.baseQueue,m=u.pending;if(m!==null){if(f!==null){var _=f.next;f.next=m.next,m.next=_}r.baseQueue=f=m,u.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{r=f.next;var T=_=null,D=null,G=r,Z=!1;do{var ie=G.lane&-536870913;if(ie!==G.lane?(Ue&ie)===ie:(lr&ie)===ie){var $=G.revertLane;if($===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),ie===so&&(Z=!0);else if((lr&$)===$){G=G.next,$===so&&(Z=!0);continue}else ie={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},D===null?(T=D=ie,_=m):D=D.next=ie,Ve.lanes|=$,Zr|=$;ie=G.action,sa&&o(m,ie),m=G.hasEagerState?G.eagerState:o(m,ie)}else $={lane:ie,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},D===null?(T=D=$,_=m):D=D.next=$,Ve.lanes|=ie,Zr|=ie;G=G.next}while(G!==null&&G!==r);if(D===null?_=m:D.next=T,!Rn(m,n.memoizedState)&&(jt=!0,Z&&(o=ao,o!==null)))throw o;n.memoizedState=m,n.baseState=_,n.baseQueue=D,u.lastRenderedState=m}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function pm(n){var r=Nt(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,m=r.memoizedState;if(f!==null){o.pending=null;var _=f=f.next;do m=n(m,_.action),_=_.next;while(_!==f);Rn(m,r.memoizedState)||(jt=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),o.lastRenderedState=m}return[m,u]}function P_(n,r,o){var u=Ve,f=Nt(),m=Fe;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=r();var _=!Rn((rt||f).memoizedState,o);if(_&&(f.memoizedState=o,jt=!0),f=f.queue,_m(U_.bind(null,u,f,n),[n]),f.getSnapshot!==r||_||Ut!==null&&Ut.memoizedState.tag&1){if(u.flags|=2048,fo(9,{destroy:void 0},z_.bind(null,u,f,o,r),null),ut===null)throw Error(i(349));m||(lr&127)!==0||L_(u,r,o)}return o}function L_(n,r,o){n.flags|=16384,n={getSnapshot:r,value:o},r=Ve.updateQueue,r===null?(r=mh(),Ve.updateQueue=r,r.stores=[n]):(o=r.stores,o===null?r.stores=[n]:o.push(n))}function z_(n,r,o,u){r.value=o,r.getSnapshot=u,j_(r)&&B_(n)}function U_(n,r,o){return o(function(){j_(r)&&B_(n)})}function j_(n){var r=n.getSnapshot;n=n.value;try{var o=r();return!Rn(n,o)}catch{return!0}}function B_(n){var r=Xs(n,2);r!==null&&Sn(r,n,2)}function gm(n){var r=mn();if(typeof n=="function"){var o=n;if(n=o(),sa){jn(!0);try{o()}finally{jn(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:n},r}function q_(n,r,o,u){return n.baseState=o,mm(n,rt,typeof u=="function"?u:ur)}function kA(n,r,o,u,f){if(vh(n))throw Error(i(485));if(n=r.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};j.T!==null?o(!0):m.isTransition=!1,u(m),o=r.pending,o===null?(m.next=r.pending=m,F_(r,m)):(m.next=o.next,r.pending=o.next=m)}}function F_(n,r){var o=r.action,u=r.payload,f=n.state;if(r.isTransition){var m=j.T,_={};j.T=_;try{var T=o(f,u),D=j.S;D!==null&&D(_,T),H_(n,r,T)}catch(G){ym(n,r,G)}finally{m!==null&&_.types!==null&&(m.types=_.types),j.T=m}}else try{m=o(f,u),H_(n,r,m)}catch(G){ym(n,r,G)}}function H_(n,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){G_(n,r,u)},function(u){return ym(n,r,u)}):G_(n,r,o)}function G_(n,r,o){r.status="fulfilled",r.value=o,K_(r),n.state=o,r=n.pending,r!==null&&(o=r.next,o===r?n.pending=null:(o=o.next,r.next=o,F_(n,o)))}function ym(n,r,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=o,K_(r),r=r.next;while(r!==u)}n.action=null}function K_(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function Q_(n,r){return r}function $_(n,r){if(Fe){var o=ut.formState;if(o!==null){e:{var u=Ve;if(Fe){if(dt){t:{for(var f=dt,m=Yn;f.nodeType!==8;){if(!m){f=null;break t}if(f=Jn(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){dt=Jn(f.nextSibling),u=f.data==="F!";break e}}Hr(u)}u=!1}u&&(r=o[0])}}return o=mn(),o.memoizedState=o.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Q_,lastRenderedState:r},o.queue=u,o=dv.bind(null,Ve,u),u.dispatch=o,u=gm(!1),m=Sm.bind(null,Ve,!1,u.queue),u=mn(),f={state:r,dispatch:null,action:n,pending:null},u.queue=f,o=kA.bind(null,Ve,f,m,o),f.dispatch=o,u.memoizedState=n,[r,o,!1]}function Y_(n){var r=Nt();return X_(r,rt,n)}function X_(n,r,o){if(r=mm(n,r,Q_)[0],n=gh(ur)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=Wl(r)}catch(_){throw _===oo?ah:_}else u=r;r=Nt();var f=r.queue,m=f.dispatch;return o!==r.memoizedState&&(Ve.flags|=2048,fo(9,{destroy:void 0},PA.bind(null,f,o),null)),[u,m,n]}function PA(n,r){n.action=r}function J_(n){var r=Nt(),o=rt;if(o!==null)return X_(r,o,n);Nt(),r=r.memoizedState,o=Nt();var u=o.queue.dispatch;return o.memoizedState=n,[r,u,!1]}function fo(n,r,o,u){return n={tag:n,create:o,deps:u,inst:r,next:null},r=Ve.updateQueue,r===null&&(r=mh(),Ve.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,r.lastEffect=n),n}function W_(){return Nt().memoizedState}function yh(n,r,o,u){var f=mn();Ve.flags|=n,f.memoizedState=fo(1|r,{destroy:void 0},o,u===void 0?null:u)}function _h(n,r,o,u){var f=Nt();u=u===void 0?null:u;var m=f.memoizedState.inst;rt!==null&&u!==null&&lm(u,rt.memoizedState.deps)?f.memoizedState=fo(r,m,o,u):(Ve.flags|=n,f.memoizedState=fo(1|r,m,o,u))}function Z_(n,r){yh(8390656,8,n,r)}function _m(n,r){_h(2048,8,n,r)}function LA(n){Ve.flags|=4;var r=Ve.updateQueue;if(r===null)r=mh(),Ve.updateQueue=r,r.events=[n];else{var o=r.events;o===null?r.events=[n]:o.push(n)}}function ev(n){var r=Nt().memoizedState;return LA({ref:r,nextImpl:n}),function(){if((Xe&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function tv(n,r){return _h(4,2,n,r)}function nv(n,r){return _h(4,4,n,r)}function iv(n,r){if(typeof r=="function"){n=n();var o=r(n);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function rv(n,r,o){o=o!=null?o.concat([n]):null,_h(4,4,iv.bind(null,r,n),o)}function vm(){}function sv(n,r){var o=Nt();r=r===void 0?null:r;var u=o.memoizedState;return r!==null&&lm(r,u[1])?u[0]:(o.memoizedState=[n,r],n)}function av(n,r){var o=Nt();r=r===void 0?null:r;var u=o.memoizedState;if(r!==null&&lm(r,u[1]))return u[0];if(u=n(),sa){jn(!0);try{n()}finally{jn(!1)}}return o.memoizedState=[u,r],u}function Em(n,r,o){return o===void 0||(lr&1073741824)!==0&&(Ue&261930)===0?n.memoizedState=r:(n.memoizedState=o,n=o0(),Ve.lanes|=n,Zr|=n,o)}function ov(n,r,o,u){return Rn(o,r)?o:uo.current!==null?(n=Em(n,o,u),Rn(n,r)||(jt=!0),n):(lr&42)===0||(lr&1073741824)!==0&&(Ue&261930)===0?(jt=!0,n.memoizedState=o):(n=o0(),Ve.lanes|=n,Zr|=n,r)}function lv(n,r,o,u,f){var m=oe.p;oe.p=m!==0&&8>m?m:8;var _=j.T,T={};j.T=T,Sm(n,!1,r,o);try{var D=f(),G=j.S;if(G!==null&&G(T,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var Z=VA(D,u);Zl(n,r,Z,Mn(n))}else Zl(n,r,u,Mn(n))}catch(ie){Zl(n,r,{then:function(){},status:"rejected",reason:ie},Mn())}finally{oe.p=m,_!==null&&T.types!==null&&(_.types=T.types),j.T=_}}function zA(){}function bm(n,r,o,u){if(n.tag!==5)throw Error(i(476));var f=uv(n).queue;lv(n,f,r,te,o===null?zA:function(){return cv(n),o(u)})}function uv(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:te},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:o},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function cv(n){var r=uv(n);r.next===null&&(r=n.alternate.memoizedState),Zl(n,r.next.queue,{},Mn())}function Tm(){return nn(gu)}function hv(){return Nt().memoizedState}function fv(){return Nt().memoizedState}function UA(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var o=Mn();n=Qr(o);var u=$r(r,n,o);u!==null&&(Sn(u,r,o),$l(u,r,o)),r={cache:Jd()},n.payload=r;return}r=r.return}}function jA(n,r,o){var u=Mn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},vh(n)?mv(r,o):(o=jd(n,r,o,u),o!==null&&(Sn(o,n,u),pv(o,r,u)))}function dv(n,r,o){var u=Mn();Zl(n,r,o,u)}function Zl(n,r,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(vh(n))mv(r,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var _=r.lastRenderedState,T=m(_,o);if(f.hasEagerState=!0,f.eagerState=T,Rn(T,_))return Zc(n,r,f,0),ut===null&&Wc(),!1}catch{}if(o=jd(n,r,f,u),o!==null)return Sn(o,n,u),pv(o,r,u),!0}return!1}function Sm(n,r,o,u){if(u={lane:2,revertLane:tp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},vh(n)){if(r)throw Error(i(479))}else r=jd(n,o,u,2),r!==null&&Sn(r,n,2)}function vh(n){var r=n.alternate;return n===Ve||r!==null&&r===Ve}function mv(n,r){co=fh=!0;var o=n.pending;o===null?r.next=r:(r.next=o.next,o.next=r),n.pending=r}function pv(n,r,o){if((o&4194048)!==0){var u=r.lanes;u&=n.pendingLanes,o|=u,r.lanes=o,bl(n,o)}}var eu={readContext:nn,use:ph,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt};eu.useEffectEvent=Tt;var gv={readContext:nn,use:ph,useCallback:function(n,r){return mn().memoizedState=[n,r===void 0?null:r],n},useContext:nn,useEffect:Z_,useImperativeHandle:function(n,r,o){o=o!=null?o.concat([n]):null,yh(4194308,4,iv.bind(null,r,n),o)},useLayoutEffect:function(n,r){return yh(4194308,4,n,r)},useInsertionEffect:function(n,r){yh(4,2,n,r)},useMemo:function(n,r){var o=mn();r=r===void 0?null:r;var u=n();if(sa){jn(!0);try{n()}finally{jn(!1)}}return o.memoizedState=[u,r],u},useReducer:function(n,r,o){var u=mn();if(o!==void 0){var f=o(r);if(sa){jn(!0);try{o(r)}finally{jn(!1)}}}else f=r;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=jA.bind(null,Ve,n),[u.memoizedState,n]},useRef:function(n){var r=mn();return n={current:n},r.memoizedState=n},useState:function(n){n=gm(n);var r=n.queue,o=dv.bind(null,Ve,r);return r.dispatch=o,[n.memoizedState,o]},useDebugValue:vm,useDeferredValue:function(n,r){var o=mn();return Em(o,n,r)},useTransition:function(){var n=gm(!1);return n=lv.bind(null,Ve,n.queue,!0,!1),mn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,o){var u=Ve,f=mn();if(Fe){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),ut===null)throw Error(i(349));(Ue&127)!==0||L_(u,r,o)}f.memoizedState=o;var m={value:o,getSnapshot:r};return f.queue=m,Z_(U_.bind(null,u,m,n),[n]),u.flags|=2048,fo(9,{destroy:void 0},z_.bind(null,u,m,o,r),null),o},useId:function(){var n=mn(),r=ut.identifierPrefix;if(Fe){var o=zi,u=Li;o=(u&~(1<<32-xt(u)-1)).toString(32)+o,r="_"+r+"R_"+o,o=dh++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=OA++,r="_"+r+"r_"+o.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:Tm,useFormState:$_,useActionState:$_,useOptimistic:function(n){var r=mn();r.memoizedState=r.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=Sm.bind(null,Ve,!0,o),o.dispatch=r,[n,r]},useMemoCache:dm,useCacheRefresh:function(){return mn().memoizedState=UA.bind(null,Ve)},useEffectEvent:function(n){var r=mn(),o={impl:n};return r.memoizedState=o,function(){if((Xe&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},wm={readContext:nn,use:ph,useCallback:sv,useContext:nn,useEffect:_m,useImperativeHandle:rv,useInsertionEffect:tv,useLayoutEffect:nv,useMemo:av,useReducer:gh,useRef:W_,useState:function(){return gh(ur)},useDebugValue:vm,useDeferredValue:function(n,r){var o=Nt();return ov(o,rt.memoizedState,n,r)},useTransition:function(){var n=gh(ur)[0],r=Nt().memoizedState;return[typeof n=="boolean"?n:Wl(n),r]},useSyncExternalStore:P_,useId:hv,useHostTransitionStatus:Tm,useFormState:Y_,useActionState:Y_,useOptimistic:function(n,r){var o=Nt();return q_(o,rt,n,r)},useMemoCache:dm,useCacheRefresh:fv};wm.useEffectEvent=ev;var yv={readContext:nn,use:ph,useCallback:sv,useContext:nn,useEffect:_m,useImperativeHandle:rv,useInsertionEffect:tv,useLayoutEffect:nv,useMemo:av,useReducer:pm,useRef:W_,useState:function(){return pm(ur)},useDebugValue:vm,useDeferredValue:function(n,r){var o=Nt();return rt===null?Em(o,n,r):ov(o,rt.memoizedState,n,r)},useTransition:function(){var n=pm(ur)[0],r=Nt().memoizedState;return[typeof n=="boolean"?n:Wl(n),r]},useSyncExternalStore:P_,useId:hv,useHostTransitionStatus:Tm,useFormState:J_,useActionState:J_,useOptimistic:function(n,r){var o=Nt();return rt!==null?q_(o,rt,n,r):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:dm,useCacheRefresh:fv};yv.useEffectEvent=ev;function Am(n,r,o,u){r=n.memoizedState,o=o(u,r),o=o==null?r:b({},r,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Im={enqueueSetState:function(n,r,o){n=n._reactInternals;var u=Mn(),f=Qr(u);f.payload=r,o!=null&&(f.callback=o),r=$r(n,f,u),r!==null&&(Sn(r,n,u),$l(r,n,u))},enqueueReplaceState:function(n,r,o){n=n._reactInternals;var u=Mn(),f=Qr(u);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=$r(n,f,u),r!==null&&(Sn(r,n,u),$l(r,n,u))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var o=Mn(),u=Qr(o);u.tag=2,r!=null&&(u.callback=r),r=$r(n,u,o),r!==null&&(Sn(r,n,o),$l(r,n,o))}};function _v(n,r,o,u,f,m,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,_):r.prototype&&r.prototype.isPureReactComponent?!jl(o,u)||!jl(f,m):!0}function vv(n,r,o,u){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==n&&Im.enqueueReplaceState(r,r.state,null)}function aa(n,r){var o=r;if("ref"in r){o={};for(var u in r)u!=="ref"&&(o[u]=r[u])}if(n=n.defaultProps){o===r&&(o=b({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}function Ev(n){Jc(n)}function bv(n){console.error(n)}function Tv(n){Jc(n)}function Eh(n,r){try{var o=n.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function Sv(n,r,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function xm(n,r,o){return o=Qr(o),o.tag=3,o.payload={element:null},o.callback=function(){Eh(n,r)},o}function wv(n){return n=Qr(n),n.tag=3,n}function Av(n,r,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;n.payload=function(){return f(m)},n.callback=function(){Sv(r,o,u)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){Sv(r,o,u),typeof f!="function"&&(es===null?es=new Set([this]):es.add(this));var T=u.stack;this.componentDidCatch(u.value,{componentStack:T!==null?T:""})})}function BA(n,r,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=o.alternate,r!==null&&ro(r,o,f,!0),o=Nn.current,o!==null){switch(o.tag){case 31:case 13:return Xn===null?Vh():o.alternate===null&&St===0&&(St=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===oh?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([u]):r.add(u),Wm(n,u,f)),!1;case 22:return o.flags|=65536,u===oh?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([u]):o.add(u)),Wm(n,u,f)),!1}throw Error(i(435,o.tag))}return Wm(n,u,f),Vh(),!1}if(Fe)return r=Nn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,u!==Kd&&(n=Error(i(422),{cause:u}),Fl(Kn(n,o)))):(u!==Kd&&(r=Error(i(423),{cause:u}),Fl(Kn(r,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=Kn(u,o),f=xm(n.stateNode,u,f),im(n,f),St!==4&&(St=2)),!1;var m=Error(i(520),{cause:u});if(m=Kn(m,o),lu===null?lu=[m]:lu.push(m),St!==4&&(St=2),r===null)return!0;u=Kn(u,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=xm(o.stateNode,u,n),im(o,n),!1;case 1:if(r=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(es===null||!es.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=wv(f),Av(f,n,o,u),im(o,f),!1}o=o.return}while(o!==null);return!1}var Rm=Error(i(461)),jt=!1;function rn(n,r,o,u){r.child=n===null?C_(r,null,o,u):ra(r,n.child,o,u)}function Iv(n,r,o,u,f){o=o.render;var m=r.ref;if("ref"in u){var _={};for(var T in u)T!=="ref"&&(_[T]=u[T])}else _=u;return ea(r),u=um(n,r,o,_,m,f),T=cm(),n!==null&&!jt?(hm(n,r,f),cr(n,r,f)):(Fe&&T&&Hd(r),r.flags|=1,rn(n,r,u,f),r.child)}function xv(n,r,o,u,f){if(n===null){var m=o.type;return typeof m=="function"&&!Bd(m)&&m.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=m,Rv(n,r,m,u,f)):(n=th(o.type,null,u,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(m=n.child,!Pm(n,f)){var _=m.memoizedProps;if(o=o.compare,o=o!==null?o:jl,o(_,u)&&n.ref===r.ref)return cr(n,r,f)}return r.flags|=1,n=rr(m,u),n.ref=r.ref,n.return=r,r.child=n}function Rv(n,r,o,u,f){if(n!==null){var m=n.memoizedProps;if(jl(m,u)&&n.ref===r.ref)if(jt=!1,r.pendingProps=u=m,Pm(n,f))(n.flags&131072)!==0&&(jt=!0);else return r.lanes=n.lanes,cr(n,r,f)}return Cm(n,r,o,u,f)}function Cv(n,r,o,u){var f=u.children,m=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,n!==null){for(u=r.child=n.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~m}else u=0,r.child=null;return Nv(n,r,m,o,u)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&sh(r,m!==null?m.cachePool:null),m!==null?V_(r,m):sm(),O_(r);else return u=r.lanes=536870912,Nv(n,r,m!==null?m.baseLanes|o:o,o,u)}else m!==null?(sh(r,m.cachePool),V_(r,m),Xr(),r.memoizedState=null):(n!==null&&sh(r,null),sm(),Xr());return rn(n,r,f,o),r.child}function tu(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Nv(n,r,o,u,f){var m=Zd();return m=m===null?null:{parent:zt._currentValue,pool:m},r.memoizedState={baseLanes:o,cachePool:m},n!==null&&sh(r,null),sm(),O_(r),n!==null&&ro(n,r,u,!0),r.childLanes=f,null}function bh(n,r){return r=Sh({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function Dv(n,r,o){return ra(r,n.child,null,o),n=bh(r,r.pendingProps),n.flags|=2,Dn(r),r.memoizedState=null,n}function qA(n,r,o){var u=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,n===null){if(Fe){if(u.mode==="hidden")return n=bh(r,u),r.lanes=536870912,tu(null,n);if(om(r),(n=dt)?(n=F0(n,Yn),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:qr!==null?{id:Li,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},o=m_(n),o.return=r,r.child=o,tn=r,dt=null)):n=null,n===null)throw Hr(r);return r.lanes=536870912,null}return bh(r,u)}var m=n.memoizedState;if(m!==null){var _=m.dehydrated;if(om(r),f)if(r.flags&256)r.flags&=-257,r=Dv(n,r,o);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(i(558));else if(jt||ro(n,r,o,!1),f=(o&n.childLanes)!==0,jt||f){if(u=ut,u!==null&&(_=Tl(u,o),_!==0&&_!==m.retryLane))throw m.retryLane=_,Xs(n,_),Sn(u,n,_),Rm;Vh(),r=Dv(n,r,o)}else n=m.treeContext,dt=Jn(_.nextSibling),tn=r,Fe=!0,Fr=null,Yn=!1,n!==null&&y_(r,n),r=bh(r,u),r.flags|=4096;return r}return n=rr(n.child,{mode:u.mode,children:u.children}),n.ref=r.ref,r.child=n,n.return=r,n}function Th(n,r){var o=r.ref;if(o===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(r.flags|=4194816)}}function Cm(n,r,o,u,f){return ea(r),o=um(n,r,o,u,void 0,f),u=cm(),n!==null&&!jt?(hm(n,r,f),cr(n,r,f)):(Fe&&u&&Hd(r),r.flags|=1,rn(n,r,o,f),r.child)}function Vv(n,r,o,u,f,m){return ea(r),r.updateQueue=null,o=k_(r,u,o,f),M_(n),u=cm(),n!==null&&!jt?(hm(n,r,m),cr(n,r,m)):(Fe&&u&&Hd(r),r.flags|=1,rn(n,r,o,m),r.child)}function Ov(n,r,o,u,f){if(ea(r),r.stateNode===null){var m=eo,_=o.contextType;typeof _=="object"&&_!==null&&(m=nn(_)),m=new o(u,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Im,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=u,m.state=r.memoizedState,m.refs={},tm(r),_=o.contextType,m.context=typeof _=="object"&&_!==null?nn(_):eo,m.state=r.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Am(r,o,_,u),m.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&Im.enqueueReplaceState(m,m.state,null),Xl(r,u,m,f),Yl(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(n===null){m=r.stateNode;var T=r.memoizedProps,D=aa(o,T);m.props=D;var G=m.context,Z=o.contextType;_=eo,typeof Z=="object"&&Z!==null&&(_=nn(Z));var ie=o.getDerivedStateFromProps;Z=typeof ie=="function"||typeof m.getSnapshotBeforeUpdate=="function",T=r.pendingProps!==T,Z||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T||G!==_)&&vv(r,m,u,_),Kr=!1;var $=r.memoizedState;m.state=$,Xl(r,u,m,f),Yl(),G=r.memoizedState,T||$!==G||Kr?(typeof ie=="function"&&(Am(r,o,ie,u),G=r.memoizedState),(D=Kr||_v(r,o,D,u,$,G,_))?(Z||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=G),m.props=u,m.state=G,m.context=_,u=D):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{m=r.stateNode,nm(n,r),_=r.memoizedProps,Z=aa(o,_),m.props=Z,ie=r.pendingProps,$=m.context,G=o.contextType,D=eo,typeof G=="object"&&G!==null&&(D=nn(G)),T=o.getDerivedStateFromProps,(G=typeof T=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==ie||$!==D)&&vv(r,m,u,D),Kr=!1,$=r.memoizedState,m.state=$,Xl(r,u,m,f),Yl();var X=r.memoizedState;_!==ie||$!==X||Kr||n!==null&&n.dependencies!==null&&ih(n.dependencies)?(typeof T=="function"&&(Am(r,o,T,u),X=r.memoizedState),(Z=Kr||_v(r,o,Z,u,$,X,D)||n!==null&&n.dependencies!==null&&ih(n.dependencies))?(G||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,X,D),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,X,D)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&$===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&$===n.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=X),m.props=u,m.state=X,m.context=D,u=Z):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&$===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&$===n.memoizedState||(r.flags|=1024),u=!1)}return m=u,Th(n,r),u=(r.flags&128)!==0,m||u?(m=r.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,n!==null&&u?(r.child=ra(r,n.child,null,f),r.child=ra(r,null,o,f)):rn(n,r,o,f),r.memoizedState=m.state,n=r.child):n=cr(n,r,f),n}function Mv(n,r,o,u){return Ws(),r.flags|=256,rn(n,r,o,u),r.child}var Nm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Dm(n){return{baseLanes:n,cachePool:S_()}}function Vm(n,r,o){return n=n!==null?n.childLanes&~o:0,r&&(n|=On),n}function kv(n,r,o){var u=r.pendingProps,f=!1,m=(r.flags&128)!==0,_;if((_=m)||(_=n!==null&&n.memoizedState===null?!1:(Ct.current&2)!==0),_&&(f=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,n===null){if(Fe){if(f?Yr(r):Xr(),(n=dt)?(n=F0(n,Yn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:qr!==null?{id:Li,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},o=m_(n),o.return=r,r.child=o,tn=r,dt=null)):n=null,n===null)throw Hr(r);return mp(n)?r.lanes=32:r.lanes=536870912,null}var T=u.children;return u=u.fallback,f?(Xr(),f=r.mode,T=Sh({mode:"hidden",children:T},f),u=Js(u,f,o,null),T.return=r,u.return=r,T.sibling=u,r.child=T,u=r.child,u.memoizedState=Dm(o),u.childLanes=Vm(n,_,o),r.memoizedState=Nm,tu(null,u)):(Yr(r),Om(r,T))}var D=n.memoizedState;if(D!==null&&(T=D.dehydrated,T!==null)){if(m)r.flags&256?(Yr(r),r.flags&=-257,r=Mm(n,r,o)):r.memoizedState!==null?(Xr(),r.child=n.child,r.flags|=128,r=null):(Xr(),T=u.fallback,f=r.mode,u=Sh({mode:"visible",children:u.children},f),T=Js(T,f,o,null),T.flags|=2,u.return=r,T.return=r,u.sibling=T,r.child=u,ra(r,n.child,null,o),u=r.child,u.memoizedState=Dm(o),u.childLanes=Vm(n,_,o),r.memoizedState=Nm,r=tu(null,u));else if(Yr(r),mp(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var G=_.dgst;_=G,u=Error(i(419)),u.stack="",u.digest=_,Fl({value:u,source:null,stack:null}),r=Mm(n,r,o)}else if(jt||ro(n,r,o,!1),_=(o&n.childLanes)!==0,jt||_){if(_=ut,_!==null&&(u=Tl(_,o),u!==0&&u!==D.retryLane))throw D.retryLane=u,Xs(n,u),Sn(_,n,u),Rm;dp(T)||Vh(),r=Mm(n,r,o)}else dp(T)?(r.flags|=192,r.child=n.child,r=null):(n=D.treeContext,dt=Jn(T.nextSibling),tn=r,Fe=!0,Fr=null,Yn=!1,n!==null&&y_(r,n),r=Om(r,u.children),r.flags|=4096);return r}return f?(Xr(),T=u.fallback,f=r.mode,D=n.child,G=D.sibling,u=rr(D,{mode:"hidden",children:u.children}),u.subtreeFlags=D.subtreeFlags&65011712,G!==null?T=rr(G,T):(T=Js(T,f,o,null),T.flags|=2),T.return=r,u.return=r,u.sibling=T,r.child=u,tu(null,u),u=r.child,T=n.child.memoizedState,T===null?T=Dm(o):(f=T.cachePool,f!==null?(D=zt._currentValue,f=f.parent!==D?{parent:D,pool:D}:f):f=S_(),T={baseLanes:T.baseLanes|o,cachePool:f}),u.memoizedState=T,u.childLanes=Vm(n,_,o),r.memoizedState=Nm,tu(n.child,u)):(Yr(r),o=n.child,n=o.sibling,o=rr(o,{mode:"visible",children:u.children}),o.return=r,o.sibling=null,n!==null&&(_=r.deletions,_===null?(r.deletions=[n],r.flags|=16):_.push(n)),r.child=o,r.memoizedState=null,o)}function Om(n,r){return r=Sh({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function Sh(n,r){return n=Cn(22,n,null,r),n.lanes=0,n}function Mm(n,r,o){return ra(r,n.child,null,o),n=Om(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function Pv(n,r,o){n.lanes|=r;var u=n.alternate;u!==null&&(u.lanes|=r),Yd(n.return,r,o)}function km(n,r,o,u,f,m){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:m}:(_.isBackwards=r,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=o,_.tailMode=f,_.treeForkCount=m)}function Lv(n,r,o){var u=r.pendingProps,f=u.revealOrder,m=u.tail;u=u.children;var _=Ct.current,T=(_&2)!==0;if(T?(_=_&1|2,r.flags|=128):_&=1,ae(Ct,_),rn(n,r,u,o),u=Fe?ql:0,!T&&n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Pv(n,o,r);else if(n.tag===19)Pv(n,o,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(o=r.child,f=null;o!==null;)n=o.alternate,n!==null&&hh(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),km(r,!1,f,o,m,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&hh(n)===null){r.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}km(r,!0,o,null,m,u);break;case"together":km(r,!1,null,null,void 0,u);break;default:r.memoizedState=null}return r.child}function cr(n,r,o){if(n!==null&&(r.dependencies=n.dependencies),Zr|=r.lanes,(o&r.childLanes)===0)if(n!==null){if(ro(n,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(i(153));if(r.child!==null){for(n=r.child,o=rr(n,n.pendingProps),r.child=o,o.return=r;n.sibling!==null;)n=n.sibling,o=o.sibling=rr(n,n.pendingProps),o.return=r;o.sibling=null}return r.child}function Pm(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&ih(n)))}function FA(n,r,o){switch(r.tag){case 3:_t(r,r.stateNode.containerInfo),Gr(r,zt,n.memoizedState.cache),Ws();break;case 27:case 5:Wi(r);break;case 4:_t(r,r.stateNode.containerInfo);break;case 10:Gr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,om(r),null;break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(Yr(r),r.flags|=128,null):(o&r.child.childLanes)!==0?kv(n,r,o):(Yr(r),n=cr(n,r,o),n!==null?n.sibling:null);Yr(r);break;case 19:var f=(n.flags&128)!==0;if(u=(o&r.childLanes)!==0,u||(ro(n,r,o,!1),u=(o&r.childLanes)!==0),f){if(u)return Lv(n,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ae(Ct,Ct.current),u)break;return null;case 22:return r.lanes=0,Cv(n,r,o,r.pendingProps);case 24:Gr(r,zt,n.memoizedState.cache)}return cr(n,r,o)}function zv(n,r,o){if(n!==null)if(n.memoizedProps!==r.pendingProps)jt=!0;else{if(!Pm(n,o)&&(r.flags&128)===0)return jt=!1,FA(n,r,o);jt=(n.flags&131072)!==0}else jt=!1,Fe&&(r.flags&1048576)!==0&&g_(r,ql,r.index);switch(r.lanes=0,r.tag){case 16:e:{var u=r.pendingProps;if(n=na(r.elementType),r.type=n,typeof n=="function")Bd(n)?(u=aa(n,u),r.tag=1,r=Ov(null,r,n,u,o)):(r.tag=0,r=Cm(null,r,n,u,o));else{if(n!=null){var f=n.$$typeof;if(f===se){r.tag=11,r=Iv(null,r,n,u,o);break e}else if(f===x){r.tag=14,r=xv(null,r,n,u,o);break e}}throw r=ke(n)||n,Error(i(306,r,""))}}return r;case 0:return Cm(n,r,r.type,r.pendingProps,o);case 1:return u=r.type,f=aa(u,r.pendingProps),Ov(n,r,u,f,o);case 3:e:{if(_t(r,r.stateNode.containerInfo),n===null)throw Error(i(387));u=r.pendingProps;var m=r.memoizedState;f=m.element,nm(n,r),Xl(r,u,null,o);var _=r.memoizedState;if(u=_.cache,Gr(r,zt,u),u!==m.cache&&Xd(r,[zt],o,!0),Yl(),u=_.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=Mv(n,r,u,o);break e}else if(u!==f){f=Kn(Error(i(424)),r),Fl(f),r=Mv(n,r,u,o);break e}else for(n=r.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,dt=Jn(n.firstChild),tn=r,Fe=!0,Fr=null,Yn=!0,o=C_(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Ws(),u===f){r=cr(n,r,o);break e}rn(n,r,u,o)}r=r.child}return r;case 26:return Th(n,r),n===null?(o=Y0(r.type,null,r.pendingProps,null))?r.memoizedState=o:Fe||(o=r.type,n=r.pendingProps,u=Uh(Ie.current).createElement(o),u[kt]=r,u[Qt]=n,sn(u,o,n),Pt(u),r.stateNode=u):r.memoizedState=Y0(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return Wi(r),n===null&&Fe&&(u=r.stateNode=K0(r.type,r.pendingProps,Ie.current),tn=r,Yn=!0,f=dt,rs(r.type)?(pp=f,dt=Jn(u.firstChild)):dt=f),rn(n,r,r.pendingProps.children,o),Th(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&Fe&&((f=u=dt)&&(u=vI(u,r.type,r.pendingProps,Yn),u!==null?(r.stateNode=u,tn=r,dt=Jn(u.firstChild),Yn=!1,f=!0):f=!1),f||Hr(r)),Wi(r),f=r.type,m=r.pendingProps,_=n!==null?n.memoizedProps:null,u=m.children,cp(f,m)?u=null:_!==null&&cp(f,_)&&(r.flags|=32),r.memoizedState!==null&&(f=um(n,r,MA,null,null,o),gu._currentValue=f),Th(n,r),rn(n,r,u,o),r.child;case 6:return n===null&&Fe&&((n=o=dt)&&(o=EI(o,r.pendingProps,Yn),o!==null?(r.stateNode=o,tn=r,dt=null,n=!0):n=!1),n||Hr(r)),null;case 13:return kv(n,r,o);case 4:return _t(r,r.stateNode.containerInfo),u=r.pendingProps,n===null?r.child=ra(r,null,u,o):rn(n,r,u,o),r.child;case 11:return Iv(n,r,r.type,r.pendingProps,o);case 7:return rn(n,r,r.pendingProps,o),r.child;case 8:return rn(n,r,r.pendingProps.children,o),r.child;case 12:return rn(n,r,r.pendingProps.children,o),r.child;case 10:return u=r.pendingProps,Gr(r,r.type,u.value),rn(n,r,u.children,o),r.child;case 9:return f=r.type._context,u=r.pendingProps.children,ea(r),f=nn(f),u=u(f),r.flags|=1,rn(n,r,u,o),r.child;case 14:return xv(n,r,r.type,r.pendingProps,o);case 15:return Rv(n,r,r.type,r.pendingProps,o);case 19:return Lv(n,r,o);case 31:return qA(n,r,o);case 22:return Cv(n,r,o,r.pendingProps);case 24:return ea(r),u=nn(zt),n===null?(f=Zd(),f===null&&(f=ut,m=Jd(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),r.memoizedState={parent:u,cache:f},tm(r),Gr(r,zt,f)):((n.lanes&o)!==0&&(nm(n,r),Xl(r,null,null,o),Yl()),f=n.memoizedState,m=r.memoizedState,f.parent!==u?(f={parent:u,cache:u},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Gr(r,zt,u)):(u=m.cache,Gr(r,zt,u),u!==f.cache&&Xd(r,[zt],o,!0))),rn(n,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function hr(n){n.flags|=4}function Lm(n,r,o,u,f){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(h0())n.flags|=8192;else throw ia=oh,em}else n.flags&=-16777217}function Uv(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!eE(r))if(h0())n.flags|=8192;else throw ia=oh,em}function wh(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?Nc():536870912,n.lanes|=r,yo|=r)}function nu(n,r){if(!Fe)switch(n.tailMode){case"hidden":r=n.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function mt(n){var r=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(r)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,r}function HA(n,r,o){var u=r.pendingProps;switch(Gd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(r),null;case 1:return mt(r),null;case 3:return o=r.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),or(zt),ct(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(io(r)?hr(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Qd())),mt(r),null;case 26:var f=r.type,m=r.memoizedState;return n===null?(hr(r),m!==null?(mt(r),Uv(r,m)):(mt(r),Lm(r,f,null,u,o))):m?m!==n.memoizedState?(hr(r),mt(r),Uv(r,m)):(mt(r),r.flags&=-16777217):(n=n.memoizedProps,n!==u&&hr(r),mt(r),Lm(r,f,n,u,o)),null;case 27:if(xe(r),o=Ie.current,f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==u&&hr(r);else{if(!u){if(r.stateNode===null)throw Error(i(166));return mt(r),null}n=fe.current,io(r)?__(r):(n=K0(f,u,o),r.stateNode=n,hr(r))}return mt(r),null;case 5:if(xe(r),f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==u&&hr(r);else{if(!u){if(r.stateNode===null)throw Error(i(166));return mt(r),null}if(m=fe.current,io(r))__(r);else{var _=Uh(Ie.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?_.createElement(f,{is:u.is}):_.createElement(f)}}m[kt]=r,m[Qt]=u;e:for(_=r.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===r)break e;for(;_.sibling===null;){if(_.return===null||_.return===r)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}r.stateNode=m;e:switch(sn(m,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&hr(r)}}return mt(r),Lm(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,o),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==u&&hr(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(i(166));if(n=Ie.current,io(r)){if(n=r.stateNode,o=r.memoizedProps,u=null,f=tn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[kt]=r,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||k0(n.nodeValue,o)),n||Hr(r,!0)}else n=Uh(n).createTextNode(u),n[kt]=r,r.stateNode=n}return mt(r),null;case 31:if(o=r.memoizedState,n===null||n.memoizedState!==null){if(u=io(r),o!==null){if(n===null){if(!u)throw Error(i(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[kt]=r}else Ws(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;mt(r),n=!1}else o=Qd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return r.flags&256?(Dn(r),r):(Dn(r),null);if((r.flags&128)!==0)throw Error(i(558))}return mt(r),null;case 13:if(u=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=io(r),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[kt]=r}else Ws(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;mt(r),f=!1}else f=Qd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Dn(r),r):(Dn(r),null)}return Dn(r),(r.flags&128)!==0?(r.lanes=o,r):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=r.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)),o!==n&&o&&(r.child.flags|=8192),wh(r,r.updateQueue),mt(r),null);case 4:return ct(),n===null&&sp(r.stateNode.containerInfo),mt(r),null;case 10:return or(r.type),mt(r),null;case 19:if(F(Ct),u=r.memoizedState,u===null)return mt(r),null;if(f=(r.flags&128)!==0,m=u.rendering,m===null)if(f)nu(u,!1);else{if(St!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(m=hh(n),m!==null){for(r.flags|=128,nu(u,!1),n=m.updateQueue,r.updateQueue=n,wh(r,n),r.subtreeFlags=0,n=o,o=r.child;o!==null;)d_(o,n),o=o.sibling;return ae(Ct,Ct.current&1|2),Fe&&sr(r,u.treeForkCount),r.child}n=n.sibling}u.tail!==null&&fn()>Ch&&(r.flags|=128,f=!0,nu(u,!1),r.lanes=4194304)}else{if(!f)if(n=hh(m),n!==null){if(r.flags|=128,f=!0,n=n.updateQueue,r.updateQueue=n,wh(r,n),nu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!Fe)return mt(r),null}else 2*fn()-u.renderingStartTime>Ch&&o!==536870912&&(r.flags|=128,f=!0,nu(u,!1),r.lanes=4194304);u.isBackwards?(m.sibling=r.child,r.child=m):(n=u.last,n!==null?n.sibling=m:r.child=m,u.last=m)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=fn(),n.sibling=null,o=Ct.current,ae(Ct,f?o&1|2:o&1),Fe&&sr(r,u.treeForkCount),n):(mt(r),null);case 22:case 23:return Dn(r),am(),u=r.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(o&536870912)!==0&&(r.flags&128)===0&&(mt(r),r.subtreeFlags&6&&(r.flags|=8192)):mt(r),o=r.updateQueue,o!==null&&wh(r,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==o&&(r.flags|=2048),n!==null&&F(ta),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),or(zt),mt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function GA(n,r){switch(Gd(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return or(zt),ct(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return xe(r),null;case 31:if(r.memoizedState!==null){if(Dn(r),r.alternate===null)throw Error(i(340));Ws()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(Dn(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Ws()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return F(Ct),null;case 4:return ct(),null;case 10:return or(r.type),null;case 22:case 23:return Dn(r),am(),n!==null&&F(ta),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return or(zt),null;case 25:return null;default:return null}}function jv(n,r){switch(Gd(r),r.tag){case 3:or(zt),ct();break;case 26:case 27:case 5:xe(r);break;case 4:ct();break;case 31:r.memoizedState!==null&&Dn(r);break;case 13:Dn(r);break;case 19:F(Ct);break;case 10:or(r.type);break;case 22:case 23:Dn(r),am(),n!==null&&F(ta);break;case 24:or(zt)}}function iu(n,r){try{var o=r.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var m=o.create,_=o.inst;u=m(),_.destroy=u}o=o.next}while(o!==f)}}catch(T){et(r,r.return,T)}}function Jr(n,r,o){try{var u=r.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&n)===n){var _=u.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,f=r;var D=o,G=T;try{G()}catch(Z){et(f,D,Z)}}}u=u.next}while(u!==m)}}catch(Z){et(r,r.return,Z)}}function Bv(n){var r=n.updateQueue;if(r!==null){var o=n.stateNode;try{D_(r,o)}catch(u){et(n,n.return,u)}}}function qv(n,r,o){o.props=aa(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){et(n,r,u)}}function ru(n,r){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){et(n,r,f)}}function Ui(n,r){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){et(n,r,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){et(n,r,f)}else o.current=null}function Fv(n){var r=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){et(n,n.return,f)}}function zm(n,r,o){try{var u=n.stateNode;dI(u,n.type,o,r),u[Qt]=r}catch(f){et(n,n.return,f)}}function Hv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&rs(n.type)||n.tag===4}function Um(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Hv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&rs(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function jm(n,r,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(n),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=ai));else if(u!==4&&(u===27&&rs(n.type)&&(o=n.stateNode,r=null),n=n.child,n!==null))for(jm(n,r,o),n=n.sibling;n!==null;)jm(n,r,o),n=n.sibling}function Ah(n,r,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,r?o.insertBefore(n,r):o.appendChild(n);else if(u!==4&&(u===27&&rs(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Ah(n,r,o),n=n.sibling;n!==null;)Ah(n,r,o),n=n.sibling}function Gv(n){var r=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);sn(r,u,o),r[kt]=n,r[Qt]=o}catch(m){et(n,n.return,m)}}var fr=!1,Bt=!1,Bm=!1,Kv=typeof WeakSet=="function"?WeakSet:Set,Yt=null;function KA(n,r){if(n=n.containerInfo,lp=Kh,n=r_(n),Md(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var _=0,T=-1,D=-1,G=0,Z=0,ie=n,$=null;t:for(;;){for(var X;ie!==o||f!==0&&ie.nodeType!==3||(T=_+f),ie!==m||u!==0&&ie.nodeType!==3||(D=_+u),ie.nodeType===3&&(_+=ie.nodeValue.length),(X=ie.firstChild)!==null;)$=ie,ie=X;for(;;){if(ie===n)break t;if($===o&&++G===f&&(T=_),$===m&&++Z===u&&(D=_),(X=ie.nextSibling)!==null)break;ie=$,$=ie.parentNode}ie=X}o=T===-1||D===-1?null:{start:T,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(up={focusedElem:n,selectionRange:o},Kh=!1,Yt=r;Yt!==null;)if(r=Yt,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,Yt=n;else for(;Yt!==null;){switch(r=Yt,m=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)f=n[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=r,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var ye=aa(o.type,f);n=u.getSnapshotBeforeUpdate(ye,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(Ae){et(o,o.return,Ae)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,o=n.nodeType,o===9)fp(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":fp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=r.sibling,n!==null){n.return=r.return,Yt=n;break}Yt=r.return}}function Qv(n,r,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:mr(n,o),u&4&&iu(5,o);break;case 1:if(mr(n,o),u&4)if(n=o.stateNode,r===null)try{n.componentDidMount()}catch(_){et(o,o.return,_)}else{var f=aa(o.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(f,r,n.__reactInternalSnapshotBeforeUpdate)}catch(_){et(o,o.return,_)}}u&64&&Bv(o),u&512&&ru(o,o.return);break;case 3:if(mr(n,o),u&64&&(n=o.updateQueue,n!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{D_(n,r)}catch(_){et(o,o.return,_)}}break;case 27:r===null&&u&4&&Gv(o);case 26:case 5:mr(n,o),r===null&&u&4&&Fv(o),u&512&&ru(o,o.return);break;case 12:mr(n,o);break;case 31:mr(n,o),u&4&&Xv(n,o);break;case 13:mr(n,o),u&4&&Jv(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=tI.bind(null,o),bI(n,o))));break;case 22:if(u=o.memoizedState!==null||fr,!u){r=r!==null&&r.memoizedState!==null||Bt,f=fr;var m=Bt;fr=u,(Bt=r)&&!m?pr(n,o,(o.subtreeFlags&8772)!==0):mr(n,o),fr=f,Bt=m}break;case 30:break;default:mr(n,o)}}function $v(n){var r=n.alternate;r!==null&&(n.alternate=null,$v(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&ja(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var gt=null,vn=!1;function dr(n,r,o){for(o=o.child;o!==null;)Yv(n,r,o),o=o.sibling}function Yv(n,r,o){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(ni,o)}catch{}switch(o.tag){case 26:Bt||Ui(o,r),dr(n,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Bt||Ui(o,r);var u=gt,f=vn;rs(o.type)&&(gt=o.stateNode,vn=!1),dr(n,r,o),du(o.stateNode),gt=u,vn=f;break;case 5:Bt||Ui(o,r);case 6:if(u=gt,f=vn,gt=null,dr(n,r,o),gt=u,vn=f,gt!==null)if(vn)try{(gt.nodeType===9?gt.body:gt.nodeName==="HTML"?gt.ownerDocument.body:gt).removeChild(o.stateNode)}catch(m){et(o,r,m)}else try{gt.removeChild(o.stateNode)}catch(m){et(o,r,m)}break;case 18:gt!==null&&(vn?(n=gt,B0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Ao(n)):B0(gt,o.stateNode));break;case 4:u=gt,f=vn,gt=o.stateNode.containerInfo,vn=!0,dr(n,r,o),gt=u,vn=f;break;case 0:case 11:case 14:case 15:Jr(2,o,r),Bt||Jr(4,o,r),dr(n,r,o);break;case 1:Bt||(Ui(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"&&qv(o,r,u)),dr(n,r,o);break;case 21:dr(n,r,o);break;case 22:Bt=(u=Bt)||o.memoizedState!==null,dr(n,r,o),Bt=u;break;default:dr(n,r,o)}}function Xv(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Ao(n)}catch(o){et(r,r.return,o)}}}function Jv(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Ao(n)}catch(o){et(r,r.return,o)}}function QA(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new Kv),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new Kv),r;default:throw Error(i(435,n.tag))}}function Ih(n,r){var o=QA(n);r.forEach(function(u){if(!o.has(u)){o.add(u);var f=nI.bind(null,n,u);u.then(f,f)}})}function En(n,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=n,_=r,T=_;e:for(;T!==null;){switch(T.tag){case 27:if(rs(T.type)){gt=T.stateNode,vn=!1;break e}break;case 5:gt=T.stateNode,vn=!1;break e;case 3:case 4:gt=T.stateNode.containerInfo,vn=!0;break e}T=T.return}if(gt===null)throw Error(i(160));Yv(m,_,f),gt=null,vn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Wv(r,n),r=r.sibling}var fi=null;function Wv(n,r){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:En(r,n),bn(n),u&4&&(Jr(3,n,n.return),iu(3,n),Jr(5,n,n.return));break;case 1:En(r,n),bn(n),u&512&&(Bt||o===null||Ui(o,o.return)),u&64&&fr&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=fi;if(En(r,n),bn(n),u&512&&(Bt||o===null||Ui(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Ai]||m[kt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),sn(m,u,o),m[kt]=n,Pt(m),u=m;break e;case"link":var _=W0("link","href",f).get(u+(o.href||""));if(_){for(var T=0;T<_.length;T++)if(m=_[T],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(T,1);break t}}m=f.createElement(u),sn(m,u,o),f.head.appendChild(m);break;case"meta":if(_=W0("meta","content",f).get(u+(o.content||""))){for(T=0;T<_.length;T++)if(m=_[T],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(T,1);break t}}m=f.createElement(u),sn(m,u,o),f.head.appendChild(m);break;default:throw Error(i(468,u))}m[kt]=n,Pt(m),u=m}n.stateNode=u}else Z0(f,n.type,n.stateNode);else n.stateNode=J0(f,u,n.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?Z0(f,n.type,n.stateNode):J0(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&zm(n,n.memoizedProps,o.memoizedProps)}break;case 27:En(r,n),bn(n),u&512&&(Bt||o===null||Ui(o,o.return)),o!==null&&u&4&&zm(n,n.memoizedProps,o.memoizedProps);break;case 5:if(En(r,n),bn(n),u&512&&(Bt||o===null||Ui(o,o.return)),n.flags&32){f=n.stateNode;try{_n(f,"")}catch(ye){et(n,n.return,ye)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,zm(n,f,o!==null?o.memoizedProps:f)),u&1024&&(Bm=!0);break;case 6:if(En(r,n),bn(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(ye){et(n,n.return,ye)}}break;case 3:if(qh=null,f=fi,fi=jh(r.containerInfo),En(r,n),fi=f,bn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Ao(r.containerInfo)}catch(ye){et(n,n.return,ye)}Bm&&(Bm=!1,Zv(n));break;case 4:u=fi,fi=jh(n.stateNode.containerInfo),En(r,n),bn(n),fi=u;break;case 12:En(r,n),bn(n);break;case 31:En(r,n),bn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Ih(n,u)));break;case 13:En(r,n),bn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Rh=fn()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Ih(n,u)));break;case 22:f=n.memoizedState!==null;var D=o!==null&&o.memoizedState!==null,G=fr,Z=Bt;if(fr=G||f,Bt=Z||D,En(r,n),Bt=Z,fr=G,bn(n),u&8192)e:for(r=n.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(o===null||D||fr||Bt||oa(n)),o=null,r=n;;){if(r.tag===5||r.tag===26){if(o===null){D=o=r;try{if(m=D.stateNode,f)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=D.stateNode;var ie=D.memoizedProps.style,$=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;T.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(ye){et(D,D.return,ye)}}}else if(r.tag===6){if(o===null){D=r;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(ye){et(D,D.return,ye)}}}else if(r.tag===18){if(o===null){D=r;try{var X=D.stateNode;f?q0(X,!0):q0(D.stateNode,!1)}catch(ye){et(D,D.return,ye)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Ih(n,o))));break;case 19:En(r,n),bn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Ih(n,u)));break;case 30:break;case 21:break;default:En(r,n),bn(n)}}function bn(n){var r=n.flags;if(r&2){try{for(var o,u=n.return;u!==null;){if(Hv(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,m=Um(n);Ah(n,m,f);break;case 5:var _=o.stateNode;o.flags&32&&(_n(_,""),o.flags&=-33);var T=Um(n);Ah(n,T,_);break;case 3:case 4:var D=o.stateNode.containerInfo,G=Um(n);jm(n,G,D);break;default:throw Error(i(161))}}catch(Z){et(n,n.return,Z)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function Zv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;Zv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function mr(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Qv(n,r.alternate,r),r=r.sibling}function oa(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:Jr(4,r,r.return),oa(r);break;case 1:Ui(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&qv(r,r.return,o),oa(r);break;case 27:du(r.stateNode);case 26:case 5:Ui(r,r.return),oa(r);break;case 22:r.memoizedState===null&&oa(r);break;case 30:oa(r);break;default:oa(r)}n=n.sibling}}function pr(n,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,f=n,m=r,_=m.flags;switch(m.tag){case 0:case 11:case 15:pr(f,m,o),iu(4,m);break;case 1:if(pr(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(G){et(u,u.return,G)}if(u=m,f=u.updateQueue,f!==null){var T=u.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)N_(D[f],T)}catch(G){et(u,u.return,G)}}o&&_&64&&Bv(m),ru(m,m.return);break;case 27:Gv(m);case 26:case 5:pr(f,m,o),o&&u===null&&_&4&&Fv(m),ru(m,m.return);break;case 12:pr(f,m,o);break;case 31:pr(f,m,o),o&&_&4&&Xv(f,m);break;case 13:pr(f,m,o),o&&_&4&&Jv(f,m);break;case 22:m.memoizedState===null&&pr(f,m,o),ru(m,m.return);break;case 30:break;default:pr(f,m,o)}r=r.sibling}}function qm(n,r){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Hl(o))}function Fm(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Hl(n))}function di(n,r,o,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)e0(n,r,o,u),r=r.sibling}function e0(n,r,o,u){var f=r.flags;switch(r.tag){case 0:case 11:case 15:di(n,r,o,u),f&2048&&iu(9,r);break;case 1:di(n,r,o,u);break;case 3:di(n,r,o,u),f&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Hl(n)));break;case 12:if(f&2048){di(n,r,o,u),n=r.stateNode;try{var m=r.memoizedProps,_=m.id,T=m.onPostCommit;typeof T=="function"&&T(_,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(D){et(r,r.return,D)}}else di(n,r,o,u);break;case 31:di(n,r,o,u);break;case 13:di(n,r,o,u);break;case 23:break;case 22:m=r.stateNode,_=r.alternate,r.memoizedState!==null?m._visibility&2?di(n,r,o,u):su(n,r):m._visibility&2?di(n,r,o,u):(m._visibility|=2,mo(n,r,o,u,(r.subtreeFlags&10256)!==0||!1)),f&2048&&qm(_,r);break;case 24:di(n,r,o,u),f&2048&&Fm(r.alternate,r);break;default:di(n,r,o,u)}}function mo(n,r,o,u,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=n,_=r,T=o,D=u,G=_.flags;switch(_.tag){case 0:case 11:case 15:mo(m,_,T,D,f),iu(8,_);break;case 23:break;case 22:var Z=_.stateNode;_.memoizedState!==null?Z._visibility&2?mo(m,_,T,D,f):su(m,_):(Z._visibility|=2,mo(m,_,T,D,f)),f&&G&2048&&qm(_.alternate,_);break;case 24:mo(m,_,T,D,f),f&&G&2048&&Fm(_.alternate,_);break;default:mo(m,_,T,D,f)}r=r.sibling}}function su(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=n,u=r,f=u.flags;switch(u.tag){case 22:su(o,u),f&2048&&qm(u.alternate,u);break;case 24:su(o,u),f&2048&&Fm(u.alternate,u);break;default:su(o,u)}r=r.sibling}}var au=8192;function po(n,r,o){if(n.subtreeFlags&au)for(n=n.child;n!==null;)t0(n,r,o),n=n.sibling}function t0(n,r,o){switch(n.tag){case 26:po(n,r,o),n.flags&au&&n.memoizedState!==null&&OI(o,fi,n.memoizedState,n.memoizedProps);break;case 5:po(n,r,o);break;case 3:case 4:var u=fi;fi=jh(n.stateNode.containerInfo),po(n,r,o),fi=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=au,au=16777216,po(n,r,o),au=u):po(n,r,o));break;default:po(n,r,o)}}function n0(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function ou(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];Yt=u,r0(u,n)}n0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)i0(n),n=n.sibling}function i0(n){switch(n.tag){case 0:case 11:case 15:ou(n),n.flags&2048&&Jr(9,n,n.return);break;case 3:ou(n);break;case 12:ou(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,xh(n)):ou(n);break;default:ou(n)}}function xh(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];Yt=u,r0(u,n)}n0(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:Jr(8,r,r.return),xh(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,xh(r));break;default:xh(r)}n=n.sibling}}function r0(n,r){for(;Yt!==null;){var o=Yt;switch(o.tag){case 0:case 11:case 15:Jr(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Hl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Yt=u;else e:for(o=n;Yt!==null;){u=Yt;var f=u.sibling,m=u.return;if($v(u),u===o){Yt=null;break e}if(f!==null){f.return=m,Yt=f;break e}Yt=m}}}var $A={getCacheForType:function(n){var r=nn(zt),o=r.data.get(n);return o===void 0&&(o=n(),r.data.set(n,o)),o},cacheSignal:function(){return nn(zt).controller.signal}},YA=typeof WeakMap=="function"?WeakMap:Map,Xe=0,ut=null,Le=null,Ue=0,Ze=0,Vn=null,Wr=!1,go=!1,Hm=!1,gr=0,St=0,Zr=0,la=0,Gm=0,On=0,yo=0,lu=null,Tn=null,Km=!1,Rh=0,s0=0,Ch=1/0,Nh=null,es=null,Ht=0,ts=null,_o=null,yr=0,Qm=0,$m=null,a0=null,uu=0,Ym=null;function Mn(){return(Xe&2)!==0&&Ue!==0?Ue&-Ue:j.T!==null?tp():Dc()}function o0(){if(On===0)if((Ue&536870912)===0||Fe){var n=ks;ks<<=1,(ks&3932160)===0&&(ks=262144),On=n}else On=536870912;return n=Nn.current,n!==null&&(n.flags|=32),On}function Sn(n,r,o){(n===ut&&(Ze===2||Ze===9)||n.cancelPendingCommit!==null)&&(vo(n,0),ns(n,Ue,On,!1)),Ps(n,o),((Xe&2)===0||n!==ut)&&(n===ut&&((Xe&2)===0&&(la|=o),St===4&&ns(n,Ue,On,!1)),ji(n))}function l0(n,r,o){if((Xe&6)!==0)throw Error(i(327));var u=!o&&(r&127)===0&&(r&n.expiredLanes)===0||ii(n,r),f=u?WA(n,r):Jm(n,r,!0),m=u;do{if(f===0){go&&!u&&ns(n,r,0,!1);break}else{if(o=n.current.alternate,m&&!XA(o)){f=Jm(n,r,!1),m=!1;continue}if(f===2){if(m=r,n.errorRecoveryDisabledLanes&m)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;e:{var T=n;f=lu;var D=T.current.memoizedState.isDehydrated;if(D&&(vo(T,_).flags|=256),_=Jm(T,_,!1),_!==2){if(Hm&&!D){T.errorRecoveryDisabledLanes|=m,la|=m,f=4;break e}m=Tn,Tn=f,m!==null&&(Tn===null?Tn=m:Tn.push.apply(Tn,m))}f=_}if(m=!1,f!==2)continue}}if(f===1){vo(n,0),ns(n,r,0,!0);break}e:{switch(u=n,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:ns(u,r,On,!Wr);break e;case 2:Tn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(f=Rh+300-fn(),10<f)){if(ns(u,r,On,!Wr),Ti(u,0,!0)!==0)break e;yr=r,u.timeoutHandle=U0(u0.bind(null,u,o,Tn,Nh,Km,r,On,la,yo,Wr,m,"Throttled",-0,0),f);break e}u0(u,o,Tn,Nh,Km,r,On,la,yo,Wr,m,null,-0,0)}}break}while(!0);ji(n)}function u0(n,r,o,u,f,m,_,T,D,G,Z,ie,$,X){if(n.timeoutHandle=-1,ie=r.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ai},t0(r,m,ie);var ye=(m&62914560)===m?Rh-fn():(m&4194048)===m?s0-fn():0;if(ye=MI(ie,ye),ye!==null){yr=m,n.cancelPendingCommit=ye(y0.bind(null,n,r,m,o,u,f,_,T,D,Z,ie,null,$,X)),ns(n,m,_,!G);return}}y0(n,r,m,o,u,f,_,T,D)}function XA(n){for(var r=n;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!Rn(m(),f))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ns(n,r,o,u){r&=~Gm,r&=~la,n.suspendedLanes|=r,n.pingedLanes&=~r,u&&(n.warmLanes|=r),u=n.expirationTimes;for(var f=r;0<f;){var m=31-xt(f),_=1<<m;u[m]=-1,f&=~_}o!==0&&Ls(n,o,r)}function Dh(){return(Xe&6)===0?(cu(0),!1):!0}function Xm(){if(Le!==null){if(Ze===0)var n=Le.return;else n=Le,ar=Zs=null,fm(n),lo=null,Kl=0,n=Le;for(;n!==null;)jv(n.alternate,n),n=n.return;Le=null}}function vo(n,r){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,gI(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),yr=0,Xm(),ut=n,Le=o=rr(n.current,null),Ue=r,Ze=0,Vn=null,Wr=!1,go=ii(n,r),Hm=!1,yo=On=Gm=la=Zr=St=0,Tn=lu=null,Km=!1,(r&8)!==0&&(r|=r&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=r;0<u;){var f=31-xt(u),m=1<<f;r|=n[f],u&=~m}return gr=r,Wc(),o}function c0(n,r){Ve=null,j.H=eu,r===oo||r===ah?(r=I_(),Ze=3):r===em?(r=I_(),Ze=4):Ze=r===Rm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Vn=r,Le===null&&(St=1,Eh(n,Kn(r,n.current)))}function h0(){var n=Nn.current;return n===null?!0:(Ue&4194048)===Ue?Xn===null:(Ue&62914560)===Ue||(Ue&536870912)!==0?n===Xn:!1}function f0(){var n=j.H;return j.H=eu,n===null?eu:n}function d0(){var n=j.A;return j.A=$A,n}function Vh(){St=4,Wr||(Ue&4194048)!==Ue&&Nn.current!==null||(go=!0),(Zr&134217727)===0&&(la&134217727)===0||ut===null||ns(ut,Ue,On,!1)}function Jm(n,r,o){var u=Xe;Xe|=2;var f=f0(),m=d0();(ut!==n||Ue!==r)&&(Nh=null,vo(n,r)),r=!1;var _=St;e:do try{if(Ze!==0&&Le!==null){var T=Le,D=Vn;switch(Ze){case 8:Xm(),_=6;break e;case 3:case 2:case 9:case 6:Nn.current===null&&(r=!0);var G=Ze;if(Ze=0,Vn=null,Eo(n,T,D,G),o&&go){_=0;break e}break;default:G=Ze,Ze=0,Vn=null,Eo(n,T,D,G)}}JA(),_=St;break}catch(Z){c0(n,Z)}while(!0);return r&&n.shellSuspendCounter++,ar=Zs=null,Xe=u,j.H=f,j.A=m,Le===null&&(ut=null,Ue=0,Wc()),_}function JA(){for(;Le!==null;)m0(Le)}function WA(n,r){var o=Xe;Xe|=2;var u=f0(),f=d0();ut!==n||Ue!==r?(Nh=null,Ch=fn()+500,vo(n,r)):go=ii(n,r);e:do try{if(Ze!==0&&Le!==null){r=Le;var m=Vn;t:switch(Ze){case 1:Ze=0,Vn=null,Eo(n,r,m,1);break;case 2:case 9:if(w_(m)){Ze=0,Vn=null,p0(r);break}r=function(){Ze!==2&&Ze!==9||ut!==n||(Ze=7),ji(n)},m.then(r,r);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:w_(m)?(Ze=0,Vn=null,p0(r)):(Ze=0,Vn=null,Eo(n,r,m,7));break;case 5:var _=null;switch(Le.tag){case 26:_=Le.memoizedState;case 5:case 27:var T=Le;if(_?eE(_):T.stateNode.complete){Ze=0,Vn=null;var D=T.sibling;if(D!==null)Le=D;else{var G=T.return;G!==null?(Le=G,Oh(G)):Le=null}break t}}Ze=0,Vn=null,Eo(n,r,m,5);break;case 6:Ze=0,Vn=null,Eo(n,r,m,6);break;case 8:Xm(),St=6;break e;default:throw Error(i(462))}}ZA();break}catch(Z){c0(n,Z)}while(!0);return ar=Zs=null,j.H=u,j.A=f,Xe=o,Le!==null?0:(ut=null,Ue=0,Wc(),St)}function ZA(){for(;Le!==null&&!xd();)m0(Le)}function m0(n){var r=zv(n.alternate,n,gr);n.memoizedProps=n.pendingProps,r===null?Oh(n):Le=r}function p0(n){var r=n,o=r.alternate;switch(r.tag){case 15:case 0:r=Vv(o,r,r.pendingProps,r.type,void 0,Ue);break;case 11:r=Vv(o,r,r.pendingProps,r.type.render,r.ref,Ue);break;case 5:fm(r);default:jv(o,r),r=Le=d_(r,gr),r=zv(o,r,gr)}n.memoizedProps=n.pendingProps,r===null?Oh(n):Le=r}function Eo(n,r,o,u){ar=Zs=null,fm(r),lo=null,Kl=0;var f=r.return;try{if(BA(n,f,r,o,Ue)){St=1,Eh(n,Kn(o,n.current)),Le=null;return}}catch(m){if(f!==null)throw Le=f,m;St=1,Eh(n,Kn(o,n.current)),Le=null;return}r.flags&32768?(Fe||u===1?n=!0:go||(Ue&536870912)!==0?n=!1:(Wr=n=!0,(u===2||u===9||u===3||u===6)&&(u=Nn.current,u!==null&&u.tag===13&&(u.flags|=16384))),g0(r,n)):Oh(r)}function Oh(n){var r=n;do{if((r.flags&32768)!==0){g0(r,Wr);return}n=r.return;var o=HA(r.alternate,r,gr);if(o!==null){Le=o;return}if(r=r.sibling,r!==null){Le=r;return}Le=r=n}while(r!==null);St===0&&(St=5)}function g0(n,r){do{var o=GA(n.alternate,n);if(o!==null){o.flags&=32767,Le=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(n=n.sibling,n!==null)){Le=n;return}Le=n=o}while(n!==null);St=6,Le=null}function y0(n,r,o,u,f,m,_,T,D){n.cancelPendingCommit=null;do Mh();while(Ht!==0);if((Xe&6)!==0)throw Error(i(327));if(r!==null){if(r===n.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=Ud,Nd(n,o,m,_,T,D),n===ut&&(Le=ut=null,Ue=0),_o=r,ts=n,yr=o,Qm=m,$m=f,a0=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,iI(Vr,function(){return T0(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=j.T,j.T=null,f=oe.p,oe.p=2,_=Xe,Xe|=4;try{KA(n,r,o)}finally{Xe=_,oe.p=f,j.T=u}}Ht=1,_0(),v0(),E0()}}function _0(){if(Ht===1){Ht=0;var n=ts,r=_o,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=j.T,j.T=null;var u=oe.p;oe.p=2;var f=Xe;Xe|=4;try{Wv(r,n);var m=up,_=r_(n.containerInfo),T=m.focusedElem,D=m.selectionRange;if(_!==T&&T&&T.ownerDocument&&i_(T.ownerDocument.documentElement,T)){if(D!==null&&Md(T)){var G=D.start,Z=D.end;if(Z===void 0&&(Z=G),"selectionStart"in T)T.selectionStart=G,T.selectionEnd=Math.min(Z,T.value.length);else{var ie=T.ownerDocument||document,$=ie&&ie.defaultView||window;if($.getSelection){var X=$.getSelection(),ye=T.textContent.length,Ae=Math.min(D.start,ye),at=D.end===void 0?Ae:Math.min(D.end,ye);!X.extend&&Ae>at&&(_=at,at=Ae,Ae=_);var L=n_(T,Ae),P=n_(T,at);if(L&&P&&(X.rangeCount!==1||X.anchorNode!==L.node||X.anchorOffset!==L.offset||X.focusNode!==P.node||X.focusOffset!==P.offset)){var H=ie.createRange();H.setStart(L.node,L.offset),X.removeAllRanges(),Ae>at?(X.addRange(H),X.extend(P.node,P.offset)):(H.setEnd(P.node,P.offset),X.addRange(H))}}}}for(ie=[],X=T;X=X.parentNode;)X.nodeType===1&&ie.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ie.length;T++){var ne=ie[T];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Kh=!!lp,up=lp=null}finally{Xe=f,oe.p=u,j.T=o}}n.current=r,Ht=2}}function v0(){if(Ht===2){Ht=0;var n=ts,r=_o,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=j.T,j.T=null;var u=oe.p;oe.p=2;var f=Xe;Xe|=4;try{Qv(n,r.alternate,r)}finally{Xe=f,oe.p=u,j.T=o}}Ht=3}}function E0(){if(Ht===4||Ht===3){Ht=0,wc();var n=ts,r=_o,o=yr,u=a0;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ht=5:(Ht=0,_o=ts=null,b0(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(es=null),er(o),r=r.stateNode,Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(ni,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=j.T,f=oe.p,oe.p=2,j.T=null;try{for(var m=n.onRecoverableError,_=0;_<u.length;_++){var T=u[_];m(T.value,{componentStack:T.stack})}}finally{j.T=r,oe.p=f}}(yr&3)!==0&&Mh(),ji(n),f=n.pendingLanes,(o&261930)!==0&&(f&42)!==0?n===Ym?uu++:(uu=0,Ym=n):uu=0,cu(0)}}function b0(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,Hl(r)))}function Mh(){return _0(),v0(),E0(),T0()}function T0(){if(Ht!==5)return!1;var n=ts,r=Qm;Qm=0;var o=er(yr),u=j.T,f=oe.p;try{oe.p=32>o?32:o,j.T=null,o=$m,$m=null;var m=ts,_=yr;if(Ht=0,_o=ts=null,yr=0,(Xe&6)!==0)throw Error(i(331));var T=Xe;if(Xe|=4,i0(m.current),e0(m,m.current,_,o),Xe=T,cu(0,!1),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(ni,m)}catch{}return!0}finally{oe.p=f,j.T=u,b0(n,r)}}function S0(n,r,o){r=Kn(o,r),r=xm(n.stateNode,r,2),n=$r(n,r,2),n!==null&&(Ps(n,2),ji(n))}function et(n,r,o){if(n.tag===3)S0(n,n,o);else for(;r!==null;){if(r.tag===3){S0(r,n,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(es===null||!es.has(u))){n=Kn(o,n),o=wv(2),u=$r(r,o,2),u!==null&&(Av(o,u,r,n),Ps(u,2),ji(u));break}}r=r.return}}function Wm(n,r,o){var u=n.pingCache;if(u===null){u=n.pingCache=new YA;var f=new Set;u.set(r,f)}else f=u.get(r),f===void 0&&(f=new Set,u.set(r,f));f.has(o)||(Hm=!0,f.add(o),n=eI.bind(null,n,r,o),r.then(n,n))}function eI(n,r,o){var u=n.pingCache;u!==null&&u.delete(r),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,ut===n&&(Ue&o)===o&&(St===4||St===3&&(Ue&62914560)===Ue&&300>fn()-Rh?(Xe&2)===0&&vo(n,0):Gm|=o,yo===Ue&&(yo=0)),ji(n)}function w0(n,r){r===0&&(r=Nc()),n=Xs(n,r),n!==null&&(Ps(n,r),ji(n))}function tI(n){var r=n.memoizedState,o=0;r!==null&&(o=r.retryLane),w0(n,o)}function nI(n,r){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(r),w0(n,o)}function iI(n,r){return It(n,r)}var kh=null,bo=null,Zm=!1,Ph=!1,ep=!1,is=0;function ji(n){n!==bo&&n.next===null&&(bo===null?kh=bo=n:bo=bo.next=n),Ph=!0,Zm||(Zm=!0,sI())}function cu(n,r){if(!ep&&Ph){ep=!0;do for(var o=!1,u=kh;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var _=u.suspendedLanes,T=u.pingedLanes;m=(1<<31-xt(42|n)+1)-1,m&=f&~(_&~T),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,R0(u,m))}else m=Ue,m=Ti(u,u===ut?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||ii(u,m)||(o=!0,R0(u,m));u=u.next}while(o);ep=!1}}function rI(){A0()}function A0(){Ph=Zm=!1;var n=0;is!==0&&pI()&&(n=is);for(var r=fn(),o=null,u=kh;u!==null;){var f=u.next,m=I0(u,r);m===0?(u.next=null,o===null?kh=f:o.next=f,f===null&&(bo=o)):(o=u,(n!==0||(m&3)!==0)&&(Ph=!0)),u=f}Ht!==0&&Ht!==5||cu(n),is!==0&&(is=0)}function I0(n,r){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var _=31-xt(m),T=1<<_,D=f[_];D===-1?((T&o)===0||(T&u)!==0)&&(f[_]=Cd(T,r)):D<=r&&(n.expiredLanes|=T),m&=~T}if(r=ut,o=Ue,o=Ti(n,n===r?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===r&&(Ze===2||Ze===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&gn(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||ii(n,o)){if(r=o&-o,r===n.callbackPriority)return r;switch(u!==null&&gn(u),er(o)){case 2:case 8:o=El;break;case 32:o=Vr;break;case 268435456:o=Ac;break;default:o=Vr}return u=x0.bind(null,n),o=It(o,u),n.callbackPriority=r,n.callbackNode=o,r}return u!==null&&u!==null&&gn(u),n.callbackPriority=2,n.callbackNode=null,2}function x0(n,r){if(Ht!==0&&Ht!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Mh()&&n.callbackNode!==o)return null;var u=Ue;return u=Ti(n,n===ut?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(l0(n,u,r),I0(n,fn()),n.callbackNode!=null&&n.callbackNode===o?x0.bind(null,n):null)}function R0(n,r){if(Mh())return null;l0(n,r,!0)}function sI(){yI(function(){(Xe&6)!==0?It(vl,rI):A0()})}function tp(){if(is===0){var n=so;n===0&&(n=Ei,Ei<<=1,(Ei&261888)===0&&(Ei=256)),is=n}return is}function C0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ha(""+n)}function N0(n,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,n.id&&o.setAttribute("form",n.id),r.parentNode.insertBefore(o,r),n=new FormData(n),o.parentNode.removeChild(o),n}function aI(n,r,o,u,f){if(r==="submit"&&o&&o.stateNode===f){var m=C0((f[Qt]||null).action),_=u.submitter;_&&(r=(r=_[Qt]||null)?C0(r.formAction):_.getAttribute("formAction"),r!==null&&(m=r,_=null));var T=new Oi("action","action",null,u,f);n.push({event:T,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(is!==0){var D=_?N0(f,_):new FormData(f);bm(o,{pending:!0,data:D,method:f.method,action:m},null,D)}}else typeof m=="function"&&(T.preventDefault(),D=_?N0(f,_):new FormData(f),bm(o,{pending:!0,data:D,method:f.method,action:m},m,D))},currentTarget:f}]})}}for(var np=0;np<zd.length;np++){var ip=zd[np],oI=ip.toLowerCase(),lI=ip[0].toUpperCase()+ip.slice(1);hi(oI,"on"+lI)}hi(o_,"onAnimationEnd"),hi(l_,"onAnimationIteration"),hi(u_,"onAnimationStart"),hi("dblclick","onDoubleClick"),hi("focusin","onFocus"),hi("focusout","onBlur"),hi(wA,"onTransitionRun"),hi(AA,"onTransitionStart"),hi(IA,"onTransitionCancel"),hi(c_,"onTransitionEnd"),Ci("onMouseEnter",["mouseout","mouseover"]),Ci("onMouseLeave",["mouseout","mouseover"]),Ci("onPointerEnter",["pointerout","pointerover"]),Ci("onPointerLeave",["pointerout","pointerover"]),Ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ri("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hu));function D0(n,r){r=(r&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;e:{var m=void 0;if(r)for(var _=u.length-1;0<=_;_--){var T=u[_],D=T.instance,G=T.currentTarget;if(T=T.listener,D!==m&&f.isPropagationStopped())break e;m=T,f.currentTarget=G;try{m(f)}catch(Z){Jc(Z)}f.currentTarget=null,m=D}else for(_=0;_<u.length;_++){if(T=u[_],D=T.instance,G=T.currentTarget,T=T.listener,D!==m&&f.isPropagationStopped())break e;m=T,f.currentTarget=G;try{m(f)}catch(Z){Jc(Z)}f.currentTarget=null,m=D}}}}function ze(n,r){var o=r[Ua];o===void 0&&(o=r[Ua]=new Set);var u=n+"__bubble";o.has(u)||(V0(r,n,2,!1),o.add(u))}function rp(n,r,o){var u=0;r&&(u|=4),V0(o,n,u,r)}var Lh="_reactListening"+Math.random().toString(36).slice(2);function sp(n){if(!n[Lh]){n[Lh]=!0,Sl.forEach(function(o){o!=="selectionchange"&&(uI.has(o)||rp(o,!1,n),rp(o,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Lh]||(r[Lh]=!0,rp("selectionchange",!1,r))}}function V0(n,r,o,u){switch(oE(r)){case 2:var f=LI;break;case 8:f=zI;break;default:f=Ep}o=f.bind(null,r,o,n),f=void 0,!qs||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(r,o,{capture:!0,passive:f}):n.addEventListener(r,o,!0):f!==void 0?n.addEventListener(r,o,{passive:f}):n.addEventListener(r,o,!1)}function ap(n,r,o,u,f){var m=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var T=u.stateNode.containerInfo;if(T===f)break;if(_===4)for(_=u.return;_!==null;){var D=_.tag;if((D===3||D===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;T!==null;){if(_=Ii(T),_===null)return;if(D=_.tag,D===5||D===6||D===26||D===27){u=m=_;continue e}T=T.parentNode}}u=u.return}zr(function(){var G=m,Z=qn(o),ie=[];e:{var $=h_.get(n);if($!==void 0){var X=Oi,ye=n;switch(n){case"keypress":if(Hs(o)===0)break e;case"keydown":case"keyup":X=$c;break;case"focusin":ye="focus",X=Ks;break;case"focusout":ye="blur",X=Ks;break;case"beforeblur":case"afterblur":X=Ks;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Pl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Uc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=y;break;case o_:case l_:case u_:X=Bc;break;case c_:X=w;break;case"scroll":case"scrollend":X=kl;break;case"wheel":X=Y;break;case"copy":case"cut":case"paste":X=qc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=ir;break;case"toggle":case"beforetoggle":X=De}var Ae=(r&4)!==0,at=!Ae&&(n==="scroll"||n==="scrollend"),L=Ae?$!==null?$+"Capture":null:$;Ae=[];for(var P=G,H;P!==null;){var ne=P;if(H=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||H===null||L===null||(ne=oi(P,L),ne!=null&&Ae.push(fu(P,ne,H))),at)break;P=P.return}0<Ae.length&&($=new X($,ye,null,o,Z),ie.push({event:$,listeners:Ae}))}}if((r&7)===0){e:{if($=n==="mouseover"||n==="pointerover",X=n==="mouseout"||n==="pointerout",$&&o!==Vl&&(ye=o.relatedTarget||o.fromElement)&&(Ii(ye)||ye[wi]))break e;if((X||$)&&($=Z.window===Z?Z:($=Z.ownerDocument)?$.defaultView||$.parentWindow:window,X?(ye=o.relatedTarget||o.toElement,X=G,ye=ye?Ii(ye):null,ye!==null&&(at=l(ye),Ae=ye.tag,ye!==at||Ae!==5&&Ae!==27&&Ae!==6)&&(ye=null)):(X=null,ye=G),X!==ye)){if(Ae=Pl,ne="onMouseLeave",L="onMouseEnter",P="mouse",(n==="pointerout"||n==="pointerover")&&(Ae=ir,ne="onPointerLeave",L="onPointerEnter",P="pointer"),at=X==null?$:In(X),H=ye==null?$:In(ye),$=new Ae(ne,P+"leave",X,o,Z),$.target=at,$.relatedTarget=H,ne=null,Ii(Z)===G&&(Ae=new Ae(L,P+"enter",ye,o,Z),Ae.target=H,Ae.relatedTarget=at,ne=Ae),at=ne,X&&ye)t:{for(Ae=cI,L=X,P=ye,H=0,ne=L;ne;ne=Ae(ne))H++;ne=0;for(var Te=P;Te;Te=Ae(Te))ne++;for(;0<H-ne;)L=Ae(L),H--;for(;0<ne-H;)P=Ae(P),ne--;for(;H--;){if(L===P||P!==null&&L===P.alternate){Ae=L;break t}L=Ae(L),P=Ae(P)}Ae=null}else Ae=null;X!==null&&O0(ie,$,X,Ae,!1),ye!==null&&at!==null&&O0(ie,at,ye,Ae,!0)}}e:{if($=G?In(G):window,X=$.nodeName&&$.nodeName.toLowerCase(),X==="select"||X==="input"&&$.type==="file")var Qe=Xy;else if($y($))if(Jy)Qe=bA;else{Qe=vA;var ve=_A}else X=$.nodeName,!X||X.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?G&&Fa(G.elementType)&&(Qe=Xy):Qe=EA;if(Qe&&(Qe=Qe(n,G))){Yy(ie,Qe,o,Z);break e}ve&&ve(n,$,G),n==="focusout"&&G&&$.type==="number"&&G.memoizedProps.value!=null&&Cl($,"number",$.value)}switch(ve=G?In(G):window,n){case"focusin":($y(ve)||ve.contentEditable==="true")&&(Ja=ve,kd=G,Bl=null);break;case"focusout":Bl=kd=Ja=null;break;case"mousedown":Pd=!0;break;case"contextmenu":case"mouseup":case"dragend":Pd=!1,s_(ie,o,Z);break;case"selectionchange":if(SA)break;case"keydown":case"keyup":s_(ie,o,Z)}var Oe;if(Ye)e:{switch(n){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else Xa?Qs(n,o)&&(je="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(je="onCompositionStart");je&&(Pi&&o.locale!=="ko"&&(Xa||je!=="onCompositionStart"?je==="onCompositionEnd"&&Xa&&(Oe=Ml()):(Vi=Z,Ol="value"in Vi?Vi.value:Vi.textContent,Xa=!0)),ve=zh(G,je),0<ve.length&&(je=new ki(je,n,null,o,Z),ie.push({event:je,listeners:ve}),Oe?je.data=Oe:(Oe=Ya(o),Oe!==null&&(je.data=Oe)))),(Oe=Hn?mA(n,o):pA(n,o))&&(je=zh(G,"onBeforeInput"),0<je.length&&(ve=new ki("onBeforeInput","beforeinput",null,o,Z),ie.push({event:ve,listeners:je}),ve.data=Oe)),aI(ie,n,G,o,Z)}D0(ie,r)})}function fu(n,r,o){return{instance:n,listener:r,currentTarget:o}}function zh(n,r){for(var o=r+"Capture",u=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=oi(n,o),f!=null&&u.unshift(fu(n,f,m)),f=oi(n,r),f!=null&&u.push(fu(n,f,m))),n.tag===3)return u;n=n.return}return[]}function cI(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function O0(n,r,o,u,f){for(var m=r._reactName,_=[];o!==null&&o!==u;){var T=o,D=T.alternate,G=T.stateNode;if(T=T.tag,D!==null&&D===u)break;T!==5&&T!==26&&T!==27||G===null||(D=G,f?(G=oi(o,m),G!=null&&_.unshift(fu(o,G,D))):f||(G=oi(o,m),G!=null&&_.push(fu(o,G,D)))),o=o.return}_.length!==0&&n.push({event:r,listeners:_})}var hI=/\r\n?/g,fI=/\u0000|\uFFFD/g;function M0(n){return(typeof n=="string"?n:""+n).replace(hI,`
`).replace(fI,"")}function k0(n,r){return r=M0(r),M0(n)===r}function st(n,r,o,u,f,m){switch(o){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||_n(n,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&_n(n,""+u);break;case"className":xn(n,"class",u);break;case"tabIndex":xn(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":xn(n,o,u);break;case"style":Dl(n,u,m);break;case"data":if(r!=="object"){xn(n,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Ha(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(r!=="input"&&st(n,r,"name",f.name,f,null),st(n,r,"formEncType",f.formEncType,f,null),st(n,r,"formMethod",f.formMethod,f,null),st(n,r,"formTarget",f.formTarget,f,null)):(st(n,r,"encType",f.encType,f,null),st(n,r,"method",f.method,f,null),st(n,r,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Ha(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=ai);break;case"onScroll":u!=null&&ze("scroll",n);break;case"onScrollEnd":u!=null&&ze("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Ha(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":ze("beforetoggle",n),ze("toggle",n),Ba(n,"popover",u);break;case"xlinkActuate":Lt(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Lt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Lt(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Lt(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Lt(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Lt(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Lt(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Lt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Lt(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ba(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=zc.get(o)||o,Ba(n,o,u))}}function op(n,r,o,u,f,m){switch(o){case"style":Dl(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof u=="string"?_n(n,u):(typeof u=="number"||typeof u=="bigint")&&_n(n,""+u);break;case"onScroll":u!=null&&ze("scroll",n);break;case"onScrollEnd":u!=null&&ze("scrollend",n);break;case"onClick":u!=null&&(n.onclick=ai);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wl.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),r=o.slice(2,f?o.length-7:void 0),m=n[Qt]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(r,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(r,u,f);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Ba(n,o,u)}}}function sn(n,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",n),ze("load",n);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var _=o[m];if(_!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:st(n,r,m,_,o,null)}}f&&st(n,r,"srcSet",o.srcSet,o,null),u&&st(n,r,"src",o.src,o,null);return;case"input":ze("invalid",n);var T=m=_=f=null,D=null,G=null;for(u in o)if(o.hasOwnProperty(u)){var Z=o[u];if(Z!=null)switch(u){case"name":f=Z;break;case"type":_=Z;break;case"checked":D=Z;break;case"defaultChecked":G=Z;break;case"value":m=Z;break;case"defaultValue":T=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,r));break;default:st(n,r,u,Z,o,null)}}kc(n,m,T,D,G,_,f,!1);return;case"select":ze("invalid",n),u=_=m=null;for(f in o)if(o.hasOwnProperty(f)&&(T=o[f],T!=null))switch(f){case"value":m=T;break;case"defaultValue":_=T;break;case"multiple":u=T;default:st(n,r,f,T,o,null)}r=m,o=_,n.multiple=!!u,r!=null?Mr(n,!!u,r,!1):o!=null&&Mr(n,!!u,o,!0);return;case"textarea":ze("invalid",n),m=f=u=null;for(_ in o)if(o.hasOwnProperty(_)&&(T=o[_],T!=null))switch(_){case"value":u=T;break;case"defaultValue":f=T;break;case"children":m=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:st(n,r,_,T,o,null)}kr(n,u,f,m);return;case"option":for(D in o)o.hasOwnProperty(D)&&(u=o[D],u!=null)&&(D==="selected"?n.selected=u&&typeof u!="function"&&typeof u!="symbol":st(n,r,D,u,o,null));return;case"dialog":ze("beforetoggle",n),ze("toggle",n),ze("cancel",n),ze("close",n);break;case"iframe":case"object":ze("load",n);break;case"video":case"audio":for(u=0;u<hu.length;u++)ze(hu[u],n);break;case"image":ze("error",n),ze("load",n);break;case"details":ze("toggle",n);break;case"embed":case"source":case"link":ze("error",n),ze("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in o)if(o.hasOwnProperty(G)&&(u=o[G],u!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:st(n,r,G,u,o,null)}return;default:if(Fa(r)){for(Z in o)o.hasOwnProperty(Z)&&(u=o[Z],u!==void 0&&op(n,r,Z,u,o,void 0));return}}for(T in o)o.hasOwnProperty(T)&&(u=o[T],u!=null&&st(n,r,T,u,o,null))}function dI(n,r,o,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,_=null,T=null,D=null,G=null,Z=null;for(X in o){var ie=o[X];if(o.hasOwnProperty(X)&&ie!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":D=ie;default:u.hasOwnProperty(X)||st(n,r,X,null,u,ie)}}for(var $ in u){var X=u[$];if(ie=o[$],u.hasOwnProperty($)&&(X!=null||ie!=null))switch($){case"type":m=X;break;case"name":f=X;break;case"checked":G=X;break;case"defaultChecked":Z=X;break;case"value":_=X;break;case"defaultValue":T=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,r));break;default:X!==ie&&st(n,r,$,X,u,ie)}}qa(n,_,T,D,G,Z,m,f);return;case"select":X=_=T=$=null;for(m in o)if(D=o[m],o.hasOwnProperty(m)&&D!=null)switch(m){case"value":break;case"multiple":X=D;default:u.hasOwnProperty(m)||st(n,r,m,null,u,D)}for(f in u)if(m=u[f],D=o[f],u.hasOwnProperty(f)&&(m!=null||D!=null))switch(f){case"value":$=m;break;case"defaultValue":T=m;break;case"multiple":_=m;default:m!==D&&st(n,r,f,m,u,D)}r=T,o=_,u=X,$!=null?Mr(n,!!o,$,!1):!!u!=!!o&&(r!=null?Mr(n,!!o,r,!0):Mr(n,!!o,o?[]:"",!1));return;case"textarea":X=$=null;for(T in o)if(f=o[T],o.hasOwnProperty(T)&&f!=null&&!u.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:st(n,r,T,null,u,f)}for(_ in u)if(f=u[_],m=o[_],u.hasOwnProperty(_)&&(f!=null||m!=null))switch(_){case"value":$=f;break;case"defaultValue":X=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&st(n,r,_,f,u,m)}Pc(n,$,X);return;case"option":for(var ye in o)$=o[ye],o.hasOwnProperty(ye)&&$!=null&&!u.hasOwnProperty(ye)&&(ye==="selected"?n.selected=!1:st(n,r,ye,null,u,$));for(D in u)$=u[D],X=o[D],u.hasOwnProperty(D)&&$!==X&&($!=null||X!=null)&&(D==="selected"?n.selected=$&&typeof $!="function"&&typeof $!="symbol":st(n,r,D,$,u,X));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in o)$=o[Ae],o.hasOwnProperty(Ae)&&$!=null&&!u.hasOwnProperty(Ae)&&st(n,r,Ae,null,u,$);for(G in u)if($=u[G],X=o[G],u.hasOwnProperty(G)&&$!==X&&($!=null||X!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,r));break;default:st(n,r,G,$,u,X)}return;default:if(Fa(r)){for(var at in o)$=o[at],o.hasOwnProperty(at)&&$!==void 0&&!u.hasOwnProperty(at)&&op(n,r,at,void 0,u,$);for(Z in u)$=u[Z],X=o[Z],!u.hasOwnProperty(Z)||$===X||$===void 0&&X===void 0||op(n,r,Z,$,u,X);return}}for(var L in o)$=o[L],o.hasOwnProperty(L)&&$!=null&&!u.hasOwnProperty(L)&&st(n,r,L,null,u,$);for(ie in u)$=u[ie],X=o[ie],!u.hasOwnProperty(ie)||$===X||$==null&&X==null||st(n,r,ie,$,u,X)}function P0(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function mI(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],m=f.transferSize,_=f.initiatorType,T=f.duration;if(m&&T&&P0(_)){for(_=0,T=f.responseEnd,u+=1;u<o.length;u++){var D=o[u],G=D.startTime;if(G>T)break;var Z=D.transferSize,ie=D.initiatorType;Z&&P0(ie)&&(D=D.responseEnd,_+=Z*(D<T?1:(T-G)/(D-G)))}if(--u,r+=8*(m+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var lp=null,up=null;function Uh(n){return n.nodeType===9?n:n.ownerDocument}function L0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function z0(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function cp(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var hp=null;function pI(){var n=window.event;return n&&n.type==="popstate"?n===hp?!1:(hp=n,!0):(hp=null,!1)}var U0=typeof setTimeout=="function"?setTimeout:void 0,gI=typeof clearTimeout=="function"?clearTimeout:void 0,j0=typeof Promise=="function"?Promise:void 0,yI=typeof queueMicrotask=="function"?queueMicrotask:typeof j0<"u"?function(n){return j0.resolve(null).then(n).catch(_I)}:U0;function _I(n){setTimeout(function(){throw n})}function rs(n){return n==="head"}function B0(n,r){var o=r,u=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(f),Ao(r);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")du(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,du(o);for(var m=o.firstChild;m;){var _=m.nextSibling,T=m.nodeName;m[Ai]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=_}}else o==="body"&&du(n.ownerDocument.body);o=f}while(o);Ao(r)}function q0(n,r){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function fp(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":fp(o),ja(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function vI(n,r,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Ai])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Jn(n.nextSibling),n===null)break}return null}function EI(n,r,o){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Jn(n.nextSibling),n===null))return null;return n}function F0(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=Jn(n.nextSibling),n===null))return null;return n}function dp(n){return n.data==="$?"||n.data==="$~"}function mp(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function bI(n,r){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||o.readyState!=="loading")r();else{var u=function(){r(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Jn(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var pp=null;function H0(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(r===0)return Jn(n.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}n=n.nextSibling}return null}function G0(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return n;r--}else o!=="/$"&&o!=="/&"||r++}n=n.previousSibling}return null}function K0(n,r,o){switch(r=Uh(o),n){case"html":if(n=r.documentElement,!n)throw Error(i(452));return n;case"head":if(n=r.head,!n)throw Error(i(453));return n;case"body":if(n=r.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function du(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);ja(n)}var Wn=new Map,Q0=new Set;function jh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var _r=oe.d;oe.d={f:TI,r:SI,D:wI,C:AI,L:II,m:xI,X:CI,S:RI,M:NI};function TI(){var n=_r.f(),r=Dh();return n||r}function SI(n){var r=Bn(n);r!==null&&r.tag===5&&r.type==="form"?cv(r):_r.r(n)}var To=typeof document>"u"?null:document;function $0(n,r,o){var u=To;if(u&&typeof r=="string"&&r){var f=yn(r);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),Q0.has(f)||(Q0.add(f),n={rel:n,crossOrigin:o,href:r},u.querySelector(f)===null&&(r=u.createElement("link"),sn(r,"link",n),Pt(r),u.head.appendChild(r)))}}function wI(n){_r.D(n),$0("dns-prefetch",n,null)}function AI(n,r){_r.C(n,r),$0("preconnect",n,r)}function II(n,r,o){_r.L(n,r,o);var u=To;if(u&&n&&r){var f='link[rel="preload"][as="'+yn(r)+'"]';r==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+yn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+yn(o.imageSizes)+'"]')):f+='[href="'+yn(n)+'"]';var m=f;switch(r){case"style":m=So(n);break;case"script":m=wo(n)}Wn.has(m)||(n=b({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:n,as:r},o),Wn.set(m,n),u.querySelector(f)!==null||r==="style"&&u.querySelector(mu(m))||r==="script"&&u.querySelector(pu(m))||(r=u.createElement("link"),sn(r,"link",n),Pt(r),u.head.appendChild(r)))}}function xI(n,r){_r.m(n,r);var o=To;if(o&&n){var u=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+yn(u)+'"][href="'+yn(n)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=wo(n)}if(!Wn.has(m)&&(n=b({rel:"modulepreload",href:n},r),Wn.set(m,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(pu(m)))return}u=o.createElement("link"),sn(u,"link",n),Pt(u),o.head.appendChild(u)}}}function RI(n,r,o){_r.S(n,r,o);var u=To;if(u&&n){var f=xi(u).hoistableStyles,m=So(n);r=r||"default";var _=f.get(m);if(!_){var T={loading:0,preload:null};if(_=u.querySelector(mu(m)))T.loading=5;else{n=b({rel:"stylesheet",href:n,"data-precedence":r},o),(o=Wn.get(m))&&gp(n,o);var D=_=u.createElement("link");Pt(D),sn(D,"link",n),D._p=new Promise(function(G,Z){D.onload=G,D.onerror=Z}),D.addEventListener("load",function(){T.loading|=1}),D.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Bh(_,r,u)}_={type:"stylesheet",instance:_,count:1,state:T},f.set(m,_)}}}function CI(n,r){_r.X(n,r);var o=To;if(o&&n){var u=xi(o).hoistableScripts,f=wo(n),m=u.get(f);m||(m=o.querySelector(pu(f)),m||(n=b({src:n,async:!0},r),(r=Wn.get(f))&&yp(n,r),m=o.createElement("script"),Pt(m),sn(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function NI(n,r){_r.M(n,r);var o=To;if(o&&n){var u=xi(o).hoistableScripts,f=wo(n),m=u.get(f);m||(m=o.querySelector(pu(f)),m||(n=b({src:n,async:!0,type:"module"},r),(r=Wn.get(f))&&yp(n,r),m=o.createElement("script"),Pt(m),sn(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function Y0(n,r,o,u){var f=(f=Ie.current)?jh(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=So(o.href),o=xi(f).hoistableStyles,u=o.get(r),u||(u={type:"style",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=So(o.href);var m=xi(f).hoistableStyles,_=m.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,_),(m=f.querySelector(mu(n)))&&!m._p&&(_.instance=m,_.state.loading=5),Wn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Wn.set(n,o),m||DI(f,n,o,_.state))),r&&u===null)throw Error(i(528,""));return _}if(r&&u!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=wo(o),o=xi(f).hoistableScripts,u=o.get(r),u||(u={type:"script",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function So(n){return'href="'+yn(n)+'"'}function mu(n){return'link[rel="stylesheet"]['+n+"]"}function X0(n){return b({},n,{"data-precedence":n.precedence,precedence:null})}function DI(n,r,o,u){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=n.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),sn(r,"link",o),Pt(r),n.head.appendChild(r))}function wo(n){return'[src="'+yn(n)+'"]'}function pu(n){return"script[async]"+n}function J0(n,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var u=n.querySelector('style[data-href~="'+yn(o.href)+'"]');if(u)return r.instance=u,Pt(u),u;var f=b({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Pt(u),sn(u,"style",f),Bh(u,o.precedence,n),r.instance=u;case"stylesheet":f=So(o.href);var m=n.querySelector(mu(f));if(m)return r.state.loading|=4,r.instance=m,Pt(m),m;u=X0(o),(f=Wn.get(f))&&gp(u,f),m=(n.ownerDocument||n).createElement("link"),Pt(m);var _=m;return _._p=new Promise(function(T,D){_.onload=T,_.onerror=D}),sn(m,"link",u),r.state.loading|=4,Bh(m,o.precedence,n),r.instance=m;case"script":return m=wo(o.src),(f=n.querySelector(pu(m)))?(r.instance=f,Pt(f),f):(u=o,(f=Wn.get(m))&&(u=b({},o),yp(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),Pt(f),sn(f,"link",u),n.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,Bh(u,o.precedence,n));return r.instance}function Bh(n,r,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,_=0;_<u.length;_++){var T=u[_];if(T.dataset.precedence===r)m=T;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(n,r.firstChild))}function gp(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function yp(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var qh=null;function W0(n,r,o){if(qh===null){var u=new Map,f=qh=new Map;f.set(o,u)}else f=qh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var m=o[f];if(!(m[Ai]||m[kt]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(r)||"";_=n+_;var T=u.get(_);T?T.push(m):u.set(_,[m])}}return u}function Z0(n,r,o){n=n.ownerDocument||n,n.head.insertBefore(o,r==="title"?n.querySelector("head > title"):null)}function VI(n,r,o){if(o===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(n=r.disabled,typeof r.precedence=="string"&&n==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function eE(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function OI(n,r,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=So(u.href),m=r.querySelector(mu(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=Fh.bind(n),r.then(n,n)),o.state.loading|=4,o.instance=m,Pt(m);return}m=r.ownerDocument||r,u=X0(u),(f=Wn.get(f))&&gp(u,f),m=m.createElement("link"),Pt(m);var _=m;_._p=new Promise(function(T,D){_.onload=T,_.onerror=D}),sn(m,"link",u),o.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Fh.bind(n),r.addEventListener("load",o),r.addEventListener("error",o))}}var _p=0;function MI(n,r){return n.stylesheets&&n.count===0&&Gh(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&Gh(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+r);0<n.imgBytes&&_p===0&&(_p=62500*mI());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Gh(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>_p?50:800)+r);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function Fh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Gh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Hh=null;function Gh(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Hh=new Map,r.forEach(kI,n),Hh=null,Fh.call(n))}function kI(n,r){if(!(r.state.loading&4)){var o=Hh.get(n);if(o)var u=o.get(null);else{o=new Map,Hh.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var _=f[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),u=_)}u&&o.set(null,u)}f=r.instance,_=f.getAttribute("data-precedence"),m=o.get(_)||u,m===u&&o.set(null,f),o.set(_,f),this.count++,u=Fh.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),r.state.loading|=4}}var gu={$$typeof:W,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function PI(n,r,o,u,f,m,_,T,D){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Si(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Si(0),this.hiddenUpdates=Si(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function tE(n,r,o,u,f,m,_,T,D,G,Z,ie){return n=new PI(n,r,o,_,D,G,Z,ie,T),r=1,m===!0&&(r|=24),m=Cn(3,null,null,r),n.current=m,m.stateNode=n,r=Jd(),r.refCount++,n.pooledCache=r,r.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:r},tm(m),n}function nE(n){return n?(n=eo,n):eo}function iE(n,r,o,u,f,m){f=nE(f),u.context===null?u.context=f:u.pendingContext=f,u=Qr(r),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=$r(n,u,r),o!==null&&(Sn(o,n,r),$l(o,n,r))}function rE(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<r?o:r}}function vp(n,r){rE(n,r),(n=n.alternate)&&rE(n,r)}function sE(n){if(n.tag===13||n.tag===31){var r=Xs(n,67108864);r!==null&&Sn(r,n,67108864),vp(n,67108864)}}function aE(n){if(n.tag===13||n.tag===31){var r=Mn();r=zs(r);var o=Xs(n,r);o!==null&&Sn(o,n,r),vp(n,r)}}var Kh=!0;function LI(n,r,o,u){var f=j.T;j.T=null;var m=oe.p;try{oe.p=2,Ep(n,r,o,u)}finally{oe.p=m,j.T=f}}function zI(n,r,o,u){var f=j.T;j.T=null;var m=oe.p;try{oe.p=8,Ep(n,r,o,u)}finally{oe.p=m,j.T=f}}function Ep(n,r,o,u){if(Kh){var f=bp(u);if(f===null)ap(n,r,u,Qh,o),lE(n,u);else if(jI(f,n,r,o,u))u.stopPropagation();else if(lE(n,u),r&4&&-1<UI.indexOf(n)){for(;f!==null;){var m=Bn(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=bi(m.pendingLanes);if(_!==0){var T=m;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var D=1<<31-xt(_);T.entanglements[1]|=D,_&=~D}ji(m),(Xe&6)===0&&(Ch=fn()+500,cu(0))}}break;case 31:case 13:T=Xs(m,2),T!==null&&Sn(T,m,2),Dh(),vp(m,2)}if(m=bp(u),m===null&&ap(n,r,u,Qh,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else ap(n,r,u,null,o)}}function bp(n){return n=qn(n),Tp(n)}var Qh=null;function Tp(n){if(Qh=null,n=Ii(n),n!==null){var r=l(n);if(r===null)n=null;else{var o=r.tag;if(o===13){if(n=c(r),n!==null)return n;n=null}else if(o===31){if(n=d(r),n!==null)return n;n=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return Qh=n,null}function oE(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ms()){case vl:return 2;case El:return 8;case Vr:case Rd:return 32;case Ac:return 268435456;default:return 32}default:return 32}}var Sp=!1,ss=null,as=null,os=null,yu=new Map,_u=new Map,ls=[],UI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lE(n,r){switch(n){case"focusin":case"focusout":ss=null;break;case"dragenter":case"dragleave":as=null;break;case"mouseover":case"mouseout":os=null;break;case"pointerover":case"pointerout":yu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":_u.delete(r.pointerId)}}function vu(n,r,o,u,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},r!==null&&(r=Bn(r),r!==null&&sE(r)),n):(n.eventSystemFlags|=u,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function jI(n,r,o,u,f){switch(r){case"focusin":return ss=vu(ss,n,r,o,u,f),!0;case"dragenter":return as=vu(as,n,r,o,u,f),!0;case"mouseover":return os=vu(os,n,r,o,u,f),!0;case"pointerover":var m=f.pointerId;return yu.set(m,vu(yu.get(m)||null,n,r,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,_u.set(m,vu(_u.get(m)||null,n,r,o,u,f)),!0}return!1}function uE(n){var r=Ii(n.target);if(r!==null){var o=l(r);if(o!==null){if(r=o.tag,r===13){if(r=c(o),r!==null){n.blockedOn=r,ri(n.priority,function(){aE(o)});return}}else if(r===31){if(r=d(o),r!==null){n.blockedOn=r,ri(n.priority,function(){aE(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function $h(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var o=bp(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Vl=u,o.target.dispatchEvent(u),Vl=null}else return r=Bn(o),r!==null&&sE(r),n.blockedOn=o,!1;r.shift()}return!0}function cE(n,r,o){$h(n)&&o.delete(r)}function BI(){Sp=!1,ss!==null&&$h(ss)&&(ss=null),as!==null&&$h(as)&&(as=null),os!==null&&$h(os)&&(os=null),yu.forEach(cE),_u.forEach(cE)}function Yh(n,r){n.blockedOn===r&&(n.blockedOn=null,Sp||(Sp=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,BI)))}var Xh=null;function hE(n){Xh!==n&&(Xh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Xh===n&&(Xh=null);for(var r=0;r<n.length;r+=3){var o=n[r],u=n[r+1],f=n[r+2];if(typeof u!="function"){if(Tp(u||o)===null)continue;break}var m=Bn(o);m!==null&&(n.splice(r,3),r-=3,bm(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Ao(n){function r(D){return Yh(D,n)}ss!==null&&Yh(ss,n),as!==null&&Yh(as,n),os!==null&&Yh(os,n),yu.forEach(r),_u.forEach(r);for(var o=0;o<ls.length;o++){var u=ls[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<ls.length&&(o=ls[0],o.blockedOn===null);)uE(o),o.blockedOn===null&&ls.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],_=f[Qt]||null;if(typeof m=="function")_||hE(o);else if(_){var T=null;if(m&&m.hasAttribute("formAction")){if(f=m,_=m[Qt]||null)T=_.formAction;else if(Tp(f)!==null)continue}else T=_.action;typeof T=="function"?o[u+1]=T:(o.splice(u,3),u-=3),hE(o)}}}function fE(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function wp(n){this._internalRoot=n}Jh.prototype.render=wp.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,u=Mn();iE(o,u,n,r,null,null)},Jh.prototype.unmount=wp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;iE(n.current,2,null,n,null,null),Dh(),r[wi]=null}};function Jh(n){this._internalRoot=n}Jh.prototype.unstable_scheduleHydration=function(n){if(n){var r=Dc();n={blockedOn:null,target:n,priority:r};for(var o=0;o<ls.length&&r!==0&&r<ls[o].priority;o++);ls.splice(o,0,n),o===0&&uE(n)}};var dE=e.version;if(dE!=="19.2.4")throw Error(i(527,dE,"19.2.4"));oe.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=g(r),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var qI={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wh.isDisabled&&Wh.supportsFiber)try{ni=Wh.inject(qI),Zt=Wh}catch{}}return bu.createRoot=function(n,r){if(!a(n))throw Error(i(299));var o=!1,u="",f=Ev,m=bv,_=Tv;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),r=tE(n,1,!1,null,null,o,u,null,f,m,_,fE),n[wi]=r.current,sp(n),new wp(r)},bu.hydrateRoot=function(n,r,o){if(!a(n))throw Error(i(299));var u=!1,f="",m=Ev,_=bv,T=Tv,D=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError),o.formState!==void 0&&(D=o.formState)),r=tE(n,1,!0,r,o??null,u,f,D,m,_,T,fE),r.context=nE(null),o=r.current,u=Mn(),u=zs(u),f=Qr(u),f.callback=null,$r(o,f,u),o=u,r.current.lanes=o,Ps(r,o),ji(r),n[wi]=r.current,sp(n),new Jh(r)},bu.version="19.2.4",bu}var SE;function ZI(){if(SE)return Rp.exports;SE=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Rp.exports=WI(),Rp.exports}var ex=ZI();var wE="popstate";function tx(s={}){function e(i,a){let{pathname:l,search:c,hash:d}=i.location;return Zp("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){return typeof a=="string"?a:Qu(a)}return ix(e,t,null,s)}function Et(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function $i(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function nx(){return Math.random().toString(36).substring(2,10)}function AE(s,e){return{usr:s.state,key:s.key,idx:e}}function Zp(s,e,t=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?ul(e):e,state:t,key:e&&e.key||i||nx()}}function Qu({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function ul(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function ix(s,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,c=a.history,d="POP",p=null,g=v();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function v(){return(c.state||{idx:null}).idx}function b(){d="POP";let U=v(),ee=U==null?null:U-g;g=U,p&&p({action:d,location:K.location,delta:ee})}function S(U,ee){d="PUSH";let J=Zp(K.location,U,ee);g=v()+1;let W=AE(J,g),se=K.createHref(J);try{c.pushState(W,"",se)}catch(ue){if(ue instanceof DOMException&&ue.name==="DataCloneError")throw ue;a.location.assign(se)}l&&p&&p({action:d,location:K.location,delta:1})}function N(U,ee){d="REPLACE";let J=Zp(K.location,U,ee);g=v();let W=AE(J,g),se=K.createHref(J);c.replaceState(W,"",se),l&&p&&p({action:d,location:K.location,delta:0})}function Q(U){return rx(U)}let K={get action(){return d},get location(){return s(a,c)},listen(U){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(wE,b),p=U,()=>{a.removeEventListener(wE,b),p=null}},createHref(U){return e(a,U)},createURL:Q,encodeLocation(U){let ee=Q(U);return{pathname:ee.pathname,search:ee.search,hash:ee.hash}},push:S,replace:N,go(U){return c.go(U)}};return K}function rx(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Et(t,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:Qu(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function NT(s,e,t="/"){return sx(s,e,t,!1)}function sx(s,e,t,i){let a=typeof e=="string"?ul(e):e,l=wr(a.pathname||"/",t);if(l==null)return null;let c=DT(s);ax(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let g=yx(l);d=px(c[p],g,i)}return d}function DT(s,e=[],t=[],i="",a=!1){let l=(c,d,p=a,g)=>{let v={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(i)&&p)return;Et(v.relativePath.startsWith(i),`Absolute route path "${v.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(i.length)}let b=Tr([i,v.relativePath]),S=t.concat(v);c.children&&c.children.length>0&&(Et(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),DT(c.children,e,S,b,p)),!(c.path==null&&!c.index)&&e.push({path:b,score:dx(b,c.index),routesMeta:S})};return s.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))l(c,d);else for(let p of VT(c.path))l(c,d,!0,p)}),e}function VT(s){let e=s.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let c=VT(i.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),a&&d.push(...c),d.map(p=>s.startsWith("/")&&p===""?"/":p)}function ax(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:mx(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var ox=/^:[\w-]+$/,lx=3,ux=2,cx=1,hx=10,fx=-2,IE=s=>s==="*";function dx(s,e){let t=s.split("/"),i=t.length;return t.some(IE)&&(i+=fx),e&&(i+=ux),t.filter(a=>!IE(a)).reduce((a,l)=>a+(ox.test(l)?lx:l===""?cx:hx),i)}function mx(s,e){return s.length===e.length&&s.slice(0,-1).every((i,a)=>i===e[a])?s[s.length-1]-e[e.length-1]:0}function px(s,e,t=!1){let{routesMeta:i}=s,a={},l="/",c=[];for(let d=0;d<i.length;++d){let p=i[d],g=d===i.length-1,v=l==="/"?e:e.slice(l.length)||"/",b=xf({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},v),S=p.route;if(!b&&g&&t&&!i[i.length-1].route.index&&(b=xf({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!b)return null;Object.assign(a,b.params),c.push({params:a,pathname:Tr([l,b.pathname]),pathnameBase:bx(Tr([l,b.pathnameBase])),route:S}),b.pathnameBase!=="/"&&(l=Tr([l,b.pathnameBase]))}return c}function xf(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,i]=gx(s.path,s.caseSensitive,s.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:i.reduce((g,{paramName:v,isOptional:b},S)=>{if(v==="*"){let Q=d[S]||"";c=l.slice(0,l.length-Q.length).replace(/(.)\/+$/,"$1")}const N=d[S];return b&&!N?g[v]=void 0:g[v]=(N||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:s}}function gx(s,e=!1,t=!0){$i(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],a="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(i.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),a+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":s!==""&&s!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function yx(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $i(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function wr(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=s.charAt(t);return i&&i!=="/"?null:s.slice(t)||"/"}var _x=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function vx(s,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof s=="string"?ul(s):s,l;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?l=xE(t.substring(1),"/"):l=xE(t,e)):l=e,{pathname:l,search:Tx(i),hash:Sx(a)}}function xE(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Vp(s,e,t,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ex(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function OT(s){let e=Ex(s);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function MT(s,e,t,i=!1){let a;typeof s=="string"?a=ul(s):(a={...s},Et(!a.pathname||!a.pathname.includes("?"),Vp("?","pathname","search",a)),Et(!a.pathname||!a.pathname.includes("#"),Vp("#","pathname","hash",a)),Et(!a.search||!a.search.includes("#"),Vp("#","search","hash",a)));let l=s===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let b=e.length-1;if(!i&&c.startsWith("..")){let S=c.split("/");for(;S[0]==="..";)S.shift(),b-=1;a.pathname=S.join("/")}d=b>=0?e[b]:"/"}let p=vx(a,d),g=c&&c!=="/"&&c.endsWith("/"),v=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||v)&&(p.pathname+="/"),p}var Tr=s=>s.join("/").replace(/\/\/+/g,"/"),bx=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),Tx=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,Sx=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,wx=class{constructor(s,e,t,i=!1){this.status=s,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Ax(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function Ix(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var kT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function PT(s,e){let t=s;if(typeof t!="string"||!_x.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,a=!1;if(kT)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),d=wr(c.pathname,e);c.origin===l.origin&&d!=null?t=d+c.search+c.hash:a=!0}catch{$i(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:a,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var LT=["POST","PUT","PATCH","DELETE"];new Set(LT);var xx=["GET",...LT];new Set(xx);var cl=z.createContext(null);cl.displayName="DataRouter";var td=z.createContext(null);td.displayName="DataRouterState";var Rx=z.createContext(!1),zT=z.createContext({isTransitioning:!1});zT.displayName="ViewTransition";var Cx=z.createContext(new Map);Cx.displayName="Fetchers";var Nx=z.createContext(null);Nx.displayName="Await";var ti=z.createContext(null);ti.displayName="Navigation";var uc=z.createContext(null);uc.displayName="Location";var Ji=z.createContext({outlet:null,matches:[],isDataRoute:!1});Ji.displayName="Route";var zg=z.createContext(null);zg.displayName="RouteError";var UT="REACT_ROUTER_ERROR",Dx="REDIRECT",Vx="ROUTE_ERROR_RESPONSE";function Ox(s){if(s.startsWith(`${UT}:${Dx}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Mx(s){if(s.startsWith(`${UT}:${Vx}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new wx(e.status,e.statusText,e.data)}catch{}}function kx(s,{relative:e}={}){Et(cc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=z.useContext(ti),{hash:a,pathname:l,search:c}=hc(s,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Tr([t,l])),i.createHref({pathname:d,search:c,hash:a})}function cc(){return z.useContext(uc)!=null}function Cr(){return Et(cc(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(uc).location}var jT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function BT(s){z.useContext(ti).static||z.useLayoutEffect(s)}function ka(){let{isDataRoute:s}=z.useContext(Ji);return s?$x():Px()}function Px(){Et(cc(),"useNavigate() may be used only in the context of a <Router> component.");let s=z.useContext(cl),{basename:e,navigator:t}=z.useContext(ti),{matches:i}=z.useContext(Ji),{pathname:a}=Cr(),l=JSON.stringify(OT(i)),c=z.useRef(!1);return BT(()=>{c.current=!0}),z.useCallback((p,g={})=>{if($i(c.current,jT),!c.current)return;if(typeof p=="number"){t.go(p);return}let v=MT(p,JSON.parse(l),a,g.relative==="path");s==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Tr([e,v.pathname])),(g.replace?t.replace:t.push)(v,g.state,g)},[e,t,l,a,s])}z.createContext(null);function qT(){let{matches:s}=z.useContext(Ji),e=s[s.length-1];return e?e.params:{}}function hc(s,{relative:e}={}){let{matches:t}=z.useContext(Ji),{pathname:i}=Cr(),a=JSON.stringify(OT(t));return z.useMemo(()=>MT(s,JSON.parse(a),i,e==="path"),[s,a,i,e])}function Lx(s,e){return FT(s,e)}function FT(s,e,t,i,a){Et(cc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=z.useContext(ti),{matches:c}=z.useContext(Ji),d=c[c.length-1],p=d?d.params:{},g=d?d.pathname:"/",v=d?d.pathnameBase:"/",b=d&&d.route;{let J=b&&b.path||"";GT(g,!b||J.endsWith("*")||J.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${J}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${J}"> to <Route path="${J==="/"?"*":`${J}/*`}">.`)}let S=Cr(),N;if(e){let J=typeof e=="string"?ul(e):e;Et(v==="/"||J.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${J.pathname}" was given in the \`location\` prop.`),N=J}else N=S;let Q=N.pathname||"/",K=Q;if(v!=="/"){let J=v.replace(/^\//,"").split("/");K="/"+Q.replace(/^\//,"").split("/").slice(J.length).join("/")}let U=NT(s,{pathname:K});$i(b||U!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),$i(U==null||U[U.length-1].route.element!==void 0||U[U.length-1].route.Component!==void 0||U[U.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ee=qx(U&&U.map(J=>Object.assign({},J,{params:Object.assign({},p,J.params),pathname:Tr([v,l.encodeLocation?l.encodeLocation(J.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:J.pathname]),pathnameBase:J.pathnameBase==="/"?v:Tr([v,l.encodeLocation?l.encodeLocation(J.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:J.pathnameBase])})),c,t,i,a);return e&&ee?z.createElement(uc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},ee):ee}function zx(){let s=Qx(),e=Ax(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",s),c=z.createElement(z.Fragment,null,z.createElement("p",null," Hey developer "),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:l},"ErrorBoundary")," or"," ",z.createElement("code",{style:l},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),t?z.createElement("pre",{style:a},t):null,c)}var Ux=z.createElement(zx,null),HT=class extends z.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const t=Mx(s.digest);t&&(s=t)}let e=s!==void 0?z.createElement(Ji.Provider,{value:this.props.routeContext},z.createElement(zg.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?z.createElement(jx,{error:s},e):e}};HT.contextType=Rx;var Op=new WeakMap;function jx({children:s,error:e}){let{basename:t}=z.useContext(ti);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=Ox(e.digest);if(i){let a=Op.get(e);if(a)throw a;let l=PT(i.location,t);if(kT&&!Op.get(e))if(l.isExternal||i.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:i.replace}));throw Op.set(e,c),c}return z.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return s}function Bx({routeContext:s,match:e,children:t}){let i=z.useContext(cl);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),z.createElement(Ji.Provider,{value:s},t)}function qx(s,e=[],t=null,i=null,a=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let l=s,c=t?.errors;if(c!=null){let v=l.findIndex(b=>b.route.id&&c?.[b.route.id]!==void 0);Et(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,v+1))}let d=!1,p=-1;if(t)for(let v=0;v<l.length;v++){let b=l[v];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(p=v),b.route.id){let{loaderData:S,errors:N}=t,Q=b.route.loader&&!S.hasOwnProperty(b.route.id)&&(!N||N[b.route.id]===void 0);if(b.route.lazy||Q){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let g=t&&i?(v,b)=>{i(v,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:Ix(t.matches),errorInfo:b})}:void 0;return l.reduceRight((v,b,S)=>{let N,Q=!1,K=null,U=null;t&&(N=c&&b.route.id?c[b.route.id]:void 0,K=b.route.errorElement||Ux,d&&(p<0&&S===0?(GT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),Q=!0,U=null):p===S&&(Q=!0,U=b.route.hydrateFallbackElement||null)));let ee=e.concat(l.slice(0,S+1)),J=()=>{let W;return N?W=K:Q?W=U:b.route.Component?W=z.createElement(b.route.Component,null):b.route.element?W=b.route.element:W=v,z.createElement(Bx,{match:b,routeContext:{outlet:v,matches:ee,isDataRoute:t!=null},children:W})};return t&&(b.route.ErrorBoundary||b.route.errorElement||S===0)?z.createElement(HT,{location:t.location,revalidation:t.revalidation,component:K,error:N,children:J(),routeContext:{outlet:null,matches:ee,isDataRoute:!0},onError:g}):J()},null)}function Ug(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Fx(s){let e=z.useContext(cl);return Et(e,Ug(s)),e}function Hx(s){let e=z.useContext(td);return Et(e,Ug(s)),e}function Gx(s){let e=z.useContext(Ji);return Et(e,Ug(s)),e}function jg(s){let e=Gx(s),t=e.matches[e.matches.length-1];return Et(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function Kx(){return jg("useRouteId")}function Qx(){let s=z.useContext(zg),e=Hx("useRouteError"),t=jg("useRouteError");return s!==void 0?s:e.errors?.[t]}function $x(){let{router:s}=Fx("useNavigate"),e=jg("useNavigate"),t=z.useRef(!1);return BT(()=>{t.current=!0}),z.useCallback(async(a,l={})=>{$i(t.current,jT),t.current&&(typeof a=="number"?await s.navigate(a):await s.navigate(a,{fromRouteId:e,...l}))},[s,e])}var RE={};function GT(s,e,t){!e&&!RE[s]&&(RE[s]=!0,$i(!1,t))}z.memo(Yx);function Yx({routes:s,future:e,state:t,onError:i}){return FT(s,void 0,t,i,e)}function ca(s){Et(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Xx({basename:s="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1,unstable_useTransitions:c}){Et(!cc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=s.replace(/^\/*/,"/"),p=z.useMemo(()=>({basename:d,navigator:a,static:l,unstable_useTransitions:c,future:{}}),[d,a,l,c]);typeof t=="string"&&(t=ul(t));let{pathname:g="/",search:v="",hash:b="",state:S=null,key:N="default"}=t,Q=z.useMemo(()=>{let K=wr(g,d);return K==null?null:{location:{pathname:K,search:v,hash:b,state:S,key:N},navigationType:i}},[d,g,v,b,S,N,i]);return $i(Q!=null,`<Router basename="${d}"> is not able to match the URL "${g}${v}${b}" because it does not start with the basename, so the <Router> won't render anything.`),Q==null?null:z.createElement(ti.Provider,{value:p},z.createElement(uc.Provider,{children:e,value:Q}))}function Jx({children:s,location:e}){return Lx(eg(s),e)}function eg(s,e=[]){let t=[];return z.Children.forEach(s,(i,a)=>{if(!z.isValidElement(i))return;let l=[...e,a];if(i.type===z.Fragment){t.push.apply(t,eg(i.props.children,l));return}Et(i.type===ca,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Et(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=eg(i.props.children,l)),t.push(c)}),t}var uf="get",cf="application/x-www-form-urlencoded";function nd(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function Wx(s){return nd(s)&&s.tagName.toLowerCase()==="button"}function Zx(s){return nd(s)&&s.tagName.toLowerCase()==="form"}function eR(s){return nd(s)&&s.tagName.toLowerCase()==="input"}function tR(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function nR(s,e){return s.button===0&&(!e||e==="_self")&&!tR(s)}var Zh=null;function iR(){if(Zh===null)try{new FormData(document.createElement("form"),0),Zh=!1}catch{Zh=!0}return Zh}var rR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Mp(s){return s!=null&&!rR.has(s)?($i(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${cf}"`),null):s}function sR(s,e){let t,i,a,l,c;if(Zx(s)){let d=s.getAttribute("action");i=d?wr(d,e):null,t=s.getAttribute("method")||uf,a=Mp(s.getAttribute("enctype"))||cf,l=new FormData(s)}else if(Wx(s)||eR(s)&&(s.type==="submit"||s.type==="image")){let d=s.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=s.getAttribute("formaction")||d.getAttribute("action");if(i=p?wr(p,e):null,t=s.getAttribute("formmethod")||d.getAttribute("method")||uf,a=Mp(s.getAttribute("formenctype"))||Mp(d.getAttribute("enctype"))||cf,l=new FormData(d,s),!iR()){let{name:g,type:v,value:b}=s;if(v==="image"){let S=g?`${g}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else g&&l.append(g,b)}}else{if(nd(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=uf,i=null,a=cf,c=s}return l&&a==="text/plain"&&(c=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Bg(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function aR(s,e,t,i){let a=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${i}`:a.pathname=`${a.pathname}.${i}`:a.pathname==="/"?a.pathname=`_root.${i}`:e&&wr(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${i}`,a}async function oR(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function lR(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function uR(s,e,t){let i=await Promise.all(s.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await oR(l,t);return c.links?c.links():[]}return[]}));return dR(i.flat(1).filter(lR).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function CE(s,e,t,i,a,l){let c=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,d=(p,g)=>t[g].pathname!==p.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==p.params["*"];return l==="assets"?e.filter((p,g)=>c(p,g)||d(p,g)):l==="data"?e.filter((p,g)=>{let v=i.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(c(p,g)||d(p,g))return!0;if(p.route.shouldRevalidate){let b=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function cR(s,e,{includeHydrateFallback:t}={}){return hR(s.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function hR(s){return[...new Set(s)]}function fR(s){let e={},t=Object.keys(s).sort();for(let i of t)e[i]=s[i];return e}function dR(s,e){let t=new Set;return new Set(e),s.reduce((i,a)=>{let l=JSON.stringify(fR(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}function KT(){let s=z.useContext(cl);return Bg(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function mR(){let s=z.useContext(td);return Bg(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var qg=z.createContext(void 0);qg.displayName="FrameworkContext";function QT(){let s=z.useContext(qg);return Bg(s,"You must render this element inside a <HydratedRouter> element"),s}function pR(s,e){let t=z.useContext(qg),[i,a]=z.useState(!1),[l,c]=z.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:g,onMouseLeave:v,onTouchStart:b}=e,S=z.useRef(null);z.useEffect(()=>{if(s==="render"&&c(!0),s==="viewport"){let K=ee=>{ee.forEach(J=>{c(J.isIntersecting)})},U=new IntersectionObserver(K,{threshold:.5});return S.current&&U.observe(S.current),()=>{U.disconnect()}}},[s]),z.useEffect(()=>{if(i){let K=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(K)}}},[i]);let N=()=>{a(!0)},Q=()=>{a(!1),c(!1)};return t?s!=="intent"?[l,S,{}]:[l,S,{onFocus:Tu(d,N),onBlur:Tu(p,Q),onMouseEnter:Tu(g,N),onMouseLeave:Tu(v,Q),onTouchStart:Tu(b,N)}]:[!1,S,{}]}function Tu(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function gR({page:s,...e}){let{router:t}=KT(),i=z.useMemo(()=>NT(t.routes,s,t.basename),[t.routes,s,t.basename]);return i?z.createElement(_R,{page:s,matches:i,...e}):null}function yR(s){let{manifest:e,routeModules:t}=QT(),[i,a]=z.useState([]);return z.useEffect(()=>{let l=!1;return uR(s,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[s,e,t]),i}function _R({page:s,matches:e,...t}){let i=Cr(),{future:a,manifest:l,routeModules:c}=QT(),{basename:d}=KT(),{loaderData:p,matches:g}=mR(),v=z.useMemo(()=>CE(s,e,g,l,i,"data"),[s,e,g,l,i]),b=z.useMemo(()=>CE(s,e,g,l,i,"assets"),[s,e,g,l,i]),S=z.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let K=new Set,U=!1;if(e.forEach(J=>{let W=l.routes[J.route.id];!W||!W.hasLoader||(!v.some(se=>se.route.id===J.route.id)&&J.route.id in p&&c[J.route.id]?.shouldRevalidate||W.hasClientLoader?U=!0:K.add(J.route.id))}),K.size===0)return[];let ee=aR(s,d,a.unstable_trailingSlashAwareDataRequests,"data");return U&&K.size>0&&ee.searchParams.set("_routes",e.filter(J=>K.has(J.route.id)).map(J=>J.route.id).join(",")),[ee.pathname+ee.search]},[d,a.unstable_trailingSlashAwareDataRequests,p,i,l,v,e,s,c]),N=z.useMemo(()=>cR(b,l),[b,l]),Q=yR(b);return z.createElement(z.Fragment,null,S.map(K=>z.createElement("link",{key:K,rel:"prefetch",as:"fetch",href:K,...t})),N.map(K=>z.createElement("link",{key:K,rel:"modulepreload",href:K,...t})),Q.map(({key:K,link:U})=>z.createElement("link",{key:K,nonce:t.nonce,...U,crossOrigin:U.crossOrigin??t.crossOrigin})))}function vR(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var ER=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ER&&(window.__reactRouterVersion="7.13.0")}catch{}function bR({basename:s,children:e,unstable_useTransitions:t,window:i}){let a=z.useRef();a.current==null&&(a.current=tx({window:i,v5Compat:!0}));let l=a.current,[c,d]=z.useState({action:l.action,location:l.location}),p=z.useCallback(g=>{t===!1?d(g):z.startTransition(()=>d(g))},[t]);return z.useLayoutEffect(()=>l.listen(p),[l,p]),z.createElement(Xx,{basename:s,children:e,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:t})}var $T=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,YT=z.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:c,state:d,target:p,to:g,preventScrollReset:v,viewTransition:b,unstable_defaultShouldRevalidate:S,...N},Q){let{basename:K,unstable_useTransitions:U}=z.useContext(ti),ee=typeof g=="string"&&$T.test(g),J=PT(g,K);g=J.to;let W=kx(g,{relative:a}),[se,ue,ce]=pR(i,N),x=AR(g,{replace:c,state:d,target:p,preventScrollReset:v,relative:a,viewTransition:b,unstable_defaultShouldRevalidate:S,unstable_useTransitions:U});function I(M){e&&e(M),M.defaultPrevented||x(M)}let R=z.createElement("a",{...N,...ce,href:J.absoluteURL||W,onClick:J.isExternal||l?e:I,ref:vR(Q,ue),target:p,"data-discover":!ee&&t==="render"?"true":void 0});return se&&!ee?z.createElement(z.Fragment,null,R,z.createElement(gR,{page:W})):R});YT.displayName="Link";var TR=z.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:d,children:p,...g},v){let b=hc(c,{relative:g.relative}),S=Cr(),N=z.useContext(td),{navigator:Q,basename:K}=z.useContext(ti),U=N!=null&&NR(b)&&d===!0,ee=Q.encodeLocation?Q.encodeLocation(b).pathname:b.pathname,J=S.pathname,W=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;t||(J=J.toLowerCase(),W=W?W.toLowerCase():null,ee=ee.toLowerCase()),W&&K&&(W=wr(W,K)||W);const se=ee!=="/"&&ee.endsWith("/")?ee.length-1:ee.length;let ue=J===ee||!a&&J.startsWith(ee)&&J.charAt(se)==="/",ce=W!=null&&(W===ee||!a&&W.startsWith(ee)&&W.charAt(ee.length)==="/"),x={isActive:ue,isPending:ce,isTransitioning:U},I=ue?e:void 0,R;typeof i=="function"?R=i(x):R=[i,ue?"active":null,ce?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let M=typeof l=="function"?l(x):l;return z.createElement(YT,{...g,"aria-current":I,className:R,ref:v,style:M,to:c,viewTransition:d},typeof p=="function"?p(x):p)});TR.displayName="NavLink";var SR=z.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:c=uf,action:d,onSubmit:p,relative:g,preventScrollReset:v,viewTransition:b,unstable_defaultShouldRevalidate:S,...N},Q)=>{let{unstable_useTransitions:K}=z.useContext(ti),U=RR(),ee=CR(d,{relative:g}),J=c.toLowerCase()==="get"?"get":"post",W=typeof d=="string"&&$T.test(d),se=ue=>{if(p&&p(ue),ue.defaultPrevented)return;ue.preventDefault();let ce=ue.nativeEvent.submitter,x=ce?.getAttribute("formmethod")||c,I=()=>U(ce||ue.currentTarget,{fetcherKey:e,method:x,navigate:t,replace:a,state:l,relative:g,preventScrollReset:v,viewTransition:b,unstable_defaultShouldRevalidate:S});K&&t!==!1?z.startTransition(()=>I()):I()};return z.createElement("form",{ref:Q,method:J,action:ee,onSubmit:i?p:se,...N,"data-discover":!W&&s==="render"?"true":void 0})});SR.displayName="Form";function wR(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function XT(s){let e=z.useContext(cl);return Et(e,wR(s)),e}function AR(s,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d,unstable_useTransitions:p}={}){let g=ka(),v=Cr(),b=hc(s,{relative:l});return z.useCallback(S=>{if(nR(S,e)){S.preventDefault();let N=t!==void 0?t:Qu(v)===Qu(b),Q=()=>g(s,{replace:N,state:i,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d});p?z.startTransition(()=>Q()):Q()}},[v,g,b,t,i,e,s,a,l,c,d,p])}var IR=0,xR=()=>`__${String(++IR)}__`;function RR(){let{router:s}=XT("useSubmit"),{basename:e}=z.useContext(ti),t=Kx(),i=s.fetch,a=s.navigate;return z.useCallback(async(l,c={})=>{let{action:d,method:p,encType:g,formData:v,body:b}=sR(l,e);if(c.navigate===!1){let S=c.fetcherKey||xR();await i(S,t,c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:v,body:b,formMethod:c.method||p,formEncType:c.encType||g,flushSync:c.flushSync})}else await a(c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:v,body:b,formMethod:c.method||p,formEncType:c.encType||g,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[i,a,e,t])}function CR(s,{relative:e}={}){let{basename:t}=z.useContext(ti),i=z.useContext(Ji);Et(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...hc(s||".",{relative:e})},c=Cr();if(s==null){l.search=c.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(v=>v==="")){d.delete("index"),p.filter(b=>b).forEach(b=>d.append("index",b));let v=d.toString();l.search=v?`?${v}`:""}}return(!s||s===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Tr([t,l.pathname])),Qu(l)}function NR(s,{relative:e}={}){let t=z.useContext(zT);Et(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=XT("useViewTransitionState"),a=hc(s,{relative:e});if(!t.isTransitioning)return!1;let l=wr(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=wr(t.nextLocation.pathname,i)||t.nextLocation.pathname;return xf(a.pathname,c)!=null||xf(a.pathname,l)!=null}const JT=(...s)=>s.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();const DR=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const VR=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase());const NE=s=>{const e=VR(s);return e.charAt(0).toUpperCase()+e.slice(1)};var OR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const MR=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const kR=z.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:a="",children:l,iconNode:c,...d},p)=>z.createElement("svg",{ref:p,...OR,width:e,height:e,stroke:s,strokeWidth:i?Number(t)*24/Number(e):t,className:JT("lucide",a),...!l&&!MR(d)&&{"aria-hidden":"true"},...d},[...c.map(([g,v])=>z.createElement(g,v)),...Array.isArray(l)?l:[l]]));const At=(s,e)=>{const t=z.forwardRef(({className:i,...a},l)=>z.createElement(kR,{ref:l,iconNode:e,className:JT(`lucide-${DR(NE(s))}`,`lucide-${s}`,i),...a}));return t.displayName=NE(s),t};const PR=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],id=At("arrow-left",PR);const LR=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],DE=At("award",LR);const zR=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],WT=At("book-open",zR);const UR=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Lo=At("circle-check-big",UR);const jR=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],BR=At("clock",jR);const qR=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],FR=At("funnel",qR);const HR=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],GR=At("github",HR);const KR=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],QR=At("key",KR);const $R=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],VE=At("log-out",$R);const YR=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],XR=At("moon",YR);const JR=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],WR=At("party-popper",JR);const ZR=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],kp=At("refresh-ccw",ZR);const e2=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],t2=At("save",e2);const n2=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],i2=At("search",n2);const r2=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],s2=At("settings",r2);const a2=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],o2=At("sun",a2);const l2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Cu=At("target",l2);const u2=[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]],c2=At("thumbs-up",u2);const h2=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],f2=At("triangle-alert",h2);const d2=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],tg=At("trophy",d2);const m2=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ZT=At("user",m2);const p2=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],g2=At("x",p2),y2=({sections:s,progress:e,onSelectTheme:t,onSelectLesson:i})=>{const[a,l]=z.useState(""),c=z.useMemo(()=>{const d=a.trim().toLowerCase();return d?(s||[]).map(p=>{const g=p.items.filter(v=>v.name.toLowerCase().includes(d));return{...p,items:g}}).filter(p=>p.items.length>0):s||[]},[s,a]);return A.jsxs("div",{className:"page container",children:[A.jsx("div",{style:{display:"flex",alignItems:"flex-start",marginTop:"60px"},children:A.jsxs("div",{children:[A.jsx("h1",{className:"page-title",children:"Entranement Code de la Route"}),A.jsx("p",{className:"muted",children:"Choisissez un sujet et lancez le Quiz."})]})}),A.jsxs("div",{className:"search",style:{position:"relative"},children:[A.jsx(i2,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--muted)"}}),A.jsx("input",{className:"input",type:"search",placeholder:"Rechercher un thme",value:a,onChange:d=>l(d.target.value),"aria-label":"Rechercher un thme",style:{paddingLeft:"40px"}})]}),c.map((d,p)=>A.jsxs("div",{className:"section mb-5",children:[d.title&&A.jsx("h2",{className:"mt-4 mb-3",style:{fontSize:"1.4rem"},children:d.title}),A.jsx("div",{className:"theme-grid",children:d.items.map(g=>{const v=e&&e[g.id],b=v?v.score:null,S=b!==null,N=g.id==="examen_B"||d.title==="Examen",Q=g.lessonFile||!N&&g.file;return A.jsxs("div",{className:"theme-card card",style:{padding:"16px",display:"flex",flexDirection:"column",gap:"12px",position:"relative",overflow:"hidden",...N?{borderColor:"var(--warning)",background:"linear-gradient(to bottom right, var(--surface), rgba(245, 158, 11, 0.1))",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.15)"}:{}},children:[S&&A.jsxs("div",{style:{position:"absolute",top:0,right:0,background:"var(--primary)",color:"white",fontSize:"10px",padding:"2px 8px",borderBottomLeftRadius:"8px"},children:[b,"/",g.totalQuestions]}),A.jsxs("div",{style:{flex:1},children:[A.jsx("div",{className:"theme-name",style:{fontWeight:600,marginBottom:4,paddingRight:S?"40px":"0",...N?{color:"var(--warning)",fontSize:"1.1rem"}:{}},children:g.name}),g.totalQuestions>0&&A.jsxs("div",{className:"theme-meta",style:{color:"var(--muted)",fontSize:"13px"},children:[g.totalQuestions," questions"]})]}),A.jsxs("div",{style:{display:"flex",gap:"8px"},children:[g.file?A.jsx("button",{type:"button",className:`btn-primary ${N?"btn-exam":""}`,style:{flex:1,padding:"8px",display:"grid",placeItems:"center",...N?{background:"var(--warning)",borderColor:"var(--warning)",color:"#000"}:{}},onClick:()=>t(g),children:"Quiz"}):A.jsx("button",{type:"button",className:"btn-primary",style:{flex:1,padding:"8px",opacity:.5,cursor:"not-allowed",display:"grid",placeItems:"center"},disabled:!0,children:"Quiz"}),!N&&A.jsxs("button",{type:"button",className:"btn-ghost",style:{flex:1,padding:"8px",border:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",...Q?{}:{opacity:.5,cursor:"not-allowed"}},disabled:!Q,onClick:()=>{if(!Q)return;const K=g.lessonFile||(g.file?g.file.replace(".json",".html"):null);K&&i(K)},children:[A.jsx(WT,{size:16})," Leon"]})]})]},g.id)})})]},p)),c.length===0&&A.jsx("p",{className:"muted text-center mt-5",children:"Aucun rsultat trouv."})]})},Fg=({onOpenProfile:s,toggleTheme:e,isDarkMode:t,showProfileButton:i=!0})=>A.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",display:"flex",gap:"4px",zIndex:1e3,background:"var(--surface)",padding:"4px",borderRadius:"30px",border:"1px solid var(--border)",boxShadow:"var(--shadow-sm)"},children:[i&&A.jsx("button",{className:"btn-ghost",onClick:s,title:"Mon Profil",style:{width:"36px",height:"36px",display:"grid",placeItems:"center",padding:0,borderRadius:"50%"},children:A.jsx(ZT,{size:20})}),A.jsx("button",{className:"theme-toggle btn-ghost",onClick:e,title:t?"Mode clair":"Mode sombre",style:{width:"36px",height:"36px",display:"grid",placeItems:"center",padding:0,borderRadius:"50%"},children:t?A.jsx(o2,{size:20}):A.jsx(XR,{size:20})})]}),_2=({sections:s,progress:e,toggleTheme:t,isDarkMode:i})=>{const a=ka(),l=d=>{a(`/quiz/${d.id}`)},c=d=>{a(`/lecon/${encodeURIComponent(d)}`)};return A.jsxs(A.Fragment,{children:[A.jsx(Fg,{onOpenProfile:()=>a("/profil"),toggleTheme:t,isDarkMode:i}),A.jsx(y2,{sections:s,progress:e,onSelectTheme:l,onSelectLesson:c})]})},v2="modulepreload",E2=function(s){return"/permis-online-free/"+s},OE={},Pp=function(e,t,i){let a=Promise.resolve();if(t&&t.length>0){let p=function(g){return Promise.all(g.map(v=>Promise.resolve(v).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");a=p(t.map(g=>{if(g=E2(g),g in OE)return;OE[g]=!0;const v=g.endsWith(".css"),b=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${b}`))return;const S=document.createElement("link");if(S.rel=v?"stylesheet":v2,v||(S.as="script"),S.crossOrigin="",S.href=g,d&&S.setAttribute("nonce",d),document.head.appendChild(S),v)return new Promise((N,Q)=>{S.addEventListener("load",N),S.addEventListener("error",()=>Q(new Error(`Unable to preload CSS for ${g}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return a.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})},b2=({question:s,onAnswer:e,currentIndex:t,total:i,instantFeedback:a,autoPlayAudio:l,onNext:c,isLastQuestion:d,fileName:p,onQuestionUpdated:g})=>{const[v,b]=z.useState(null),[S,N]=z.useState(!1),[Q,K]=z.useState(!1),[U,ee]=z.useState(""),[J,W]=z.useState(null),[se,ue]=z.useState(!1),ce=3e4,[x,I]=z.useState(ce),R=z.useRef(null),M=z.useRef(null),O=z.useRef(!1),[k,C]=z.useState(!1),[ke,qe]=z.useState(null),[j,oe]=z.useState(null),[te,pe]=z.useState(""),[we,V]=z.useState(null),F=ke||s,ae=!!ke;z.useEffect(()=>{C(!1),qe(null),oe(null),pe("")},[s?.id]),z.useEffect(()=>{const xe=()=>{const ft=window.speechSynthesis.getVoices().filter(Ot=>Ot.lang.startsWith("fr")),Je=ft.find(Ot=>Ot.name.includes("Google"))||ft.find(Ot=>Ot.name.includes("Microsoft"))||ft.find(Ot=>Ot.name.includes("Natural"))||ft[0];V(Je)};return xe(),window.speechSynthesis.onvoiceschanged=xe,()=>{window.speechSynthesis.onvoiceschanged=null}},[]),z.useEffect(()=>{if(l&&F){window.speechSynthesis.cancel();let xe=F.question||"";if(F.propositions&&Array.isArray(F.propositions)){const ft=F.propositions.map(Je=>`${Je.letter}... ${Je.text}`).join(". ");xe+=`. ${ft}`}else F.type==="yes_no"&&(xe+=". A... Oui. B... Non.");const Ke=new SpeechSynthesisUtterance(xe);we&&(Ke.voice=we),Ke.lang="fr-FR",Ke.rate=1,window.speechSynthesis.speak(Ke)}else window.speechSynthesis.cancel();return()=>{window.speechSynthesis.cancel()}},[F,l,we]),z.useEffect(()=>{if(b(null),N(!1),ee(""),W(null),ue(!1),I(ce),clearInterval(R.current),clearTimeout(M.current),ae&&(j===null||j==="error"))return;const Ke=Date.now();return R.current=setInterval(()=>{const ft=Date.now()-Ke,Je=Math.max(0,ce-ft);I(Je)},100),M.current=setTimeout(()=>{O.current||(ue(!0),b(null),N(!0),W("incorrect"),e({isCorrect:!1,userAnswer:null,correctAnswer:F.correctAnswer,questionId:F.id}))},ce),()=>{clearInterval(R.current),clearTimeout(M.current)}},[F?.id,F?.question,ae,j]),z.useEffect(()=>{O.current=S},[S]);const fe=z.useMemo(()=>{const xe=F?.correctAnswer??"";return String(xe).trim()},[F?.correctAnswer]),be=xe=>{const Ke=String(xe??"").trim(),ft=String(fe??"").trim(),Je=Number(Ke.replace(",",".")),Ot=Number(ft.replace(",","."));return!Number.isNaN(Je)&&!Number.isNaN(Ot)&&Ke!==""&&ft!==""?Je===Ot:Ke.toUpperCase()===ft.toUpperCase()},Ie=xe=>{if(S)return;b(xe),N(!0);const Ke=xe===F.correctAnswer;W(Ke?"correct":"incorrect"),clearInterval(R.current),clearTimeout(M.current),e({isCorrect:Ke,userAnswer:xe,correctAnswer:F.correctAnswer,questionId:F.id})},Me=()=>{if(S)return;const xe=String(U??"").trim();if(!xe)return;const Ke=be(xe);b(xe),N(!0),W(Ke?"correct":"incorrect"),clearInterval(R.current),clearTimeout(M.current),e({isCorrect:Ke,userAnswer:xe,correctAnswer:F.correctAnswer,questionId:F.id})},_t=xe=>se?"dimmed":S&&a?xe===F.correctAnswer?"correct":xe===v&&v!==F.correctAnswer?"incorrect":"dimmed":v==null?"":xe===v?"selected":"dimmed",ct=async()=>{const xe=localStorage.getItem("groq_api_key");if(!xe){alert("Veuillez ajouter votre cl API Groq dans le Profil.");return}C(!0),oe(null);try{const{fixQuestionWithGroq:Ke}=await Pp(async()=>{const{fixQuestionWithGroq:Je}=await import("./groq-BVVAa691-1771285130885.js");return{fixQuestionWithGroq:Je}},[]),ft=await Ke(s,xe);qe(ft)}catch(Ke){console.error(Ke),alert("Erreur lors de la correction : "+Ke.message)}finally{C(!1)}},Wi=async()=>{if(!ke)return;const{saveQuestionLocally:xe}=await Pp(async()=>{const{saveQuestionLocally:Wt}=await import("./api-Y8rDLHL4-1771285130885.js");return{saveQuestionLocally:Wt}},[]),{saveQuestionToGitHub:Ke,getUser:ft}=await Pp(async()=>{const{saveQuestionToGitHub:Wt,getUser:Zi}=await import("./githubClient-mDmn_zaa-1771285130885.js");return{saveQuestionToGitHub:Wt,getUser:Zi}},[]);oe("saving");const Je=s.sourceFile||p;if(console.log("[QuestionCard] Debug Fix:",{id:s.id,sourceFile:s.sourceFile,propFileName:p,effective:Je}),!Je){oe("error"),pe("Erreur: Nom de fichier manquant");return}try{await xe(Je,s.id,ke)}catch{}const Ot=localStorage.getItem("github_token");if(!Ot){navigator.clipboard.writeText(JSON.stringify(ke,null,2)),oe("success"),pe("Copi (Pas de token GitHub)");return}try{const Wt=await ft(Ot),Zi="skyreks00",Os="permis-online-free",bt=`public/data/${Je}`,It=`fix(content): correct question ${s.id} in ${Je} (AI)`;console.log("[handleConfirmFix] Saving question to GitHub...");const gn=await Ke(Ot,Zi,Os,bt,s.id,ke,It,Wt);if(gn.type==="unchanged"){oe("success"),pe("Aucun changement dtect");return}oe("success"),gn.type==="pr"?pe(A.jsx("a",{href:gn.url,target:"_blank",rel:"noreferrer",children:"PR cre !"})):gn.type==="commit"?pe(A.jsx("a",{href:gn.url,target:"_blank",rel:"noreferrer",children:"Commit effectu !"})):pe("Sauvegard !"),g&&g(ke),setTimeout(()=>{qe(null),oe(null)},2e3)}catch(Wt){console.error("[handleConfirmFix] GitHub save error:",Wt),oe("error"),pe("Erreur GitHub: "+(Wt.message||"Problme de sauvegarde"))}};return A.jsxs("div",{className:`question-card ${se?"timed-out":""} ${ae?"correction-mode":""}`,style:ae?{border:"2px solid var(--warning)",boxShadow:"0 0 15px rgba(255, 193, 7, 0.3)"}:{},children:[A.jsxs("div",{className:"question-header",children:[A.jsxs("div",{className:"question-progress","aria-live":"polite",children:["Question ",Math.min(t+1,i)," / ",i,ae&&A.jsx("span",{className:"text-warning font-bold ml-2",children:" CORRECTION SUGGRE"})]}),localStorage.getItem("groq_api_key")&&!ae&&A.jsx("button",{onClick:ct,disabled:k,className:"btn-ghost",style:{fontSize:"12px",padding:"4px 8px",display:"flex",alignItems:"center",gap:"4px"},title:"Suggrer une correction",children:k?"...":" Corriger"})]}),ae&&(j===null||j==="error")&&A.jsxs("div",{className:"p-3 bg-surface-2 border-b border-warning mb-4 rounded flex flex-col gap-2",children:[A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsx("span",{className:"text-sm font-bold text-warning",children:"Valider cette correction ?"}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{onClick:()=>qe(null),className:"btn-ghost text-xs bg-surface-1",disabled:j==="saving",children:"Annuler"}),A.jsx("button",{onClick:Wi,className:"btn-primary text-xs bg-warning border-warning text-black",disabled:j==="saving",children:j==="saving"?"Envoi...":"Valider"})]})]}),j==="error"&&A.jsx("div",{className:"text-danger text-xs",children:te})]}),(j==="success"||j==="saving")&&A.jsxs("div",{className:"toast-notification",children:[A.jsx(Lo,{size:24,className:j==="success"?"text-success":"text-muted"}),A.jsxs("div",{children:[A.jsx("div",{className:"font-bold text-sm",children:j==="success"?"Correction envoye !":"Envoi en cours..."}),j==="success"&&A.jsx("div",{className:"text-xs text-muted",children:te}),j==="saving"&&A.jsx("div",{className:"text-xs text-muted",children:"Vous pouvez continuer  jouer"})]})]}),A.jsxs("div",{className:"question-main",style:{opacity:ae&&(j===null||j==="error")?.6:1,filter:ae&&(j===null||j==="error")?"grayscale(100%)":"none",transition:"all 0.3s ease"},children:[A.jsx("div",{className:"question-left",children:F.image?A.jsx("div",{className:"question-image",children:A.jsx("img",{src:F.image,alt:"Illustration"})}):A.jsx("div",{className:"question-image placeholder"})}),A.jsxs("div",{className:"question-right",children:[A.jsx("div",{className:"question-text",children:A.jsx("div",{children:A.jsx("div",{className:"question-text-inner",children:F.question})})}),A.jsx("div",{className:"answers",children:(F.type==="multiple_choice"||F.type==="single_choice")&&F.propositions?F.propositions.map((xe,Ke)=>{const ft=S&&a&&xe.letter===F.correctAnswer,Je=k||S||ae&&(j===null||j==="error");return A.jsxs("button",{className:`answer-btn ${_t(xe.letter)}`,onClick:()=>Ie(xe.letter),disabled:Je,children:[A.jsx("div",{className:"answer-key",children:xe.letter}),A.jsx("div",{className:"answer-text",children:xe.text}),ft&&A.jsx(Lo,{size:20,className:"answer-check"})]},`${xe.letter}-${Ke}`)}):F.type==="yes_no"?A.jsxs(A.Fragment,{children:[A.jsxs("button",{className:`answer-btn ${_t("OUI")}`,onClick:()=>Ie("OUI"),disabled:k||S||ae&&(j===null||j==="error"),children:[A.jsx("div",{className:"answer-key",children:"A"}),A.jsx("div",{className:"answer-text",children:"Oui"}),S&&a&&F.correctAnswer==="OUI"&&A.jsx(Lo,{size:20,className:"answer-check"})]}),A.jsxs("button",{className:`answer-btn ${_t("NON")}`,onClick:()=>Ie("NON"),disabled:k||S||ae&&(j===null||j==="error"),children:[A.jsx("div",{className:"answer-key",children:"B"}),A.jsx("div",{className:"answer-text",children:"Non"}),S&&a&&F.correctAnswer==="NON"&&A.jsx(Lo,{size:20,className:"answer-check"})]})]}):A.jsx("div",{className:"number-wrap",children:A.jsxs("div",{className:`number-field ${S?a?J==="correct"?"correct":"incorrect":"selected":""}`,children:[A.jsx("input",{className:"number-input",type:"text",inputMode:"numeric",placeholder:"Votre rponse",value:U,disabled:k||S||ae&&(j===null||j==="error"),onChange:xe=>ee(xe.target.value),onKeyDown:xe=>{xe.key==="Enter"&&Me()}}),A.jsx("button",{className:"number-submit",type:"button",onClick:Me,disabled:k||S||!String(U??"").trim()||ae&&(j===null||j==="error"),children:"OK"})]})})}),A.jsx("div",{className:"countdown","aria-hidden":"true",children:A.jsx("div",{className:"countdown-track",children:A.jsx("div",{className:"countdown-fill",style:{width:`${Math.max(0,Math.min(100,x/ce*100))}%`}})})})]})]}),S&&A.jsxs("div",{className:"quiz-nav-buttons",children:[a&&s?.explanation&&A.jsxs("button",{onClick:()=>K(!0),className:"btn-explanation",children:[A.jsx(WT,{size:20}),"Explication"]}),A.jsx("button",{type:"button",onClick:c,className:"btn-next",children:d?"Terminer":"Suivant"})]}),Q&&A.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.75)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",backdropFilter:"blur(4px)"},onClick:()=>K(!1),children:A.jsxs("div",{style:{background:"var(--surface)",color:"var(--foreground)",padding:"24px",borderRadius:"16px",maxWidth:"600px",width:"100%",maxHeight:"90vh",overflowY:"auto",position:"relative",boxShadow:"var(--shadow-lg)",border:"1px solid var(--border)"},onClick:xe=>xe.stopPropagation(),className:"animate-in fade-in zoom-in-95 duration-200",children:[A.jsx("button",{onClick:()=>K(!1),style:{position:"absolute",top:"16px",right:"16px",background:"transparent",border:"none",color:"var(--muted-foreground)",cursor:"pointer",padding:"4px"},children:A.jsx(g2,{size:24})}),A.jsx("div",{style:{lineHeight:"1.6",fontSize:"1.05rem"},children:s.explanation.replace(/^\s*INFO\W*PERMIS\W*DE\W*CONDUIRE\W*/i,"").replace(/^\s*Signification\W*/i,"").replace(/^\s*Explication\W*/i,"").replace(/^\s*LE(?:|C)ON\s*\d+(?:\s*[\-:]\s*[^.\n]*)?(?:[.\n]\s*)?/i,"").trim()})]})})]})},T2=({questions:s,themeName:e,onFinish:t,onExit:i,instantFeedback:a,autoPlayAudio:l,fileName:c})=>{const[d,p]=z.useState(0),[g,v]=z.useState(0),[b,S]=z.useState(!1),[N,Q]=z.useState(s);z.useRef(0);const K=z.useRef([]),U=N[d],ee=({isCorrect:se,userAnswer:ue,correctAnswer:ce,questionId:x})=>{console.log("DEBUG: handleAnswer called",{currentQuestionIndex:d,questionId:x,isCorrect:se}),K.current[d]={questionId:x,userAnswer:ue,correctAnswer:ce,isCorrect:se},console.log("DEBUG: answersRef updated",JSON.stringify(K.current));const I=K.current.filter(R=>R&&R.isCorrect).length;console.log("DEBUG: newScore calculated",I),v(I),S(!0)},J=()=>{if(d<N.length-1)p(d+1),S(!1);else{const se=K.current.filter(ue=>ue&&ue.isCorrect).length;t({score:se,answers:K.current})}},W=async se=>{const ue=[...N];ue[d]=se,Q(ue)};return A.jsxs("div",{className:"quiz",children:[A.jsx("div",{className:"quiz-topbar",children:A.jsxs("button",{className:"exit-btn",onClick:i,style:{display:"flex",alignItems:"center",gap:"6px"},children:[A.jsx(id,{size:18})," Retour"]})}),A.jsx("div",{className:"quiz-content",children:A.jsx(b2,{title:e,question:U,onAnswer:ee,currentIndex:d,total:N.length,instantFeedback:a,autoPlayAudio:l,onNext:J,isLastQuestion:d===N.length-1,fileName:c,onQuestionUpdated:W},`${d}-${U?.id??"q"}`)})]})},S2="https://raw.githubusercontent.com/skyreks00/permis-online-free/main/public/data",e1=async(s,e=null)=>{const t=Date.now(),i=`${S2}/${s}?_=${t}`;try{console.log(`[ContentLoader] Fetching ${s} from GitHub...`);const a=await fetch(i);if(!a.ok)throw new Error(`HTTP ${a.status}: ${a.statusText}`);const l=await a.json();return console.log(`[ContentLoader] Successfully loaded ${s} from GitHub`),l}catch(a){console.warn(`[ContentLoader] Failed to load ${s} from GitHub:`,a.message),console.log(`[ContentLoader] Trying local fallback for ${s}...`)}try{console.log(`[ContentLoader] Fetching ${s} from local data...`);const a=await fetch(`data/${s}`);if(a.ok){const l=await a.json();return console.log(`[ContentLoader] Successfully loaded ${s} from local data`),l}}catch{console.warn(`[ContentLoader] Local fetch also failed for ${s}`)}if(e)return console.log(`[ContentLoader] Using bundled fallback for ${s}`),e;throw new Error(`Failed to load ${s} from all sources`)},ng=async(s,e=null)=>e1(s,e),w2=async(s=null)=>e1("themes.json",s),A2=({sections:s,onFinishQuiz:e,onPatchProgress:t,instantFeedback:i,autoPlayAudio:a,toggleTheme:l,isDarkMode:c,onMistakesCorrected:d})=>{const{themeId:p}=qT(),g=ka(),v=Cr(),[b,S]=z.useState([]),[N,Q]=z.useState(null),[K,U]=z.useState(!0),[ee,J]=z.useState(null);z.useEffect(()=>{const se=async()=>{if(v.state?.questions&&v.state?.theme){Q(v.state.theme),S(v.state.questions),U(!1);return}if(!s||s.length===0)return;if(U(!0),J(null),v.state&&v.state.questions){Q({id:"review",name:v.state.title||"Rvision des erreurs",file:null}),S(v.state.questions),U(!1);return}let ue=null;if(p==="examen_B")ue={id:"examen_B",name:"Examen Blanc",file:"examen_B.json"};else for(const ce of s){const I=(ce.items||ce.themes||[]).find(R=>R.id===p);if(I){ue=I;break}}if(!ue){J("Thme non trouv"),U(!1);return}Q(ue);try{let x=(await ng(ue.file)).questions||[];x.length===0&&(x=(await(await fetch(`/permis-online-free/data/${ue.file}`)).json()).questions||[]);const I=[...x].sort(()=>Math.random()-.5);ue.id.includes("examen")?S(I.slice(0,50)):S(I)}catch(ce){console.error("Failed to load questions",ce),J("Erreur de chargement des questions")}finally{U(!1)}};(s.length>0||v.state&&v.state.questions)&&se()},[p,s,v.state]);const W=se=>{const ue=typeof se=="number"?se:se.score,ce=typeof se=="object"?se.answers:[],x=v.state&&v.state.isReview;if(e&&!x)e(N.id,ue,b.length,se.answers);else if(x&&t){const R=(se.answers||[]).filter(M=>M&&M.isCorrect);if(R.length>0){const M={};b.forEach(k=>{k.originalThemeId&&(M[k.id]=k.originalThemeId)});const O={};R.forEach(k=>{const C=M[k.questionId];C&&(O[C]||(O[C]=[]),O[C].push(k))}),Object.keys(O).forEach(k=>{t(k,O[k])})}}g("/resultats",{state:{score:ue,total:b.length,questions:b,answers:ce,isExamMode:N.id.includes("examen"),isReviewSession:x}})};return K||!s||s.length===0?A.jsxs("div",{className:"p-8 text-center",children:[A.jsx("span",{className:"loading loading-spinner loading-lg"}),A.jsx("br",{}),"Chargement du quiz..."]}):ee?A.jsxs("div",{className:"p-8 text-center text-error",children:[ee," ",A.jsx("br",{}),A.jsx("button",{onClick:()=>g("/"),className:"btn mt-4",children:"Retour"})]}):A.jsxs(A.Fragment,{children:[A.jsx(Fg,{showProfileButton:!1,toggleTheme:l,isDarkMode:c}),N&&b.length>0&&A.jsx(T2,{questions:b,themeName:N.name,onFinish:W,onExit:()=>g("/"),instantFeedback:i&&!N.id.includes("examen"),autoPlayAudio:a,fileName:N.file})]})},I2=({score:s,total:e,questions:t=[],answers:i=[],showReview:a=!1,onRestart:l,onBackToThemes:c,isExamMode:d,isReviewOnly:p=!1,customErrorItems:g=null,onBackToProfile:v})=>{const b=e>0?Math.round(s/e*100):0,N=p?{icon:A.jsx(Cu,{size:48,className:"text-primary"}),text:"Mode Rvision",tone:"info"}:d?e-s>=9?{icon:A.jsx(Cu,{size:48,className:"text-danger"}),text:"CHEC - 9 fautes ou plus",tone:"danger"}:{icon:A.jsx(tg,{size:48,className:"text-success"}),text:"RUSSI !",tone:"success"}:b>=90?{icon:A.jsx(tg,{size:48,className:"text-success"}),text:"Excellent !",tone:"success"}:b>=75?{icon:A.jsx(c2,{size:48,className:"text-success"}),text:"Trs bien !",tone:"success"}:b>=50?{icon:A.jsx(DE,{size:48,className:"text-warning"}),text:"Pas mal !",tone:"warn"}:{icon:A.jsx(Cu,{size:48,className:"text-danger"}),text:"Continue  t'entraner !",tone:"danger"},Q=g||(t||[]).map((U,ee)=>({q:U,a:i?.[ee],idx:ee})).filter(({a:U})=>U&&U.isCorrect===!1),K=U=>U?U.replace(/^\s*INFO\W*PERMIS\W*DE\W*CONDUIRE\W*/i,"").replace(/^\s*Signification\W*/i,"").replace(/^\s*Explication\W*/i,"").replace(/^\s*LE(?:|C)ON\s*\d+(?:\s*[\-:]\s*[^.\n]*)?(?:[.\n]\s*)?/i,"").trim():"";return A.jsxs("div",{className:"results container",style:{textAlign:"center"},children:[p?A.jsxs("div",{style:{margin:"20px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[A.jsx(Cu,{size:32,className:"text-primary"}),A.jsx("h1",{style:{margin:0},children:"Rvision des erreurs"})]}),A.jsx("p",{className:"text-muted",children:"Voici les points  retravailler. Prenez le temps de lire les explications."}),A.jsxs("button",{onClick:v,className:"btn-secondary flex items-center gap-2",children:[A.jsx(id,{size:20})," Retour au profil"]})]}):A.jsxs(A.Fragment,{children:[A.jsxs("div",{style:{margin:"20px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[N.icon,A.jsx("h1",{style:{margin:0},children:N.text})]}),A.jsxs("p",{style:{fontSize:"1.2rem",marginBottom:"20px"},children:["Score: ",A.jsx("strong",{children:s})," / ",e," (",b,"%)"]}),A.jsxs("p",{children:["Correctes: ",A.jsx("strong",{children:s})," | Incorrectes: ",A.jsx("strong",{children:e-s})]}),A.jsxs("div",{className:"results-actions",style:{justifyContent:"center"},children:[A.jsx("button",{type:"button",className:"btn-primary",onClick:l,children:"Recommencer"}),A.jsx("button",{type:"button",onClick:c,children:"Choisir un autre thme"}),A.jsx("button",{type:"button",className:"btn-secondary",onClick:v,children:"Retour au profil"})]})]}),(a||p)&&A.jsx("div",{style:{marginTop:"30px",textAlign:"left",display:"flex",flexDirection:"column",gap:"32px"},children:Q.length===0?A.jsxs("div",{className:"card",style:{padding:"32px",textAlign:"center"},children:[A.jsxs("p",{className:"muted",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"1.2rem",margin:0},children:[A.jsx(WR,{size:24})," Aucune erreur  rviser. Bravo !"]}),p&&A.jsx("button",{onClick:v,className:"btn-primary mt-4",children:"Retour au profil"})]}):Q.map(({q:U,a:ee,idx:J})=>A.jsxs("div",{className:"question-card card",children:[A.jsx("div",{className:"question-header",children:A.jsxs("div",{className:"question-progress",style:{color:"var(--danger)"},children:["Question ",J+1]})}),A.jsxs("div",{className:"question-main",children:[A.jsx("div",{className:"question-left",children:U.image?A.jsx("div",{className:"question-image",children:A.jsx("img",{src:U.image,alt:"Illustration"})}):A.jsx("div",{className:"question-image placeholder"})}),A.jsxs("div",{className:"question-right",children:[A.jsx("div",{className:"question-text",children:A.jsx("div",{className:"question-text-inner",children:U.question})}),A.jsx("div",{className:"answers",children:U.type==="multiple_choice"&&U.propositions?U.propositions.map(W=>{const se=W.letter===U.correctAnswer,ue=ee?.userAnswer===W.letter;let ce="";return se?ce="correct":ue?ce="incorrect":ce="dimmed",A.jsxs("button",{className:`answer-btn ${ce}`,disabled:!0,style:{opacity:1,cursor:"default"},children:[A.jsx("div",{className:"answer-key",children:W.letter}),A.jsx("div",{className:"answer-text",children:W.text}),se&&A.jsx(Lo,{size:20,className:"text-success"})]},W.letter)}):U.type==="yes_no"?A.jsx(A.Fragment,{children:["OUI","NON"].map((W,se)=>{const ue=se===0?"A":"B",ce=se===0?"Oui":"Non",x=W===U.correctAnswer,I=ee?.userAnswer===W;let R="";return x?R="correct":I?R="incorrect":R="dimmed",A.jsxs("button",{className:`answer-btn ${R}`,disabled:!0,style:{opacity:1,cursor:"default"},children:[A.jsx("div",{className:"answer-key",children:ue}),A.jsx("div",{className:"answer-text",children:ce}),x&&A.jsx(Lo,{size:20,className:"text-success"})]},W)})}):A.jsxs("div",{className:"p-4 border rounded bg-surface-2",children:[A.jsxs("p",{children:[A.jsx("strong",{children:"Votre rponse:"})," ",ee?.userAnswer||""]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Rponse attendue:"})," ",U.correctAnswer]})]})})]})]}),U.explanation&&A.jsxs("div",{className:"explanation animate-fade-in",children:[A.jsxs("div",{className:"explanation-title",style:{display:"flex",alignItems:"center",gap:"8px"},children:[A.jsx(DE,{size:20,className:"text-primary"}),"Conseil"]}),A.jsx("div",{className:"explanation-text",style:{fontSize:"1.05rem",lineHeight:1.6},children:K(U.explanation)})]})]},`${U.id}-${J}`))})]})},ME=({toggleTheme:s,isDarkMode:e})=>{const t=Cr(),i=ka(),a=t.state||{};z.useEffect(()=>{t.state||console.warn("No state found in ResultsPage, redirecting to home.")},[t.state]);const l=()=>{const g=a.results?{...a,...a.results}:a;if(g.isReviewSession){const v=(g.questions||[]).filter((b,S)=>{const N=g.answers?.[S];return N&&N.isCorrect===!1});if(v.length>0){i("/quiz/review",{state:{questions:v,title:g.title||"Rvision des erreurs",isReview:!0}});return}}if(g.questions&&g.questions.length>0){const b=g.questions[0].originalThemeId||g.themeId;i(b?`/quiz/${b}`:"/")}else i("/")},c=()=>{i("/")},d=()=>{i("/profil")},p=a.results?{...a,...a.results}:a;return A.jsx("div",{className:"page animate-fade-in",children:A.jsx(I2,{...p,onRestart:l,onBackToThemes:c,onBackToProfile:d,toggleTheme:s,isDarkMode:e,showReview:!0})})},x2=()=>{};var kE={};const t1=function(s){const e=[];let t=0;for(let i=0;i<s.length;i++){let a=s.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},R2=function(s){const e=[];let t=0,i=0;for(;t<s.length;){const a=s[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=s[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=s[t++],c=s[t++],d=s[t++],p=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=s[t++],c=s[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},n1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<s.length;a+=3){const l=s[a],c=a+1<s.length,d=c?s[a+1]:0,p=a+2<s.length,g=p?s[a+2]:0,v=l>>2,b=(l&3)<<4|d>>4;let S=(d&15)<<2|g>>6,N=g&63;p||(N=64,c||(S=64)),i.push(t[v],t[b],t[S],t[N])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(t1(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):R2(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<s.length;){const l=t[s.charAt(a++)],d=a<s.length?t[s.charAt(a)]:0;++a;const g=a<s.length?t[s.charAt(a)]:64;++a;const b=a<s.length?t[s.charAt(a)]:64;if(++a,l==null||d==null||g==null||b==null)throw new C2;const S=l<<2|d>>4;if(i.push(S),g!==64){const N=d<<4&240|g>>2;if(i.push(N),b!==64){const Q=g<<6&192|b;i.push(Q)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class C2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const N2=function(s){const e=t1(s);return n1.encodeByteArray(e,!0)},i1=function(s){return N2(s).replace(/\./g,"")},r1=function(s){try{return n1.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function s1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const D2=()=>s1().__FIREBASE_DEFAULTS__,V2=()=>{if(typeof process>"u"||typeof kE>"u")return;const s=kE.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},O2=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&r1(s[1]);return e&&JSON.parse(e)},rd=()=>{try{return x2()||D2()||V2()||O2()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},M2=s=>rd()?.emulatorHosts?.[s],a1=()=>rd()?.config,o1=s=>rd()?.[`_${s}`];class k2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function hl(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function l1(s){return(await fetch(s,{credentials:"include"})).ok}const ku={};function P2(){const s={prod:[],emulator:[]};for(const e of Object.keys(ku))ku[e]?s.emulator.push(e):s.prod.push(e);return s}function L2(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let PE=!1;function z2(s,e){if(typeof window>"u"||typeof document>"u"||!hl(window.location.host)||ku[s]===e||ku[s]||PE)return;ku[s]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=P2().prod.length>0;function c(){const S=document.getElementById(i);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,N){S.setAttribute("width","24"),S.setAttribute("id",N),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{PE=!0,c()},S}function v(S,N){S.setAttribute("id",N),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function b(){const S=L2(i),N=t("text"),Q=document.getElementById(N)||document.createElement("span"),K=t("learnmore"),U=document.getElementById(K)||document.createElement("a"),ee=t("preprendIcon"),J=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const W=S.element;d(W),v(U,K);const se=g();p(J,ee),W.append(J,Q,U,se),document.body.appendChild(W)}l?(Q.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Q.innerText="Preview backend running in this workspace."),Q.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function Gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function U2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gt())}function u1(){const s=rd()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function j2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function B2(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function q2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function F2(){const s=Gt();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function c1(){return!u1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function h1(){return!u1()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function f1(){try{return typeof indexedDB=="object"}catch{return!1}}function H2(){return new Promise((s,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),s(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const G2="FirebaseError";class Nr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=G2,Object.setPrototypeOf(this,Nr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fc.prototype.create)}}class fc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?K2(l,i):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Nr(a,d,i)}}function K2(s,e){return s.replace(Q2,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const Q2=/\{\$([^}]+)}/g;function $2(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Aa(s,e){if(s===e)return!0;const t=Object.keys(s),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=s[a],c=e[a];if(LE(l)&&LE(c)){if(!Aa(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function LE(s){return s!==null&&typeof s=="object"}function dc(s){const e=[];for(const[t,i]of Object.entries(s))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Y2(s,e){const t=new X2(s,e);return t.subscribe.bind(t)}class X2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");J2(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=Lp),a.error===void 0&&(a.error=Lp),a.complete===void 0&&(a.complete=Lp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function J2(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function Lp(){}function vi(s){return s&&s._delegate?s._delegate:s}class Ia{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ha="[DEFAULT]";class W2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new k2;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eC(e))try{this.getOrInitializeService({instanceIdentifier:ha})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=ha){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ha){return this.instances.has(e)}getOptions(e=ha){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Z2(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ha){return this.component?this.component.multipleInstances?e:ha:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Z2(s){return s===ha?void 0:s}function eC(s){return s.instantiationMode==="EAGER"}class tC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new W2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Be;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Be||(Be={}));const nC={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},iC=Be.INFO,rC={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},sC=(s,e,...t)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),a=rC[e];if(a)console[a](`[${i}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hg{constructor(e){this.name=e,this._logLevel=iC,this._logHandler=sC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const aC=(s,e)=>e.some(t=>s instanceof t);let zE,UE;function oC(){return zE||(zE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lC(){return UE||(UE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const d1=new WeakMap,ig=new WeakMap,m1=new WeakMap,zp=new WeakMap,Gg=new WeakMap;function uC(s){const e=new Promise((t,i)=>{const a=()=>{s.removeEventListener("success",l),s.removeEventListener("error",c)},l=()=>{t(Es(s.result)),a()},c=()=>{i(s.error),a()};s.addEventListener("success",l),s.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&d1.set(t,s)}).catch(()=>{}),Gg.set(e,s),e}function cC(s){if(ig.has(s))return;const e=new Promise((t,i)=>{const a=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",c),s.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{i(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",l),s.addEventListener("error",c),s.addEventListener("abort",c)});ig.set(s,e)}let rg={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return ig.get(s);if(e==="objectStoreNames")return s.objectStoreNames||m1.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Es(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function hC(s){rg=s(rg)}function fC(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=s.call(Up(this),e,...t);return m1.set(i,e.sort?e.sort():[e]),Es(i)}:lC().includes(s)?function(...e){return s.apply(Up(this),e),Es(d1.get(this))}:function(...e){return Es(s.apply(Up(this),e))}}function dC(s){return typeof s=="function"?fC(s):(s instanceof IDBTransaction&&cC(s),aC(s,oC())?new Proxy(s,rg):s)}function Es(s){if(s instanceof IDBRequest)return uC(s);if(zp.has(s))return zp.get(s);const e=dC(s);return e!==s&&(zp.set(s,e),Gg.set(e,s)),e}const Up=s=>Gg.get(s);function mC(s,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(s,e),d=Es(c);return i&&c.addEventListener("upgradeneeded",p=>{i(Es(c.result),p.oldVersion,p.newVersion,Es(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const pC=["get","getKey","getAll","getAllKeys","count"],gC=["put","add","delete","clear"],jp=new Map;function jE(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(jp.get(e))return jp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=gC.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||pC.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,a?"readwrite":"readonly");let g=p.store;return i&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&p.done]))[0]};return jp.set(e,l),l}hC(s=>({...s,get:(e,t,i)=>jE(e,t)||s.get(e,t,i),has:(e,t)=>!!jE(e,t)||s.has(e,t)}));class yC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(_C(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function _C(s){return s.getComponent()?.type==="VERSION"}const sg="@firebase/app",BE="0.14.8";const Ar=new Hg("@firebase/app"),vC="@firebase/app-compat",EC="@firebase/analytics-compat",bC="@firebase/analytics",TC="@firebase/app-check-compat",SC="@firebase/app-check",wC="@firebase/auth",AC="@firebase/auth-compat",IC="@firebase/database",xC="@firebase/data-connect",RC="@firebase/database-compat",CC="@firebase/functions",NC="@firebase/functions-compat",DC="@firebase/installations",VC="@firebase/installations-compat",OC="@firebase/messaging",MC="@firebase/messaging-compat",kC="@firebase/performance",PC="@firebase/performance-compat",LC="@firebase/remote-config",zC="@firebase/remote-config-compat",UC="@firebase/storage",jC="@firebase/storage-compat",BC="@firebase/firestore",qC="@firebase/ai",FC="@firebase/firestore-compat",HC="firebase",GC="12.9.0";const ag="[DEFAULT]",KC={[sg]:"fire-core",[vC]:"fire-core-compat",[bC]:"fire-analytics",[EC]:"fire-analytics-compat",[SC]:"fire-app-check",[TC]:"fire-app-check-compat",[wC]:"fire-auth",[AC]:"fire-auth-compat",[IC]:"fire-rtdb",[xC]:"fire-data-connect",[RC]:"fire-rtdb-compat",[CC]:"fire-fn",[NC]:"fire-fn-compat",[DC]:"fire-iid",[VC]:"fire-iid-compat",[OC]:"fire-fcm",[MC]:"fire-fcm-compat",[kC]:"fire-perf",[PC]:"fire-perf-compat",[LC]:"fire-rc",[zC]:"fire-rc-compat",[UC]:"fire-gcs",[jC]:"fire-gcs-compat",[BC]:"fire-fst",[FC]:"fire-fst-compat",[qC]:"fire-vertex","fire-js":"fire-js",[HC]:"fire-js-all"};const Rf=new Map,QC=new Map,og=new Map;function qE(s,e){try{s.container.addComponent(e)}catch(t){Ar.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Fo(s){const e=s.name;if(og.has(e))return Ar.debug(`There were multiple attempts to register component ${e}.`),!1;og.set(e,s);for(const t of Rf.values())qE(t,s);for(const t of QC.values())qE(t,s);return!0}function Kg(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function pi(s){return s==null?!1:s.settings!==void 0}const $C={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bs=new fc("app","Firebase",$C);class YC{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ia("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bs.create("app-deleted",{appName:this._name})}}const fl=GC;function p1(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const i={name:ag,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw bs.create("bad-app-name",{appName:String(a)});if(t||(t=a1()),!t)throw bs.create("no-options");const l=Rf.get(a);if(l){if(Aa(t,l.options)&&Aa(i,l.config))return l;throw bs.create("duplicate-app",{appName:a})}const c=new tC(a);for(const p of og.values())c.addComponent(p);const d=new YC(t,i,c);return Rf.set(a,d),d}function XC(s=ag){const e=Rf.get(s);if(!e&&s===ag&&a1())return p1();if(!e)throw bs.create("no-app",{appName:s});return e}function Ts(s,e,t){let i=KC[s]??s;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ar.warn(c.join(" "));return}Fo(new Ia(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const JC="firebase-heartbeat-database",WC=1,$u="firebase-heartbeat-store";let Bp=null;function g1(){return Bp||(Bp=mC(JC,WC,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore($u)}catch(t){console.warn(t)}}}}).catch(s=>{throw bs.create("idb-open",{originalErrorMessage:s.message})})),Bp}async function ZC(s){try{const t=(await g1()).transaction($u),i=await t.objectStore($u).get(y1(s));return await t.done,i}catch(e){if(e instanceof Nr)Ar.warn(e.message);else{const t=bs.create("idb-get",{originalErrorMessage:e?.message});Ar.warn(t.message)}}}async function FE(s,e){try{const i=(await g1()).transaction($u,"readwrite");await i.objectStore($u).put(e,y1(s)),await i.done}catch(t){if(t instanceof Nr)Ar.warn(t.message);else{const i=bs.create("idb-set",{originalErrorMessage:t?.message});Ar.warn(i.message)}}}function y1(s){return`${s.name}!${s.options.appId}`}const eN=1024,tN=30;class nN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new rN(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=HE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>tN){const a=sN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ar.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=HE(),{heartbeatsToSend:t,unsentEntries:i}=iN(this._heartbeatsCache.heartbeats),a=i1(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Ar.warn(e),""}}}function HE(){return new Date().toISOString().substring(0,10)}function iN(s,e=eN){const t=[];let i=s.slice();for(const a of s){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),GE(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),GE(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class rN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return f1()?H2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await ZC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return FE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return FE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function GE(s){return i1(JSON.stringify({version:2,heartbeats:s})).length}function sN(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let i=1;i<s.length;i++)s[i].date<t&&(t=s[i].date,e=i);return e}function aN(s){Fo(new Ia("platform-logger",e=>new yC(e),"PRIVATE")),Fo(new Ia("heartbeat",e=>new nN(e),"PRIVATE")),Ts(sg,BE,s),Ts(sg,BE,"esm2020"),Ts("fire-js","")}aN("");var oN="firebase",lN="12.9.0";Ts(oN,lN,"app");function _1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uN=_1,v1=new fc("auth","Firebase",_1());const Cf=new Hg("@firebase/auth");function cN(s,...e){Cf.logLevel<=Be.WARN&&Cf.warn(`Auth (${fl}): ${s}`,...e)}function hf(s,...e){Cf.logLevel<=Be.ERROR&&Cf.error(`Auth (${fl}): ${s}`,...e)}function Yi(s,...e){throw $g(s,...e)}function yi(s,...e){return $g(s,...e)}function Qg(s,e,t){const i={...uN(),[e]:t};return new fc("auth","Firebase",i).create(e,{appName:s.name})}function Ea(s){return Qg(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hN(s,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Yi(s,"argument-error"),Qg(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $g(s,...e){if(typeof s!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(t,...i)}return v1.create(s,...e)}function Re(s,e,...t){if(!s)throw $g(e,...t)}function vr(s){const e="INTERNAL ASSERTION FAILED: "+s;throw hf(e),new Error(e)}function Ir(s,e){s||vr(e)}function lg(){return typeof self<"u"&&self.location?.href||""}function fN(){return KE()==="http:"||KE()==="https:"}function KE(){return typeof self<"u"&&self.location?.protocol||null}function dN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fN()||B2()||"connection"in navigator)?navigator.onLine:!0}function mN(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class mc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ir(t>e,"Short delay should be less than long delay!"),this.isMobile=U2()||q2()}get(){return dN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Yg(s,e){Ir(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class E1{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const pN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const gN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],yN=new mc(3e4,6e4);function Xg(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function dl(s,e,t,i,a={}){return b1(s,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const d=dc({key:s.config.apiKey,...c}).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const g={method:e,headers:p,...l};return j2()||(g.referrerPolicy="no-referrer"),s.emulatorConfig&&hl(s.emulatorConfig.host)&&(g.credentials="include"),E1.fetch()(await T1(s,s.config.apiHost,t,d),g)})}async function b1(s,e,t){s._canInitEmulator=!1;const i={...pN,...e};try{const a=new vN(s),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw ef(s,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw ef(s,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw ef(s,"email-already-in-use",c);if(p==="USER_DISABLED")throw ef(s,"user-disabled",c);const v=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Qg(s,v,g);Yi(s,v)}}catch(a){if(a instanceof Nr)throw a;Yi(s,"network-request-failed",{message:String(a)})}}async function _N(s,e,t,i,a={}){const l=await dl(s,e,t,i,a);return"mfaPendingCredential"in l&&Yi(s,"multi-factor-auth-required",{_serverResponse:l}),l}async function T1(s,e,t,i){const a=`${e}${t}?${i}`,l=s,c=l.config.emulator?Yg(s.config,a):`${s.config.apiScheme}://${a}`;return gN.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class vN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(yi(this.auth,"network-request-failed")),yN.get())})}}function ef(s,e,t){const i={appName:s.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=yi(s,e,i);return a.customData._tokenResponse=t,a}async function EN(s,e){return dl(s,"POST","/v1/accounts:delete",e)}async function Nf(s,e){return dl(s,"POST","/v1/accounts:lookup",e)}function Pu(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bN(s,e=!1){const t=vi(s),i=await t.getIdToken(e),a=Jg(i);Re(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:i,authTime:Pu(qp(a.auth_time)),issuedAtTime:Pu(qp(a.iat)),expirationTime:Pu(qp(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function qp(s){return Number(s)*1e3}function Jg(s){const[e,t,i]=s.split(".");if(e===void 0||t===void 0||i===void 0)return hf("JWT malformed, contained fewer than 3 sections"),null;try{const a=r1(t);return a?JSON.parse(a):(hf("Failed to decode base64 JWT payload"),null)}catch(a){return hf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function QE(s){const e=Jg(s);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Yu(s,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Nr&&TN(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function TN({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class SN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class ug{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pu(this.lastLoginAt),this.creationTime=Pu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Df(s){const e=s.auth,t=await s.getIdToken(),i=await Yu(s,Nf(e,{idToken:t}));Re(i?.users.length,e,"internal-error");const a=i.users[0];s._notifyReloadListener(a);const l=a.providerUserInfo?.length?S1(a.providerUserInfo):[],c=AN(s.providerData,l),d=s.isAnonymous,p=!(s.email&&a.passwordHash)&&!c?.length,g=d?p:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new ug(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(s,v)}async function wN(s){const e=vi(s);await Df(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function AN(s,e){return[...s.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function S1(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function IN(s,e){const t=await b1(s,{},async()=>{const i=dc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=s.config,c=await T1(s,a,"/v1/token",`key=${l}`),d=await s._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:i};return s.emulatorConfig&&hl(s.emulatorConfig.host)&&(p.credentials="include"),E1.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function xN(s,e){return dl(s,"POST","/v2/accounts:revokeToken",Xg(s,e))}class zo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):QE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const t=QE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await IN(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,c=new zo;return i&&(Re(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(Re(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Re(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zo,this.toJSON())}_performRefresh(){return vr("not implemented")}}function cs(s,e){Re(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class gi{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new SN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new ug(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Yu(this,this.stsTokenManager.getToken(this.auth,e));return Re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return bN(this,e)}reload(){return wN(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new gi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Df(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pi(this.auth.app))return Promise.reject(Ea(this.auth));const e=await this.getIdToken();return await Yu(this,EN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:b,emailVerified:S,isAnonymous:N,providerData:Q,stsTokenManager:K}=t;Re(b&&K,e,"internal-error");const U=zo.fromJSON(this.name,K);Re(typeof b=="string",e,"internal-error"),cs(i,e.name),cs(a,e.name),Re(typeof S=="boolean",e,"internal-error"),Re(typeof N=="boolean",e,"internal-error"),cs(l,e.name),cs(c,e.name),cs(d,e.name),cs(p,e.name),cs(g,e.name),cs(v,e.name);const ee=new gi({uid:b,auth:e,email:a,emailVerified:S,displayName:i,isAnonymous:N,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:U,createdAt:g,lastLoginAt:v});return Q&&Array.isArray(Q)&&(ee.providerData=Q.map(J=>({...J}))),p&&(ee._redirectEventId=p),ee}static async _fromIdTokenResponse(e,t,i=!1){const a=new zo;a.updateFromServerResponse(t);const l=new gi({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await Df(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];Re(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?S1(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new zo;d.updateFromIdToken(i);const p=new gi({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new ug(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(p,g),p}}const $E=new Map;function Er(s){Ir(s instanceof Function,"Expected a class definition");let e=$E.get(s);return e?(Ir(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,$E.set(s,e),e)}class w1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}w1.type="NONE";const YE=w1;function ff(s,e,t){return`firebase:${s}:${e}:${t}`}class Uo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=ff(this.userKey,a.apiKey,l),this.fullPersistenceKey=ff("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Nf(this.auth,{idToken:e}).catch(()=>{});return t?gi._fromGetAccountInfoResponse(this.auth,t,e):null}return gi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Uo(Er(YE),e,i);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||Er(YE);const c=ff(i,e.config.apiKey,e.name);let d=null;for(const g of t)try{const v=await g._get(c);if(v){let b;if(typeof v=="string"){const S=await Nf(e,{idToken:v}).catch(()=>{});if(!S)break;b=await gi._fromGetAccountInfoResponse(e,S,v)}else b=gi._fromJSON(e,v);g!==l&&(d=b),l=g;break}}catch{}const p=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Uo(l,e,i):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Uo(l,e,i))}}function XE(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(R1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(A1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(N1(e))return"Blackberry";if(D1(e))return"Webos";if(I1(e))return"Safari";if((e.includes("chrome/")||x1(e))&&!e.includes("edge/"))return"Chrome";if(C1(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(t);if(i?.length===2)return i[1]}return"Other"}function A1(s=Gt()){return/firefox\//i.test(s)}function I1(s=Gt()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function x1(s=Gt()){return/crios\//i.test(s)}function R1(s=Gt()){return/iemobile/i.test(s)}function C1(s=Gt()){return/android/i.test(s)}function N1(s=Gt()){return/blackberry/i.test(s)}function D1(s=Gt()){return/webos/i.test(s)}function Wg(s=Gt()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function RN(s=Gt()){return Wg(s)&&!!window.navigator?.standalone}function CN(){return F2()&&document.documentMode===10}function V1(s=Gt()){return Wg(s)||C1(s)||D1(s)||N1(s)||/windows phone/i.test(s)||R1(s)}function O1(s,e=[]){let t;switch(s){case"Browser":t=XE(Gt());break;case"Worker":t=`${XE(Gt())}-${s}`;break;default:t=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${fl}/${i}`}class NN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function DN(s,e={}){return dl(s,"GET","/v2/passwordPolicy",Xg(s,e))}const VN=6;class ON{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??VN,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class MN{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new JE(this),this.idTokenSubscription=new JE(this),this.beforeStateQueue=new NN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=v1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Er(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Uo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Nf(this,{idToken:e}),i=await gi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(pi(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=i?._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&d?.user&&(i=d.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Df(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=mN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pi(this.app))return Promise.reject(Ea(this));const t=e?vi(e):null;return t&&Re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pi(this.app)?Promise.reject(Ea(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pi(this.app)?Promise.reject(Ea(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Er(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await DN(this),t=new ON(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await xN(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Er(e)||this._popupRedirectResolver;Re(t,this,"argument-error"),this.redirectPersistenceManager=await Uo.create(this,[Er(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,a);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=O1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(pi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&cN(`Error while retrieving App Check token: ${e.error}`),e?.token}}function sd(s){return vi(s)}class JE{constructor(e){this.auth=e,this.observer=null,this.addObserver=Y2(t=>this.observer=t)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Zg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kN(s){Zg=s}function PN(s){return Zg.loadJS(s)}function LN(){return Zg.gapiScript}function zN(s){return`__${s}${Math.floor(Math.random()*1e6)}`}function UN(s,e){const t=Kg(s,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Aa(l,e??{}))return a;Yi(a,"already-initialized")}return t.initialize({options:e})}function jN(s,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Er);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function BN(s,e,t){const i=sd(s);Re(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=M1(e),{host:c,port:d}=qN(e),p=d===null?"":`:${d}`,g={url:`${l}//${c}${p}/`},v=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Re(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Re(Aa(g,i.config.emulator)&&Aa(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,hl(c)?(l1(`${l}//${c}${p}`),z2("Auth",!0)):FN()}function M1(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function qN(s){const e=M1(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:WE(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:WE(c)}}}function WE(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function FN(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class k1{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return vr("not implemented")}_getIdTokenResponse(e){return vr("not implemented")}_linkToIdToken(e,t){return vr("not implemented")}_getReauthenticationResolver(e){return vr("not implemented")}}async function jo(s,e){return _N(s,"POST","/v1/accounts:signInWithIdp",Xg(s,e))}const HN="http://localhost";class xa extends k1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Yi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...l}=t;if(!i||!a)return null;const c=new xa(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return jo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,jo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,jo(e,t)}buildRequest(){const e={requestUri:HN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=dc(t)}return e}}class ey{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class pc extends ey{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ms extends pc{constructor(){super("facebook.com")}static credential(e){return xa._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ms.credential(e.oauthAccessToken)}catch{return null}}}ms.FACEBOOK_SIGN_IN_METHOD="facebook.com";ms.PROVIDER_ID="facebook.com";class ps extends pc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xa._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ps.credential(t,i)}catch{return null}}}ps.GOOGLE_SIGN_IN_METHOD="google.com";ps.PROVIDER_ID="google.com";class Fi extends pc{constructor(){super("github.com")}static credential(e){return xa._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fi.credential(e.oauthAccessToken)}catch{return null}}}Fi.GITHUB_SIGN_IN_METHOD="github.com";Fi.PROVIDER_ID="github.com";class gs extends pc{constructor(){super("twitter.com")}static credential(e,t){return xa._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return gs.credential(t,i)}catch{return null}}}gs.TWITTER_SIGN_IN_METHOD="twitter.com";gs.PROVIDER_ID="twitter.com";class Ho{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await gi._fromIdTokenResponse(e,i,a),c=ZE(i);return new Ho({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=ZE(i);return new Ho({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function ZE(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class Vf extends Nr{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Vf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new Vf(e,t,i,a)}}function P1(s,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Vf._fromErrorAndOperation(s,l,e,i):l})}async function GN(s,e,t=!1){const i=await Yu(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Ho._forOperation(s,"link",i)}async function KN(s,e,t=!1){const{auth:i}=s;if(pi(i.app))return Promise.reject(Ea(i));const a="reauthenticate";try{const l=await Yu(s,P1(i,a,e,s),t);Re(l.idToken,i,"internal-error");const c=Jg(l.idToken);Re(c,i,"internal-error");const{sub:d}=c;return Re(s.uid===d,i,"user-mismatch"),Ho._forOperation(s,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Yi(i,"user-mismatch"),l}}async function QN(s,e,t=!1){if(pi(s.app))return Promise.reject(Ea(s));const i="signIn",a=await P1(s,i,e),l=await Ho._fromIdTokenResponse(s,i,a);return t||await s._updateCurrentUser(l.user),l}function $N(s,e,t,i){return vi(s).onIdTokenChanged(e,t,i)}function YN(s,e,t){return vi(s).beforeAuthStateChanged(e,t)}function XN(s){return vi(s).signOut()}const Of="__sak";class L1{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Of,"1"),this.storage.removeItem(Of),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const JN=1e3,WN=10;class z1 extends L1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=V1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);CN()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,WN):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},JN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}z1.type="LOCAL";const ZN=z1;class U1 extends L1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}U1.type="SESSION";const j1=U1;function eD(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class ad{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new ad(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const d=Array.from(c).map(async g=>g(t.origin,l)),p=await eD(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ad.receivers=[];function ty(s="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return s+t}class tD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const g=ty("",20);a.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(b){const S=b;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(S.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Ki(){return window}function nD(s){Ki().location.href=s}function B1(){return typeof Ki().WorkerGlobalScope<"u"&&typeof Ki().importScripts=="function"}async function iD(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rD(){return navigator?.serviceWorker?.controller||null}function sD(){return B1()?self:null}const q1="firebaseLocalStorageDb",aD=1,Mf="firebaseLocalStorage",F1="fbase_key";class gc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function od(s,e){return s.transaction([Mf],e?"readwrite":"readonly").objectStore(Mf)}function oD(){const s=indexedDB.deleteDatabase(q1);return new gc(s).toPromise()}function cg(){const s=indexedDB.open(q1,aD);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(Mf,{keyPath:F1})}catch(a){t(a)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(Mf)?e(i):(i.close(),await oD(),e(await cg()))})})}async function eb(s,e,t){const i=od(s,!0).put({[F1]:e,value:t});return new gc(i).toPromise()}async function lD(s,e){const t=od(s,!1).get(e),i=await new gc(t).toPromise();return i===void 0?null:i.value}function tb(s,e){const t=od(s,!0).delete(e);return new gc(t).toPromise()}const uD=800,cD=3;class H1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>cD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return B1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ad._getInstance(sD()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await iD(),!this.activeServiceWorker)return;this.sender=new tD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cg();return await eb(e,Of,"1"),await tb(e,Of),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>eb(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>lD(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>tb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=od(a,!1).getAll();return new gc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),uD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}H1.type="LOCAL";const hD=H1;new mc(3e4,6e4);function G1(s,e){return e?Er(e):(Re(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class ny extends k1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return jo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return jo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function fD(s){return QN(s.auth,new ny(s),s.bypassAuthState)}function dD(s){const{auth:e,user:t}=s;return Re(t,e,"internal-error"),KN(t,new ny(s),s.bypassAuthState)}async function mD(s){const{auth:e,user:t}=s;return Re(t,e,"internal-error"),GN(t,new ny(s),s.bypassAuthState)}class K1{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fD;case"linkViaPopup":case"linkViaRedirect":return mD;case"reauthViaPopup":case"reauthViaRedirect":return dD;default:Yi(this.auth,"internal-error")}}resolve(e){Ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const pD=new mc(2e3,1e4);async function gD(s,e,t){if(pi(s.app))return Promise.reject(yi(s,"operation-not-supported-in-this-environment"));const i=sd(s);hN(s,e,ey);const a=G1(i,t);return new _a(i,"signInViaPopup",e,a).executeNotNull()}class _a extends K1{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,_a.currentPopupAction&&_a.currentPopupAction.cancel(),_a.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){Ir(this.filter.length===1,"Popup operations only handle one event");const e=ty();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(yi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(yi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_a.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,pD.get())};e()}}_a.currentPopupAction=null;const yD="pendingRedirect",df=new Map;class _D extends K1{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=df.get(this.auth._key());if(!e){try{const i=await vD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}df.set(this.auth._key(),e)}return this.bypassAuthState||df.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vD(s,e){const t=TD(e),i=bD(s);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function ED(s,e){df.set(s._key(),e)}function bD(s){return Er(s._redirectPersistence)}function TD(s){return ff(yD,s.config.apiKey,s.name)}async function SD(s,e,t=!1){if(pi(s.app))return Promise.reject(Ea(s));const i=sd(s),a=G1(i,e),c=await new _D(i,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}const wD=600*1e3;class AD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ID(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Q1(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(yi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wD&&this.cachedEventUids.clear(),this.cachedEventUids.has(nb(e))}saveEventToCache(e){this.cachedEventUids.add(nb(e)),this.lastProcessedEventTime=Date.now()}}function nb(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function Q1({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function ID(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Q1(s);default:return!1}}async function xD(s,e={}){return dl(s,"GET","/v1/projects",e)}const RD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CD=/^https?/;async function ND(s){if(s.config.emulator)return;const{authorizedDomains:e}=await xD(s);for(const t of e)try{if(DD(t))return}catch{}Yi(s,"unauthorized-domain")}function DD(s){const e=lg(),{protocol:t,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const c=new URL(s);return c.hostname===""&&i===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!CD.test(t))return!1;if(RD.test(s))return i===s;const a=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}const VD=new mc(3e4,6e4);function ib(){const s=Ki().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function OD(s){return new Promise((e,t)=>{function i(){ib(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ib(),t(yi(s,"network-request-failed"))},timeout:VD.get()})}if(Ki().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ki().gapi?.load)i();else{const a=zN("iframefcb");return Ki()[a]=()=>{gapi.load?i():t(yi(s,"network-request-failed"))},PN(`${LN()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw mf=null,e})}let mf=null;function MD(s){return mf=mf||OD(s),mf}const kD=new mc(5e3,15e3),PD="__/auth/iframe",LD="emulator/auth/iframe",zD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jD(s){const e=s.config;Re(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?Yg(e,LD):`https://${s.config.authDomain}/${PD}`,i={apiKey:e.apiKey,appName:s.name,v:fl},a=UD.get(s.config.apiHost);a&&(i.eid=a);const l=s._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${dc(i).slice(1)}`}async function BD(s){const e=await MD(s),t=Ki().gapi;return Re(t,s,"internal-error"),e.open({where:document.body,url:jD(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zD,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=yi(s,"network-request-failed"),d=Ki().setTimeout(()=>{l(c)},kD.get());function p(){Ki().clearTimeout(d),a(i)}i.ping(p).then(p,()=>{l(c)})}))}const qD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FD=500,HD=600,GD="_blank",KD="http://localhost";class rb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function QD(s,e,t,i=FD,a=HD){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p={...qD,width:i.toString(),height:a.toString(),top:l,left:c},g=Gt().toLowerCase();t&&(d=x1(g)?GD:t),A1(g)&&(e=e||KD,p.scrollbars="yes");const v=Object.entries(p).reduce((S,[N,Q])=>`${S}${N}=${Q},`,"");if(RN(g)&&d!=="_self")return $D(e||"",d),new rb(null);const b=window.open(e||"",d,v);Re(b,s,"popup-blocked");try{b.focus()}catch{}return new rb(b)}function $D(s,e){const t=document.createElement("a");t.href=s,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const YD="__/auth/handler",XD="emulator/auth/handler",JD=encodeURIComponent("fac");async function sb(s,e,t,i,a,l){Re(s.config.authDomain,s,"auth-domain-config-required"),Re(s.config.apiKey,s,"invalid-api-key");const c={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:i,v:fl,eventId:a};if(e instanceof ey){e.setDefaultLanguage(s.languageCode),c.providerId=e.providerId||"",$2(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,b]of Object.entries({}))c[v]=b}if(e instanceof pc){const v=e.getScopes().filter(b=>b!=="");v.length>0&&(c.scopes=v.join(","))}s.tenantId&&(c.tid=s.tenantId);const d=c;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const p=await s._getAppCheckToken(),g=p?`#${JD}=${encodeURIComponent(p)}`:"";return`${WD(s)}?${dc(d).slice(1)}${g}`}function WD({config:s}){return s.emulator?Yg(s,XD):`https://${s.authDomain}/${YD}`}const Fp="webStorageSupport";class ZD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=j1,this._completeRedirectFn=SD,this._overrideRedirectResult=ED}async _openPopup(e,t,i,a){Ir(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await sb(e,t,i,lg(),a);return QD(e,l,ty())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await sb(e,t,i,lg(),a);return nD(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Ir(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await BD(e),i=new AD(e);return t.register("authEvent",a=>(Re(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Fp,{type:Fp},a=>{const l=a?.[0]?.[Fp];l!==void 0&&t(!!l),Yi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ND(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return V1()||I1()||Wg()}}const eV=ZD;var ab="@firebase/auth",ob="1.12.0";class tV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function nV(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iV(s){Fo(new Ia("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;Re(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:d,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:O1(s)},g=new MN(i,a,l,p);return jN(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Fo(new Ia("auth-internal",e=>{const t=sd(e.getProvider("auth").getImmediate());return(i=>new tV(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ts(ab,ob,nV(s)),Ts(ab,ob,"esm2020")}const rV=300,sV=o1("authIdTokenMaxAge")||rV;let lb=null;const aV=s=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>sV)return;const a=t?.token;lb!==a&&(lb=a,await fetch(s,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function oV(s=XC()){const e=Kg(s,"auth");if(e.isInitialized())return e.getImmediate();const t=UN(s,{popupRedirectResolver:eV,persistence:[hD,ZN,j1]}),i=o1("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=aV(l.toString());YN(t,c,()=>c(t.currentUser)),$N(t,d=>c(d))}}const a=M2("auth");return a&&BN(t,`http://${a}`),t}function lV(){return document.getElementsByTagName("head")?.[0]??document}kN({loadJS(s){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=a=>{const l=yi("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",lV().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iV("Browser");var ub=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ss,$1;(function(){var s;function e(x,I){function R(){}R.prototype=I.prototype,x.F=I.prototype,x.prototype=new R,x.prototype.constructor=x,x.D=function(M,O,k){for(var C=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)C[ke-2]=arguments[ke];return I.prototype[O].apply(M,C)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(x,I,R){R||(R=0);const M=Array(16);if(typeof I=="string")for(var O=0;O<16;++O)M[O]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(O=0;O<16;++O)M[O]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=x.g[0],R=x.g[1],O=x.g[2];let k=x.g[3],C;C=I+(k^R&(O^k))+M[0]+3614090360&4294967295,I=R+(C<<7&4294967295|C>>>25),C=k+(O^I&(R^O))+M[1]+3905402710&4294967295,k=I+(C<<12&4294967295|C>>>20),C=O+(R^k&(I^R))+M[2]+606105819&4294967295,O=k+(C<<17&4294967295|C>>>15),C=R+(I^O&(k^I))+M[3]+3250441966&4294967295,R=O+(C<<22&4294967295|C>>>10),C=I+(k^R&(O^k))+M[4]+4118548399&4294967295,I=R+(C<<7&4294967295|C>>>25),C=k+(O^I&(R^O))+M[5]+1200080426&4294967295,k=I+(C<<12&4294967295|C>>>20),C=O+(R^k&(I^R))+M[6]+2821735955&4294967295,O=k+(C<<17&4294967295|C>>>15),C=R+(I^O&(k^I))+M[7]+4249261313&4294967295,R=O+(C<<22&4294967295|C>>>10),C=I+(k^R&(O^k))+M[8]+1770035416&4294967295,I=R+(C<<7&4294967295|C>>>25),C=k+(O^I&(R^O))+M[9]+2336552879&4294967295,k=I+(C<<12&4294967295|C>>>20),C=O+(R^k&(I^R))+M[10]+4294925233&4294967295,O=k+(C<<17&4294967295|C>>>15),C=R+(I^O&(k^I))+M[11]+2304563134&4294967295,R=O+(C<<22&4294967295|C>>>10),C=I+(k^R&(O^k))+M[12]+1804603682&4294967295,I=R+(C<<7&4294967295|C>>>25),C=k+(O^I&(R^O))+M[13]+4254626195&4294967295,k=I+(C<<12&4294967295|C>>>20),C=O+(R^k&(I^R))+M[14]+2792965006&4294967295,O=k+(C<<17&4294967295|C>>>15),C=R+(I^O&(k^I))+M[15]+1236535329&4294967295,R=O+(C<<22&4294967295|C>>>10),C=I+(O^k&(R^O))+M[1]+4129170786&4294967295,I=R+(C<<5&4294967295|C>>>27),C=k+(R^O&(I^R))+M[6]+3225465664&4294967295,k=I+(C<<9&4294967295|C>>>23),C=O+(I^R&(k^I))+M[11]+643717713&4294967295,O=k+(C<<14&4294967295|C>>>18),C=R+(k^I&(O^k))+M[0]+3921069994&4294967295,R=O+(C<<20&4294967295|C>>>12),C=I+(O^k&(R^O))+M[5]+3593408605&4294967295,I=R+(C<<5&4294967295|C>>>27),C=k+(R^O&(I^R))+M[10]+38016083&4294967295,k=I+(C<<9&4294967295|C>>>23),C=O+(I^R&(k^I))+M[15]+3634488961&4294967295,O=k+(C<<14&4294967295|C>>>18),C=R+(k^I&(O^k))+M[4]+3889429448&4294967295,R=O+(C<<20&4294967295|C>>>12),C=I+(O^k&(R^O))+M[9]+568446438&4294967295,I=R+(C<<5&4294967295|C>>>27),C=k+(R^O&(I^R))+M[14]+3275163606&4294967295,k=I+(C<<9&4294967295|C>>>23),C=O+(I^R&(k^I))+M[3]+4107603335&4294967295,O=k+(C<<14&4294967295|C>>>18),C=R+(k^I&(O^k))+M[8]+1163531501&4294967295,R=O+(C<<20&4294967295|C>>>12),C=I+(O^k&(R^O))+M[13]+2850285829&4294967295,I=R+(C<<5&4294967295|C>>>27),C=k+(R^O&(I^R))+M[2]+4243563512&4294967295,k=I+(C<<9&4294967295|C>>>23),C=O+(I^R&(k^I))+M[7]+1735328473&4294967295,O=k+(C<<14&4294967295|C>>>18),C=R+(k^I&(O^k))+M[12]+2368359562&4294967295,R=O+(C<<20&4294967295|C>>>12),C=I+(R^O^k)+M[5]+4294588738&4294967295,I=R+(C<<4&4294967295|C>>>28),C=k+(I^R^O)+M[8]+2272392833&4294967295,k=I+(C<<11&4294967295|C>>>21),C=O+(k^I^R)+M[11]+1839030562&4294967295,O=k+(C<<16&4294967295|C>>>16),C=R+(O^k^I)+M[14]+4259657740&4294967295,R=O+(C<<23&4294967295|C>>>9),C=I+(R^O^k)+M[1]+2763975236&4294967295,I=R+(C<<4&4294967295|C>>>28),C=k+(I^R^O)+M[4]+1272893353&4294967295,k=I+(C<<11&4294967295|C>>>21),C=O+(k^I^R)+M[7]+4139469664&4294967295,O=k+(C<<16&4294967295|C>>>16),C=R+(O^k^I)+M[10]+3200236656&4294967295,R=O+(C<<23&4294967295|C>>>9),C=I+(R^O^k)+M[13]+681279174&4294967295,I=R+(C<<4&4294967295|C>>>28),C=k+(I^R^O)+M[0]+3936430074&4294967295,k=I+(C<<11&4294967295|C>>>21),C=O+(k^I^R)+M[3]+3572445317&4294967295,O=k+(C<<16&4294967295|C>>>16),C=R+(O^k^I)+M[6]+76029189&4294967295,R=O+(C<<23&4294967295|C>>>9),C=I+(R^O^k)+M[9]+3654602809&4294967295,I=R+(C<<4&4294967295|C>>>28),C=k+(I^R^O)+M[12]+3873151461&4294967295,k=I+(C<<11&4294967295|C>>>21),C=O+(k^I^R)+M[15]+530742520&4294967295,O=k+(C<<16&4294967295|C>>>16),C=R+(O^k^I)+M[2]+3299628645&4294967295,R=O+(C<<23&4294967295|C>>>9),C=I+(O^(R|~k))+M[0]+4096336452&4294967295,I=R+(C<<6&4294967295|C>>>26),C=k+(R^(I|~O))+M[7]+1126891415&4294967295,k=I+(C<<10&4294967295|C>>>22),C=O+(I^(k|~R))+M[14]+2878612391&4294967295,O=k+(C<<15&4294967295|C>>>17),C=R+(k^(O|~I))+M[5]+4237533241&4294967295,R=O+(C<<21&4294967295|C>>>11),C=I+(O^(R|~k))+M[12]+1700485571&4294967295,I=R+(C<<6&4294967295|C>>>26),C=k+(R^(I|~O))+M[3]+2399980690&4294967295,k=I+(C<<10&4294967295|C>>>22),C=O+(I^(k|~R))+M[10]+4293915773&4294967295,O=k+(C<<15&4294967295|C>>>17),C=R+(k^(O|~I))+M[1]+2240044497&4294967295,R=O+(C<<21&4294967295|C>>>11),C=I+(O^(R|~k))+M[8]+1873313359&4294967295,I=R+(C<<6&4294967295|C>>>26),C=k+(R^(I|~O))+M[15]+4264355552&4294967295,k=I+(C<<10&4294967295|C>>>22),C=O+(I^(k|~R))+M[6]+2734768916&4294967295,O=k+(C<<15&4294967295|C>>>17),C=R+(k^(O|~I))+M[13]+1309151649&4294967295,R=O+(C<<21&4294967295|C>>>11),C=I+(O^(R|~k))+M[4]+4149444226&4294967295,I=R+(C<<6&4294967295|C>>>26),C=k+(R^(I|~O))+M[11]+3174756917&4294967295,k=I+(C<<10&4294967295|C>>>22),C=O+(I^(k|~R))+M[2]+718787259&4294967295,O=k+(C<<15&4294967295|C>>>17),C=R+(k^(O|~I))+M[9]+3951481745&4294967295,x.g[0]=x.g[0]+I&4294967295,x.g[1]=x.g[1]+(O+(C<<21&4294967295|C>>>11))&4294967295,x.g[2]=x.g[2]+O&4294967295,x.g[3]=x.g[3]+k&4294967295}i.prototype.v=function(x,I){I===void 0&&(I=x.length);const R=I-this.blockSize,M=this.C;let O=this.h,k=0;for(;k<I;){if(O==0)for(;k<=R;)a(this,x,k),k+=this.blockSize;if(typeof x=="string"){for(;k<I;)if(M[O++]=x.charCodeAt(k++),O==this.blockSize){a(this,M),O=0;break}}else for(;k<I;)if(M[O++]=x[k++],O==this.blockSize){a(this,M),O=0;break}}this.h=O,this.o+=I},i.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var I=1;I<x.length-8;++I)x[I]=0;I=this.o*8;for(var R=x.length-8;R<x.length;++R)x[R]=I&255,I/=256;for(this.v(x),x=Array(16),I=0,R=0;R<4;++R)for(let M=0;M<32;M+=8)x[I++]=this.g[R]>>>M&255;return x};function l(x,I){var R=d;return Object.prototype.hasOwnProperty.call(R,x)?R[x]:R[x]=I(x)}function c(x,I){this.h=I;const R=[];let M=!0;for(let O=x.length-1;O>=0;O--){const k=x[O]|0;M&&k==I||(R[O]=k,M=!1)}this.g=R}var d={};function p(x){return-128<=x&&x<128?l(x,function(I){return new c([I|0],I<0?-1:0)}):new c([x|0],x<0?-1:0)}function g(x){if(isNaN(x)||!isFinite(x))return b;if(x<0)return U(g(-x));const I=[];let R=1;for(let M=0;x>=R;M++)I[M]=x/R|0,R*=4294967296;return new c(I,0)}function v(x,I){if(x.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(x.charAt(0)=="-")return U(v(x.substring(1),I));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=g(Math.pow(I,8));let M=b;for(let k=0;k<x.length;k+=8){var O=Math.min(8,x.length-k);const C=parseInt(x.substring(k,k+O),I);O<8?(O=g(Math.pow(I,O)),M=M.j(O).add(g(C))):(M=M.j(R),M=M.add(g(C)))}return M}var b=p(0),S=p(1),N=p(16777216);s=c.prototype,s.m=function(){if(K(this))return-U(this).m();let x=0,I=1;for(let R=0;R<this.g.length;R++){const M=this.i(R);x+=(M>=0?M:4294967296+M)*I,I*=4294967296}return x},s.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(Q(this))return"0";if(K(this))return"-"+U(this).toString(x);const I=g(Math.pow(x,6));var R=this;let M="";for(;;){const O=se(R,I).g;R=ee(R,O.j(I));let k=((R.g.length>0?R.g[0]:R.h)>>>0).toString(x);if(R=O,Q(R))return k+M;for(;k.length<6;)k="0"+k;M=k+M}},s.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function Q(x){if(x.h!=0)return!1;for(let I=0;I<x.g.length;I++)if(x.g[I]!=0)return!1;return!0}function K(x){return x.h==-1}s.l=function(x){return x=ee(this,x),K(x)?-1:Q(x)?0:1};function U(x){const I=x.g.length,R=[];for(let M=0;M<I;M++)R[M]=~x.g[M];return new c(R,~x.h).add(S)}s.abs=function(){return K(this)?U(this):this},s.add=function(x){const I=Math.max(this.g.length,x.g.length),R=[];let M=0;for(let O=0;O<=I;O++){let k=M+(this.i(O)&65535)+(x.i(O)&65535),C=(k>>>16)+(this.i(O)>>>16)+(x.i(O)>>>16);M=C>>>16,k&=65535,C&=65535,R[O]=C<<16|k}return new c(R,R[R.length-1]&-2147483648?-1:0)};function ee(x,I){return x.add(U(I))}s.j=function(x){if(Q(this)||Q(x))return b;if(K(this))return K(x)?U(this).j(U(x)):U(U(this).j(x));if(K(x))return U(this.j(U(x)));if(this.l(N)<0&&x.l(N)<0)return g(this.m()*x.m());const I=this.g.length+x.g.length,R=[];for(var M=0;M<2*I;M++)R[M]=0;for(M=0;M<this.g.length;M++)for(let O=0;O<x.g.length;O++){const k=this.i(M)>>>16,C=this.i(M)&65535,ke=x.i(O)>>>16,qe=x.i(O)&65535;R[2*M+2*O]+=C*qe,J(R,2*M+2*O),R[2*M+2*O+1]+=k*qe,J(R,2*M+2*O+1),R[2*M+2*O+1]+=C*ke,J(R,2*M+2*O+1),R[2*M+2*O+2]+=k*ke,J(R,2*M+2*O+2)}for(x=0;x<I;x++)R[x]=R[2*x+1]<<16|R[2*x];for(x=I;x<2*I;x++)R[x]=0;return new c(R,0)};function J(x,I){for(;(x[I]&65535)!=x[I];)x[I+1]+=x[I]>>>16,x[I]&=65535,I++}function W(x,I){this.g=x,this.h=I}function se(x,I){if(Q(I))throw Error("division by zero");if(Q(x))return new W(b,b);if(K(x))return I=se(U(x),I),new W(U(I.g),U(I.h));if(K(I))return I=se(x,U(I)),new W(U(I.g),I.h);if(x.g.length>30){if(K(x)||K(I))throw Error("slowDivide_ only works with positive integers.");for(var R=S,M=I;M.l(x)<=0;)R=ue(R),M=ue(M);var O=ce(R,1),k=ce(M,1);for(M=ce(M,2),R=ce(R,2);!Q(M);){var C=k.add(M);C.l(x)<=0&&(O=O.add(R),k=C),M=ce(M,1),R=ce(R,1)}return I=ee(x,O.j(I)),new W(O,I)}for(O=b;x.l(I)>=0;){for(R=Math.max(1,Math.floor(x.m()/I.m())),M=Math.ceil(Math.log(R)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),k=g(R),C=k.j(I);K(C)||C.l(x)>0;)R-=M,k=g(R),C=k.j(I);Q(k)&&(k=S),O=O.add(k),x=ee(x,C)}return new W(O,x)}s.B=function(x){return se(this,x).h},s.and=function(x){const I=Math.max(this.g.length,x.g.length),R=[];for(let M=0;M<I;M++)R[M]=this.i(M)&x.i(M);return new c(R,this.h&x.h)},s.or=function(x){const I=Math.max(this.g.length,x.g.length),R=[];for(let M=0;M<I;M++)R[M]=this.i(M)|x.i(M);return new c(R,this.h|x.h)},s.xor=function(x){const I=Math.max(this.g.length,x.g.length),R=[];for(let M=0;M<I;M++)R[M]=this.i(M)^x.i(M);return new c(R,this.h^x.h)};function ue(x){const I=x.g.length+1,R=[];for(let M=0;M<I;M++)R[M]=x.i(M)<<1|x.i(M-1)>>>31;return new c(R,x.h)}function ce(x,I){const R=I>>5;I%=32;const M=x.g.length-R,O=[];for(let k=0;k<M;k++)O[k]=I>0?x.i(k+R)>>>I|x.i(k+R+1)<<32-I:x.i(k+R);return new c(O,x.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,$1=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=v,Ss=c}).apply(typeof ub<"u"?ub:typeof self<"u"?self:typeof window<"u"?window:{});var tf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Y1,Nu,X1,pf,hg,J1,W1,Z1;(function(){var s,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof tf=="object"&&tf];for(var y=0;y<h.length;++y){var E=h[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=t(this);function a(h,y){if(y)e:{var E=i;h=h.split(".");for(var w=0;w<h.length-1;w++){var q=h[w];if(!(q in E))break e;E=E[q]}h=h[h.length-1],w=E[h],y=y(w),y!=w&&y!=null&&e(E,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var E=[],w;for(w in y)Object.prototype.hasOwnProperty.call(y,w)&&E.push([w,y[w]]);return E}});var l=l||{},c=this||self;function d(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function p(h,y,E){return h.call.apply(h.bind,arguments)}function g(h,y,E){return g=p,g.apply(null,arguments)}function v(h,y){var E=Array.prototype.slice.call(arguments,1);return function(){var w=E.slice();return w.push.apply(w,arguments),h.apply(this,w)}}function b(h,y){function E(){}E.prototype=y.prototype,h.Z=y.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(w,q,Y){for(var he=Array(arguments.length-2),De=2;De<arguments.length;De++)he[De-2]=arguments[De];return y.prototype[q].apply(w,he)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function N(h){const y=h.length;if(y>0){const E=Array(y);for(let w=0;w<y;w++)E[w]=h[w];return E}return[]}function Q(h,y){for(let w=1;w<arguments.length;w++){const q=arguments[w];var E=typeof q;if(E=E!="object"?E:q?Array.isArray(q)?"array":E:"null",E=="array"||E=="object"&&typeof q.length=="number"){E=h.length||0;const Y=q.length||0;h.length=E+Y;for(let he=0;he<Y;he++)h[E+he]=q[he]}else h.push(q)}}class K{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function U(h){c.setTimeout(()=>{throw h},0)}function ee(){var h=x;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class J{constructor(){this.h=this.g=null}add(y,E){const w=W.get();w.set(y,E),this.h?this.h.next=w:this.g=w,this.h=w}}var W=new K(()=>new se,h=>h.reset());class se{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,ce=!1,x=new J,I=()=>{const h=Promise.resolve(void 0);ue=()=>{h.then(R)}};function R(){for(var h;h=ee();){try{h.h.call(h.g)}catch(E){U(E)}var y=W;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}ce=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};c.addEventListener("test",E,y),c.removeEventListener("test",E,y)}catch{}return h})();function C(h){return/^[\s\xa0]*$/.test(h)}function ke(h,y){O.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}b(ke,O),ke.prototype.init=function(h,y){const E=this.type=h.type,w=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(E=="mouseover"?y=h.fromElement:E=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ke.Z.h.call(this)},ke.prototype.h=function(){ke.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var qe="closure_listenable_"+(Math.random()*1e6|0),j=0;function oe(h,y,E,w,q){this.listener=h,this.proxy=null,this.src=y,this.type=E,this.capture=!!w,this.ha=q,this.key=++j,this.da=this.fa=!1}function te(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function pe(h,y,E){for(const w in h)y.call(E,h[w],w,h)}function we(h,y){for(const E in h)y.call(void 0,h[E],E,h)}function V(h){const y={};for(const E in h)y[E]=h[E];return y}const F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ae(h,y){let E,w;for(let q=1;q<arguments.length;q++){w=arguments[q];for(E in w)h[E]=w[E];for(let Y=0;Y<F.length;Y++)E=F[Y],Object.prototype.hasOwnProperty.call(w,E)&&(h[E]=w[E])}}function fe(h){this.src=h,this.g={},this.h=0}fe.prototype.add=function(h,y,E,w,q){const Y=h.toString();h=this.g[Y],h||(h=this.g[Y]=[],this.h++);const he=Ie(h,y,w,q);return he>-1?(y=h[he],E||(y.fa=!1)):(y=new oe(y,this.src,Y,!!w,q),y.fa=E,h.push(y)),y};function be(h,y){const E=y.type;if(E in h.g){var w=h.g[E],q=Array.prototype.indexOf.call(w,y,void 0),Y;(Y=q>=0)&&Array.prototype.splice.call(w,q,1),Y&&(te(y),h.g[E].length==0&&(delete h.g[E],h.h--))}}function Ie(h,y,E,w){for(let q=0;q<h.length;++q){const Y=h[q];if(!Y.da&&Y.listener==y&&Y.capture==!!E&&Y.ha==w)return q}return-1}var Me="closure_lm_"+(Math.random()*1e6|0),_t={};function ct(h,y,E,w,q){if(Array.isArray(y)){for(let Y=0;Y<y.length;Y++)ct(h,y[Y],E,w,q);return null}return E=Os(E),h&&h[qe]?h.J(y,E,d(w)?!!w.capture:!1,q):Wi(h,y,E,!1,w,q)}function Wi(h,y,E,w,q,Y){if(!y)throw Error("Invalid event type");const he=d(q)?!!q.capture:!!q;let De=Wt(h);if(De||(h[Me]=De=new fe(h)),E=De.add(y,E,w,he,Y),E.proxy)return E;if(w=xe(),E.proxy=w,w.src=h,w.listener=E,h.addEventListener)k||(q=he),q===void 0&&(q=!1),h.addEventListener(y.toString(),w,q);else if(h.attachEvent)h.attachEvent(Je(y.toString()),w);else if(h.addListener&&h.removeListener)h.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return E}function xe(){function h(E){return y.call(h.src,h.listener,E)}const y=Ot;return h}function Ke(h,y,E,w,q){if(Array.isArray(y))for(var Y=0;Y<y.length;Y++)Ke(h,y[Y],E,w,q);else w=d(w)?!!w.capture:!!w,E=Os(E),h&&h[qe]?(h=h.i,Y=String(y).toString(),Y in h.g&&(y=h.g[Y],E=Ie(y,E,w,q),E>-1&&(te(y[E]),Array.prototype.splice.call(y,E,1),y.length==0&&(delete h.g[Y],h.h--)))):h&&(h=Wt(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ie(y,E,w,q)),(E=h>-1?y[h]:null)&&ft(E))}function ft(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[qe])be(y.i,h);else{var E=h.type,w=h.proxy;y.removeEventListener?y.removeEventListener(E,w,h.capture):y.detachEvent?y.detachEvent(Je(E),w):y.addListener&&y.removeListener&&y.removeListener(w),(E=Wt(y))?(be(E,h),E.h==0&&(E.src=null,y[Me]=null)):te(h)}}}function Je(h){return h in _t?_t[h]:_t[h]="on"+h}function Ot(h,y){if(h.da)h=!0;else{y=new ke(y,this);const E=h.listener,w=h.ha||h.src;h.fa&&ft(h),h=E.call(w,y)}return h}function Wt(h){return h=h[Me],h instanceof fe?h:null}var Zi="__closure_events_fn_"+(Math.random()*1e9>>>0);function Os(h){return typeof h=="function"?h:(h[Zi]||(h[Zi]=function(y){return h.handleEvent(y)}),h[Zi])}function bt(){M.call(this),this.i=new fe(this),this.M=this,this.G=null}b(bt,M),bt.prototype[qe]=!0,bt.prototype.removeEventListener=function(h,y,E,w){Ke(this,h,y,E,w)};function It(h,y){var E,w=h.G;if(w)for(E=[];w;w=w.G)E.push(w);if(h=h.M,w=y.type||y,typeof y=="string")y=new O(y,h);else if(y instanceof O)y.target=y.target||h;else{var q=y;y=new O(w,h),ae(y,q)}q=!0;let Y,he;if(E)for(he=E.length-1;he>=0;he--)Y=y.g=E[he],q=gn(Y,w,!0,y)&&q;if(Y=y.g=h,q=gn(Y,w,!0,y)&&q,q=gn(Y,w,!1,y)&&q,E)for(he=0;he<E.length;he++)Y=y.g=E[he],q=gn(Y,w,!1,y)&&q}bt.prototype.N=function(){if(bt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const E=h.g[y];for(let w=0;w<E.length;w++)te(E[w]);delete h.g[y],h.h--}}this.G=null},bt.prototype.J=function(h,y,E,w){return this.i.add(String(h),y,!1,E,w)},bt.prototype.K=function(h,y,E,w){return this.i.add(String(h),y,!0,E,w)};function gn(h,y,E,w){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let q=!0;for(let Y=0;Y<y.length;++Y){const he=y[Y];if(he&&!he.da&&he.capture==E){const De=he.listener,Rt=he.ha||he.src;he.fa&&be(h.i,he),q=De.call(Rt,w)!==!1&&q}}return q&&!w.defaultPrevented}function xd(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function wc(h){h.g=xd(()=>{h.g=null,h.i&&(h.i=!1,wc(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class fn extends M{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:wc(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ms(h){M.call(this),this.h=h,this.g={}}b(Ms,M);var vl=[];function El(h){pe(h.g,function(y,E){this.g.hasOwnProperty(E)&&ft(y)},h),h.g={}}Ms.prototype.N=function(){Ms.Z.N.call(this),El(this)},Ms.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vr=c.JSON.stringify,Rd=c.JSON.parse,Ac=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Ic(){}function xc(){}var ni={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Zt(){O.call(this,"d")}b(Zt,O);function jn(){O.call(this,"c")}b(jn,O);var xt={},Rc=null;function za(){return Rc=Rc||new bt}xt.Ia="serverreachability";function Cc(h){O.call(this,xt.Ia,h)}b(Cc,O);function Ei(h){const y=za();It(y,new Cc(y))}xt.STAT_EVENT="statevent";function ks(h,y){O.call(this,xt.STAT_EVENT,h),this.stat=y}b(ks,O);function Mt(h){const y=za();It(y,new ks(y,h))}xt.Ja="timingevent";function bi(h,y){O.call(this,xt.Ja,h),this.size=y}b(bi,O);function Ti(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function ii(){this.g=!0}ii.prototype.ua=function(){this.g=!1};function Cd(h,y,E,w,q,Y){h.info(function(){if(h.g)if(Y){var he="",De=Y.split("&");for(let Ye=0;Ye<De.length;Ye++){var Rt=De[Ye].split("=");if(Rt.length>1){const pt=Rt[0];Rt=Rt[1];const Hn=pt.split("_");he=Hn.length>=2&&Hn[1]=="type"?he+(pt+"="+Rt+"&"):he+(pt+"=redacted&")}}}else he=null;else he=Y;return"XMLHTTP REQ ("+w+") [attempt "+q+"]: "+y+`
`+E+`
`+he})}function Nc(h,y,E,w,q,Y,he){h.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+q+"]: "+y+`
`+E+`
`+Y+" "+he})}function Si(h,y,E,w){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Nd(h,E)+(w?" "+w:"")})}function Ps(h,y){h.info(function(){return"TIMEOUT: "+y})}ii.prototype.info=function(){};function Nd(h,y){if(!h.g)return y;if(!y)return null;try{const Y=JSON.parse(y);if(Y){for(h=0;h<Y.length;h++)if(Array.isArray(Y[h])){var E=Y[h];if(!(E.length<2)){var w=E[1];if(Array.isArray(w)&&!(w.length<1)){var q=w[0];if(q!="noop"&&q!="stop"&&q!="close")for(let he=1;he<w.length;he++)w[he]=""}}}}return Vr(Y)}catch{return y}}var Ls={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},bl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Tl;function zs(){}b(zs,Ic),zs.prototype.g=function(){return new XMLHttpRequest},Tl=new zs;function er(h){return encodeURIComponent(String(h))}function Dc(h){var y=1;h=h.split(":");const E=[];for(;y>0&&h.length;)E.push(h.shift()),y--;return h.length&&E.push(h.join(":")),E}function ri(h,y,E,w){this.j=h,this.i=y,this.l=E,this.S=w||1,this.V=new Ms(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new si}function si(){this.i=null,this.g="",this.h=!1}var kt={},Qt={};function wi(h,y,E){h.M=1,h.A=Us(Lt(y)),h.u=E,h.R=!0,Ua(h,null)}function Ua(h,y){h.F=Date.now(),Ai(h),h.B=Lt(h.A);var E=h.B,w=h.S;Array.isArray(w)||(w=[String(w)]),Fa(E.i,"t",w),h.C=0,E=h.j.L,h.h=new si,h.g=Kc(h.j,E?y:null,!h.u),h.P>0&&(h.O=new fn(g(h.Y,h,h.g),h.P)),y=h.V,E=h.g,w=h.ba;var q="readystatechange";Array.isArray(q)||(q&&(vl[0]=q.toString()),q=vl);for(let Y=0;Y<q.length;Y++){const he=ct(E,q[Y],w||y.handleEvent,!1,y.h||y);if(!he)break;y.g[he.key]=he}y=h.J?V(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Ei(),Cd(h.i,h.v,h.B,h.l,h.S,h.u)}ri.prototype.ba=function(h){h=h.target;const y=this.O;y&&li(h)==3?y.j():this.Y(h)},ri.prototype.Y=function(h){try{if(h==this.g)e:{const De=li(this.g),Rt=this.g.ya(),Ye=this.g.ca();if(!(De<3)&&(De!=3||this.g&&(this.h.h||this.g.la()||en(this.g)))){this.K||De!=4||Rt==7||(Rt==8||Ye<=0?Ei(3):Ei(2)),Ii(this);var y=this.g.ca();this.X=y;var E=Dd(this);if(this.o=y==200,Nc(this.i,this.v,this.B,this.l,this.S,De,y),this.o){if(this.U&&!this.L){t:{if(this.g){var w,q=this.g;if((w=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(w)){var Y=w;break t}}Y=null}if(h=Y)Si(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xi(this,h);else{this.o=!1,this.m=3,Mt(12),In(this),Bn(this);break e}}if(this.R){h=!0;let pt;for(;!this.K&&this.C<E.length;)if(pt=Oc(this,E),pt==Qt){De==4&&(this.m=4,Mt(14),h=!1),Si(this.i,this.l,null,"[Incomplete Response]");break}else if(pt==kt){this.m=4,Mt(15),Si(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else Si(this.i,this.l,pt,null),xi(this,pt);if(Vc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||E.length!=0||this.h.h||(this.m=1,Mt(16),h=!1),this.o=this.o&&h,!h)Si(this.i,this.l,E,"[Invalid Chunked Response]"),In(this),Bn(this);else if(E.length>0&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.aa&&!he.P&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Ll(he),he.P=!0,Mt(11))}}else Si(this.i,this.l,E,null),xi(this,E);De==4&&In(this),this.o&&!this.K&&(De==4?qc(this.j,this):(this.o=!1,Ai(this)))}else nr(this.g),y==400&&E.indexOf("Unknown SID")>0?(this.m=3,Mt(12)):(this.m=0,Mt(13)),In(this),Bn(this)}}}catch{}};function Dd(h){if(!Vc(h))return h.g.la();const y=en(h.g);if(y==="")return"";let E="";const w=y.length,q=li(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return In(h),Bn(h),"";h.h.i=new c.TextDecoder}for(let Y=0;Y<w;Y++)h.h.h=!0,E+=h.h.i.decode(y[Y],{stream:!(q&&Y==w-1)});return y.length=0,h.h.g+=E,h.C=0,h.h.g}function Vc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Oc(h,y){var E=h.C,w=y.indexOf(`
`,E);return w==-1?Qt:(E=Number(y.substring(E,w)),isNaN(E)?kt:(w+=1,w+E>y.length?Qt:(y=y.slice(w,w+E),h.C=w+E,y)))}ri.prototype.cancel=function(){this.K=!0,In(this)};function Ai(h){h.T=Date.now()+h.H,ja(h,h.H)}function ja(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Ti(g(h.aa,h),y)}function Ii(h){h.D&&(c.clearTimeout(h.D),h.D=null)}ri.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Ps(this.i,this.B),this.M!=2&&(Ei(),Mt(17)),In(this),this.m=2,Bn(this)):ja(this,this.T-h)};function Bn(h){h.j.I==0||h.K||qc(h.j,h)}function In(h){Ii(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,El(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function xi(h,y){try{var E=h.j;if(E.I!=0&&(E.g==h||Ci(E.h,h))){if(!h.L&&Ci(E.h,h)&&E.I==3){try{var w=E.Ba.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var q=w;if(q[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)$a(E),jr(E);else break e;Ks(E),Mt(18)}}else E.xa=q[1],0<E.xa-E.K&&q[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Ti(g(E.Va,E),6e3));Ri(E.h)<=1&&E.ta&&(E.ta=void 0)}else ki(E,11)}else if((h.L||E.g==h)&&$a(E),!C(y))for(q=E.Ba.g.parse(y),y=0;y<q.length;y++){let Ye=q[y];const pt=Ye[0];if(!(pt<=E.K))if(E.K=pt,Ye=Ye[1],E.I==2)if(Ye[0]=="c"){E.M=Ye[1],E.ba=Ye[2];const Hn=Ye[3];Hn!=null&&(E.ka=Hn,E.j.info("VER="+E.ka));const Pi=Ye[4];Pi!=null&&(E.za=Pi,E.j.info("SVER="+E.za));const ui=Ye[5];ui!=null&&typeof ui=="number"&&ui>0&&(w=1.5*ui,E.O=w,E.j.info("backChannelRequestTimeoutMs_="+w)),w=E;const ci=h.g;if(ci){const Qs=ci.g?ci.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qs){var Y=w.h;Y.g||Qs.indexOf("spdy")==-1&&Qs.indexOf("quic")==-1&&Qs.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Al(Y,Y.h),Y.h=null))}if(w.G){const Ya=ci.g?ci.g.getResponseHeader("X-HTTP-Session-Id"):null;Ya&&(w.wa=Ya,We(w.J,w.G,Ya))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),w=E;var he=h;if(w.na=Gc(w,w.L?w.ba:null,w.W),he.L){Il(w.h,he);var De=he,Rt=w.O;Rt&&(De.H=Rt),De.D&&(Ii(De),Ai(De)),w.g=he}else jc(w);E.i.length>0&&Mi(E)}else Ye[0]!="stop"&&Ye[0]!="close"||ki(E,7);else E.I==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?ki(E,7):kl(E):Ye[0]!="noop"&&E.l&&E.l.qa(Ye),E.A=0)}}Ei(4)}catch{}}var Pt=class{constructor(h,y){this.g=h,this.map=y}};function Sl(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function wl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ri(h){return h.h?1:h.g?h.g.size:0}function Ci(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Al(h,y){h.g?h.g.add(y):h.h=y}function Il(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Sl.prototype.cancel=function(){if(this.i=xl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function xl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const E of h.g.values())y=y.concat(E.G);return y}return N(h.i)}var Mc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ba(h,y){if(h){h=h.split("&");for(let E=0;E<h.length;E++){const w=h[E].indexOf("=");let q,Y=null;w>=0?(q=h[E].substring(0,w),Y=h[E].substring(w+1)):q=h[E],y(q,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function xn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof xn?(this.l=h.l,$t(this,h.j),this.o=h.o,this.g=h.g,Or(this,h.u),this.h=h.h,Rl(this,zc(h.i)),this.m=h.m):h&&(y=String(h).match(Mc))?(this.l=!1,$t(this,y[1]||"",!0),this.o=Ni(y[2]||""),this.g=Ni(y[3]||"",!0),Or(this,y[4]),this.h=Ni(y[5]||"",!0),Rl(this,y[6]||"",!0),this.m=Ni(y[7]||"")):(this.l=!1,this.i=new kr(null,this.l))}xn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(js(y,qa,!0),":");var E=this.g;return(E||y=="file")&&(h.push("//"),(y=this.o)&&h.push(js(y,qa,!0),"@"),h.push(er(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(js(E,E.charAt(0)=="/"?Cl:kc,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",js(E,Pc)),h.join("")},xn.prototype.resolve=function(h){const y=Lt(this);let E=!!h.j;E?$t(y,h.j):E=!!h.o,E?y.o=h.o:E=!!h.g,E?y.g=h.g:E=h.u!=null;var w=h.h;if(E)Or(y,h.u);else if(E=!!h.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var q=y.h.lastIndexOf("/");q!=-1&&(w=y.h.slice(0,q+1)+w)}if(q=w,q==".."||q==".")w="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){w=q.lastIndexOf("/",0)==0,q=q.split("/");const Y=[];for(let he=0;he<q.length;){const De=q[he++];De=="."?w&&he==q.length&&Y.push(""):De==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),w&&he==q.length&&Y.push("")):(Y.push(De),w=!0)}w=Y.join("/")}else w=q}return E?y.h=w:E=h.i.toString()!=="",E?Rl(y,zc(h.i)):E=!!h.m,E&&(y.m=h.m),y};function Lt(h){return new xn(h)}function $t(h,y,E){h.j=E?Ni(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Or(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Rl(h,y,E){y instanceof kr?(h.i=y,Ha(h.i,h.l)):(E||(y=js(y,Mr)),h.i=new kr(y,h.l))}function We(h,y,E){h.i.set(y,E)}function Us(h){return We(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ni(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function js(h,y,E){return typeof h=="string"?(h=encodeURI(h).replace(y,yn),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function yn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var qa=/[#\/\?@]/g,kc=/[#\?:]/g,Cl=/[#\?]/g,Mr=/[#\?@]/g,Pc=/#/g;function kr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function _n(h){h.g||(h.g=new Map,h.h=0,h.i&&Ba(h.i,function(y,E){h.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}s=kr.prototype,s.add=function(h,y){_n(this),this.i=null,h=Pr(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(y),this.h+=1,this};function Lc(h,y){_n(h),y=Pr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Nl(h,y){return _n(h),y=Pr(h,y),h.g.has(y)}s.forEach=function(h,y){_n(this),this.g.forEach(function(E,w){E.forEach(function(q){h.call(y,q,w,this)},this)},this)};function Dl(h,y){_n(h);let E=[];if(typeof y=="string")Nl(h,y)&&(E=E.concat(h.g.get(Pr(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)E=E.concat(h[y]);return E}s.set=function(h,y){return _n(this),this.i=null,h=Pr(this,h),Nl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=Dl(this,h),h.length>0?String(h[0]):y):y};function Fa(h,y,E){Lc(h,y),E.length>0&&(h.i=null,h.g.set(Pr(h,y),N(E)),h.h+=E.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let w=0;w<y.length;w++){var E=y[w];const q=er(E);E=Dl(this,E);for(let Y=0;Y<E.length;Y++){let he=q;E[Y]!==""&&(he+="="+er(E[Y])),h.push(he)}}return this.i=h.join("&")};function zc(h){const y=new kr;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Pr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Ha(h,y){y&&!h.j&&(_n(h),h.i=null,h.g.forEach(function(E,w){const q=w.toLowerCase();w!=q&&(Lc(this,w),Fa(this,q,E))},h)),h.j=y}function ai(h,y){const E=new ii;if(c.Image){const w=new Image;w.onload=v(qn,E,"TestLoadImage: loaded",!0,y,w),w.onerror=v(qn,E,"TestLoadImage: error",!1,y,w),w.onabort=v(qn,E,"TestLoadImage: abort",!1,y,w),w.ontimeout=v(qn,E,"TestLoadImage: timeout",!1,y,w),c.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=h}else y(!1)}function Vl(h,y){const E=new ii,w=new AbortController,q=setTimeout(()=>{w.abort(),qn(E,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:w.signal}).then(Y=>{clearTimeout(q),Y.ok?qn(E,"TestPingServer: ok",!0,y):qn(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),qn(E,"TestPingServer: error",!1,y)})}function qn(h,y,E,w,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),w(E)}catch{}}function Lr(){this.g=new Ac}function Di(h){this.i=h.Sb||null,this.h=h.ab||!1}b(Di,Ic),Di.prototype.g=function(){return new Bs(this.i,this.h)};function Bs(h,y){bt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(Bs,bt),s=Bs.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,oi(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,zr(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,oi(this)),this.g&&(this.readyState=3,oi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ga(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ga(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?zr(this):oi(this),this.readyState==3&&Ga(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,zr(this))},s.Na=function(h){this.g&&(this.response=h,zr(this))},s.ga=function(){this.g&&zr(this)};function zr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,oi(h)}s.setRequestHeader=function(h,y){this.A.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=y.next();return h.join(`\r
`)};function oi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Bs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Fn(h){let y="";return pe(h,function(E,w){y+=w,y+=":",y+=E,y+=`\r
`}),y}function qs(h,y,E){e:{for(w in E){var w=!1;break e}w=!0}w||(E=Fn(E),typeof h=="string"?E!=null&&er(E):We(h,y,E))}function it(h){bt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(it,bt);var Vi=/^https?$/i,Ol=["POST","PUT"];s=it.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,y,E,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Tl.g(),this.g.onreadystatechange=S(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Y){Fs(this,Y);return}if(h=E||"",E=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var q in w)E.set(q,w[q]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const Y of w.keys())E.set(Y,w.get(Y));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(E.keys()).find(Y=>Y.toLowerCase()=="content-type"),q=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Ol,y,void 0)>=0)||w||q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,he]of E)this.g.setRequestHeader(Y,he);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Y){Fs(this,Y)}};function Fs(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Ml(h),tr(h)}function Ml(h){h.A||(h.A=!0,It(h,"complete"),It(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,It(this,"complete"),It(this,"abort"),tr(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tr(this,!0)),it.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Hs(this):this.Xa())},s.Xa=function(){Hs(this)};function Hs(h){if(h.h&&typeof l<"u"){if(h.v&&li(h)==4)setTimeout(h.Ca.bind(h),0);else if(It(h,"readystatechange"),li(h)==4){h.h=!1;try{const Y=h.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var w;if(w=Y===0){let he=String(h.D).match(Mc)[1]||null;!he&&c.self&&c.self.location&&(he=c.self.location.protocol.slice(0,-1)),w=!Vi.test(he?he.toLowerCase():"")}E=w}if(E)It(h,"complete"),It(h,"success");else{h.o=6;try{var q=li(h)>2?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.ca()+"]",Ml(h)}}finally{tr(h)}}}}function tr(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const E=h.g;h.g=null,y||It(h,"ready");try{E.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function li(h){return h.g?h.g.readyState:0}s.ca=function(){try{return li(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Rd(y)}};function en(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function nr(h){const y={};h=(h.g&&li(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<h.length;w++){if(C(h[w]))continue;var E=Dc(h[w]);const q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Y=y[q]||[];y[q]=Y,Y.push(E)}we(y,function(w){return w.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oi(h,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||y}function Ur(h){this.za=0,this.i=[],this.j=new ii,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Oi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Oi("baseRetryDelayMs",5e3,h),this.Za=Oi("retryDelaySeedMs",1e4,h),this.Ta=Oi("forwardChannelMaxRetries",2,h),this.va=Oi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Sl(h&&h.concurrentRequestLimit),this.Ba=new Lr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Ur.prototype,s.ka=8,s.I=1,s.connect=function(h,y,E,w){Mt(0),this.W=h,this.H=y||{},E&&w!==void 0&&(this.H.OSID=E,this.H.OAID=w),this.F=this.X,this.J=Gc(this,null,this.W),Mi(this)};function kl(h){if(Ka(h),h.I==3){var y=h.V++,E=Lt(h.J);if(We(E,"SID",h.M),We(E,"RID",y),We(E,"TYPE","terminate"),Gs(h,E),y=new ri(h,h.j,y),y.M=2,y.A=Us(Lt(E)),E=!1,c.navigator&&c.navigator.sendBeacon)try{E=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!E&&c.Image&&(new Image().src=y.A,E=!0),E||(y.g=Kc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ai(y)}Hc(h)}function jr(h){h.g&&(Ll(h),h.g.cancel(),h.g=null)}function Ka(h){jr(h),h.v&&(c.clearTimeout(h.v),h.v=null),$a(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Mi(h){if(!wl(h.h)&&!h.m){h.m=!0;var y=h.Ea;ue||I(),ce||(ue(),ce=!0),x.add(y,h),h.D=0}}function Qa(h,y){return Ri(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Ti(g(h.Ea,h,y),Fc(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const q=new ri(this,this.j,h);let Y=this.o;if(this.U&&(Y?(Y=V(Y),ae(Y,this.U)):Y=this.U),this.u!==null||this.R||(q.J=Y,Y=null),this.S)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var w=this.i[E];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(y+=w,y>4096){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=Uc(this,q,y),E=Lt(this.J),We(E,"RID",h),We(E,"CVER",22),this.G&&We(E,"X-HTTP-Session-Id",this.G),Gs(this,E),Y&&(this.R?y="headers="+er(Fn(Y))+"&"+y:this.u&&qs(E,this.u,Y)),Al(this.h,q),this.Ra&&We(E,"TYPE","init"),this.S?(We(E,"$req",y),We(E,"SID","null"),q.U=!0,wi(q,E,null)):wi(q,E,y),this.I=2}}else this.I==3&&(h?Pl(this,h):this.i.length==0||wl(this.h)||Pl(this))};function Pl(h,y){var E;y?E=y.l:E=h.V++;const w=Lt(h.J);We(w,"SID",h.M),We(w,"RID",E),We(w,"AID",h.K),Gs(h,w),h.u&&h.o&&qs(w,h.u,h.o),E=new ri(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Uc(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Al(h.h,E),wi(E,w,y)}function Gs(h,y){h.H&&pe(h.H,function(E,w){We(y,w,E)}),h.l&&pe({},function(E,w){We(y,w,E)})}function Uc(h,y,E){E=Math.min(h.i.length,E);const w=h.l?g(h.l.Ka,h.l,h):null;e:{var q=h.i;let De=-1;for(;;){const Rt=["count="+E];De==-1?E>0?(De=q[0].g,Rt.push("ofs="+De)):De=0:Rt.push("ofs="+De);let Ye=!0;for(let pt=0;pt<E;pt++){var Y=q[pt].g;const Hn=q[pt].map;if(Y-=De,Y<0)De=Math.max(0,q[pt].g-100),Ye=!1;else try{Y="req"+Y+"_"||"";try{var he=Hn instanceof Map?Hn:Object.entries(Hn);for(const[Pi,ui]of he){let ci=ui;d(ui)&&(ci=Vr(ui)),Rt.push(Y+Pi+"="+encodeURIComponent(ci))}}catch(Pi){throw Rt.push(Y+"type="+encodeURIComponent("_badmap")),Pi}}catch{w&&w(Hn)}}if(Ye){he=Rt.join("&");break e}}he=void 0}return h=h.i.splice(0,E),y.G=h,he}function jc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;ue||I(),ce||(ue(),ce=!0),x.add(y,h),h.A=0}}function Ks(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Ti(g(h.Da,h),Fc(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,Bc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Ti(g(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Mt(10),jr(this),Bc(this))};function Ll(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Bc(h){h.g=new ri(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Lt(h.na);We(y,"RID","rpc"),We(y,"SID",h.M),We(y,"AID",h.K),We(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&We(y,"TO",h.ia),We(y,"TYPE","xmlhttp"),Gs(h,y),h.u&&h.o&&qs(y,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=Us(Lt(y)),E.u=null,E.R=!0,Ua(E,h)}s.Va=function(){this.C!=null&&(this.C=null,jr(this),Ks(this),Mt(19))};function $a(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function qc(h,y){var E=null;if(h.g==y){$a(h),Ll(h),h.g=null;var w=2}else if(Ci(h.h,y))E=y.G,Il(h.h,y),w=1;else return;if(h.I!=0){if(y.o)if(w==1){E=y.u?y.u.length:0,y=Date.now()-y.F;var q=h.D;w=za(),It(w,new bi(w,E)),Mi(h)}else jc(h);else if(q=y.m,q==3||q==0&&y.X>0||!(w==1&&Qa(h,y)||w==2&&Ks(h)))switch(E&&E.length>0&&(y=h.h,y.i=y.i.concat(E)),q){case 1:ki(h,5);break;case 4:ki(h,10);break;case 3:ki(h,6);break;default:ki(h,2)}}}function Fc(h,y){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*y}function ki(h,y){if(h.j.info("Error code "+y),y==2){var E=g(h.bb,h),w=h.Ua;const q=!w;w=new xn(w||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||$t(w,"https"),Us(w),q?ai(w.toString(),E):Vl(w.toString(),E)}else Mt(2);h.I=0,h.l&&h.l.pa(y),Hc(h),Ka(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function Hc(h){if(h.I=0,h.ja=[],h.l){const y=xl(h.h);(y.length!=0||h.i.length!=0)&&(Q(h.ja,y),Q(h.ja,h.i),h.h.i.length=0,N(h.i),h.i.length=0),h.l.oa()}}function Gc(h,y,E){var w=E instanceof xn?Lt(E):new xn(E);if(w.g!="")y&&(w.g=y+"."+w.g),Or(w,w.u);else{var q=c.location;w=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;const Y=new xn(null);w&&$t(Y,w),y&&(Y.g=y),q&&Or(Y,q),E&&(Y.h=E),w=Y}return E=h.G,y=h.wa,E&&y&&We(w,E,y),We(w,"VER",h.ka),Gs(h,w),w}function Kc(h,y,E){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new it(new Di({ab:E})):new it(h.ma),y.Fa(h.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qc(){}s=Qc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Br(){}Br.prototype.g=function(h,y){return new dn(h,y)};function dn(h,y){bt.call(this),this.g=new Ur(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!C(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!C(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new ir(this)}b(dn,bt),dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){kl(this.g)},dn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=Vr(h),h=E);y.i.push(new Pt(y.Ya++,h)),y.I==3&&Mi(y)},dn.prototype.N=function(){this.g.l=null,delete this.j,kl(this.g),delete this.g,dn.Z.N.call(this)};function $c(h){Zt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const E in y){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}b($c,Zt);function Yc(){jn.call(this),this.status=1}b(Yc,jn);function ir(h){this.g=h}b(ir,Qc),ir.prototype.ra=function(){It(this.g,"a")},ir.prototype.qa=function(h){It(this.g,new $c(h))},ir.prototype.pa=function(h){It(this.g,new Yc)},ir.prototype.oa=function(){It(this.g,"b")},Br.prototype.createWebChannel=Br.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,Z1=function(){return new Br},W1=function(){return za()},J1=xt,hg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ls.NO_ERROR=0,Ls.TIMEOUT=8,Ls.HTTP_ERROR=6,pf=Ls,bl.COMPLETE="complete",X1=bl,xc.EventType=ni,ni.OPEN="a",ni.CLOSE="b",ni.ERROR="c",ni.MESSAGE="d",bt.prototype.listen=bt.prototype.J,Nu=xc,it.prototype.listenOnce=it.prototype.K,it.prototype.getLastError=it.prototype.Ha,it.prototype.getLastErrorCode=it.prototype.ya,it.prototype.getStatus=it.prototype.ca,it.prototype.getResponseJson=it.prototype.La,it.prototype.getResponseText=it.prototype.la,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Fa,Y1=it}).apply(typeof tf<"u"?tf:typeof self<"u"?self:typeof window<"u"?window:{});class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");let ml="12.9.0";function uV(s){ml=s}const Ra=new Hg("@firebase/firestore");function Vo(){return Ra.logLevel}function le(s,...e){if(Ra.logLevel<=Be.DEBUG){const t=e.map(iy);Ra.debug(`Firestore (${ml}): ${s}`,...t)}}function Dt(s,...e){if(Ra.logLevel<=Be.ERROR){const t=e.map(iy);Ra.error(`Firestore (${ml}): ${s}`,...t)}}function Go(s,...e){if(Ra.logLevel<=Be.WARN){const t=e.map(iy);Ra.warn(`Firestore (${ml}): ${s}`,...t)}}function iy(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function ge(s,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,eS(s,i,t)}function eS(s,e,t){let i=`FIRESTORE (${ml}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Dt(i),new Error(i)}function Ee(s,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,s||eS(e,a,i)}function _e(s,e){return s}const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends Nr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Sr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class cV{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(un.UNAUTHENTICATED)))}shutdown(){}}class fV{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ee(this.o===void 0,42304);let i=this.i;const a=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new Sr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Sr,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},d=p=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Sr)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ee(typeof i.accessToken=="string",31837,{l:i}),new cV(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string",2055,{h:e}),new un(e)}}class dV{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=un.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class mV{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new dV(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class cb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pV{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,pi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ee(this.o===void 0,3512);const i=l=>{l.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,le("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new cb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ee(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new cb(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function gV(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<s;i++)t[i]=Math.floor(256*Math.random());return t}class ry{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=gV(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function Ce(s,e){return s<e?-1:s>e?1:0}function fg(s,e){const t=Math.min(s.length,e.length);for(let i=0;i<t;i++){const a=s.charAt(i),l=e.charAt(i);if(a!==l)return Hp(a)===Hp(l)?Ce(a,l):Hp(a)?1:-1}return Ce(s.length,e.length)}const yV=55296,_V=57343;function Hp(s){const e=s.charCodeAt(0);return e>=yV&&e<=_V}function Ko(s,e,t){return s.length===e.length&&s.every(((i,a)=>t(i,e[a])))}function tS(s){return s+"\0"}const hb="__name__";class Bi{constructor(e,t,i){t===void 0?t=0:t>e.length&&ge(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&ge(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Bi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Bi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=Bi.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Ce(e.length,t.length)}static compareSegments(e,t){const i=Bi.isNumericId(e),a=Bi.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?Bi.extractNumericId(e).compare(Bi.extractNumericId(t)):fg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ss.fromString(e.substring(4,e.length-2))}}class ot extends Bi{construct(e,t,i){return new ot(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new me(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new ot(t)}static emptyPath(){return new ot([])}}const vV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vt extends Bi{construct(e,t,i){return new vt(e,t,i)}static isValidIdentifier(e){return vV.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===hb}static keyField(){return new vt([hb])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new me(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new me(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new me(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(i+=d,a++):(l(),a++)}if(l(),c)throw new me(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vt(t)}static emptyPath(){return new vt([])}}class de{constructor(e){this.path=e}static fromPath(e){return new de(ot.fromString(e))}static fromName(e){return new de(ot.fromString(e).popFirst(5))}static empty(){return new de(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ot.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new ot(e.slice()))}}function EV(s,e,t){if(!t)throw new me(re.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function bV(s,e,t,i){if(e===!0&&i===!0)throw new me(re.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function fb(s){if(!de.isDocumentKey(s))throw new me(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function nS(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function sy(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":ge(12329,{type:typeof s})}function kf(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new me(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=sy(s);throw new me(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function Ft(s,e){const t={typeString:s};return e&&(t.value=e),t}function yc(s,e){if(!nS(s))throw new me(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){t=`JSON missing required field: '${i}'`;break}const c=s[i];if(a&&typeof c!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new me(re.INVALID_ARGUMENT,t);return!0}const db=-62135596800,mb=1e6;class tt{static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*mb);return new tt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new me(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new me(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<db)throw new me(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/mb}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yc(e,tt._jsonSchema))return new tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-db;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}tt._jsonSchemaVersion="firestore/timestamp/1.0",tt._jsonSchema={type:Ft("string",tt._jsonSchemaVersion),seconds:Ft("number"),nanoseconds:Ft("number")};class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new tt(0,0))}static max(){return new Se(new tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Qo=-1;class Pf{constructor(e,t,i,a){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=a}}function dg(s){return s.fields.find((e=>e.kind===2))}function fa(s){return s.fields.filter((e=>e.kind!==2))}Pf.UNKNOWN_ID=-1;class gf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Xu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Xu(0,Un.min())}}function iS(s,e){const t=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,a=Se.fromTimestamp(i===1e9?new tt(t+1,0):new tt(t,i));return new Un(a,de.empty(),e)}function rS(s){return new Un(s.readTime,s.key,Qo)}class Un{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Un(Se.min(),de.empty(),Qo)}static max(){return new Un(Se.max(),de.empty(),Qo)}}function ay(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=de.comparator(s.documentKey,e.documentKey),t!==0?t:Ce(s.largestBatchId,e.largestBatchId))}const sS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Cs(s){if(s.code!==re.FAILED_PRECONDITION||s.message!==sS)throw s;le("LocalStore","Unexpectedly lost primary lease")}class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new B(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof B?t:B.resolve(t)}catch(t){return B.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):B.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):B.reject(t)}static resolve(e){return new B(((t,i)=>{t(e)}))}static reject(e){return new B(((t,i)=>{i(e)}))}static waitFor(e){return new B(((t,i)=>{let a=0,l=0,c=!1;e.forEach((d=>{++a,d.next((()=>{++l,c&&l===a&&t()}),(p=>i(p)))})),c=!0,l===a&&t()}))}static or(e){let t=B.resolve(!1);for(const i of e)t=t.next((a=>a?B.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new B(((i,a)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((v=>{c[g]=v,++d,d===l&&i(c)}),(v=>a(v)))}}))}static doWhile(e,t){return new B(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}const kn="SimpleDb";class ld{static open(e,t,i,a){try{return new ld(t,e.transaction(a,i))}catch(l){throw new Lu(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Sr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Lu(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const a=oy(i.target.error);this.S.reject(new Lu(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(le(kn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new SV(t)}}class ws{static delete(e){return le(kn,"Removing database:",e),ma(s1().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!f1())return!1;if(ws.F())return!0;const e=Gt(),t=ws.M(e),i=0<t&&t<10,a=oS(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||l)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,ws.M(Gt())===12.2&&Dt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(le(kn,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{i(new Lu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?i(new me(re.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?i(new me(re.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):i(new Lu(e,c))},a.onupgradeneeded=l=>{le(kn,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.N.k(c,a.transaction,l.oldVersion,this.version).next((()=>{le(kn,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const d=ld.open(this.db,e,l?"readonly":"readwrite",i),p=a(d).next((g=>(d.C(),g))).catch((g=>(d.abort(g),B.reject(g)))).toPromise();return p.catch((()=>{})),await d.D,p}catch(d){const p=d,g=p.name!=="FirebaseError"&&c<3;if(le(kn,"Transaction failed with error:",p.message,"Retrying:",g),this.close(),!g)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function oS(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class TV{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return ma(this.U.delete())}}class Lu extends me{constructor(e,t){super(re.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ns(s){return s.name==="IndexedDbTransactionError"}class SV{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(le(kn,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(le(kn,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),ma(i)}add(e){return le(kn,"ADD",this.store.name,e,e),ma(this.store.add(e))}get(e){return ma(this.store.get(e)).next((t=>(t===void 0&&(t=null),le(kn,"GET",this.store.name,e,t),t)))}delete(e){return le(kn,"DELETE",this.store.name,e),ma(this.store.delete(e))}count(){return le(kn,"COUNT",this.store.name),ma(this.store.count())}H(e,t){const i=this.options(e,t),a=i.index?this.store.index(i.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(i.range);return new B(((c,d)=>{l.onerror=p=>{d(p.target.error)},l.onsuccess=p=>{c(p.target.result)}}))}{const l=this.cursor(i),c=[];return this.J(l,((d,p)=>{c.push(p)})).next((()=>c))}}Z(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new B(((a,l)=>{i.onerror=c=>{l(c.target.error)},i.onsuccess=c=>{a(c.target.result)}}))}X(e,t){le(kn,"DELETE ALL",this.store.name);const i=this.options(e,t);i.Y=!1;const a=this.cursor(i);return this.J(a,((l,c,d)=>d.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const a=this.cursor(i);return this.J(a,t)}te(e){const t=this.cursor({});return new B(((i,a)=>{t.onerror=l=>{const c=oy(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next((d=>{d?c.continue():i()})):i()}}))}J(e,t){const i=[];return new B(((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const p=new TV(d),g=t(d.primaryKey,d.value,p);if(g instanceof B){const v=g.catch((b=>(p.done(),B.reject(b))));i.push(v)}p.isDone?a():p.G===null?d.continue():d.continue(p.G)}})).next((()=>B.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.Y?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ma(s){return new B(((e,t)=>{s.onsuccess=i=>{const a=i.target.result;e(a)},s.onerror=i=>{const a=oy(i.target.error);t(a)}}))}let pb=!1;function oy(s){const e=ws.M(Gt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(t)>=0){const i=new me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return pb||(pb=!0,setTimeout((()=>{throw i}),0)),i}}return s}const zu="IndexBackfiller";class wV{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){le(zu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();le(zu,`Documents written: ${t}`)}catch(t){Ns(t)?le(zu,"Ignoring IndexedDB error during index backfill: ",t):await Cs(t)}await this.re(6e4)}))}}class AV{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let a=t,l=!0;return B.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!i.has(c))return le(zu,`Processing collection: ${c}`),this.oe(e,c,a).next((d=>{a-=d,i.add(c)}));l=!1})))).next((()=>t-a))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,i).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(a,l))).next((d=>(le(zu,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d)))).next((()=>c.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((a,l)=>{const c=rS(l);ay(c,i)>0&&(i=c)})),new Un(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}class An{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}An.ce=-1;const ba=-1;function ud(s){return s==null}function Ju(s){return s===0&&1/s==-1/0}function lS(s){return typeof s=="number"&&Number.isInteger(s)&&!Ju(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const Lf="";function hn(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=gb(e)),e=IV(s.get(t),e);return gb(e)}function IV(s,e){let t=e;const i=s.length;for(let a=0;a<i;a++){const l=s.charAt(a);switch(l){case"\0":t+="";break;case Lf:t+="";break;default:t+=l}}return t}function gb(s){return s+Lf+""}function Hi(s){const e=s.length;if(Ee(e>=2,64408,{path:s}),e===2)return Ee(s.charAt(0)===Lf&&s.charAt(1)==="",56145,{path:s}),ot.emptyPath();const t=e-2,i=[];let a="";for(let l=0;l<e;){const c=s.indexOf(Lf,l);switch((c<0||c>t)&&ge(50515,{path:s}),s.charAt(c+1)){case"":const d=s.substring(l,c);let p;a.length===0?p=d:(a+=d,p=a,a=""),i.push(p);break;case"":a+=s.substring(l,c),a+="\0";break;case"":a+=s.substring(l,c+1);break;default:ge(61167,{path:s})}l=c+2}return new ot(i)}const da="remoteDocuments",_c="owner",Io="owner",Wu="mutationQueues",xV="userId",mi="mutations",yb="batchId",va="userMutationsIndex",_b=["userId","batchId"];function yf(s,e){return[s,hn(e)]}function uS(s,e,t){return[s,hn(e),t]}const RV={},$o="documentMutations",zf="remoteDocumentsV14",CV=["prefixPath","collectionGroup","readTime","documentId"],_f="documentKeyIndex",NV=["prefixPath","collectionGroup","documentId"],cS="collectionGroupIndex",DV=["collectionGroup","readTime","prefixPath","documentId"],Zu="remoteDocumentGlobal",mg="remoteDocumentGlobalKey",Yo="targets",hS="queryTargetsIndex",VV=["canonicalId","targetId"],Xo="targetDocuments",OV=["targetId","path"],ly="documentTargetsIndex",MV=["path","targetId"],Uf="targetGlobalKey",Ta="targetGlobal",ec="collectionParents",kV=["collectionId","parent"],Jo="clientMetadata",PV="clientId",cd="bundles",LV="bundleId",hd="namedQueries",zV="name",uy="indexConfiguration",UV="indexId",pg="collectionGroupIndex",jV="collectionGroup",Uu="indexState",BV=["indexId","uid"],fS="sequenceNumberIndex",qV=["uid","sequenceNumber"],ju="indexEntries",FV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],dS="documentKeyIndex",HV=["indexId","uid","orderedDocumentKey"],fd="documentOverlays",GV=["userId","collectionPath","documentId"],gg="collectionPathOverlayIndex",KV=["userId","collectionPath","largestBatchId"],mS="collectionGroupOverlayIndex",QV=["userId","collectionGroup","largestBatchId"],cy="globals",$V="name",pS=[Wu,mi,$o,da,Yo,_c,Ta,Xo,Jo,Zu,ec,cd,hd],YV=[...pS,fd],gS=[Wu,mi,$o,zf,Yo,_c,Ta,Xo,Jo,Zu,ec,cd,hd,fd],yS=gS,hy=[...yS,uy,Uu,ju],XV=hy,_S=[...hy,cy],JV=_S;class yg extends aS{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Kt(s,e){const t=_e(s);return ws.O(t.le,e)}function vb(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Pa(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function vS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class ht{constructor(e,t){this.comparator=e,this.root=t||an.EMPTY}insert(e,t){return new ht(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,an.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,an.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nf(this.root,e,this.comparator,!1)}getReverseIterator(){return new nf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nf(this.root,e,this.comparator,!0)}}class nf{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class an{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??an.RED,this.left=a??an.EMPTY,this.right=l??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new an(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return an.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ge(27949);return e+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw ge(57766)}get value(){throw ge(16141)}get color(){throw ge(16727)}get left(){throw ge(29726)}get right(){throw ge(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new an(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class nt{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Eb(this.data.getIterator())}getIteratorFrom(e){return new Eb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof nt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new nt(this.comparator);return t.data=e,t}}class Eb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function xo(s){return s.hasNext()?s.getNext():void 0}class ei{constructor(e){this.fields=e,e.sort(vt.comparator)}static empty(){return new ei([])}unionWith(e){let t=new nt(vt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new ei(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ko(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class ES extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new ES("Invalid base64 string: "+l):l}})(e);return new Vt(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new Vt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const WV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xr(s){if(Ee(!!s,39018),typeof s=="string"){let e=0;const t=WV.exec(s);if(Ee(!!t,46558,{timestamp:s}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:yt(s.seconds),nanos:yt(s.nanos)}}function yt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Rr(s){return typeof s=="string"?Vt.fromBase64String(s):Vt.fromUint8Array(s)}const bS="server_timestamp",TS="__type__",SS="__previous_value__",wS="__local_write_time__";function fy(s){return(s?.mapValue?.fields||{})[TS]?.stringValue===bS}function dd(s){const e=s.mapValue.fields[SS];return fy(e)?dd(e):e}function tc(s){const e=xr(s.mapValue.fields[wS].timestampValue);return new tt(e.seconds,e.nanos)}class ZV{constructor(e,t,i,a,l,c,d,p,g,v,b){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=v,this.apiKey=b}}const jf="(default)";class Ca{constructor(e,t){this.projectId=e,this.database=t||jf}static empty(){return new Ca("","")}get isDefaultDatabase(){return this.database===jf}isEqual(e){return e instanceof Ca&&e.projectId===this.projectId&&e.database===this.database}}function eO(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new me(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ca(s.options.projectId,e)}const dy="__type__",AS="__max__",_s={mapValue:{fields:{__type__:{stringValue:AS}}}},my="__vector__",Wo="value",vf={nullValue:"NULL_VALUE"};function As(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?fy(s)?4:IS(s)?9007199254740991:md(s)?10:11:ge(28295,{value:s})}function Xi(s,e){if(s===e)return!0;const t=As(s);if(t!==As(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return tc(s).isEqual(tc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=xr(a.timestampValue),d=xr(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(a,l){return Rr(a.bytesValue).isEqual(Rr(l.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(a,l){return yt(a.geoPointValue.latitude)===yt(l.geoPointValue.latitude)&&yt(a.geoPointValue.longitude)===yt(l.geoPointValue.longitude)})(s,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return yt(a.integerValue)===yt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=yt(a.doubleValue),d=yt(l.doubleValue);return c===d?Ju(c)===Ju(d):isNaN(c)&&isNaN(d)}return!1})(s,e);case 9:return Ko(s.arrayValue.values||[],e.arrayValue.values||[],Xi);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(vb(c)!==vb(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Xi(c[p],d[p])))return!1;return!0})(s,e);default:return ge(52216,{left:s})}}function nc(s,e){return(s.values||[]).find((t=>Xi(t,e)))!==void 0}function Is(s,e){if(s===e)return 0;const t=As(s),i=As(e);if(t!==i)return Ce(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ce(s.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=yt(l.integerValue||l.doubleValue),p=yt(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(s,e);case 3:return bb(s.timestampValue,e.timestampValue);case 4:return bb(tc(s),tc(e));case 5:return fg(s.stringValue,e.stringValue);case 6:return(function(l,c){const d=Rr(l),p=Rr(c);return d.compareTo(p)})(s.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let g=0;g<d.length&&g<p.length;g++){const v=Ce(d[g],p[g]);if(v!==0)return v}return Ce(d.length,p.length)})(s.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Ce(yt(l.latitude),yt(c.latitude));return d!==0?d:Ce(yt(l.longitude),yt(c.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Tb(s.arrayValue,e.arrayValue);case 10:return(function(l,c){const d=l.fields||{},p=c.fields||{},g=d[Wo]?.arrayValue,v=p[Wo]?.arrayValue,b=Ce(g?.values?.length||0,v?.values?.length||0);return b!==0?b:Tb(g,v)})(s.mapValue,e.mapValue);case 11:return(function(l,c){if(l===_s.mapValue&&c===_s.mapValue)return 0;if(l===_s.mapValue)return 1;if(c===_s.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),g=c.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let b=0;b<p.length&&b<v.length;++b){const S=fg(p[b],v[b]);if(S!==0)return S;const N=Is(d[p[b]],g[v[b]]);if(N!==0)return N}return Ce(p.length,v.length)})(s.mapValue,e.mapValue);default:throw ge(23264,{he:t})}}function bb(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ce(s,e);const t=xr(s),i=xr(e),a=Ce(t.seconds,i.seconds);return a!==0?a:Ce(t.nanos,i.nanos)}function Tb(s,e){const t=s.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=Is(t[a],i[a]);if(l)return l}return Ce(t.length,i.length)}function Zo(s){return _g(s)}function _g(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const i=xr(t);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return Rr(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return de.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=_g(l);return i+"]"})(s.arrayValue):"mapValue"in s?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${_g(t.fields[c])}`;return a+"}"})(s.mapValue):ge(61005,{value:s})}function Ef(s){switch(As(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=dd(s);return e?16+Ef(e):16;case 5:return 2*s.stringValue.length;case 6:return Rr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+Ef(l)),0)})(s.arrayValue);case 10:case 11:return(function(i){let a=0;return Pa(i.fields,((l,c)=>{a+=l.length+Ef(c)})),a})(s.mapValue);default:throw ge(13486,{value:s})}}function py(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function vg(s){return!!s&&"integerValue"in s}function ic(s){return!!s&&"arrayValue"in s}function Sb(s){return!!s&&"nullValue"in s}function wb(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function bf(s){return!!s&&"mapValue"in s}function md(s){return(s?.mapValue?.fields||{})[dy]?.stringValue===my}function Bu(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Pa(s.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Bu(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Bu(s.arrayValue.values[t]);return e}return{...s}}function IS(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===AS}const xS={mapValue:{fields:{[dy]:{stringValue:my},[Wo]:{arrayValue:{}}}}};function tO(s){return"nullValue"in s?vf:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?py(Ca.empty(),de.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?md(s)?xS:{mapValue:{}}:ge(35942,{value:s})}function nO(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?py(Ca.empty(),de.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?xS:"mapValue"in s?md(s)?{mapValue:{}}:_s:ge(61959,{value:s})}function Ab(s,e){const t=Is(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function Ib(s,e){const t=Is(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!bf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bu(t)}setAll(e){let t=vt.emptyPath(),i={},a=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,a),i={},a=[],t=d.popLast()}c?i[d.lastSegment()]=Bu(c):a.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());bf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];bf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Pa(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new wn(Bu(this.value))}}function RS(s){const e=[];return Pa(s.fields,((t,i)=>{const a=new vt([t]);if(bf(i)){const l=RS(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new ei(e)}class wt{constructor(e,t,i,a,l,c,d){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new wt(e,0,Se.min(),Se.min(),Se.min(),wn.empty(),0)}static newFoundDocument(e,t,i,a){return new wt(e,1,t,Se.min(),i,a,0)}static newNoDocument(e,t){return new wt(e,2,t,Se.min(),Se.min(),wn.empty(),0)}static newUnknownDocument(e,t){return new wt(e,3,t,Se.min(),Se.min(),wn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class el{constructor(e,t){this.position=e,this.inclusive=t}}function xb(s,e,t){let i=0;for(let a=0;a<s.position.length;a++){const l=e[a],c=s.position[a];if(l.field.isKeyField()?i=de.comparator(de.fromName(c.referenceValue),t.key):i=Is(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Rb(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Xi(s.position[t],e.position[t]))return!1;return!0}class Bf{constructor(e,t="asc"){this.field=e,this.dir=t}}function iO(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class CS{}class He extends CS{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new rO(e,t,i):t==="array-contains"?new oO(e,i):t==="in"?new kS(e,i):t==="not-in"?new lO(e,i):t==="array-contains-any"?new uO(e,i):new He(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new sO(e,i):new aO(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Is(t,this.value)):t!==null&&As(this.value)===As(t)&&this.matchesComparison(Is(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class lt extends CS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new lt(e,t)}matches(e){return tl(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function tl(s){return s.op==="and"}function Eg(s){return s.op==="or"}function gy(s){return NS(s)&&tl(s)}function NS(s){for(const e of s.filters)if(e instanceof lt)return!1;return!0}function bg(s){if(s instanceof He)return s.field.canonicalString()+s.op.toString()+Zo(s.value);if(gy(s))return s.filters.map((e=>bg(e))).join(",");{const e=s.filters.map((t=>bg(t))).join(",");return`${s.op}(${e})`}}function DS(s,e){return s instanceof He?(function(i,a){return a instanceof He&&i.op===a.op&&i.field.isEqual(a.field)&&Xi(i.value,a.value)})(s,e):s instanceof lt?(function(i,a){return a instanceof lt&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,c,d)=>l&&DS(c,a.filters[d])),!0):!1})(s,e):void ge(19439)}function VS(s,e){const t=s.filters.concat(e);return lt.create(t,s.op)}function OS(s){return s instanceof He?(function(t){return`${t.field.canonicalString()} ${t.op} ${Zo(t.value)}`})(s):s instanceof lt?(function(t){return t.op.toString()+" {"+t.getFilters().map(OS).join(" ,")+"}"})(s):"Filter"}class rO extends He{constructor(e,t,i){super(e,t,i),this.key=de.fromName(i.referenceValue)}matches(e){const t=de.comparator(e.key,this.key);return this.matchesComparison(t)}}class sO extends He{constructor(e,t){super(e,"in",t),this.keys=MS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class aO extends He{constructor(e,t){super(e,"not-in",t),this.keys=MS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function MS(s,e){return(e.arrayValue?.values||[]).map((t=>de.fromName(t.referenceValue)))}class oO extends He{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ic(t)&&nc(t.arrayValue,this.value)}}class kS extends He{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&nc(this.value.arrayValue,t)}}class lO extends He{constructor(e,t){super(e,"not-in",t)}matches(e){if(nc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!nc(this.value.arrayValue,t)}}class uO extends He{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ic(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>nc(this.value.arrayValue,i)))}}class cO{constructor(e,t=null,i=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function Tg(s,e=null,t=[],i=[],a=null,l=null,c=null){return new cO(s,e,t,i,a,l,c)}function Na(s){const e=_e(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>bg(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),ud(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Zo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Zo(i))).join(",")),e.Te=t}return e.Te}function vc(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!iO(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!DS(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Rb(s.startAt,e.startAt)&&Rb(s.endAt,e.endAt)}function qf(s){return de.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Ff(s,e){return s.filters.filter((t=>t instanceof He&&t.field.isEqual(e)))}function Cb(s,e,t){let i=vf,a=!0;for(const l of Ff(s,e)){let c=vf,d=!0;switch(l.op){case"<":case"<=":c=tO(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=vf}Ab({value:i,inclusive:a},{value:c,inclusive:d})<0&&(i=c,a=d)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const c=t.position[l];Ab({value:i,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(i=c,a=t.inclusive);break}}return{value:i,inclusive:a}}function Nb(s,e,t){let i=_s,a=!0;for(const l of Ff(s,e)){let c=_s,d=!0;switch(l.op){case">=":case">":c=nO(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=_s}Ib({value:i,inclusive:a},{value:c,inclusive:d})>0&&(i=c,a=d)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const c=t.position[l];Ib({value:i,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(i=c,a=t.inclusive);break}}return{value:i,inclusive:a}}class pd{constructor(e,t=null,i=[],a=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function PS(s,e,t,i,a,l,c,d){return new pd(s,e,t,i,a,l,c,d)}function gd(s){return new pd(s)}function Db(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function hO(s){return de.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function fO(s){return s.collectionGroup!==null}function qu(s){const e=_e(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new nt(vt.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Bf(l,i))})),t.has(vt.keyField().canonicalString())||e.Ie.push(new Bf(vt.keyField(),i))}return e.Ie}function zn(s){const e=_e(s);return e.Ee||(e.Ee=dO(e,qu(s))),e.Ee}function dO(s,e){if(s.limitType==="F")return Tg(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Bf(a.field,l)}));const t=s.endAt?new el(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new el(s.startAt.position,s.startAt.inclusive):null;return Tg(s.path,s.collectionGroup,e,s.filters,s.limit,t,i)}}function Sg(s,e,t){return new pd(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function yd(s,e){return vc(zn(s),zn(e))&&s.limitType===e.limitType}function LS(s){return`${Na(zn(s))}|lt:${s.limitType}`}function Oo(s){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>OS(a))).join(", ")}]`),ud(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>Zo(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>Zo(a))).join(",")),`Target(${i})`})(zn(s))}; limitType=${s.limitType})`}function Ec(s,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):de.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(s,e)&&(function(i,a){for(const l of qu(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(s,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(s,e)&&(function(i,a){return!(i.startAt&&!(function(c,d,p){const g=xb(c,d,p);return c.inclusive?g<=0:g<0})(i.startAt,qu(i),a)||i.endAt&&!(function(c,d,p){const g=xb(c,d,p);return c.inclusive?g>=0:g>0})(i.endAt,qu(i),a))})(s,e)}function zS(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function US(s){return(e,t)=>{let i=!1;for(const a of qu(s)){const l=mO(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function mO(s,e,t){const i=s.field.isKeyField()?de.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),g=d.data.field(l);return p!==null&&g!==null?Is(p,g):ge(42886)})(s.field,e,t);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return ge(19790,{direction:s.dir})}}class Dr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Pa(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return vS(this.inner)}size(){return this.innerSize}}const pO=new ht(de.comparator);function Pn(){return pO}const jS=new ht(de.comparator);function Du(...s){let e=jS;for(const t of s)e=e.insert(t.key,t);return e}function BS(s){let e=jS;return s.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Gi(){return Fu()}function qS(){return Fu()}function Fu(){return new Dr((s=>s.toString()),((s,e)=>s.isEqual(e)))}const gO=new ht(de.comparator),yO=new nt(de.comparator);function Pe(...s){let e=yO;for(const t of s)e=e.add(t);return e}const _O=new nt(Ce);function yy(){return _O}function _y(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ju(e)?"-0":e}}function FS(s){return{integerValue:""+s}}function vO(s,e){return lS(e)?FS(e):_y(s,e)}class _d{constructor(){this._=void 0}}function EO(s,e,t){return s instanceof rc?(function(a,l){const c={fields:{[TS]:{stringValue:bS},[wS]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&fy(l)&&(l=dd(l)),l&&(c.fields[SS]=l),{mapValue:c}})(t,e):s instanceof nl?GS(s,e):s instanceof il?KS(s,e):(function(a,l){const c=HS(a,l),d=Vb(c)+Vb(a.Ae);return vg(c)&&vg(a.Ae)?FS(d):_y(a.serializer,d)})(s,e)}function bO(s,e,t){return s instanceof nl?GS(s,e):s instanceof il?KS(s,e):t}function HS(s,e){return s instanceof sc?(function(i){return vg(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class rc extends _d{}class nl extends _d{constructor(e){super(),this.elements=e}}function GS(s,e){const t=QS(e);for(const i of s.elements)t.some((a=>Xi(a,i)))||t.push(i);return{arrayValue:{values:t}}}class il extends _d{constructor(e){super(),this.elements=e}}function KS(s,e){let t=QS(e);for(const i of s.elements)t=t.filter((a=>!Xi(a,i)));return{arrayValue:{values:t}}}class sc extends _d{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Vb(s){return yt(s.integerValue||s.doubleValue)}function QS(s){return ic(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class TO{constructor(e,t){this.field=e,this.transform=t}}function SO(s,e){return s.field.isEqual(e.field)&&(function(i,a){return i instanceof nl&&a instanceof nl||i instanceof il&&a instanceof il?Ko(i.elements,a.elements,Xi):i instanceof sc&&a instanceof sc?Xi(i.Ae,a.Ae):i instanceof rc&&a instanceof rc})(s.transform,e.transform)}class wO{constructor(e,t){this.version=e,this.transformResults=t}}class Ln{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ln}static exists(e){return new Ln(void 0,e)}static updateTime(e){return new Ln(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tf(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class vd{}function $S(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new vy(s.key,Ln.none()):new pl(s.key,s.data,Ln.none());{const t=s.data,i=wn.empty();let a=new nt(vt.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new Ds(s.key,i,new ei(a.toArray()),Ln.none())}}function AO(s,e,t){s instanceof pl?(function(a,l,c){const d=a.value.clone(),p=Mb(a.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(s,e,t):s instanceof Ds?(function(a,l,c){if(!Tf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=Mb(a.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(YS(a)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(s,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Hu(s,e,t,i){return s instanceof pl?(function(l,c,d,p){if(!Tf(l.precondition,c))return d;const g=l.value.clone(),v=kb(l.fieldTransforms,p,c);return g.setAll(v),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(s,e,t,i):s instanceof Ds?(function(l,c,d,p){if(!Tf(l.precondition,c))return d;const g=kb(l.fieldTransforms,p,c),v=c.data;return v.setAll(YS(l)),v.setAll(g),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((b=>b.field)))})(s,e,t,i):(function(l,c,d){return Tf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(s,e,t)}function IO(s,e){let t=null;for(const i of s.fieldTransforms){const a=e.data.field(i.field),l=HS(i.transform,a||null);l!=null&&(t===null&&(t=wn.empty()),t.set(i.field,l))}return t||null}function Ob(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Ko(i,a,((l,c)=>SO(l,c)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class pl extends vd{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ds extends vd{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function YS(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=s.data.field(t);e.set(t,i)}})),e}function Mb(s,e,t){const i=new Map;Ee(s.length===t.length,32656,{Ve:t.length,de:s.length});for(let a=0;a<t.length;a++){const l=s[a],c=l.transform,d=e.data.field(l.field);i.set(l.field,bO(c,d,t[a]))}return i}function kb(s,e,t){const i=new Map;for(const a of s){const l=a.transform,c=t.data.field(a.field);i.set(a.field,EO(l,c,e))}return i}class vy extends vd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XS extends vd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ey{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&AO(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Hu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Hu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=qS();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const p=$S(c,d);p!==null&&i.set(a.key,p),c.isValidDocument()||c.convertToNoDocument(Se.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Pe())}isEqual(e){return this.batchId===e.batchId&&Ko(this.mutations,e.mutations,((t,i)=>Ob(t,i)))&&Ko(this.baseMutations,e.baseMutations,((t,i)=>Ob(t,i)))}}class by{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){Ee(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return gO})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new by(e,t,i,a)}}class Ty{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class xO{constructor(e,t){this.count=e,this.unchangedNames=t}}var qt,Ge;function RO(s){switch(s){case re.OK:return ge(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return ge(15467,{code:s})}}function JS(s){if(s===void 0)return Dt("GRPC error has no .code"),re.UNKNOWN;switch(s){case qt.OK:return re.OK;case qt.CANCELLED:return re.CANCELLED;case qt.UNKNOWN:return re.UNKNOWN;case qt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case qt.INTERNAL:return re.INTERNAL;case qt.UNAVAILABLE:return re.UNAVAILABLE;case qt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case qt.NOT_FOUND:return re.NOT_FOUND;case qt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case qt.ABORTED:return re.ABORTED;case qt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case qt.DATA_LOSS:return re.DATA_LOSS;default:return ge(39323,{code:s})}}(Ge=qt||(qt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";function CO(){return new TextEncoder}const NO=new Ss([4294967295,4294967295],0);function Pb(s){const e=CO().encode(s),t=new $1;return t.update(e),new Uint8Array(t.digest())}function Lb(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ss([t,i],0),new Ss([a,l],0)]}class Sy{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Vu(`Invalid padding: ${t}`);if(i<0)throw new Vu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Vu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Vu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ss.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(Ss.fromNumber(i)));return a.compare(NO)===1&&(a=new Ss([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Pb(e),[i,a]=Lb(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);if(!this.we(c))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Sy(l,a,t);return i.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=Pb(e),[i,a]=Lb(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);this.be(c)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Vu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class bc{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Tc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new bc(Se.min(),a,new ht(Ce),Pn(),Pe())}}class Tc{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Tc(i,t,Pe(),Pe(),Pe())}}class Sf{constructor(e,t,i,a){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=a}}class WS{constructor(e,t){this.targetId=e,this.Ce=t}}class ZS{constructor(e,t,i=Vt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class zb{constructor(){this.ve=0,this.Fe=Ub(),this.Me=Vt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Pe(),t=Pe(),i=Pe();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:ge(38017,{changeType:l})}})),new Tc(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=Ub()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ee(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class DO{constructor(e){this.Ge=e,this.ze=new Map,this.je=Pn(),this.He=rf(),this.Je=rf(),this.Ze=new ht(Ce)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:ge(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(qf(l))if(i===0){const c=new de(l.path);this.et(t,c,wt.newNoDocument(c,Se.min()))}else Ee(i===1,20013,{expectedCount:i});else{const c=this._t(t);if(c!==i){const d=this.ut(e),p=d?this.ct(d,e,c):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=Rr(i).toUint8Array()}catch(p){if(p instanceof ES)return Go("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Sy(c,a,l)}catch(p){return Go(p instanceof Vu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&qf(d.target)){const p=new de(d.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,wt.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let i=Pe();this.Je.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new bc(e,t,this.Ze,this.je,i);return this.je=Pn(),this.He=rf(),this.Je=rf(),this.Ze=new ht(Ce),a}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new zb,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new nt(Ce),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new nt(Ce),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||le("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new zb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function rf(){return new ht(de.comparator)}function Ub(){return new ht(de.comparator)}const VO={asc:"ASCENDING",desc:"DESCENDING"},OO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MO={and:"AND",or:"OR"};class kO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function wg(s,e){return s.useProto3Json||ud(e)?e:{value:e}}function rl(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ew(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function PO(s,e){return rl(s,e.toTimestamp())}function pn(s){return Ee(!!s,49232),Se.fromTimestamp((function(t){const i=xr(t);return new tt(i.seconds,i.nanos)})(s))}function wy(s,e){return Ag(s,e).canonicalString()}function Ag(s,e){const t=(function(a){return new ot(["projects",a.projectId,"databases",a.database])})(s).child("documents");return e===void 0?t:t.child(e)}function tw(s){const e=ot.fromString(s);return Ee(cw(e),10190,{key:e.toString()}),e}function Hf(s,e){return wy(s.databaseId,e.path)}function Sa(s,e){const t=tw(e);if(t.get(1)!==s.databaseId.projectId)throw new me(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new me(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new de(rw(t))}function nw(s,e){return wy(s.databaseId,e)}function iw(s){const e=tw(s);return e.length===4?ot.emptyPath():rw(e)}function Ig(s){return new ot(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function rw(s){return Ee(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function jb(s,e,t){return{name:Hf(s,e),fields:t.value.mapValue.fields}}function LO(s,e,t){const i=Sa(s,e.name),a=pn(e.updateTime),l=e.createTime?pn(e.createTime):Se.min(),c=new wn({mapValue:{fields:e.fields}}),d=wt.newFoundDocument(i,a,l,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function zO(s,e){let t;if("targetChange"in e){e.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:ge(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,v){return g.useProto3Json?(Ee(v===void 0||typeof v=="string",58123),Vt.fromBase64String(v||"")):(Ee(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Vt.fromUint8Array(v||new Uint8Array))})(s,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const v=g.code===void 0?re.UNKNOWN:JS(g.code);return new me(v,g.message||"")})(c);t=new ZS(i,a,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Sa(s,i.document.name),l=pn(i.document.updateTime),c=i.document.createTime?pn(i.document.createTime):Se.min(),d=new wn({mapValue:{fields:i.document.fields}}),p=wt.newFoundDocument(a,l,c,d),g=i.targetIds||[],v=i.removedTargetIds||[];t=new Sf(g,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Sa(s,i.document),l=i.readTime?pn(i.readTime):Se.min(),c=wt.newNoDocument(a,l),d=i.removedTargetIds||[];t=new Sf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Sa(s,i.document),l=i.removedTargetIds||[];t=new Sf([],l,a,null)}else{if(!("filter"in e))return ge(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new xO(a,l),d=i.targetId;t=new WS(d,c)}}return t}function Gf(s,e){let t;if(e instanceof pl)t={update:jb(s,e.key,e.value)};else if(e instanceof vy)t={delete:Hf(s,e.key)};else if(e instanceof Ds)t={update:jb(s,e.key,e.data),updateMask:HO(e.fieldMask)};else{if(!(e instanceof XS))return ge(16599,{dt:e.type});t={verify:Hf(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const d=c.transform;if(d instanceof rc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof nl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof il)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof sc)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw ge(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:PO(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ge(27497)})(s,e.precondition)),t}function xg(s,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?Ln.updateTime(pn(l.updateTime)):l.exists!==void 0?Ln.exists(l.exists):Ln.none()})(e.currentDocument):Ln.none(),i=e.updateTransforms?e.updateTransforms.map((a=>(function(c,d){let p=null;if("setToServerValue"in d)Ee(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),p=new rc;else if("appendMissingElements"in d){const v=d.appendMissingElements.values||[];p=new nl(v)}else if("removeAllFromArray"in d){const v=d.removeAllFromArray.values||[];p=new il(v)}else"increment"in d?p=new sc(c,d.increment):ge(16584,{proto:d});const g=vt.fromServerFormat(d.fieldPath);return new TO(g,p)})(s,a))):[];if(e.update){e.update.name;const a=Sa(s,e.update.name),l=new wn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(p){const g=p.fieldPaths||[];return new ei(g.map((v=>vt.fromServerFormat(v))))})(e.updateMask);return new Ds(a,l,c,t,i)}return new pl(a,l,t,i)}if(e.delete){const a=Sa(s,e.delete);return new vy(a,t)}if(e.verify){const a=Sa(s,e.verify);return new XS(a,t)}return ge(1463,{proto:e})}function UO(s,e){return s&&s.length>0?(Ee(e!==void 0,14353),s.map((t=>(function(a,l){let c=a.updateTime?pn(a.updateTime):pn(l);return c.isEqual(Se.min())&&(c=pn(l)),new wO(c,a.transformResults||[])})(t,e)))):[]}function sw(s,e){return{documents:[nw(s,e.path)]}}function aw(s,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=nw(s,a);const l=(function(g){if(g.length!==0)return uw(lt.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((v=>(function(S){return{field:Mo(S.field),direction:BO(S.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=wg(s,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function ow(s){let e=iw(s.parent);const t=s.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){Ee(i===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(b){const S=lw(b);return S instanceof lt&&gy(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(b){return b.map((S=>(function(Q){return new Bf(ko(Q.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Q.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(b){let S;return S=typeof b=="object"?b.value:b,ud(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(b){const S=!!b.before,N=b.values||[];return new el(N,S)})(t.startAt));let g=null;return t.endAt&&(g=(function(b){const S=!b.before,N=b.values||[];return new el(N,S)})(t.endAt)),PS(e,a,c,l,d,"F",p,g)}function jO(s,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function lw(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=ko(t.unaryFilter.field);return He.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=ko(t.unaryFilter.field);return He.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ko(t.unaryFilter.field);return He.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ko(t.unaryFilter.field);return He.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ge(61313);default:return ge(60726)}})(s):s.fieldFilter!==void 0?(function(t){return He.create(ko(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ge(58110);default:return ge(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return lt.create(t.compositeFilter.filters.map((i=>lw(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ge(1026)}})(t.compositeFilter.op))})(s):ge(30097,{filter:s})}function BO(s){return VO[s]}function qO(s){return OO[s]}function FO(s){return MO[s]}function Mo(s){return{fieldPath:s.canonicalString()}}function ko(s){return vt.fromServerFormat(s.fieldPath)}function uw(s){return s instanceof He?(function(t){if(t.op==="=="){if(wb(t.value))return{unaryFilter:{field:Mo(t.field),op:"IS_NAN"}};if(Sb(t.value))return{unaryFilter:{field:Mo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(wb(t.value))return{unaryFilter:{field:Mo(t.field),op:"IS_NOT_NAN"}};if(Sb(t.value))return{unaryFilter:{field:Mo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mo(t.field),op:qO(t.op),value:t.value}}})(s):s instanceof lt?(function(t){const i=t.getFilters().map((a=>uw(a)));return i.length===1?i[0]:{compositeFilter:{op:FO(t.op),filters:i}}})(s):ge(54877,{filter:s})}function HO(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function cw(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function hw(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class br{constructor(e,t,i,a,l=Se.min(),c=Se.min(),d=Vt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new br(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class fw{constructor(e){this.yt=e}}function GO(s,e){let t;if(e.document)t=LO(s.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=de.fromSegments(e.noDocument.path),a=Va(e.noDocument.readTime);t=wt.newNoDocument(i,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ge(56709);{const i=de.fromSegments(e.unknownDocument.path),a=Va(e.unknownDocument.version);t=wt.newUnknownDocument(i,a)}}return e.readTime&&t.setReadTime((function(a){const l=new tt(a[0],a[1]);return Se.fromTimestamp(l)})(e.readTime)),t}function Bb(s,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Kf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(l,c){return{name:Hf(l,c.key),fields:c.data.value.mapValue.fields,updateTime:rl(l,c.version.toTimestamp()),createTime:rl(l,c.createTime.toTimestamp())}})(s.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Da(e.version)};else{if(!e.isUnknownDocument())return ge(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:Da(e.version)}}return i}function Kf(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function Da(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Va(s){const e=new tt(s.seconds,s.nanoseconds);return Se.fromTimestamp(e)}function pa(s,e){const t=(e.baseMutations||[]).map((l=>xg(s.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const i=e.mutations.map((l=>xg(s.yt,l))),a=tt.fromMillis(e.localWriteTimeMs);return new Ey(e.batchId,a,t,i)}function Ou(s){const e=Va(s.readTime),t=s.lastLimboFreeSnapshotVersion!==void 0?Va(s.lastLimboFreeSnapshotVersion):Se.min();let i;return i=(function(l){return l.documents!==void 0})(s.query)?(function(l){const c=l.documents.length;return Ee(c===1,1966,{count:c}),zn(gd(iw(l.documents[0])))})(s.query):(function(l){return zn(ow(l))})(s.query),new br(i,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,e,t,Vt.fromBase64String(s.resumeToken))}function dw(s,e){const t=Da(e.snapshotVersion),i=Da(e.lastLimboFreeSnapshotVersion);let a;a=qf(e.target)?sw(s.yt,e.target):aw(s.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Na(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function mw(s){const e=ow({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Sg(e,e.limit,"L"):e}function Gp(s,e){return new Ty(e.largestBatchId,xg(s.yt,e.overlayMutation))}function qb(s,e){const t=e.path.lastSegment();return[s,hn(e.path.popLast()),t]}function Fb(s,e,t,i){return{indexId:s,uid:e,sequenceNumber:t,readTime:Da(i.readTime),documentKey:hn(i.documentKey.path),largestBatchId:i.largestBatchId}}class KO{getBundleMetadata(e,t){return Hb(e).get(t).next((i=>{if(i)return(function(l){return{id:l.bundleId,createTime:Va(l.createTime),version:l.version}})(i)}))}saveBundleMetadata(e,t){return Hb(e).put((function(a){return{bundleId:a.id,createTime:Da(pn(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return Gb(e).get(t).next((i=>{if(i)return(function(l){return{name:l.name,query:mw(l.bundledQuery),readTime:Va(l.readTime)}})(i)}))}saveNamedQuery(e,t){return Gb(e).put((function(a){return{name:a.name,readTime:Da(pn(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function Hb(s){return Kt(s,cd)}function Gb(s){return Kt(s,hd)}class Ed{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new Ed(e,i)}getOverlay(e,t){return Su(e).get(qb(this.userId,t)).next((i=>i?Gp(this.serializer,i):null))}getOverlays(e,t){const i=Gi();return B.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){const a=[];return i.forEach(((l,c)=>{const d=new Ty(t,c);a.push(this.bt(e,d))})),B.waitFor(a)}removeOverlaysForBatchId(e,t,i){const a=new Set;t.forEach((c=>a.add(hn(c.getCollectionPath()))));const l=[];return a.forEach((c=>{const d=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);l.push(Su(e).X(gg,d))})),B.waitFor(l)}getOverlaysForCollection(e,t,i){const a=Gi(),l=hn(t),c=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Su(e).H(gg,c).next((d=>{for(const p of d){const g=Gp(this.serializer,p);a.set(g.getKey(),g)}return a}))}getOverlaysForCollectionGroup(e,t,i,a){const l=Gi();let c;const d=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Su(e).ee({index:mS,range:d},((p,g,v)=>{const b=Gp(this.serializer,g);l.size()<a||b.largestBatchId===c?(l.set(b.getKey(),b),c=b.largestBatchId):v.done()})).next((()=>l))}bt(e,t){return Su(e).put((function(a,l,c){const[d,p,g]=qb(l,c.mutation.key);return{userId:l,collectionPath:p,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Gf(a.yt,c.mutation)}})(this.serializer,this.userId,t))}}function Su(s){return Kt(s,fd)}class QO{St(e){return Kt(e,cy)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const i=t?.value;return i?Vt.fromUint8Array(i):Vt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}class ga{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(yt(e.integerValue));else if("doubleValue"in e){const i=yt(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),Ju(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=xr(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Rr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?IS(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):md(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):ge(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const i=e.fields||{};this.Ft(t,55);for(const a of Object.keys(i))this.Ot(a,t),this.Ct(i[a],t)}kt(e,t){const i=e.fields||{};this.Ft(t,53);const a=Wo,l=i[a].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(yt(l)),this.Ot(a,t),this.Ct(i[a],t)}qt(e,t){const i=e.values||[];this.Ft(t,50);for(const a of i)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),de.fromName(e).path.forEach((i=>{this.Ft(t,60),this.$t(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}ga.Wt=new ga;const Ro=255;function $O(s){if(s===0)return 8;let e=0;return s>>4||(e+=4,s<<=4),s>>6||(e+=2,s<<=2),s>>7||(e+=1),e}function Kb(s){const e=64-(function(i){let a=0;for(let l=0;l<8;++l){const c=$O(255&i[l]);if(a+=c,c!==8)break}return a})(s);return Math.ceil(e/8)}class YO{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ht(i.value),i=t.next();this.Jt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Xt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ht(i);else if(i<2048)this.Ht(960|i>>>6),this.Ht(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|i>>>12),this.Ht(128|63&i>>>6),this.Ht(128|63&i);else{const a=t.codePointAt(0);this.Ht(240|a>>>18),this.Ht(128|63&a>>>12),this.Ht(128|63&a>>>6),this.Ht(128|63&a)}}this.Jt()}Yt(e){const t=this.en(e),i=Kb(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),i=Kb(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(Ro),this.sn(255)}_n(){this.an(Ro),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let a=1;a<t.length;++a)t[a]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Ro?(this.sn(Ro),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Ro?(this.an(Ro),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class XO{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class JO{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class wu{constructor(){this.cn=new YO,this.ascending=new XO(this.cn),this.descending=new JO(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class ya{constructor(e,t,i,a){this.hn=e,this.Pn=t,this.Tn=i,this.In=a}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.In,0),t!==e?i.set([0],this.In.length):++i[i.length-1],new ya(this.hn,this.Pn,this.Tn,i)}Rn(e,t,i){return{indexId:this.hn,uid:e,arrayValue:wf(this.Tn),directionalValue:wf(this.In),orderedDocumentKey:wf(t),documentKey:i.path.toArray()}}An(e,t,i){const a=this.Rn(e,t,i);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function hs(s,e){let t=s.hn-e.hn;return t!==0?t:(t=Qb(s.Tn,e.Tn),t!==0?t:(t=Qb(s.In,e.In),t!==0?t:de.comparator(s.Pn,e.Pn)))}function Qb(s,e){for(let t=0;t<s.length&&t<e.length;++t){const i=s[t]-e[t];if(i!==0)return i}return s.length-e.length}function wf(s){return h1()?(function(t){let i="";for(let a=0;a<t.length;a++)i+=String.fromCharCode(t[a]);return i})(s):s}function $b(s){return typeof s!="string"?s:(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(s)}class Yb{constructor(e){this.Vn=new nt(((t,i)=>vt.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const i=t;i.isInequality()?this.Vn=this.Vn.add(i):this.mn.push(i)}}get fn(){return this.Vn.size>1}gn(e){if(Ee(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=dg(e);if(t!==void 0&&!this.pn(t))return!1;const i=fa(e);let a=new Set,l=0,c=0;for(;l<i.length&&this.pn(i[l]);++l)a=a.add(i[l].fieldPath.canonicalString());if(l===i.length)return!0;if(this.Vn.size>0){const d=this.Vn.getIterator().getNext();if(!a.has(d.field.canonicalString())){const p=i[l];if(!this.yn(d,p)||!this.wn(this.dn[c++],p))return!1}++l}for(;l<i.length;++l){const d=i[l];if(c>=this.dn.length||!this.wn(this.dn[c++],d))return!1}return!0}bn(){if(this.fn)return null;let e=new nt(vt.comparator);const t=[];for(const i of this.mn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new gf(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new gf(i.field,0))}for(const i of this.dn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new gf(i.field,i.dir==="asc"?0:1)));return new Pf(Pf.UNKNOWN_ID,this.collectionId,t,Xu.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function pw(s){if(Ee(s instanceof He||s instanceof lt,20012),s instanceof He){if(s instanceof kS){const t=s.value.arrayValue?.values?.map((i=>He.create(s.field,"==",i)))||[];return lt.create(t,"or")}return s}const e=s.filters.map((t=>pw(t)));return lt.create(e,s.op)}function WO(s){if(s.getFilters().length===0)return[];const e=Ng(pw(s));return Ee(gw(e),7391),Rg(e)||Cg(e)?[e]:e.getFilters()}function Rg(s){return s instanceof He}function Cg(s){return s instanceof lt&&gy(s)}function gw(s){return Rg(s)||Cg(s)||(function(t){if(t instanceof lt&&Eg(t)){for(const i of t.getFilters())if(!Rg(i)&&!Cg(i))return!1;return!0}return!1})(s)}function Ng(s){if(Ee(s instanceof He||s instanceof lt,34018),s instanceof He)return s;if(s.filters.length===1)return Ng(s.filters[0]);const e=s.filters.map((i=>Ng(i)));let t=lt.create(e,s.op);return t=Qf(t),gw(t)?t:(Ee(t instanceof lt,64498),Ee(tl(t),40251),Ee(t.filters.length>1,57927),t.filters.reduce(((i,a)=>Ay(i,a))))}function Ay(s,e){let t;return Ee(s instanceof He||s instanceof lt,38388),Ee(e instanceof He||e instanceof lt,25473),t=s instanceof He?e instanceof He?(function(a,l){return lt.create([a,l],"and")})(s,e):Xb(s,e):e instanceof He?Xb(e,s):(function(a,l){if(Ee(a.filters.length>0&&l.filters.length>0,48005),tl(a)&&tl(l))return VS(a,l.getFilters());const c=Eg(a)?a:l,d=Eg(a)?l:a,p=c.filters.map((g=>Ay(g,d)));return lt.create(p,"or")})(s,e),Qf(t)}function Xb(s,e){if(tl(e))return VS(e,s.getFilters());{const t=e.filters.map((i=>Ay(s,i)));return lt.create(t,"or")}}function Qf(s){if(Ee(s instanceof He||s instanceof lt,11850),s instanceof He)return s;const e=s.getFilters();if(e.length===1)return Qf(e[0]);if(NS(s))return s;const t=e.map((a=>Qf(a))),i=[];return t.forEach((a=>{a instanceof He?i.push(a):a instanceof lt&&(a.op===s.op?i.push(...a.filters):i.push(a))})),i.length===1?i[0]:lt.create(i,s.op)}class ZO{constructor(){this.Sn=new Iy}addToCollectionParentIndex(e,t){return this.Sn.add(t),B.resolve()}getCollectionParents(e,t){return B.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return B.resolve()}deleteFieldIndex(e,t){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,t){return B.resolve()}getDocumentsMatchingTarget(e,t){return B.resolve(null)}getIndexType(e,t){return B.resolve(0)}getFieldIndexes(e,t){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,t){return B.resolve(Un.min())}getMinOffsetFromCollectionGroup(e,t){return B.resolve(Un.min())}updateCollectionGroup(e,t,i){return B.resolve()}updateIndexEntries(e,t){return B.resolve()}}class Iy{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new nt(ot.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new nt(ot.comparator)).toArray()}}const Jb="IndexedDbIndexManager",sf=new Uint8Array(0);class e4{constructor(e,t){this.databaseId=t,this.Dn=new Iy,this.Cn=new Dr((i=>Na(i)),((i,a)=>vc(i,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const i=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const l={collectionId:i,parent:hn(a)};return Wb(e).put(l)}return B.resolve()}getCollectionParents(e,t){const i=[],a=IDBKeyRange.bound([t,""],[tS(t),""],!1,!0);return Wb(e).H(a).next((l=>{for(const c of l){if(c.collectionId!==t)break;i.push(Hi(c.parent))}return i}))}addFieldIndex(e,t){const i=Au(e),a=(function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map((p=>[p.fieldPath.canonicalString(),p.kind]))}})(t);delete a.indexId;const l=i.add(a);if(t.indexState){const c=No(e);return l.next((d=>{c.put(Fb(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const i=Au(e),a=No(e),l=Co(e);return i.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Au(e),i=Co(e),a=No(e);return t.X().next((()=>i.X())).next((()=>a.X()))}createTargetIndexes(e,t){return B.forEach(this.vn(t),(i=>this.getIndexType(e,i).next((a=>{if(a===0||a===1){const l=new Yb(i).bn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const i=Co(e);let a=!0;const l=new Map;return B.forEach(this.vn(t),(c=>this.Fn(e,c).next((d=>{a&&(a=!!d),l.set(c,d)})))).next((()=>{if(a){let c=Pe();const d=[];return B.forEach(l,((p,g)=>{le(Jb,`Using index ${(function(W){return`id=${W.indexId}|cg=${W.collectionGroup}|f=${W.fields.map((se=>`${se.fieldPath}:${se.kind}`)).join(",")}`})(p)} to execute ${Na(t)}`);const v=(function(W,se){const ue=dg(se);if(ue===void 0)return null;for(const ce of Ff(W,ue.fieldPath))switch(ce.op){case"array-contains-any":return ce.value.arrayValue.values||[];case"array-contains":return[ce.value]}return null})(g,p),b=(function(W,se){const ue=new Map;for(const ce of fa(se))for(const x of Ff(W,ce.fieldPath))switch(x.op){case"==":case"in":ue.set(ce.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return ue.set(ce.fieldPath.canonicalString(),x.value),Array.from(ue.values())}return null})(g,p),S=(function(W,se){const ue=[];let ce=!0;for(const x of fa(se)){const I=x.kind===0?Cb(W,x.fieldPath,W.startAt):Nb(W,x.fieldPath,W.startAt);ue.push(I.value),ce&&(ce=I.inclusive)}return new el(ue,ce)})(g,p),N=(function(W,se){const ue=[];let ce=!0;for(const x of fa(se)){const I=x.kind===0?Nb(W,x.fieldPath,W.endAt):Cb(W,x.fieldPath,W.endAt);ue.push(I.value),ce&&(ce=I.inclusive)}return new el(ue,ce)})(g,p),Q=this.Mn(p,g,S),K=this.Mn(p,g,N),U=this.xn(p,g,b),ee=this.On(p.indexId,v,Q,S.inclusive,K,N.inclusive,U);return B.forEach(ee,(J=>i.Z(J,t.limit).next((W=>{W.forEach((se=>{const ue=de.fromSegments(se.documentKey);c.has(ue)||(c=c.add(ue),d.push(ue))}))}))))})).next((()=>d))}return B.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=WO(lt.create(e.filters,"and")).map((i=>Tg(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,i,a,l,c,d){const p=(t!=null?t.length:1)*Math.max(i.length,l.length),g=p/(t!=null?t.length:1),v=[];for(let b=0;b<p;++b){const S=t?this.Nn(t[b/g]):sf,N=this.Bn(e,S,i[b%g],a),Q=this.Ln(e,S,l[b%g],c),K=d.map((U=>this.Bn(e,S,U,!0)));v.push(...this.createRange(N,Q,K))}return v}Bn(e,t,i,a){const l=new ya(e,de.empty(),t,i);return a?l:l.En()}Ln(e,t,i,a){const l=new ya(e,de.empty(),t,i);return a?l.En():l}Fn(e,t){const i=new Yb(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let c=null;for(const d of l)i.gn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c}))}getIndexType(e,t){let i=2;const a=this.vn(t);return B.forEach(a,(l=>this.Fn(e,l).next((c=>{c?i!==0&&c.fields.length<(function(p){let g=new nt(vt.comparator),v=!1;for(const b of p.filters)for(const S of b.getFlattenedFilters())S.field.isKeyField()||(S.op==="array-contains"||S.op==="array-contains-any"?v=!0:g=g.add(S.field));for(const b of p.orderBy)b.field.isKeyField()||(g=g.add(b.field));return g.size+(v?1:0)})(l)&&(i=1):i=0})))).next((()=>(function(c){return c.limit!==null})(t)&&a.length>1&&i===2?1:i))}kn(e,t){const i=new wu;for(const a of fa(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=i.ln(a.kind);ga.Wt.Dt(l,c)}return i.un()}Nn(e){const t=new wu;return ga.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const i=new wu;return ga.Wt.Dt(py(this.databaseId,t),i.ln((function(l){const c=fa(l);return c.length===0?0:c[c.length-1].kind})(e))),i.un()}xn(e,t,i){if(i===null)return[];let a=[];a.push(new wu);let l=0;for(const c of fa(e)){const d=i[l++];for(const p of a)if(this.qn(t,c.fieldPath)&&ic(d))a=this.Un(a,c,d);else{const g=p.ln(c.kind);ga.Wt.Dt(d,g)}}return this.$n(a)}Mn(e,t,i){return this.xn(e,t,i.position)}$n(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Un(e,t,i){const a=[...e],l=[];for(const c of i.arrayValue.values||[])for(const d of a){const p=new wu;p.seed(d.un()),ga.Wt.Dt(c,p.ln(t.kind)),l.push(p)}return l}qn(e,t){return!!e.filters.find((i=>i instanceof He&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=Au(e),a=No(e);return(t?i.H(pg,IDBKeyRange.bound(t,t)):i.H()).next((l=>{const c=[];return B.forEach(l,(d=>a.get([d.indexId,this.uid]).next((p=>{c.push((function(v,b){const S=b?new Xu(b.sequenceNumber,new Un(Va(b.readTime),new de(Hi(b.documentKey)),b.largestBatchId)):Xu.empty(),N=v.fields.map((([Q,K])=>new gf(vt.fromServerFormat(Q),K)));return new Pf(v.indexId,v.collectionGroup,N,S)})(d,p))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,a)=>{const l=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Ce(i.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const a=Au(e),l=No(e);return this.Wn(e).next((c=>a.H(pg,IDBKeyRange.bound(t,t)).next((d=>B.forEach(d,(p=>l.put(Fb(p.indexId,this.uid,c,i))))))))}updateIndexEntries(e,t){const i=new Map;return B.forEach(t,((a,l)=>{const c=i.get(a.collectionGroup);return(c?B.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next((d=>(i.set(a.collectionGroup,d),B.forEach(d,(p=>this.Qn(e,a,p).next((g=>{const v=this.Gn(l,p);return g.isEqual(v)?B.resolve():this.zn(e,l,p,g,v)})))))))}))}jn(e,t,i,a){return Co(e).put(a.Rn(this.uid,this.Kn(i,t.key),t.key))}Hn(e,t,i,a){return Co(e).delete(a.An(this.uid,this.Kn(i,t.key),t.key))}Qn(e,t,i){const a=Co(e);let l=new nt(hs);return a.ee({index:dS,range:IDBKeyRange.only([i.indexId,this.uid,wf(this.Kn(i,t))])},((c,d)=>{l=l.add(new ya(i.indexId,t,$b(d.arrayValue),$b(d.directionalValue)))})).next((()=>l))}Gn(e,t){let i=new nt(hs);const a=this.kn(t,e);if(a==null)return i;const l=dg(t);if(l!=null){const c=e.data.field(l.fieldPath);if(ic(c))for(const d of c.arrayValue.values||[])i=i.add(new ya(t.indexId,e.key,this.Nn(d),a))}else i=i.add(new ya(t.indexId,e.key,sf,a));return i}zn(e,t,i,a,l){le(Jb,"Updating index entries for document '%s'",t.key);const c=[];return(function(p,g,v,b,S){const N=p.getIterator(),Q=g.getIterator();let K=xo(N),U=xo(Q);for(;K||U;){let ee=!1,J=!1;if(K&&U){const W=v(K,U);W<0?J=!0:W>0&&(ee=!0)}else K!=null?J=!0:ee=!0;ee?(b(U),U=xo(Q)):J?(S(K),K=xo(N)):(K=xo(N),U=xo(Q))}})(a,l,hs,(d=>{c.push(this.jn(e,t,i,d))}),(d=>{c.push(this.Hn(e,t,i,d))})),B.waitFor(c)}Wn(e){let t=1;return No(e).ee({index:fS,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((c,d)=>hs(c,d))).filter(((c,d,p)=>!d||hs(c,p[d-1])!==0));const a=[];a.push(e);for(const c of i){const d=hs(c,e),p=hs(c,t);if(d===0)a[0]=e.En();else if(d>0&&p<0)a.push(c),a.push(c.En());else if(p>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Jn(a[c],a[c+1]))return[];const d=a[c].An(this.uid,sf,de.empty()),p=a[c+1].An(this.uid,sf,de.empty());l.push(IDBKeyRange.bound(d,p))}return l}Jn(e,t){return hs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Zb)}getMinOffset(e,t){return B.mapArray(this.vn(t),(i=>this.Fn(e,i).next((a=>a||ge(44426))))).next(Zb)}}function Wb(s){return Kt(s,ec)}function Co(s){return Kt(s,ju)}function Au(s){return Kt(s,uy)}function No(s){return Kt(s,Uu)}function Zb(s){Ee(s.length!==0,28825);let e=s[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<s.length;i++){const a=s[i].indexState.offset;ay(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Un(e.readTime,e.documentKey,t)}const eT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yw=41943040;class cn{static withCacheSize(e){return new cn(e,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}function _w(s,e,t){const i=s.store(mi),a=s.store($o),l=[],c=IDBKeyRange.only(t.batchId);let d=0;const p=i.ee({range:c},((v,b,S)=>(d++,S.delete())));l.push(p.next((()=>{Ee(d===1,47070,{batchId:t.batchId})})));const g=[];for(const v of t.mutations){const b=uS(e,v.key.path,t.batchId);l.push(a.delete(b)),g.push(v.key)}return B.waitFor(l).next((()=>g))}function $f(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw ge(14731);e=s.noDocument}return JSON.stringify(e).length}cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(yw,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);class bd{constructor(e,t,i,a){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=a,this.Zn={}}static wt(e,t,i,a){Ee(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new bd(l,t,i,a)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fs(e).ee({index:va,range:i},((a,l,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,i,a){const l=Po(e),c=fs(e);return c.add({}).next((d=>{Ee(typeof d=="number",49019);const p=new Ey(d,t,i,a),g=(function(N,Q,K){const U=K.baseMutations.map((J=>Gf(N.yt,J))),ee=K.mutations.map((J=>Gf(N.yt,J)));return{userId:Q,batchId:K.batchId,localWriteTimeMs:K.localWriteTime.toMillis(),baseMutations:U,mutations:ee}})(this.serializer,this.userId,p),v=[];let b=new nt(((S,N)=>Ce(S.canonicalString(),N.canonicalString())));for(const S of a){const N=uS(this.userId,S.key.path,d);b=b.add(S.key.path.popLast()),v.push(c.put(g)),v.push(l.put(N,RV))}return b.forEach((S=>{v.push(this.indexManager.addToCollectionParentIndex(e,S))})),e.addOnCommittedListener((()=>{this.Zn[d]=p.keys()})),B.waitFor(v).next((()=>p))}))}lookupMutationBatch(e,t){return fs(e).get(t).next((i=>i?(Ee(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),pa(this.serializer,i)):null))}Xn(e,t){return this.Zn[t]?B.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const a=i.keys();return this.Zn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=IDBKeyRange.lowerBound([this.userId,i]);let l=null;return fs(e).ee({index:va,range:a},((c,d,p)=>{d.userId===this.userId&&(Ee(d.batchId>=i,47524,{Yn:i}),l=pa(this.serializer,d)),p.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=ba;return fs(e).ee({index:va,range:t,reverse:!0},((a,l,c)=>{i=l.batchId,c.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ba],[this.userId,Number.POSITIVE_INFINITY]);return fs(e).H(va,t).next((i=>i.map((a=>pa(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=yf(this.userId,t.path),a=IDBKeyRange.lowerBound(i),l=[];return Po(e).ee({range:a},((c,d,p)=>{const[g,v,b]=c,S=Hi(v);if(g===this.userId&&t.path.isEqual(S))return fs(e).get(b).next((N=>{if(!N)throw ge(61480,{er:c,batchId:b});Ee(N.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:N.userId,batchId:b}),l.push(pa(this.serializer,N))}));p.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new nt(Ce);const a=[];return t.forEach((l=>{const c=yf(this.userId,l.path),d=IDBKeyRange.lowerBound(c),p=Po(e).ee({range:d},((g,v,b)=>{const[S,N,Q]=g,K=Hi(N);S===this.userId&&l.path.isEqual(K)?i=i.add(Q):b.done()}));a.push(p)})),B.waitFor(a).next((()=>this.tr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1,l=yf(this.userId,i),c=IDBKeyRange.lowerBound(l);let d=new nt(Ce);return Po(e).ee({range:c},((p,g,v)=>{const[b,S,N]=p,Q=Hi(S);b===this.userId&&i.isPrefixOf(Q)?Q.length===a&&(d=d.add(N)):v.done()})).next((()=>this.tr(e,d)))}tr(e,t){const i=[],a=[];return t.forEach((l=>{a.push(fs(e).get(l).next((c=>{if(c===null)throw ge(35274,{batchId:l});Ee(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),i.push(pa(this.serializer,c))})))})),B.waitFor(a).next((()=>i))}removeMutationBatch(e,t){return _w(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),B.forEach(i,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return B.resolve();const i=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),a=[];return Po(e).ee({range:i},((l,c,d)=>{if(l[0]===this.userId){const p=Hi(l[1]);a.push(p)}else d.done()})).next((()=>{Ee(a.length===0,56720,{rr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return vw(e,this.userId,t)}ir(e){return Ew(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:ba,lastStreamToken:""}))}}function vw(s,e,t){const i=yf(e,t.path),a=i[1],l=IDBKeyRange.lowerBound(i);let c=!1;return Po(s).ee({range:l,Y:!0},((d,p,g)=>{const[v,b,S]=d;v===e&&b===a&&(c=!0),g.done()})).next((()=>c))}function fs(s){return Kt(s,mi)}function Po(s){return Kt(s,$o)}function Ew(s){return Kt(s,Wu)}class Oa{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Oa(0)}static ar(){return new Oa(-1)}}class t4{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const i=new Oa(t.highestTargetId);return t.highestTargetId=i.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>Se.fromTimestamp(new tt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.ur(e).next((a=>(a.highestListenSequenceNumber=t,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.cr(e,a))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((i=>(i.targetCount+=1,this.hr(t,i),this.cr(e,i))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Do(e).delete(t.targetId))).next((()=>this.ur(e))).next((i=>(Ee(i.targetCount>0,8065),i.targetCount-=1,this.cr(e,i))))}removeTargets(e,t,i){let a=0;const l=[];return Do(e).ee(((c,d)=>{const p=Ou(d);p.sequenceNumber<=t&&i.get(p.targetId)===null&&(a++,l.push(this.removeTargetData(e,p)))})).next((()=>B.waitFor(l))).next((()=>a))}forEachTarget(e,t){return Do(e).ee(((i,a)=>{const l=Ou(a);t(l)}))}ur(e){return tT(e).get(Uf).next((t=>(Ee(t!==null,2888),t)))}cr(e,t){return tT(e).put(Uf,t)}lr(e,t){return Do(e).put(dw(this.serializer,t))}hr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const i=Na(t),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let l=null;return Do(e).ee({range:a,index:hS},((c,d,p)=>{const g=Ou(d);vc(t,g.target)&&(l=g,p.done())})).next((()=>l))}addMatchingKeys(e,t,i){const a=[],l=ys(e);return t.forEach((c=>{const d=hn(c.path);a.push(l.put({targetId:i,path:d})),a.push(this.referenceDelegate.addReference(e,i,c))})),B.waitFor(a)}removeMatchingKeys(e,t,i){const a=ys(e);return B.forEach(t,(l=>{const c=hn(l.path);return B.waitFor([a.delete([i,c]),this.referenceDelegate.removeReference(e,i,l)])}))}removeMatchingKeysForTargetId(e,t){const i=ys(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),a=ys(e);let l=Pe();return a.ee({range:i,Y:!0},((c,d,p)=>{const g=Hi(c[1]),v=new de(g);l=l.add(v)})).next((()=>l))}containsKey(e,t){const i=hn(t.path),a=IDBKeyRange.bound([i],[tS(i)],!1,!0);let l=0;return ys(e).ee({index:ly,Y:!0,range:a},(([c,d],p,g)=>{c!==0&&(l++,g.done())})).next((()=>l>0))}At(e,t){return Do(e).get(t).next((i=>i?Ou(i):null))}}function Do(s){return Kt(s,Yo)}function tT(s){return Kt(s,Ta)}function ys(s){return Kt(s,Xo)}const nT="LruGarbageCollector",bw=1048576;function iT([s,e],[t,i]){const a=Ce(s,t);return a===0?Ce(e,i):a}class n4{constructor(e){this.Pr=e,this.buffer=new nt(iT),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();iT(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Tw{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){le(nT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ns(t)?le(nT,"Ignoring IndexedDB error during garbage collection: ",t):await Cs(t)}await this.Ar(3e5)}))}}class i4{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return B.resolve(An.ce);const i=new n4(t);return this.Vr.forEachTarget(e,(a=>i.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>i.Er(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(eT)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eT):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,a,l,c,d,p,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),a=this.params.maximumSequenceNumbersToCollect):a=b,c=Date.now(),this.nthSequenceNumber(e,a)))).next((b=>(i=b,d=Date.now(),this.removeTargets(e,i,t)))).next((b=>(l=b,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((b=>(g=Date.now(),Vo()<=Be.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${b} documents in `+(g-p)+`ms
Total Duration: ${g-v}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:b}))))}}function Sw(s,e){return new i4(s,e)}class r4{constructor(e,t){this.db=e,this.garbageCollector=Sw(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((i,a)=>t(a)))}addReference(e,t,i){return af(e,i)}removeReference(e,t,i){return af(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return af(e,t)}wr(e,t){return(function(a,l){let c=!1;return Ew(a).te((d=>vw(a,d,l).next((p=>(p&&(c=!0),B.resolve(!p)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.yr(e,((c,d)=>{if(d<=t){const p=this.wr(e,c).next((g=>{if(!g)return l++,i.getEntry(e,c).next((()=>(i.removeEntry(c,Se.min()),ys(e).delete((function(b){return[0,hn(b.path)]})(c)))))}));a.push(p)}})).next((()=>B.waitFor(a))).next((()=>i.apply(e))).next((()=>l))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return af(e,t)}yr(e,t){const i=ys(e);let a,l=An.ce;return i.ee({index:ly},(([c,d],{path:p,sequenceNumber:g})=>{c===0?(l!==An.ce&&t(new de(Hi(a)),l),l=g,a=p):l=An.ce})).next((()=>{l!==An.ce&&t(new de(Hi(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function af(s,e){return ys(s).put((function(i,a){return{targetId:0,path:hn(i.path),sequenceNumber:a}})(e,s.currentSequenceNumber))}class ww{constructor(){this.changes=new Dr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?B.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class s4{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return ua(e).put(i)}removeEntry(e,t,i){return ua(e).delete((function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Kf(c),d[d.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.br(e,i))))}getEntry(e,t){let i=wt.newInvalidDocument(t);return ua(e).ee({index:_f,range:IDBKeyRange.only(Iu(t))},((a,l)=>{i=this.Sr(t,l)})).next((()=>i))}Dr(e,t){let i={size:0,document:wt.newInvalidDocument(t)};return ua(e).ee({index:_f,range:IDBKeyRange.only(Iu(t))},((a,l)=>{i={document:this.Sr(t,l),size:$f(l)}})).next((()=>i))}getEntries(e,t){let i=Pn();return this.Cr(e,t,((a,l)=>{const c=this.Sr(a,l);i=i.insert(a,c)})).next((()=>i))}vr(e,t){let i=Pn(),a=new ht(de.comparator);return this.Cr(e,t,((l,c)=>{const d=this.Sr(l,c);i=i.insert(l,d),a=a.insert(l,$f(c))})).next((()=>({documents:i,Fr:a})))}Cr(e,t,i){if(t.isEmpty())return B.resolve();let a=new nt(aT);t.forEach((p=>a=a.add(p)));const l=IDBKeyRange.bound(Iu(a.first()),Iu(a.last())),c=a.getIterator();let d=c.getNext();return ua(e).ee({index:_f,range:l},((p,g,v)=>{const b=de.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;d&&aT(d,b)<0;)i(d,null),d=c.getNext();d&&d.isEqual(b)&&(i(d,g),d=c.hasNext()?c.getNext():null),d?v.j(Iu(d)):v.done()})).next((()=>{for(;d;)i(d,null),d=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,i,a,l){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),Kf(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],p=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ua(e).H(IDBKeyRange.bound(d,p,!0)).next((g=>{l?.incrementDocumentReadCount(g.length);let v=Pn();for(const b of g){const S=this.Sr(de.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);S.isFoundDocument()&&(Ec(t,S)||a.has(S.key))&&(v=v.insert(S.key,S))}return v}))}getAllFromCollectionGroup(e,t,i,a){let l=Pn();const c=sT(t,i),d=sT(t,Un.max());return ua(e).ee({index:cS,range:IDBKeyRange.bound(c,d,!0)},((p,g,v)=>{const b=this.Sr(de.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);l=l.insert(b.key,b),l.size===a&&v.done()})).next((()=>l))}newChangeBuffer(e){return new a4(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return rT(e).get(mg).next((t=>(Ee(!!t,20021),t)))}br(e,t){return rT(e).put(mg,t)}Sr(e,t){if(t){const i=GO(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(Se.min())))return i}return wt.newInvalidDocument(e)}}function Aw(s){return new s4(s)}class a4 extends ww{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new Dr((i=>i.toString()),((i,a)=>i.isEqual(a)))}applyChanges(e){const t=[];let i=0,a=new nt(((l,c)=>Ce(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const d=this.Or.get(l);if(t.push(this.Mr.removeEntry(e,l,d.readTime)),c.isValidDocument()){const p=Bb(this.Mr.serializer,c);a=a.add(l.path.popLast());const g=$f(p);i+=g-d.size,t.push(this.Mr.addEntry(e,l,p))}else if(i-=d.size,this.trackRemovals){const p=Bb(this.Mr.serializer,c.convertToNoDocument(Se.min()));t.push(this.Mr.addEntry(e,l,p))}})),a.forEach((l=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Mr.updateMetadata(e,i)),B.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((i=>(this.Or.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:i,Fr:a})=>(a.forEach(((l,c)=>{this.Or.set(l,{size:c,readTime:i.get(l).readTime})})),i)))}}function rT(s){return Kt(s,Zu)}function ua(s){return Kt(s,zf)}function Iu(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function sT(s,e){const t=e.documentKey.path.toArray();return[s,Kf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function aT(s,e){const t=s.path.toArray(),i=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<i.length-2;++l)if(a=Ce(t[l],i[l]),a)return a;return a=Ce(t.length,i.length),a||(a=Ce(t[t.length-2],i[i.length-2]),a||Ce(t[t.length-1],i[i.length-1]))}class o4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Iw{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&Hu(i.mutation,a,ei.empty(),tt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Pe()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Pe()){const a=Gi();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let c=Du();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=Gi();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Pe())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,i,a){let l=Pn();const c=Fu(),d=(function(){return Fu()})();return t.forEach(((p,g)=>{const v=i.get(g.key);a.has(g.key)&&(v===void 0||v.mutation instanceof Ds)?l=l.insert(g.key,g):v!==void 0?(c.set(g.key,v.mutation.getFieldMask()),Hu(v.mutation,g,v.mutation.getFieldMask(),tt.now())):c.set(g.key,ei.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,v)=>c.set(g,v))),t.forEach(((g,v)=>d.set(g,new o4(v,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=Fu();let a=new ht(((c,d)=>c-d)),l=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let v=i.get(p)||ei.empty();v=d.applyToLocalView(g,v),i.set(p,v);const b=(a.get(d.batchId)||Pe()).add(p);a=a.insert(d.batchId,b)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,v=p.value,b=qS();v.forEach((S=>{if(!l.has(S)){const N=$S(t.get(S),i.get(S));N!==null&&b.set(S,N),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,b))}return B.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return hO(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):fO(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):B.resolve(Gi());let d=Qo,p=l;return c.next((g=>B.forEach(g,((v,b)=>(d<b.largestBatchId&&(d=b.largestBatchId),l.get(v)?B.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{p=p.insert(v,S)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,Pe()))).next((v=>({batchId:d,changes:BS(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new de(t)).next((i=>{let a=Du();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let c=Du();return this.indexManager.getCollectionParents(e,l).next((d=>B.forEach(d,(p=>{const g=(function(b,S){return new pd(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,i,a).next((v=>{v.forEach(((b,S)=>{c=c.insert(b,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((c=>{l.forEach(((p,g)=>{const v=g.getKey();c.get(v)===null&&(c=c.insert(v,wt.newInvalidDocument(v)))}));let d=Du();return c.forEach(((p,g)=>{const v=l.get(p);v!==void 0&&Hu(v.mutation,g,ei.empty(),tt.now()),Ec(t,g)&&(d=d.insert(p,g))})),d}))}}class l4{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return B.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:pn(a.createTime)}})(t)),B.resolve()}getNamedQuery(e,t){return B.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:mw(a.bundledQuery),readTime:pn(a.readTime)}})(t)),B.resolve()}}class u4{constructor(){this.overlays=new ht(de.comparator),this.Lr=new Map}getOverlay(e,t){return B.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Gi();return B.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.bt(e,t,l)})),B.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.Lr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(i)),B.resolve()}getOverlaysForCollection(e,t,i){const a=Gi(),l=t.length+1,c=new de(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>i&&a.set(p.getKey(),p)}return B.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new ht(((g,v)=>g-v));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>i){let v=l.get(g.largestBatchId);v===null&&(v=Gi(),l=l.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const d=Gi(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,v)=>d.set(g,v))),!(d.size()>=a)););return B.resolve(d)}bt(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.Lr.get(a.largestBatchId).delete(i.key);this.Lr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new Ty(t,i));let l=this.Lr.get(t);l===void 0&&(l=Pe(),this.Lr.set(t,l)),this.Lr.set(t,l.add(i.key))}}class c4{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,B.resolve()}}class xy{constructor(){this.kr=new nt(Xt.Kr),this.qr=new nt(Xt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new Xt(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Xt(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new de(new ot([])),i=new Xt(t,e),a=new Xt(t,e+1),l=[];return this.qr.forEachInRange([i,a],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new de(new ot([])),i=new Xt(t,e),a=new Xt(t,e+1);let l=Pe();return this.qr.forEachInRange([i,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Xt(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Xt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return de.comparator(e.key,t.key)||Ce(e.Hr,t.Hr)}static Ur(e,t){return Ce(e.Hr,t.Hr)||de.comparator(e.key,t.key)}}class h4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new nt(Xt.Kr)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Ey(l,t,i,a);this.mutationQueue.push(c);for(const d of a)this.Jr=this.Jr.add(new Xt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return B.resolve(c)}lookupMutationBatch(e,t){return B.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.Xr(i),l=a<0?0:a;return B.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?ba:this.Yn-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Xt(t,0),a=new Xt(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([i,a],(c=>{const d=this.Zr(c.Hr);l.push(d)})),B.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new nt(Ce);return t.forEach((a=>{const l=new Xt(a,0),c=new Xt(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(d=>{i=i.add(d.Hr)}))})),B.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;de.isDocumentKey(l)||(l=l.child(""));const c=new Xt(new de(l),0);let d=new nt(Ce);return this.Jr.forEachWhile((p=>{const g=p.key.path;return!!i.isPrefixOf(g)&&(g.length===a&&(d=d.add(p.Hr)),!0)}),c),B.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((i=>{const a=this.Zr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Ee(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return B.forEach(t.mutations,(a=>{const l=new Xt(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new Xt(t,0),a=this.Jr.firstAfterOrEqual(i);return B.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class f4{constructor(e){this.ti=e,this.docs=(function(){return new ht(de.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,c=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return B.resolve(i?i.document.mutableCopy():wt.newInvalidDocument(t))}getEntries(e,t){let i=Pn();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():wt.newInvalidDocument(a))})),B.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=Pn();const c=t.path,d=new de(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||ay(rS(v),i)<=0||(a.has(v.key)||Ec(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return B.resolve(l)}getAllFromCollectionGroup(e,t,i,a){ge(9500)}ni(e,t){return B.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new d4(this)}getSize(e){return B.resolve(this.size)}}class d4 extends ww{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(i)})),B.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class m4{constructor(e){this.persistence=e,this.ri=new Dr((t=>Na(t)),vc),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.ii=0,this.si=new xy,this.targetCount=0,this.oi=Oa._r()}forEachTarget(e,t){return this.ri.forEach(((i,a)=>t(a))),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),B.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Oa(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,B.resolve()}updateTargetData(e,t){return this.lr(t),B.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.ri.forEach(((c,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),B.waitFor(l).next((()=>a))}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return B.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),B.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),B.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),B.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return B.resolve(i)}containsKey(e,t){return B.resolve(this.si.containsKey(t))}}class Ry{constructor(e,t){this._i={},this.overlays={},this.ai=new An(0),this.ui=!1,this.ui=!0,this.ci=new c4,this.referenceDelegate=e(this),this.li=new m4(this),this.indexManager=new ZO,this.remoteDocumentCache=(function(a){return new f4(a)})((i=>this.referenceDelegate.hi(i))),this.serializer=new fw(t),this.Pi=new l4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new u4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new h4(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){le("MemoryPersistence","Starting transaction:",e);const a=new p4(this.ai.next());return this.referenceDelegate.Ti(),i(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return B.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class p4 extends aS{constructor(e){super(),this.currentSequenceNumber=e}}class Td{constructor(e){this.persistence=e,this.Ri=new xy,this.Ai=null}static Vi(e){return new Td(e)}get di(){if(this.Ai)return this.Ai;throw ge(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),B.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),B.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),B.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.di,(i=>{const a=de.fromPath(i);return this.mi(e,a).next((l=>{l||t.removeEntry(a,Se.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return B.or([()=>B.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Yf{constructor(e,t){this.persistence=e,this.fi=new Dr((i=>hn(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=Sw(this,t)}static Vi(e,t){return new Yf(e,t)}Ti(){}Ii(e){return B.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return B.forEach(this.fi,((i,a)=>this.wr(e,i,a).next((l=>l?B.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(c=>this.wr(e,c,t).next((d=>{d||(i++,l.removeEntry(c,Se.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),B.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),B.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),B.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ef(e.data.value)),t}wr(e,t,i){return B.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return B.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class g4{constructor(e){this.serializer=e}k(e,t,i,a){const l=new ld("createOrUpgrade",t);i<1&&a>=1&&((function(p){p.createObjectStore(_c)})(e),(function(p){p.createObjectStore(Wu,{keyPath:xV}),p.createObjectStore(mi,{keyPath:yb,autoIncrement:!0}).createIndex(va,_b,{unique:!0}),p.createObjectStore($o)})(e),oT(e),(function(p){p.createObjectStore(da)})(e));let c=B.resolve();return i<3&&a>=3&&(i!==0&&((function(p){p.deleteObjectStore(Xo),p.deleteObjectStore(Yo),p.deleteObjectStore(Ta)})(e),oT(e)),c=c.next((()=>(function(p){const g=p.store(Ta),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Se.min().toTimestamp(),targetCount:0};return g.put(Uf,v)})(l)))),i<4&&a>=4&&(i!==0&&(c=c.next((()=>(function(p,g){return g.store(mi).H().next((b=>{p.deleteObjectStore(mi),p.createObjectStore(mi,{keyPath:yb,autoIncrement:!0}).createIndex(va,_b,{unique:!0});const S=g.store(mi),N=b.map((Q=>S.put(Q)));return B.waitFor(N)}))})(e,l)))),c=c.next((()=>{(function(p){p.createObjectStore(Jo,{keyPath:PV})})(e)}))),i<5&&a>=5&&(c=c.next((()=>this.gi(l)))),i<6&&a>=6&&(c=c.next((()=>((function(p){p.createObjectStore(Zu)})(e),this.pi(l))))),i<7&&a>=7&&(c=c.next((()=>this.yi(l)))),i<8&&a>=8&&(c=c.next((()=>this.wi(e,l)))),i<9&&a>=9&&(c=c.next((()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&a>=10&&(c=c.next((()=>this.bi(l)))),i<11&&a>=11&&(c=c.next((()=>{(function(p){p.createObjectStore(cd,{keyPath:LV})})(e),(function(p){p.createObjectStore(hd,{keyPath:zV})})(e)}))),i<12&&a>=12&&(c=c.next((()=>{(function(p){const g=p.createObjectStore(fd,{keyPath:GV});g.createIndex(gg,KV,{unique:!1}),g.createIndex(mS,QV,{unique:!1})})(e)}))),i<13&&a>=13&&(c=c.next((()=>(function(p){const g=p.createObjectStore(zf,{keyPath:CV});g.createIndex(_f,NV),g.createIndex(cS,DV)})(e))).next((()=>this.Si(e,l))).next((()=>e.deleteObjectStore(da)))),i<14&&a>=14&&(c=c.next((()=>this.Di(e,l)))),i<15&&a>=15&&(c=c.next((()=>(function(p){p.createObjectStore(uy,{keyPath:UV,autoIncrement:!0}).createIndex(pg,jV,{unique:!1}),p.createObjectStore(Uu,{keyPath:BV}).createIndex(fS,qV,{unique:!1}),p.createObjectStore(ju,{keyPath:FV}).createIndex(dS,HV,{unique:!1})})(e)))),i<16&&a>=16&&(c=c.next((()=>{t.objectStore(Uu).clear()})).next((()=>{t.objectStore(ju).clear()}))),i<17&&a>=17&&(c=c.next((()=>{(function(p){p.createObjectStore(cy,{keyPath:$V})})(e)}))),i<18&&a>=18&&h1()&&(c=c.next((()=>{t.objectStore(Uu).clear()})).next((()=>{t.objectStore(ju).clear()}))),c}pi(e){let t=0;return e.store(da).ee(((i,a)=>{t+=$f(a)})).next((()=>{const i={byteSize:t};return e.store(Zu).put(mg,i)}))}gi(e){const t=e.store(Wu),i=e.store(mi);return t.H().next((a=>B.forEach(a,(l=>{const c=IDBKeyRange.bound([l.userId,ba],[l.userId,l.lastAcknowledgedBatchId]);return i.H(va,c).next((d=>B.forEach(d,(p=>{Ee(p.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const g=pa(this.serializer,p);return _w(e,l.userId,g).next((()=>{}))}))))}))))}yi(e){const t=e.store(Xo),i=e.store(da);return e.store(Ta).get(Uf).next((a=>{const l=[];return i.ee(((c,d)=>{const p=new ot(c),g=(function(b){return[0,hn(b)]})(p);l.push(t.get(g).next((v=>v?B.resolve():(b=>t.put({targetId:0,path:hn(b),sequenceNumber:a.highestListenSequenceNumber}))(p))))})).next((()=>B.waitFor(l)))}))}wi(e,t){e.createObjectStore(ec,{keyPath:kV});const i=t.store(ec),a=new Iy,l=c=>{if(a.add(c)){const d=c.lastSegment(),p=c.popLast();return i.put({collectionId:d,parent:hn(p)})}};return t.store(da).ee({Y:!0},((c,d)=>{const p=new ot(c);return l(p.popLast())})).next((()=>t.store($o).ee({Y:!0},(([c,d,p],g)=>{const v=Hi(d);return l(v.popLast())}))))}bi(e){const t=e.store(Yo);return t.ee(((i,a)=>{const l=Ou(a),c=dw(this.serializer,l);return t.put(c)}))}Si(e,t){const i=t.store(da),a=[];return i.ee(((l,c)=>{const d=t.store(zf),p=(function(b){return b.document?new de(ot.fromString(b.document.name).popFirst(5)):b.noDocument?de.fromSegments(b.noDocument.path):b.unknownDocument?de.fromSegments(b.unknownDocument.path):ge(36783)})(c).path.toArray(),g={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(g))})).next((()=>B.waitFor(a)))}Di(e,t){const i=t.store(mi),a=Aw(this.serializer),l=new Ry(Td.Vi,this.serializer.yt);return i.H().next((c=>{const d=new Map;return c.forEach((p=>{let g=d.get(p.userId)??Pe();pa(this.serializer,p).keys().forEach((v=>g=g.add(v))),d.set(p.userId,g)})),B.forEach(d,((p,g)=>{const v=new un(g),b=Ed.wt(this.serializer,v),S=l.getIndexManager(v),N=bd.wt(v,this.serializer,S,l.referenceDelegate);return new Iw(a,N,b,S).recalculateAndSaveOverlaysForDocumentKeys(new yg(t,An.ce),p).next()}))}))}}function oT(s){s.createObjectStore(Xo,{keyPath:OV}).createIndex(ly,MV,{unique:!0}),s.createObjectStore(Yo,{keyPath:"targetId"}).createIndex(hS,VV,{unique:!0}),s.createObjectStore(Ta)}const ds="IndexedDbPersistence",Kp=18e5,Qp=5e3,$p="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",y4="main";class Cy{constructor(e,t,i,a,l,c,d,p,g,v,b=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Ci=l,this.window=c,this.document=d,this.Fi=g,this.Mi=v,this.xi=b,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=S=>Promise.resolve(),!Cy.v())throw new me(re.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new r4(this,a),this.Ki=t+y4,this.serializer=new fw(p),this.qi=new ws(this.Ki,this.xi,new g4(this.serializer)),this.ci=new QO,this.li=new t4(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Aw(this.serializer),this.Pi=new KO,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,v===!1&&Dt(ds,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new me(re.FAILED_PRECONDITION,$p);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new An(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>of(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(Ns(e))return le(ds,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return le(ds,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return xu(e).get(Io).next((t=>B.resolve(this.Xi(t))))}Yi(e){return of(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,Kp)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=Kt(t,Jo);return i.H().next((a=>{const l=this.ns(a,Kp),c=a.filter((d=>l.indexOf(d)===-1));return B.forEach(c,(d=>i.delete(d.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?B.resolve(!0):xu(e).get(Io).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Qp)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new me(re.FAILED_PRECONDITION,$p);return!1}}return!(!this.networkEnabled||!this.inForeground)||of(e).H().next((i=>this.ns(i,Qp).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||c&&d)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&le(ds,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[_c,Jo],(e=>{const t=new yg(e,An.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((i=>this.ts(i.updateTimeMs,t)&&!this.ss(i.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>of(e).H().next((t=>this.ns(t,Kp).map((i=>i.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return bd.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new e4(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Ed.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,i){le(ds,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(p){return p===18?JV:p===17?_S:p===16?XV:p===15?hy:p===14?yS:p===13?gS:p===12?YV:p===11?pS:void ge(60245)})(this.xi);let c;return this.qi.runTransaction(e,a,l,(d=>(c=new yg(d,this.ai?this.ai.next():An.ce),t==="readwrite-primary"?this.ji(c).next((p=>!!p||this.Hi(c))).next((p=>{if(!p)throw Dt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new me(re.FAILED_PRECONDITION,sS);return i(c)})).next((p=>this.Zi(c).next((()=>p)))):this.Ps(c).next((()=>i(c)))))).then((d=>(c.raiseOnCommittedEvent(),d)))}Ps(e){return xu(e).get(Io).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Qp)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new me(re.FAILED_PRECONDITION,$p)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xu(e).put(Io,t)}static v(){return ws.v()}Ji(e){const t=xu(e);return t.get(Io).next((i=>this.Xi(i)?(le(ds,"Releasing primary lease."),t.delete(Io)):B.resolve()))}ts(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(Dt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;c1()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{const t=this.Ui?.getItem(this.rs(e))!==null;return le(ds,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Dt(ds,"Failed to get zombied client id.",t),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){Dt("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function xu(s){return Kt(s,_c)}function of(s){return Kt(s,Jo)}function xw(s,e){let t=s.projectId;return s.isDefaultDatabase||(t+="."+s.database),"firestore/"+e+"/"+t+"/"}class Ny{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=a}static Es(e,t){let i=Pe(),a=Pe();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Ny(e,t.fromCache,i,a)}}class _4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Rw{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return c1()?8:oS(Gt())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,a,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new _4;return this.ys(e,t,c).next((d=>{if(l.result=d,this.As)return this.ws(e,t,c,d.size)}))})).next((()=>l.result))}ws(e,t,i,a){return i.documentReadCount<this.Vs?(Vo()<=Be.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",Oo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),B.resolve()):(Vo()<=Be.DEBUG&&le("QueryEngine","Query:",Oo(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ds*a?(Vo()<=Be.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",Oo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zn(t))):B.resolve())}gs(e,t){if(Db(t))return B.resolve(null);let i=zn(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Sg(t,null,"F"),i=zn(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=Pe(...l);return this.fs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,i).next((p=>{const g=this.bs(t,d);return this.Ss(t,g,c,p.readTime)?this.gs(e,Sg(t,null,"F")):this.Ds(e,g,t,p)}))))})))))}ps(e,t,i,a){return Db(t)||a.isEqual(Se.min())?B.resolve(null):this.fs.getDocuments(e,i).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,i,a)?B.resolve(null):(Vo()<=Be.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Oo(t)),this.Ds(e,c,t,iS(a,Qo)).next((d=>d)))}))}bs(e,t){let i=new nt(US(e));return t.forEach(((a,l)=>{Ec(e,l)&&(i=i.add(l))})),i}Ss(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,t,i){return Vo()<=Be.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",Oo(t)),this.fs.getDocumentsMatchingQuery(e,t,Un.min(),i)}Ds(e,t,i,a){return this.fs.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const Dy="LocalStore",v4=3e8;class E4{constructor(e,t,i,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new ht(Ce),this.Fs=new Dr((l=>Na(l)),vc),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Iw(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function Cw(s,e,t,i){return new E4(s,e,t,i)}async function Nw(s,e){const t=_e(s);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],d=[];let p=Pe();for(const g of a){c.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of l){d.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(i,p).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function b4(s,e){const t=_e(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,p,g,v){const b=g.batch,S=b.keys();let N=B.resolve();return S.forEach((Q=>{N=N.next((()=>v.getEntry(p,Q))).next((K=>{const U=g.docVersions.get(Q);Ee(U!==null,48541),K.version.compareTo(U)<0&&(b.applyToRemoteDocument(K,g),K.isValidDocument()&&(K.setReadTime(g.commitVersion),v.addEntry(K)))}))})),N.next((()=>d.mutationQueue.removeMutationBatch(p,b)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let p=Pe();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function Dw(s){const e=_e(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function T4(s,e){const t=_e(s),i=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const d=[];e.targetChanges.forEach(((v,b)=>{const S=a.get(b);if(!S)return;d.push(t.li.removeMatchingKeys(l,v.removedDocuments,b).next((()=>t.li.addMatchingKeys(l,v.addedDocuments,b))));let N=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(b)!==null?N=N.withResumeToken(Vt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):v.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(v.resumeToken,i)),a=a.insert(b,N),(function(K,U,ee){return K.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=v4?!0:ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0})(S,N,v)&&d.push(t.li.updateTargetData(l,N))}));let p=Pn(),g=Pe();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(S4(l,c,e.documentUpdates).next((v=>{p=v.Bs,g=v.Ls}))),!i.isEqual(Se.min())){const v=t.li.getLastRemoteSnapshotVersion(l).next((b=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,i)));d.push(v)}return B.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.vs=a,l)))}function S4(s,e,t){let i=Pe(),a=Pe();return t.forEach((l=>i=i.add(l))),e.getEntries(s,i).next((l=>{let c=Pn();return t.forEach(((d,p)=>{const g=l.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),p.isNoDocument()&&p.version.isEqual(Se.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):le(Dy,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)})),{Bs:c,Ls:a}}))}function w4(s,e){const t=_e(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=ba),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Xf(s,e){const t=_e(s);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.li.getTargetData(i,e).next((l=>l?(a=l,B.resolve(a)):t.li.allocateTargetId(i).next((c=>(a=new br(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.vs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function sl(s,e,t){const i=_e(s),a=i.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!Ns(c))throw c;le(Dy,`Failed to update sequence numbers for target ${e}: ${c}`)}i.vs=i.vs.remove(e),i.Fs.delete(a.target)}function Dg(s,e,t){const i=_e(s);let a=Se.min(),l=Pe();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,v){const b=_e(p),S=b.Fs.get(v);return S!==void 0?B.resolve(b.vs.get(S)):b.li.getTargetData(g,v)})(i,c,zn(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>i.Cs.getDocumentsMatchingQuery(c,e,t?a:Se.min(),t?l:Pe()))).next((d=>(Mw(i,zS(e),d),{documents:d,ks:l})))))}function Vw(s,e){const t=_e(s),i=_e(t.li),a=t.vs.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(l=>i.At(l,e).next((c=>c?c.target:null))))}function Ow(s,e){const t=_e(s),i=t.Ms.get(e)||Se.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.xs.getAllFromCollectionGroup(a,e,iS(i,Qo),Number.MAX_SAFE_INTEGER))).then((a=>(Mw(t,e,a),a)))}function Mw(s,e,t){let i=s.Ms.get(e)||Se.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),s.Ms.set(e,i)}const kw="firestore_clients";function lT(s,e){return`${kw}_${s}_${e}`}const Pw="firestore_mutations";function uT(s,e,t){let i=`${Pw}_${s}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const Lw="firestore_targets";function Yp(s,e){return`${Lw}_${s}_${e}`}const qi="SharedClientState";class Jf{constructor(e,t,i,a){this.user=e,this.batchId=t,this.state=i,this.error=a}static $s(e,t,i){const a=JSON.parse(i);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new me(a.error.code,a.error.message))),c?new Jf(e,t,a.state,l):(Dt(qi,`Failed to parse mutation state for ID '${t}': ${i}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gu{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static $s(e,t){const i=JSON.parse(t);let a,l=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return l&&i.error&&(l=typeof i.error.message=="string"&&typeof i.error.code=="string",l&&(a=new me(i.error.code,i.error.message))),l?new Gu(e,i.state,a):(Dt(qi,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Wf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const i=JSON.parse(t);let a=typeof i=="object"&&i.activeTargetIds instanceof Array,l=yy();for(let c=0;a&&c<i.activeTargetIds.length;++c)a=lS(i.activeTargetIds[c]),l=l.add(i.activeTargetIds[c]);return a?new Wf(e,l):(Dt(qi,`Failed to parse client data for instance '${e}': ${t}`),null)}}class Vy{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new Vy(t.clientId,t.onlineState):(Dt(qi,`Failed to parse online state: ${e}`),null)}}class Vg{constructor(){this.activeTargetIds=yy()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Xp{constructor(e,t,i,a,l){this.window=e,this.Ci=t,this.persistenceKey=i,this.zs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new ht(Ce),this.started=!1,this.Zs=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Xs=lT(this.persistenceKey,this.zs),this.Ys=(function(p){return`firestore_sequence_number_${p}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new Vg),this.eo=new RegExp(`^${kw}_${c}_([^_]*)$`),this.no=new RegExp(`^${Pw}_${c}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${Lw}_${c}_(\\d+)$`),this.io=(function(p){return`firestore_online_state_${p}`})(this.persistenceKey),this.so=(function(p){return`firestore_bundle_loaded_v2_${p}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const i of e){if(i===this.zs)continue;const a=this.getItem(lT(this.persistenceKey,i));if(a){const l=Wf.$s(i,a);l&&(this.Js=this.Js.insert(l.clientId,l))}}this.oo();const t=this.storage.getItem(this.io);if(t){const i=this._o(t);i&&this.ao(i)}for(const i of this.Zs)this.Hs(i);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let t=!1;return this.Js.forEach(((i,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,t,i){this.co(e,t,i),this.lo(e)}addLocalQueryTarget(e,t=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Yp(this.persistenceKey,e));if(a){const l=Gu.$s(e,a);l&&(i=l.state)}}return t&&this.ho.Qs(e),this.oo(),i}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Yp(this.persistenceKey,e))}updateQueryState(e,t,i){this.Po(e,t,i)}handleUserChange(e,t,i){t.forEach((a=>{this.lo(a)})),this.currentUser=e,i.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return le(qi,"READ",e,t),t}setItem(e,t){le(qi,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){le(qi,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(le(qi,"EVENT",t.key,t.newValue),t.key===this.Xs)return void Dt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.eo.test(t.key)){if(t.newValue==null){const i=this.Eo(t.key);return this.Ro(i,null)}{const i=this.Ao(t.key,t.newValue);if(i)return this.Ro(i.clientId,i)}}else if(this.no.test(t.key)){if(t.newValue!==null){const i=this.Vo(t.key,t.newValue);if(i)return this.mo(i)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const i=this.fo(t.key,t.newValue);if(i)return this.po(i)}}else if(t.key===this.io){if(t.newValue!==null){const i=this._o(t.newValue);if(i)return this.ao(i)}}else if(t.key===this.Ys){const i=(function(l){let c=An.ce;if(l!=null)try{const d=JSON.parse(l);Ee(typeof d=="number",30636,{yo:l}),c=d}catch(d){Dt(qi,"Failed to read sequence number from WebStorage",d)}return c})(t.newValue);i!==An.ce&&this.sequenceNumberHandler(i)}else if(t.key===this.so){const i=this.wo(t.newValue);await Promise.all(i.map((a=>this.syncEngine.bo(a))))}}}else this.Zs.push(t)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,t,i){const a=new Jf(this.currentUser,e,t,i),l=uT(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Ws())}lo(e){const t=uT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}To(e){const t={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(t))}Po(e,t,i){const a=Yp(this.persistenceKey,e),l=new Gu(e,t,i);this.setItem(a,l.Ws())}Io(e){const t=JSON.stringify(Array.from(e));this.setItem(this.so,t)}Eo(e){const t=this.eo.exec(e);return t?t[1]:null}Ao(e,t){const i=this.Eo(e);return Wf.$s(i,t)}Vo(e,t){const i=this.no.exec(e),a=Number(i[1]),l=i[2]!==void 0?i[2]:null;return Jf.$s(new un(l),a,t)}fo(e,t){const i=this.ro.exec(e),a=Number(i[1]);return Gu.$s(a,t)}_o(e){return Vy.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);le(qi,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,t){const i=t?this.Js.insert(e,t):this.Js.remove(e),a=this.uo(this.Js),l=this.uo(i),c=[],d=[];return l.forEach((p=>{a.has(p)||c.push(p)})),a.forEach((p=>{l.has(p)||d.push(p)})),this.syncEngine.Co(c,d).then((()=>{this.Js=i}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let t=yy();return e.forEach(((i,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class zw{constructor(){this.vo=new Vg,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Vg,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class A4{Mo(e){}shutdown(){}}const cT="ConnectivityMonitor";class hT{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){le(cT,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){le(cT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let lf=null;function Og(){return lf===null?lf=(function(){return 268435456+Math.round(2147483648*Math.random())})():lf++,"0x"+lf.toString(16)}const Jp="RestConnection",I4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class x4{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${a}`,this.$o=this.databaseId.database===jf?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Wo(e,t,i,a,l){const c=Og(),d=this.Qo(e,t.toUriEncodedString());le(Jp,`Sending RPC '${e}' ${c}:`,d,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,a,l);const{host:g}=new URL(d),v=hl(g);return this.zo(e,d,p,i,v).then((b=>(le(Jp,`Received RPC '${e}' ${c}: `,b),b)),(b=>{throw Go(Jp,`RPC '${e}' ${c} failed with error: `,b,"url: ",d,"request:",i),b}))}jo(e,t,i,a,l,c){return this.Wo(e,t,i,a,l)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ml})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}Qo(e,t){const i=I4[e];let a=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}class R4{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const ln="WebChannelConnection",Ru=(s,e,t)=>{s.listen(e,(i=>{try{t(i)}catch(a){setTimeout((()=>{throw a}),0)}}))};class Bo extends x4{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Bo.c_){const e=W1();Ru(e,J1.STAT_EVENT,(t=>{t.stat===hg.PROXY?le(ln,"STAT_EVENT: detected buffering proxy"):t.stat===hg.NOPROXY&&le(ln,"STAT_EVENT: detected no buffering proxy")})),Bo.c_=!0}}zo(e,t,i,a,l){const c=Og();return new Promise(((d,p)=>{const g=new Y1;g.setWithCredentials(!0),g.listenOnce(X1.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case pf.NO_ERROR:const b=g.getResponseJson();le(ln,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(b)),d(b);break;case pf.TIMEOUT:le(ln,`RPC '${e}' ${c} timed out`),p(new me(re.DEADLINE_EXCEEDED,"Request time out"));break;case pf.HTTP_ERROR:const S=g.getStatus();if(le(ln,`RPC '${e}' ${c} failed with status:`,S,"response text:",g.getResponseText()),S>0){let N=g.getResponseJson();Array.isArray(N)&&(N=N[0]);const Q=N?.error;if(Q&&Q.status&&Q.message){const K=(function(ee){const J=ee.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(J)>=0?J:re.UNKNOWN})(Q.status);p(new me(K,Q.message))}else p(new me(re.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new me(re.UNAVAILABLE,"Connection failed."));break;default:ge(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{le(ln,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(a);le(ln,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",v,i,15)}))}T_(e,t,i){const a=Og(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,i),d.encodeInitMessageHeaders=!0;const g=l.join("");le(ln,`Creating RPC '${e}' stream ${a}: ${g}`,d);const v=c.createWebChannel(g,d);this.I_(v);let b=!1,S=!1;const N=new R4({Ho:Q=>{S?le(ln,`Not sending because RPC '${e}' stream ${a} is closed:`,Q):(b||(le(ln,`Opening RPC '${e}' stream ${a} transport.`),v.open(),b=!0),le(ln,`RPC '${e}' stream ${a} sending:`,Q),v.send(Q))},Jo:()=>v.close()});return Ru(v,Nu.EventType.OPEN,(()=>{S||(le(ln,`RPC '${e}' stream ${a} transport opened.`),N.i_())})),Ru(v,Nu.EventType.CLOSE,(()=>{S||(S=!0,le(ln,`RPC '${e}' stream ${a} transport closed`),N.o_(),this.E_(v))})),Ru(v,Nu.EventType.ERROR,(Q=>{S||(S=!0,Go(ln,`RPC '${e}' stream ${a} transport errored. Name:`,Q.name,"Message:",Q.message),N.o_(new me(re.UNAVAILABLE,"The operation could not be completed")))})),Ru(v,Nu.EventType.MESSAGE,(Q=>{if(!S){const K=Q.data[0];Ee(!!K,16349);const U=K,ee=U?.error||U[0]?.error;if(ee){le(ln,`RPC '${e}' stream ${a} received error:`,ee);const J=ee.status;let W=(function(ce){const x=qt[ce];if(x!==void 0)return JS(x)})(J),se=ee.message;J==="NOT_FOUND"&&se.includes("database")&&se.includes("does not exist")&&se.includes(this.databaseId.database)&&Go(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),W===void 0&&(W=re.INTERNAL,se="Unknown error status: "+J+" with message "+ee.message),S=!0,N.o_(new me(W,se)),v.close()}else le(ln,`RPC '${e}' stream ${a} received:`,K),N.__(K)}})),Bo.u_(),setTimeout((()=>{N.s_()}),0),N}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Z1()}}function C4(s){return new Bo(s)}function Uw(){return typeof window<"u"?window:null}function Af(){return typeof document<"u"?document:null}function Sd(s){return new kO(s,!0)}Bo.c_=!1;class jw{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&le("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const fT="PersistentStream";class Bw{constructor(e,t,i,a,l,c,d,p){this.Ci=e,this.b_=i,this.S_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new jw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(Dt(t.toString()),Dt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new me(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return le(fT,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(le(fT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class N4 extends Bw{constructor(e,t,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=zO(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Se.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Se.min():c.readTime?pn(c.readTime):Se.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=Ig(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=qf(p)?{documents:sw(l,p)}:{query:aw(l,p).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=ew(l,c.resumeToken);const g=wg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Se.min())>0){d.readTime=rl(l,c.snapshotVersion.toTimestamp());const g=wg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const i=jO(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=Ig(this.serializer),t.removeTarget=e,this.K_(t)}}class D4 extends Bw{constructor(e,t,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Ee(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ee(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=UO(e.writeResults,e.commitTime),i=pn(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Ig(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>Gf(this.serializer,i)))};this.K_(t)}}class V4{}class O4 extends V4{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new me(re.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,Ag(t,i),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new me(re.UNKNOWN,l.toString())}))}jo(e,t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.jo(e,Ag(t,i),a,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new me(re.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function M4(s,e,t,i){return new O4(s,e,t,i)}class k4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Dt(t),this.aa=!1):le("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ma="RemoteStore";class P4{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{i.enqueueAndForget((async()=>{La(this)&&(le(Ma,"Restarting streams for network reachability change."),await(async function(p){const g=_e(p);g.Ea.add(4),await Sc(g),g.Va.set("Unknown"),g.Ea.delete(4),await wd(g)})(this))}))})),this.Va=new k4(i,a)}}async function wd(s){if(La(s))for(const e of s.Ra)await e(!0)}async function Sc(s){for(const e of s.Ra)await e(!1)}function Ad(s,e){const t=_e(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ky(t)?My(t):yl(t).O_()&&Oy(t,e))}function al(s,e){const t=_e(s),i=yl(t);t.Ia.delete(e),i.O_()&&qw(t,e),t.Ia.size===0&&(i.O_()?i.L_():La(t)&&t.Va.set("Unknown"))}function Oy(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}yl(s).Z_(e)}function qw(s,e){s.da.$e(e),yl(s).X_(e)}function My(s){s.da=new DO({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),yl(s).start(),s.Va.ua()}function ky(s){return La(s)&&!yl(s).x_()&&s.Ia.size>0}function La(s){return _e(s).Ea.size===0}function Fw(s){s.da=void 0}async function L4(s){s.Va.set("Online")}async function z4(s){s.Ia.forEach(((e,t)=>{Oy(s,e)}))}async function U4(s,e){Fw(s),ky(s)?(s.Va.ha(e),My(s)):s.Va.set("Unknown")}async function j4(s,e,t){if(s.Va.set("Online"),e instanceof ZS&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.da.removeTarget(d))})(s,e)}catch(i){le(Ma,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Zf(s,i)}else if(e instanceof Sf?s.da.Xe(e):e instanceof WS?s.da.st(e):s.da.tt(e),!t.isEqual(Se.min()))try{const i=await Dw(s.localStore);t.compareTo(i)>=0&&await(function(l,c){const d=l.da.Tt(c);return d.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ia.get(g);v&&l.Ia.set(g,v.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,g)=>{const v=l.Ia.get(p);if(!v)return;l.Ia.set(p,v.withResumeToken(Vt.EMPTY_BYTE_STRING,v.snapshotVersion)),qw(l,p);const b=new br(v.target,p,g,v.sequenceNumber);Oy(l,b)})),l.remoteSyncer.applyRemoteEvent(d)})(s,t)}catch(i){le(Ma,"Failed to raise snapshot:",i),await Zf(s,i)}}async function Zf(s,e,t){if(!Ns(e))throw e;s.Ea.add(1),await Sc(s),s.Va.set("Offline"),t||(t=()=>Dw(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{le(Ma,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await wd(s)}))}function Hw(s,e){return e().catch((t=>Zf(s,t,e)))}async function gl(s){const e=_e(s),t=xs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ba;for(;B4(e);)try{const a=await w4(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,q4(e,a)}catch(a){await Zf(e,a)}Gw(e)&&Kw(e)}function B4(s){return La(s)&&s.Ta.length<10}function q4(s,e){s.Ta.push(e);const t=xs(s);t.O_()&&t.Y_&&t.ea(e.mutations)}function Gw(s){return La(s)&&!xs(s).x_()&&s.Ta.length>0}function Kw(s){xs(s).start()}async function F4(s){xs(s).ra()}async function H4(s){const e=xs(s);for(const t of s.Ta)e.ea(t.mutations)}async function G4(s,e,t){const i=s.Ta.shift(),a=by.from(i,e,t);await Hw(s,(()=>s.remoteSyncer.applySuccessfulWrite(a))),await gl(s)}async function K4(s,e){e&&xs(s).Y_&&await(async function(i,a){if((function(c){return RO(c)&&c!==re.ABORTED})(a.code)){const l=i.Ta.shift();xs(i).B_(),await Hw(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await gl(i)}})(s,e),Gw(s)&&Kw(s)}async function dT(s,e){const t=_e(s);t.asyncQueue.verifyOperationInProgress(),le(Ma,"RemoteStore received new credentials");const i=La(t);t.Ea.add(3),await Sc(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await wd(t)}async function Mg(s,e){const t=_e(s);e?(t.Ea.delete(2),await wd(t)):e||(t.Ea.add(2),await Sc(t),t.Va.set("Unknown"))}function yl(s){return s.ma||(s.ma=(function(t,i,a){const l=_e(t);return l.sa(),new N4(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(s.datastore,s.asyncQueue,{Zo:L4.bind(null,s),Yo:z4.bind(null,s),t_:U4.bind(null,s),J_:j4.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),ky(s)?My(s):s.Va.set("Unknown")):(await s.ma.stop(),Fw(s))}))),s.ma}function xs(s){return s.fa||(s.fa=(function(t,i,a){const l=_e(t);return l.sa(),new D4(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:F4.bind(null,s),t_:K4.bind(null,s),ta:H4.bind(null,s),na:G4.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await gl(s)):(await s.fa.stop(),s.Ta.length>0&&(le(Ma,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class Py{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const c=Date.now()+i,d=new Py(e,t,c,a,l);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ly(s,e){if(Dt("AsyncQueue",`${e}: ${s}`),Ns(s))return new me(re.UNAVAILABLE,`${e}: ${s}`);throw s}class qo{static emptySet(e){return new qo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||de.comparator(t.key,i.key):(t,i)=>de.comparator(t.key,i.key),this.keyedMap=Du(),this.sortedSet=new ht(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof qo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new qo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class mT{constructor(){this.ga=new ht(de.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ge(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class ol{constructor(e,t,i,a,l,c,d,p,g){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,i,a,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new ol(e,t,qo.emptySet(t),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}class Q4{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class $4{constructor(){this.queries=pT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=_e(t),l=a.queries;a.queries=pT(),l.forEach(((c,d)=>{for(const p of d.ba)p.onError(i)}))})(this,new me(re.ABORTED,"Firestore shutting down"))}}function pT(){return new Dr((s=>LS(s)),yd)}async function Y4(s,e){const t=_e(s);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.Da()&&(i=2):(l=new Q4,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=Ly(c,`Initialization of query '${Oo(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&zy(t)}async function X4(s,e){const t=_e(s),i=e.query;let a=3;const l=t.queries.get(i);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function J4(s,e){const t=_e(s);let i=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.ba)d.Fa(a)&&(i=!0);c.wa=a}}i&&zy(t)}function W4(s,e,t){const i=_e(s),a=i.queries.get(e);if(a)for(const l of a.ba)l.onError(t);i.queries.delete(e)}function zy(s){s.Ca.forEach((e=>{e.next()}))}var kg,gT;(gT=kg||(kg={})).Ma="default",gT.Cache="cache";class Z4{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new ol(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ol.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==kg.Cache}}class Qw{constructor(e){this.key=e}}class $w{constructor(e){this.key=e}}class eM{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Pe(),this.mutatedKeys=Pe(),this.eu=US(e),this.tu=new qo(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new mT,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,b)=>{const S=a.get(v),N=Ec(this.query,b)?b:null,Q=!!S&&this.mutatedKeys.has(S.key),K=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let U=!1;S&&N?S.data.isEqual(N.data)?Q!==K&&(i.track({type:3,doc:N}),U=!0):this.su(S,N)||(i.track({type:2,doc:N}),U=!0,(p&&this.eu(N,p)>0||g&&this.eu(N,g)<0)&&(d=!0)):!S&&N?(i.track({type:0,doc:N}),U=!0):S&&!N&&(i.track({type:1,doc:S}),U=!0,(p||g)&&(d=!0)),U&&(N?(c=c.add(N),l=K?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),i.track({type:1,doc:v})}return{tu:c,iu:i,Ss:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,b)=>(function(N,Q){const K=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge(20277,{Vt:U})}};return K(N)-K(Q)})(v.type,b.type)||this.eu(v.doc,b.doc))),this.ou(i),a=a??!1;const d=t&&!a?this._u():[],p=this.Ya.size===0&&this.current&&!a?1:0,g=p!==this.Xa;return this.Xa=p,c.length!==0||g?{snapshot:new ol(this.query,e.tu,l,c,e.mutatedKeys,p===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new mT,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Pe(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new $w(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new Qw(i))})),t}cu(e){this.Za=e.ks,this.Ya=Pe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ol.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const _l="SyncEngine";class tM{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class nM{constructor(e){this.key=e,this.hu=!1}}class iM{constructor(e,t,i,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Dr((d=>LS(d)),yd),this.Iu=new Map,this.Eu=new Set,this.Ru=new ht(de.comparator),this.Au=new Map,this.Vu=new xy,this.du={},this.mu=new Map,this.fu=Oa.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rM(s,e,t=!0){const i=Id(s);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await Yw(i,e,t,!0),a}async function sM(s,e){const t=Id(s);await Yw(t,e,!0,!1)}async function Yw(s,e,t,i){const a=await Xf(s.localStore,zn(e)),l=a.targetId,c=s.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await Uy(s,e,l,c==="current",a.resumeToken)),s.isPrimaryClient&&t&&Ad(s.remoteStore,a),d}async function Uy(s,e,t,i,a){s.pu=(b,S,N)=>(async function(K,U,ee,J){let W=U.view.ru(ee);W.Ss&&(W=await Dg(K.localStore,U.query,!1).then((({documents:x})=>U.view.ru(x,W))));const se=J&&J.targetChanges.get(U.targetId),ue=J&&J.targetMismatches.get(U.targetId)!=null,ce=U.view.applyChanges(W,K.isPrimaryClient,se,ue);return Pg(K,U.targetId,ce.au),ce.snapshot})(s,b,S,N);const l=await Dg(s.localStore,e,!0),c=new eM(e,l.ks),d=c.ru(l.documents),p=Tc.createSynthesizedTargetChangeForCurrentChange(t,i&&s.onlineState!=="Offline",a),g=c.applyChanges(d,s.isPrimaryClient,p);Pg(s,t,g.au);const v=new tM(e,t,c);return s.Tu.set(e,v),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),g.snapshot}async function aM(s,e,t){const i=_e(s),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((c=>!yd(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await sl(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&al(i.remoteStore,a.targetId),ll(i,a.targetId)})).catch(Cs)):(ll(i,a.targetId),await sl(i.localStore,a.targetId,!0))}async function oM(s,e){const t=_e(s),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),al(t.remoteStore,i.targetId))}async function lM(s,e,t){const i=Fy(s);try{const a=await(function(c,d){const p=_e(c),g=tt.now(),v=d.reduce(((N,Q)=>N.add(Q.key)),Pe());let b,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let Q=Pn(),K=Pe();return p.xs.getEntries(N,v).next((U=>{Q=U,Q.forEach(((ee,J)=>{J.isValidDocument()||(K=K.add(ee))}))})).next((()=>p.localDocuments.getOverlayedDocuments(N,Q))).next((U=>{b=U;const ee=[];for(const J of d){const W=IO(J,b.get(J.key).overlayedDocument);W!=null&&ee.push(new Ds(J.key,W,RS(W.value.mapValue),Ln.exists(!0)))}return p.mutationQueue.addMutationBatch(N,g,ee,d)})).next((U=>{S=U;const ee=U.applyToLocalDocumentSet(b,K);return p.documentOverlayCache.saveOverlays(N,U.batchId,ee)}))})).then((()=>({batchId:S.batchId,changes:BS(b)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(c,d,p){let g=c.du[c.currentUser.toKey()];g||(g=new ht(Ce)),g=g.insert(d,p),c.du[c.currentUser.toKey()]=g})(i,a.batchId,t),await Vs(i,a.changes),await gl(i.remoteStore)}catch(a){const l=Ly(a,"Failed to persist write");t.reject(l)}}async function Xw(s,e){const t=_e(s);try{const i=await T4(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(Ee(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?Ee(c.hu,14607):a.removedDocuments.size>0&&(Ee(c.hu,42227),c.hu=!1))})),await Vs(t,i,e)}catch(i){await Cs(i)}}function yT(s,e,t){const i=_e(s);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const p=_e(c);p.onlineState=d;let g=!1;p.queries.forEach(((v,b)=>{for(const S of b.ba)S.va(d)&&(g=!0)})),g&&zy(p)})(i.eventManager,e),a.length&&i.Pu.J_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function uM(s,e,t){const i=_e(s);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),l=a&&a.key;if(l){let c=new ht(de.comparator);c=c.insert(l,wt.newNoDocument(l,Se.min()));const d=Pe().add(l),p=new bc(Se.min(),new Map,new ht(Ce),c,d);await Xw(i,p),i.Ru=i.Ru.remove(l),i.Au.delete(e),qy(i)}else await sl(i.localStore,e,!1).then((()=>ll(i,e,t))).catch(Cs)}async function cM(s,e){const t=_e(s),i=e.batch.batchId;try{const a=await b4(t.localStore,e);By(t,i,null),jy(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Vs(t,a)}catch(a){await Cs(a)}}async function hM(s,e,t){const i=_e(s);try{const a=await(function(c,d){const p=_e(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return p.mutationQueue.lookupMutationBatch(g,d).next((b=>(Ee(b!==null,37113),v=b.keys(),p.mutationQueue.removeMutationBatch(g,b)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,v,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>p.localDocuments.getDocuments(g,v)))}))})(i.localStore,e);By(i,e,t),jy(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Vs(i,a)}catch(a){await Cs(a)}}function jy(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function By(s,e,t){const i=_e(s);let a=i.du[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.du[i.currentUser.toKey()]=a}}function ll(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),t&&s.Pu.yu(i,t);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((i=>{s.Vu.containsKey(i)||Jw(s,i)}))}function Jw(s,e){s.Eu.delete(e.path.canonicalString());const t=s.Ru.get(e);t!==null&&(al(s.remoteStore,t),s.Ru=s.Ru.remove(e),s.Au.delete(t),qy(s))}function Pg(s,e,t){for(const i of t)i instanceof Qw?(s.Vu.addReference(i.key,e),fM(s,i)):i instanceof $w?(le(_l,"Document no longer in limbo: "+i.key),s.Vu.removeReference(i.key,e),s.Vu.containsKey(i.key)||Jw(s,i.key)):ge(19791,{wu:i})}function fM(s,e){const t=e.key,i=t.path.canonicalString();s.Ru.get(t)||s.Eu.has(i)||(le(_l,"New document in limbo: "+t),s.Eu.add(i),qy(s))}function qy(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new de(ot.fromString(e)),i=s.fu.next();s.Au.set(i,new nM(t)),s.Ru=s.Ru.insert(t,i),Ad(s.remoteStore,new br(zn(gd(t.path)),i,"TargetPurposeLimboResolution",An.ce))}}async function Vs(s,e,t){const i=_e(s),a=[],l=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,p)=>{c.push(i.pu(p,e,t).then((g=>{if((g||t)&&i.isPrimaryClient){const v=g?!g.fromCache:t?.targetChanges.get(p.targetId)?.current;i.sharedClientState.updateQueryState(p.targetId,v?"current":"not-current")}if(g){a.push(g);const v=Ny.Es(p.targetId,g);l.push(v)}})))})),await Promise.all(c),i.Pu.J_(a),await(async function(p,g){const v=_e(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>B.forEach(g,(S=>B.forEach(S.Ts,(N=>v.persistence.referenceDelegate.addReference(b,S.targetId,N))).next((()=>B.forEach(S.Is,(N=>v.persistence.referenceDelegate.removeReference(b,S.targetId,N)))))))))}catch(b){if(!Ns(b))throw b;le(Dy,"Failed to update sequence numbers: "+b)}for(const b of g){const S=b.targetId;if(!b.fromCache){const N=v.vs.get(S),Q=N.snapshotVersion,K=N.withLastLimboFreeSnapshotVersion(Q);v.vs=v.vs.insert(S,K)}}})(i.localStore,l))}async function dM(s,e){const t=_e(s);if(!t.currentUser.isEqual(e)){le(_l,"User change. New user:",e.toKey());const i=await Nw(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((p=>{p.reject(new me(re.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Vs(t,i.Ns)}}function mM(s,e){const t=_e(s),i=t.Au.get(e);if(i&&i.hu)return Pe().add(i.key);{let a=Pe();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const d=t.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}async function pM(s,e){const t=_e(s),i=await Dg(t.localStore,e.query,!0),a=e.view.cu(i);return t.isPrimaryClient&&Pg(t,e.targetId,a.au),a}async function gM(s,e){const t=_e(s);return Ow(t.localStore,e).then((i=>Vs(t,i)))}async function yM(s,e,t,i){const a=_e(s),l=await(function(d,p){const g=_e(d),v=_e(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",(b=>v.Xn(b,p).next((S=>S?g.localDocuments.getDocuments(b,S):B.resolve(null)))))})(a.localStore,e);l!==null?(t==="pending"?await gl(a.remoteStore):t==="acknowledged"||t==="rejected"?(By(a,e,i||null),jy(a,e),(function(d,p){_e(_e(d).mutationQueue).nr(p)})(a.localStore,e)):ge(6720,"Unknown batchState",{bu:t}),await Vs(a,l)):le(_l,"Cannot apply mutation batch with id: "+e)}async function _M(s,e){const t=_e(s);if(Id(t),Fy(t),e===!0&&t.gu!==!0){const i=t.sharedClientState.getAllActiveQueryTargets(),a=await _T(t,i.toArray());t.gu=!0,await Mg(t.remoteStore,!0);for(const l of a)Ad(t.remoteStore,l)}else if(e===!1&&t.gu!==!1){const i=[];let a=Promise.resolve();t.Iu.forEach(((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?i.push(c):a=a.then((()=>(ll(t,c),sl(t.localStore,c,!0)))),al(t.remoteStore,c)})),await a,await _T(t,i),(function(c){const d=_e(c);d.Au.forEach(((p,g)=>{al(d.remoteStore,g)})),d.Vu.zr(),d.Au=new Map,d.Ru=new ht(de.comparator)})(t),t.gu=!1,await Mg(t.remoteStore,!1)}}async function _T(s,e,t){const i=_e(s),a=[],l=[];for(const c of e){let d;const p=i.Iu.get(c);if(p&&p.length!==0){d=await Xf(i.localStore,zn(p[0]));for(const g of p){const v=i.Tu.get(g),b=await pM(i,v);b.snapshot&&l.push(b.snapshot)}}else{const g=await Vw(i.localStore,c);d=await Xf(i.localStore,g),await Uy(i,Ww(g),c,!1,d.resumeToken)}a.push(d)}return i.Pu.J_(l),a}function Ww(s){return PS(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function vM(s){return(function(t){return _e(_e(t).persistence).hs()})(_e(s).localStore)}async function EM(s,e,t,i){const a=_e(s);if(a.gu)return void le(_l,"Ignoring unexpected query state notification.");const l=a.Iu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=await Ow(a.localStore,zS(l[0])),d=bc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Vt.EMPTY_BYTE_STRING);await Vs(a,c,d);break}case"rejected":await sl(a.localStore,e,!0),ll(a,e,i);break;default:ge(64155,t)}}async function bM(s,e,t){const i=Id(s);if(i.gu){for(const a of e){if(i.Iu.has(a)&&i.sharedClientState.isActiveQueryTarget(a)){le(_l,"Adding an already active target "+a);continue}const l=await Vw(i.localStore,a),c=await Xf(i.localStore,l);await Uy(i,Ww(l),c.targetId,!1,c.resumeToken),Ad(i.remoteStore,c)}for(const a of t)i.Iu.has(a)&&await sl(i.localStore,a,!1).then((()=>{al(i.remoteStore,a),ll(i,a)})).catch(Cs)}}function Id(s){const e=_e(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=Xw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uM.bind(null,e),e.Pu.J_=J4.bind(null,e.eventManager),e.Pu.yu=W4.bind(null,e.eventManager),e}function Fy(s){const e=_e(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hM.bind(null,e),e}class ac{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Cw(this.persistence,new Rw,e.initialUser,this.serializer)}Cu(e){return new Ry(Td.Vi,this.serializer)}Du(e){return new zw}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ac.provider={build:()=>new ac};class TM extends ac{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ee(this.persistence.referenceDelegate instanceof Yf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new Tw(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new Ry((i=>Yf.Vi(i,t)),this.serializer)}}class Zw extends ac{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Fy(this.xu.syncEngine),await gl(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return Cw(this.persistence,new Rw,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new Tw(i,e.asyncQueue,t)}Mu(e,t){const i=new AV(t,this.persistence);return new wV(e.asyncQueue,i)}Cu(e){const t=xw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new Cy(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,Uw(),Af(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new zw}}class SM extends Zw{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof Xp&&(this.sharedClientState.syncEngine={So:yM.bind(null,t),Do:EM.bind(null,t),Co:bM.bind(null,t),hs:vM.bind(null,t),bo:gM.bind(null,t)},await this.sharedClientState.start()),await this.persistence.zi((async i=>{await _M(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))}Du(e){const t=Uw();if(!Xp.v(t))throw new me(re.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=xw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Xp(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class oc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>yT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=dM.bind(null,this.syncEngine),await Mg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new $4})()}createDatastore(e){const t=Sd(e.databaseInfo.databaseId),i=C4(e.databaseInfo);return M4(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,c,d){return new P4(i,a,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>yT(this.syncEngine,t,0)),(function(){return hT.v()?new hT:new A4})())}createSyncEngine(e,t){return(function(a,l,c,d,p,g,v){const b=new iM(a,l,c,d,p,g);return v&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=_e(t);le(Ma,"RemoteStore shutting down."),i.Ea.add(5),await Sc(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}oc.provider={build:()=>new oc};class wM{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Dt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Rs="FirestoreClient";class AM{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=a,this.user=un.UNAUTHENTICATED,this.clientId=ry.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{le(Rs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(le(Rs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Ly(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Wp(s,e){s.asyncQueue.verifyOperationInProgress(),le(Rs,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let i=t.initialUser;s.setCredentialChangeListener((async a=>{i.isEqual(a)||(await Nw(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function vT(s,e){s.asyncQueue.verifyOperationInProgress();const t=await IM(s);le(Rs,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((i=>dT(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,a)=>dT(e.remoteStore,a))),s._onlineComponents=e}async function IM(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){le(Rs,"Using user provided OfflineComponentProvider");try{await Wp(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===re.FAILED_PRECONDITION||a.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Go("Error using user provided cache. Falling back to memory cache: "+t),await Wp(s,new ac)}}else le(Rs,"Using default OfflineComponentProvider"),await Wp(s,new TM(void 0));return s._offlineComponents}async function eA(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(le(Rs,"Using user provided OnlineComponentProvider"),await vT(s,s._uninitializedComponentsProvider._online)):(le(Rs,"Using default OnlineComponentProvider"),await vT(s,new oc))),s._onlineComponents}function xM(s){return eA(s).then((e=>e.syncEngine))}async function RM(s){const e=await eA(s),t=e.eventManager;return t.onListen=rM.bind(null,e.syncEngine),t.onUnlisten=aM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=sM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=oM.bind(null,e.syncEngine),t}function CM(s,e,t={}){const i=new Sr;return s.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const v=new wM({next:S=>{v.Nu(),c.enqueueAndForget((()=>X4(l,b)));const N=S.docs.has(d);!N&&S.fromCache?g.reject(new me(re.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&S.fromCache&&p&&p.source==="server"?g.reject(new me(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),b=new Z4(gd(d.path),v,{includeMetadataChanges:!0,Ka:!0});return Y4(l,b)})(await RM(s),s.asyncQueue,e,t,i))),i.promise}function NM(s,e){const t=new Sr;return s.asyncQueue.enqueueAndForget((async()=>lM(await xM(s),e,t))),t.promise}function tA(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const DM="ComponentProvider",ET=new Map;function VM(s,e,t,i,a){return new ZV(s,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,tA(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,i)}const OM="firestore.googleapis.com",bT=!0;class TT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new me(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=OM,this.ssl=bT}else this.host=e.host,this.ssl=e.ssl??bT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=yw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bw)throw new me(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tA(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new me(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new me(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new me(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nA{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new hV;switch(i.type){case"firstParty":return new mV(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new me(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=ET.get(t);i&&(le(DM,"Removing Datastore"),ET.delete(t),i.terminate())})(this),Promise.resolve()}}class Hy{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Hy(this.firestore,e,this._query)}}class Jt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new lc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jt(this.firestore,e,this._key)}toJSON(){return{type:Jt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(yc(t,Jt._jsonSchema))return new Jt(e,i||null,new de(ot.fromString(t.referencePath)))}}Jt._jsonSchemaVersion="firestore/documentReference/1.0",Jt._jsonSchema={type:Ft("string",Jt._jsonSchemaVersion),referencePath:Ft("string")};class lc extends Hy{constructor(e,t,i){super(e,t,gd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jt(this.firestore,null,new de(e))}withConverter(e){return new lc(this.firestore,e,this._path)}}function ST(s,e,...t){if(s=vi(s),arguments.length===1&&(e=ry.newId()),EV("doc","path",e),s instanceof nA){const i=ot.fromString(e,...t);return fb(i),new Jt(s,null,new de(i))}{if(!(s instanceof Jt||s instanceof lc))throw new me(re.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(ot.fromString(e,...t));return fb(i),new Jt(s.firestore,s instanceof lc?s.converter:null,new de(i))}}const wT="AsyncQueue";class AT{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new jw(this,"async_queue_retry"),this._c=()=>{const i=Af();i&&le(wT,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Af();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Af();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Sr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ns(e))throw e;le(wT,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Dt("INTERNAL UNHANDLED ERROR: ",IT(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Py.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&ge(47125,{Pc:IT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function IT(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Gy extends nA{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new AT,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new AT(e),this._firestoreClient=void 0,await e}}}function MM(s,e,t){t||(t=jf);const i=Kg(s,"firestore");if(i.isInitialized(t)){const a=i.getImmediate({identifier:t}),l=i.getOptions(t);if(Aa(l,e))return a;throw new me(re.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new me(re.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bw)throw new me(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&hl(e.host)&&l1(e.host),i.initialize({options:e,instanceIdentifier:t})}function iA(s){if(s._terminated)throw new me(re.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||kM(s),s._firestoreClient}function kM(s){const e=s._freezeSettings(),t=VM(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new AM(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(s._componentsProvider))}class Zn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zn(Vt.fromBase64String(e))}catch(t){throw new me(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Zn(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yc(e,Zn._jsonSchema))return Zn.fromBase64String(e.bytes)}}Zn._jsonSchemaVersion="firestore/bytes/1.0",Zn._jsonSchema={type:Ft("string",Zn._jsonSchemaVersion),bytes:Ft("string")};class rA{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new me(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class sA{constructor(e){this._methodName=e}}class Qi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new me(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new me(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Qi._jsonSchemaVersion}}static fromJSON(e){if(yc(e,Qi._jsonSchema))return new Qi(e.latitude,e.longitude)}}Qi._jsonSchemaVersion="firestore/geoPoint/1.0",Qi._jsonSchema={type:Ft("string",Qi._jsonSchemaVersion),latitude:Ft("number"),longitude:Ft("number")};class _i{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:_i._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yc(e,_i._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new _i(e.vectorValues);throw new me(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_i._jsonSchemaVersion="firestore/vectorValue/1.0",_i._jsonSchema={type:Ft("string",_i._jsonSchemaVersion),vectorValues:Ft("object")};const PM=/^__.*__$/;class LM{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ds(e,this.data,this.fieldMask,t,this.fieldTransforms):new pl(e,this.data,t,this.fieldTransforms)}}function aA(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge(40011,{dataSource:s})}}class Ky{constructor(e,t,i,a,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Ky({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return ed(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(aA(this.dataSource)&&PM.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class zM{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Sd(e)}createContext(e,t,i,a=!1){return new Ky({dataSource:e,methodName:t,targetDoc:i,path:vt.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function UM(s){const e=s._freezeSettings(),t=Sd(s._databaseId);return new zM(s._databaseId,!!e.ignoreUndefinedProperties,t)}function jM(s,e,t,i,a,l={}){const c=s.createContext(l.merge||l.mergeFields?2:0,e,t,a);cA("Data must be an object, but it was:",c,i);const d=lA(i,c);let p,g;if(l.merge)p=new ei(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const b of l.mergeFields){const S=Qy(e,b,t);if(!c.contains(S))throw new me(re.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);FM(v,S)||v.push(S)}p=new ei(v),g=c.fieldTransforms.filter((b=>p.covers(b.field)))}else p=null,g=c.fieldTransforms;return new LM(new wn(d),p,g)}function oA(s,e){if(uA(s=vi(s)))return cA("Unsupported field value:",e,s),lA(s,e);if(s instanceof sA)return(function(i,a){if(!aA(a.dataSource))throw a.createError(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,a){const l=[];let c=0;for(const d of i){let p=oA(d,a.childContextForArray(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(s,e)}return(function(i,a){if((i=vi(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return vO(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=tt.fromDate(i);return{timestampValue:rl(a.serializer,l)}}if(i instanceof tt){const l=new tt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:rl(a.serializer,l)}}if(i instanceof Qi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Zn)return{bytesValue:ew(a.serializer,i._byteString)};if(i instanceof Jt){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:wy(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof _i)return(function(c,d){const p=c instanceof _i?c.toArray():c;return{mapValue:{fields:{[dy]:{stringValue:my},[Wo]:{arrayValue:{values:p.map((v=>{if(typeof v!="number")throw d.createError("VectorValues must only contain numeric values.");return _y(d.serializer,v)}))}}}}}})(i,a);if(hw(i))return i._toProto(a.serializer);throw a.createError(`Unsupported field value: ${sy(i)}`)})(s,e)}function lA(s,e){const t={};return vS(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pa(s,((i,a)=>{const l=oA(a,e.childContextForField(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function uA(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof tt||s instanceof Qi||s instanceof Zn||s instanceof Jt||s instanceof sA||s instanceof _i||hw(s))}function cA(s,e,t){if(!uA(t)||!nS(t)){const i=sy(t);throw i==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+i)}}function Qy(s,e,t){if((e=vi(e))instanceof rA)return e._internalPath;if(typeof e=="string")return qM(s,e);throw ed("Field path arguments must be of type string or ",s,!1,void 0,t)}const BM=new RegExp("[~\\*/\\[\\]]");function qM(s,e,t){if(e.search(BM)>=0)throw ed(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new rA(...e.split("."))._internalPath}catch{throw ed(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function ed(s,e,t,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${a}`),p+=")"),new me(re.INVALID_ARGUMENT,d+s+p)}function FM(s,e){return s.some((t=>t.isEqual(e)))}class HM{convertValue(e,t="none"){switch(As(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Rr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ge(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Pa(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){const t=e.fields?.[Wo].arrayValue?.values?.map((i=>yt(i.doubleValue)));return new _i(t)}convertGeoPoint(e){return new Qi(yt(e.latitude),yt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=dd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(tc(e));default:return null}}convertTimestamp(e){const t=xr(e);return new tt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=ot.fromString(e);Ee(cw(i),9688,{name:e});const a=new Ca(i.get(1),i.get(3)),l=new de(i.popFirst(5));return a.isEqual(t)||Dt(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}class GM extends HM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,t)}}const xT="@firebase/firestore",RT="4.11.0";class hA{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new KM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(Qy("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class KM extends hA{data(){return super.data()}}function QM(s,e,t){let i;return i=s?s.toFirestore(e):e,i}class $M{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=WM(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function YM(s){return new $M(s)}class XM{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=oc.provider,this._offlineComponentProvider={build:t=>new Zw(t,e?.cacheSizeBytes,this.forceOwnership)}}}class JM{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=oc.provider,this._offlineComponentProvider={build:t=>new SM(t,e?.cacheSizeBytes)}}}function WM(s){return new XM(s?.forceOwnership)}function ZM(){return new JM}class Mu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wa extends hA{constructor(e,t,i,a,l,c){super(e,t,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new If(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Qy("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new me(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=wa._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}wa._jsonSchemaVersion="firestore/documentSnapshot/1.0",wa._jsonSchema={type:Ft("string",wa._jsonSchemaVersion),bundleSource:Ft("string","DocumentSnapshot"),bundleName:Ft("string"),bundle:Ft("string")};class If extends wa{data(e={}){return super.data(e)}}class Ku{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Mu(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new If(this._firestore,this._userDataWriter,i.key,i,new Mu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new me(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const p=new If(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Mu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new If(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Mu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,v=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:ek(d.type),doc:p,oldIndex:g,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new me(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ku._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ry.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ek(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge(61501,{type:s})}}Ku._jsonSchemaVersion="firestore/querySnapshot/1.0",Ku._jsonSchema={type:Ft("string",Ku._jsonSchemaVersion),bundleSource:Ft("string","QuerySnapshot"),bundleName:Ft("string"),bundle:Ft("string")};function tk(s){s=kf(s,Jt);const e=kf(s.firestore,Gy),t=iA(e);return CM(t,s._key).then((i=>rk(e,s,i)))}function nk(s,e,t){s=kf(s,Jt);const i=kf(s.firestore,Gy),a=QM(s.converter,e),l=UM(i);return ik(i,[jM(l,"setDoc",s._key,a,s.converter!==null,t).toMutation(s._key,Ln.none())])}function ik(s,e){const t=iA(s);return NM(t,e)}function rk(s,e,t){const i=t.docs.get(e._key),a=new GM(s);return new wa(s,a,e._key,i,new Mu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){uV(fl),Fo(new Ia("firestore",((i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new Gy(new fV(i.getProvider("auth-internal")),new pV(c,i.getProvider("app-check-internal")),eO(c,a),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Ts(xT,RT,e),Ts(xT,RT,"esm2020")})();const sk={apiKey:"AIzaSyCAGA-3ns3qFV47KXsFfd97kac_9LhPyhY",authDomain:"permis-online-sync.firebaseapp.com",projectId:"permis-online-sync",storageBucket:"permis-online-sync.firebasestorage.app",messagingSenderId:"653028638132",appId:"1:653028638132:web:028b727230365733a846e1"},fA=p1(sk),vs=oV(fA),CT=MM(fA,{localCache:YM({tabManager:ZM()})}),dA=new Fi;dA.addScope("repo");const ak=()=>gD(vs,dA),ok=()=>XN(vs),lk=({progress:s,themesData:e,onBack:t,onReset:i,instantFeedback:a,onToggleInstantFeedback:l,autoPlayAudio:c,onToggleAutoPlayAudio:d})=>{const p=ka(),[g,v]=z.useState(!1),[b,S]=z.useState(!1),N=te=>{const pe=te.bestScore!==void 0?te.bestScore:te.score||0,we=te.totalQuestions!==void 0?te.totalQuestions:te.total||0;return{score:pe,total:we}},Q=Object.entries(s).filter(([te])=>te!=="metadata").map(([,te])=>te),K=Q.length,U=Q.reduce((te,pe)=>{const{score:we,total:V}=N(pe);return{bestScore:te.bestScore+we,totalQuestions:te.totalQuestions+V}},{bestScore:0,totalQuestions:0}),ee=U.bestScore,J=U.totalQuestions,W=J>0?Math.round(ee/J*100):0,se=J-ee,ue=(e.sections||[]).flatMap(te=>te.items||te.themes||[]).filter(te=>te&&te.id&&te.id!=="metadata"&&s[te.id]),ce=g?ue.filter(te=>{const{score:pe,total:we}=N(s[te.id]);return pe<we}):ue,[x,I]=z.useState(()=>localStorage.getItem("groq_api_key")||""),[R,M]=z.useState(vs.currentUser),[O,k]=z.useState(!1);z.useEffect(()=>{const te=vs.onAuthStateChanged(pe=>{M(pe)});return()=>te()},[]);const C=async()=>{try{S(!0);const te=await ak(),we=Fi.credentialFromResult(te).accessToken;we&&localStorage.setItem("github_token",we)}catch(te){console.error("Login failed:",te),alert("Erreur de connexion : "+te.message)}finally{S(!1)}},ke=async()=>{try{await ok(),localStorage.removeItem("github_token")}catch(te){console.error("Logout failed:",te)}},qe=()=>{x?localStorage.setItem("groq_api_key",x):localStorage.removeItem("groq_api_key"),alert("Cl IA sauvegarde !")},j=async te=>{S(!0);try{let pe=[];try{pe=(await ng(te.file)).questions||[]}catch{pe=(await(await fetch(`data/${te.file}`)).json()).questions||[]}if(pe.length===0){alert("Impossible de charger les questions pour la rvision.");return}const V=s[te.id].answers||[],F=[];if(V.length>0&&V.forEach(ae=>{if(ae&&ae.isCorrect===!1){const fe=pe.find(be=>be.id==ae.questionId);fe&&F.push({...fe,originalThemeId:te.id,sourceFile:te.file})}}),F.length===0){alert("Erreur: Impossible de retrouver les questions.");return}p("/quiz/review",{state:{questions:F,title:`Rvision: ${te.name}`,isReview:!0}})}catch(pe){console.error("Erreur rvision:",pe),alert("Erreur lors du chargement de la rvision.")}finally{S(!1)}},oe=async()=>{S(!0);try{const te=[],pe=ue.filter(V=>{const{score:F,total:ae}=N(s[V.id]);return F<ae});if(pe.length===0){alert("Aucune faute  rviser !"),S(!1);return}for(const V of pe){let F=[];try{F=(await ng(V.file)).questions||[]}catch{F=(await(await fetch(`data/${V.file}`)).json()).questions||[]}const fe=s[V.id].answers||[];fe.length>0&&fe.forEach(be=>{if(be&&be.isCorrect===!1){const Ie=F.find(Me=>Me.id==be.questionId);Ie&&te.push({q:Ie,a:be,idx:te.length,themeId:V.id,sourceFile:V.file})}})}if(te.length===0){alert("Aucune erreur trouve dans les sauvegardes.");return}const we=te.map(V=>({...V.q,originalThemeId:V.themeId,sourceFile:V.sourceFile}));p("/quiz/review",{state:{questions:we,title:"Rvision des fautes (Global)",isReview:!0}})}catch(te){console.error(te),alert("Erreur lors de la prparation de la rvision globale.")}finally{S(!1)}};return b?A.jsx("div",{className:"page container flex items-center justify-center h-screen",children:"Chargement de la rvision..."}):A.jsxs("div",{className:"page container animate-fade-in",style:{maxWidth:"1200px"},children:[A.jsx("div",{className:"mb-6",children:A.jsxs("button",{onClick:t,className:"btn-ghost flex items-center gap-2",children:[A.jsx(id,{size:20})," Retour"]})}),A.jsxs("div",{className:"profile-stats-grid",children:[A.jsxs("div",{className:"stat-card",children:[A.jsx("div",{className:"stat-icon primary",children:A.jsx(tg,{size:24})}),A.jsxs("div",{className:"stat-content",children:[A.jsx("div",{className:"stat-label",children:"Moyenne Globale"}),A.jsxs("div",{className:"stat-value",children:[W,"%"]})]})]}),A.jsxs("div",{className:"stat-card",children:[A.jsx("div",{className:"stat-icon info",children:A.jsx(Cu,{size:24})}),A.jsxs("div",{className:"stat-content",children:[A.jsx("div",{className:"stat-label",children:"Quiz Termins"}),A.jsx("div",{className:"stat-value",children:K})]})]}),A.jsxs("div",{className:"stat-card relative overflow-hidden",children:[A.jsx("div",{className:"stat-icon danger",children:A.jsx(f2,{size:24})}),A.jsxs("div",{className:"stat-content z-10 relative w-full",children:[A.jsx("div",{className:"stat-label",children:"Fautes  revoir"}),A.jsx("div",{className:"stat-value",children:se}),A.jsxs("div",{className:"flex flex-row items-center justify-between w-full mt-1",children:[A.jsxs("div",{className:"stat-sub",children:[se," erreurs au total"]}),se>0&&A.jsxs("button",{onClick:oe,className:"btn-primary btn-sm flex items-center gap-1 px-3 py-2",children:[A.jsx(kp,{size:16})," Rviser"]})]})]})]})]}),A.jsxs("div",{className:"profile-content-grid",children:[A.jsxs("div",{className:"card p-6 bg-surface-1 border border-border",children:[A.jsxs("div",{className:"flex items-center justify-between mb-6",children:[A.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[A.jsx(BR,{size:20})," Historique"]}),A.jsxs("button",{onClick:()=>v(!g),className:`btn-sm flex items-center gap-2 ${g?"btn-danger":"btn-ghost"}`,children:[A.jsx(FR,{size:16})," ",g?"Tout voir":"Voir les fautes"]})]}),A.jsx("div",{className:"theme-history-list",children:ce.length===0?A.jsx("div",{className:"text-center text-muted py-8",children:g?"Aucune faute trouve ! Bravo ! ":"Aucun historique disponible. Commencez un quiz !"}):ce.map(te=>{const pe=s[te.id],{score:we,total:V}=N(pe),F=V>0?Math.round(we/V*100):0;let ae;return F===100?ae="text-success":F>=50?ae="text-warning":ae="text-danger",A.jsxs("div",{className:"theme-history-item flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsx("div",{className:"font-medium",children:te.name}),A.jsxs("div",{className:`font-mono font-bold ${ae}`,children:[we," / ",V," (",F,"%)"]})]}),we<V&&A.jsxs("button",{onClick:()=>j(te),className:"btn-ghost text-primary btn-sm flex items-center gap-1 hover:bg-primary/10",children:[A.jsx(kp,{size:14})," Rviser"]})]},te.id)})}),Object.keys(s).length>0&&A.jsx("div",{className:"mt-8 pt-6 border-t border-border",children:O?A.jsxs("div",{className:"p-4 border border-danger rounded bg-danger/10 animate-fade-in",children:[A.jsx("p",{className:"text-center mb-3 text-danger font-medium",children:"tes-vous sr ?"}),A.jsxs("div",{className:"flex gap-3",children:[A.jsx("button",{onClick:()=>k(!1),className:"btn-ghost flex-1 text-sm",children:"Annuler"}),A.jsx("button",{onClick:()=>{i(),k(!1)},className:"btn-primary bg-danger border-danger hover:bg-danger/90 flex-1 text-white text-sm",children:"Confirmer"})]})]}):A.jsxs("button",{onClick:()=>k(!0),className:"btn-ghost text-danger w-full flex items-center justify-center gap-2",children:[A.jsx(VE,{size:16})," Rinitialiser la progression"]})})]}),A.jsxs("div",{className:"settings-list",children:[A.jsxs("div",{className:"card p-6 bg-surface-1 border border-border",children:[A.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[A.jsx(s2,{size:20})," Prfrences"]}),A.jsxs("div",{className:"flex items-center justify-between mb-6",children:[A.jsxs("div",{children:[A.jsx("div",{className:"font-semibold",children:"Correction Instantane"}),A.jsx("div",{className:"text-sm text-muted",children:"Voir la rponse juste aprs le clic."})]}),A.jsxs("label",{className:"switch",children:[A.jsx("input",{type:"checkbox",checked:a,onChange:l}),A.jsx("span",{className:"slider round"})]})]}),A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsx("div",{className:"font-semibold",children:"Lecture Audio Auto"}),A.jsx("div",{className:"text-sm text-muted",children:"Lire la question automatiquement."})]}),A.jsxs("label",{className:"switch",children:[A.jsx("input",{type:"checkbox",checked:c,onChange:d}),A.jsx("span",{className:"slider round"})]})]})]}),A.jsxs("div",{className:"card p-6 border-2 border-primary/20 bg-surface-1",children:[A.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2 text-primary",children:[A.jsx(QR,{size:20})," Mode Contributeur"]}),A.jsxs("div",{className:"mb-5",children:[A.jsx("label",{className:"block mb-1.5 font-semibold text-sm",children:"Groq API Key"}),A.jsxs("p",{className:"text-xs text-muted mb-2",children:["Requise pour corrections IA (Llama 3). ",A.jsx("a",{href:"https://console.groq.com/keys",target:"_blank",rel:"noreferrer",className:"text-primary underline",children:"Obtenir une cl"})]}),A.jsx("input",{type:"password",className:"input w-full",value:x,onChange:te=>I(te.target.value),placeholder:"gsk_..."})]}),A.jsxs("div",{className:"mb-6",children:[A.jsxs("label",{className:"block mb-1.5 font-semibold text-sm flex items-center gap-2",children:[A.jsx(kp,{size:16})," Synchronisation Cloud"]}),A.jsx("p",{className:"text-xs text-muted mb-4",children:"Sauvegardez votre progression automatiquement dans le cloud pour la retrouver sur tous vos appareils."}),R?A.jsx("div",{className:"space-y-3",children:A.jsxs("div",{className:"flex items-center justify-between p-3 bg-success/10 rounded-lg text-success text-sm border border-success/20",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[R.photoURL?A.jsx("img",{src:R.photoURL,alt:"",style:{width:"32px",height:"32px",borderRadius:"50%"}}):A.jsx(ZT,{size:24}),A.jsxs("div",{className:"flex flex-col",children:[A.jsx("span",{className:"font-bold",children:R.displayName||R.email}),A.jsx("span",{className:"text-[10px] opacity-70",children:"Connect via Firebase"})]})]}),A.jsx("button",{onClick:ke,className:"p-1 hover:bg-danger/20 rounded-full text-danger transition-colors",title:"Se dconnecter",children:A.jsx(VE,{size:18})})]})}):A.jsxs("button",{onClick:C,className:"btn-secondary w-full flex items-center justify-center gap-2 py-3 border-2 border-primary/20 hover:border-primary/50 transition-all",children:[A.jsx(GR,{size:20})," Se connecter avec GitHub"]})]}),A.jsxs("button",{onClick:qe,className:"btn-primary w-full flex items-center justify-center gap-2",children:[A.jsx(t2,{size:18})," Enregistrer les cls"]})]})]})]}),A.jsx("div",{className:"h-10"})]})},uk=({progress:s,themesData:e,onReset:t,instantFeedback:i,onToggleInstantFeedback:a,autoPlayAudio:l,onToggleAutoPlayAudio:c,toggleTheme:d,isDarkMode:p})=>{const g=ka();return A.jsxs(A.Fragment,{children:[A.jsx(Fg,{showProfileButton:!1,toggleTheme:d,isDarkMode:p}),A.jsx(lk,{progress:s,themesData:e,onBack:()=>g("/"),onReset:t,instantFeedback:i,onToggleInstantFeedback:a,autoPlayAudio:l,onToggleAutoPlayAudio:c})]})},ck='.quiz-next-row{display:grid;grid-template-columns:1fr 1.2fr;gap:18px;margin-top:18px}@media(max-width:880px){.quiz-next-row{grid-template-columns:1fr}}*,*:before,*:after{box-sizing:border-box}html:focus-within{scroll-behavior:smooth}html,body,#root{height:100%}body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,Arial,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,sans-serif;line-height:1.5;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}img,picture,video,canvas,svg{display:block;max-width:100%}input,button,textarea,select{font:inherit}:root{--bg: #0b1020;--bg-elev: #121832;--surface: #151b3a;--surface-2: #1a2248;--text: #e6e9f5;--muted: #aab0c0;--primary: #0ea5e9;--primary-700: #0284c7;--success: #22c55e;--warning: #f59e0b;--danger: #ef4444;--border: #273056;--radius: 12px;--space-1: 6px;--space-2: 10px;--space-3: 14px;--space-4: 18px;--space-5: 24px;--space-6: 32px}[data-theme=light]{--bg: #f7f8fb;--bg-elev: #ffffff;--surface: #ffffff;--surface-2: #f2f4f8;--text: #0f172a;--muted: #475569;--border: #e2e8f0}@media(prefers-color-scheme:light){:root:not([data-theme]){color-scheme:light}}@media(prefers-color-scheme:dark){:root:not([data-theme]){color-scheme:dark}}body{color:var(--text);background:var(--bg);background-attachment:fixed;transition:background-color .3s ease,color .3s ease}#root{display:grid;grid-template-rows:auto 1fr}.container{width:min(1250px,calc(100% - 32px));margin-inline:auto;padding:var(--space-5) 0 var(--space-6)}h1,h2,h3{margin:0 0 var(--space-3);letter-spacing:-.01em}h1{font-size:clamp(26px,2.4vw,36px);font-weight:700}h2{font-size:clamp(20px,2vw,28px);font-weight:600}p{margin:0 0 var(--space-3);color:var(--muted)}.card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)}button{--bpad-x: 14px;--bpad-y: 10px;appearance:none;border:1px solid var(--border);background:var(--surface);color:var(--text);padding:var(--bpad-y) var(--bpad-x);border-radius:8px;cursor:pointer;transition:background .15s ease,border-color .15s ease}button:hover{background:var(--bg-elev);border-color:var(--muted)}button:active{background:var(--surface-2)}.btn-primary{background:var(--primary);border-color:var(--primary);color:#fff}.btn-primary:hover{background:var(--primary-700);border-color:var(--primary-700)}.btn-ghost{background:transparent;border-color:transparent;color:var(--muted)}.btn-ghost:hover{color:var(--text);background:var(--surface-2)}.btn-danger{border-color:var(--danger);color:#fff;background:var(--danger)}.btn-danger:hover{background:color-mix(in oklab,var(--danger) 80%,black)}.input,input[type=text],input[type=search]{width:100%;padding:12px 14px;border-radius:8px;border:1px solid var(--border);background:var(--bg-elev);color:var(--text);outline:none}.input::placeholder,input::placeholder{color:var(--muted)}input:focus{border-color:var(--primary)}input[type=checkbox]{accent-color:var(--primary)}.page{padding-top:var(--space-6)}.page .page-title{margin-bottom:var(--space-2)}.search{margin:var(--space-3) 0 var(--space-4)}.search .input{max-width:520px}.actions{display:flex;gap:10px;align-items:center;margin-bottom:var(--space-3)}.theme-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px}.theme-btn{width:100%;display:flex;flex-direction:column;align-items:flex-start;padding:14px 16px;text-align:left;gap:4px}.theme-btn .theme-name{font-weight:600}.theme-btn .theme-meta{color:var(--muted);font-size:13px}.quiz{width:min(1250px,calc(100% - 32px));margin:24px auto}.quiz-topbar{display:flex;align-items:center;gap:12px;margin-bottom:var(--space-3)}.quiz-topbar .exit-btn{padding-left:10px;padding-right:10px}.toggle{display:inline-flex;align-items:center;gap:8px;padding:8px 10px;border-radius:8px;color:var(--muted);border:1px solid transparent}.toggle:hover{border-color:var(--border);background:var(--surface);color:var(--text)}.toggle span{font-size:14px}.question-card{padding:var(--space-5)}.question-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:var(--space-3)}.question-title{font-weight:700;color:var(--text)}.question-progress{color:var(--muted);font-weight:600}.question-main{display:grid;grid-template-columns:1fr 1.5fr;gap:18px}@media(max-width:880px){.question-main{grid-template-columns:1fr}}.question-image{border-radius:var(--radius);overflow:hidden;border:1px solid var(--border);background:var(--surface);min-height:180px;display:grid;place-items:center}.question-image img{width:100%;height:100%;object-fit:cover;transform:scale(1.08)}.question-image.placeholder{background:var(--surface-2)}.question-text{margin-bottom:var(--space-3);padding:0}.question-text-inner{font-size:1.35rem;font-weight:700;line-height:1.4}.answers{display:grid;gap:10px}.answer-btn{display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:16px;text-align:left;padding:12px 16px;border-radius:12px;background:var(--surface);border:2px solid var(--border);color:var(--text);transition:all .2s ease}.answer-btn:hover{background:var(--bg-elev);border-color:var(--muted)}.answer-key{display:grid;place-items:center;width:32px;height:32px;border-radius:8px;background:var(--surface-2);color:var(--muted);font-weight:700;font-size:16px;transition:all .2s ease}.answer-text{font-size:1.05rem;font-weight:500}.answer-check{color:var(--success)}@keyframes pop{0%{transform:scale(1)}50%{transform:scale(1.02)}to{transform:scale(1)}}.answer-btn:active{transform:scale(.97)}.answer-btn.correct,.answer-btn.correct.selected{border-color:var(--success);background:#22c55e26;animation:pop .2s cubic-bezier(.175,.885,.32,1.275)}.answer-btn.correct .answer-key,.answer-btn.correct.selected .answer-key{background:var(--success);color:#fff}.answer-btn.correct .answer-text{color:var(--success);font-weight:600}.answer-btn.incorrect{border-color:var(--danger);background:#ef444426;animation:pop .2s cubic-bezier(.175,.885,.32,1.275)}.answer-btn.incorrect .answer-key{background:var(--danger);color:#fff}.answer-btn.selected{border-color:var(--primary);background:#0ea5e926;animation:pop .2s cubic-bezier(.175,.885,.32,1.275)}.answer-btn.selected .answer-key{background:var(--primary);color:#fff}.answer-btn.selected{border-color:var(--primary);background:color-mix(in oklab,var(--primary) 10%,var(--surface))}.answer-btn.dimmed{opacity:.5}.number-wrap{display:grid;gap:8px}.number-field{display:flex;gap:8px;align-items:center}.number-input{flex:1}.number-submit{min-width:64px}.number-field.selected .number-input{border-color:var(--primary)}.number-field.correct .number-input{border-color:var(--success);background:color-mix(in oklab,var(--success) 10%,var(--bg-elev))}.number-field.incorrect .number-input{border-color:var(--danger);background:color-mix(in oklab,var(--danger) 10%,var(--bg-elev))}.number-feedback{color:var(--muted);font-size:14px}.dots-bar{display:grid;place-items:center;margin-top:var(--space-3);color:var(--muted)}.dots{letter-spacing:6px}.explanation{margin-top:var(--space-4);background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:var(--space-4)}.explanation-title{font-weight:600;margin-bottom:6px}.explanation-text{color:var(--muted)}.results{width:min(900px,calc(100% - 32px));margin:24px auto}.results .results-actions{display:flex;gap:10px;margin:12px 0 var(--space-3)}.review .review-item{padding:12px 0}.review hr{border:none;height:1px;background:var(--border);margin:12px 0}.mt-1{margin-top:var(--space-1)}.mt-2{margin-top:var(--space-2)}.mt-3{margin-top:var(--space-3)}.mt-4{margin-top:var(--space-4)}.mt-5{margin-top:var(--space-5)}.muted{color:var(--muted)}.countdown{margin-top:var(--space-3)}.countdown-track{position:relative;height:6px;border-radius:999px;background:var(--surface-2);overflow:hidden}.countdown-fill{position:absolute;inset:0 auto 0 0;width:100%;background:var(--primary);transition:width .1s linear}.question-card.timed-out .answers .answer-btn{opacity:.5;filter:grayscale(1)}.question-card.timed-out .answers .answer-btn:hover{background:var(--surface);border-color:var(--border)}.question-card.timed-out .number-field{opacity:.6}::-webkit-scrollbar{width:10px;height:10px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:var(--border);border-radius:5px;border:2px solid var(--bg)}::-webkit-scrollbar-thumb:hover{background:var(--muted)}@keyframes fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in{animation:fadeIn .3s ease-out forwards}.quiz-nav-buttons{display:flex;justify-content:flex-end;gap:16px;align-items:center;margin-top:20px;grid-column:2}@media(max-width:880px){.quiz-nav-buttons{grid-column:1;justify-content:space-between}}.btn-explanation{display:flex;align-items:center;gap:8px;padding:10px 20px;border-radius:8px;font-size:1rem;font-weight:500;cursor:pointer;background:var(--surface-2);color:var(--primary);border:1px solid var(--border)}.btn-explanation:hover{background:var(--bg-elev);border-color:var(--primary)}.btn-next{padding:10px 24px;font-size:1rem;font-weight:600;background:var(--surface);color:var(--text);border:1px solid var(--border)}.btn-next:hover{background:var(--bg-elev);border-color:var(--muted)}.profile-stats-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;grid-auto-flow:dense;margin-bottom:40px}@media(max-width:768px){.profile-stats-grid{grid-template-columns:1fr}}.stat-card{background:var(--surface-2);border-radius:var(--radius);padding:24px;display:flex;align-items:center;gap:20px}.stat-icon{width:56px;height:56px;border-radius:16px;display:grid;place-items:center;flex-shrink:0}.stat-icon.primary{background:#0ea5e926;color:var(--primary)}.stat-icon.info{background:#3b82f626;color:#60a5fa}.stat-icon.danger{background:#ef444426;color:var(--danger)}.stat-content{flex:1}.stat-label{font-size:.9rem;color:var(--muted);margin-bottom:4px;font-weight:500}.stat-value{font-size:2.2rem;font-weight:700;line-height:1;color:var(--text)}.stat-sub{font-size:.85rem;color:var(--muted);margin-top:4px}.profile-content-grid{display:grid;grid-template-columns:1fr 380px;gap:40px;align-items:start}@media(max-width:1024px){.profile-content-grid{grid-template-columns:1fr}}.theme-history-list{display:flex;flex-direction:column;gap:12px}.theme-history-item{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;background:var(--surface-2);border-radius:var(--radius);transition:transform .2s ease}.theme-history-item:hover{transform:translate(4px);background:var(--bg-elev)}.settings-list{display:flex;flex-direction:column;gap:24px}.switch{position:relative;display:inline-block;width:44px;height:24px}.switch input{opacity:0;width:0;height:0}.slider{position:absolute;cursor:pointer;inset:0;background-color:var(--surface-2);border:1px solid var(--border);transition:.4s;border-radius:34px}.slider:before{position:absolute;content:"";height:18px;width:18px;left:2px;bottom:2px;background-color:var(--muted);transition:.4s;border-radius:50%}input:checked+.slider{background-color:var(--primary);border-color:var(--primary)}input:checked+.slider:before{transform:translate(20px);background-color:#fff}.flex{display:flex}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-between{justify-content:space-between}.justify-center{justify-content:center}.gap-2{gap:8px}.gap-3{gap:12px}.gap-4{gap:16px}.gap-6{gap:24px}.gap-8{gap:32px}.p-4{padding:16px}.p-5{padding:20px}.p-6{padding:24px}.p-8{padding:32px}.pt-6{padding-top:24px}.m-0{margin:0}.mb-1{margin-bottom:4px}.mb-2{margin-bottom:8px}.mb-3{margin-bottom:12px}.mb-4{margin-bottom:16px}.mb-5{margin-bottom:20px}.mb-6{margin-bottom:24px}.mt-8{margin-top:32px}.ml-2{margin-left:8px}.w-full{width:100%}.h-10{height:40px}.text-center{text-align:center}.text-sm{font-size:.875rem}.text-xs{font-size:.75rem}.text-xl{font-size:1.25rem}.text-2xl{font-size:1.5rem}.text-3xl{font-size:1.875rem}.font-bold{font-weight:700}.font-semibold{font-weight:600}.font-medium{font-weight:500}.border-none{border:none}.border-t{border-top:1px solid var(--border)}.text-primary{color:var(--primary)}.text-danger{color:var(--danger)}.text-success{color:var(--success)}.text-warning{color:var(--warning)}.text-muted{color:var(--muted)}.text-white{color:#fff}.underline{text-decoration:underline}.block{display:block}.toast-notification{position:fixed;top:24px;left:50%;transform:translate(-50%);background:var(--surface-1);border:1px solid var(--border);border-left:4px solid var(--success);padding:16px 20px;border-radius:8px;box-shadow:0 4px 12px #00000026;display:flex;align-items:center;gap:12px;z-index:9999;animation:slideDown .3s ease-out forwards;max-width:90%;width:max-content}.toast-notification a{color:var(--primary);text-decoration:underline;font-weight:500}@keyframes slideDown{0%{transform:translate(-50%,-100%);opacity:0}to{transform:translate(-50%);opacity:1}}',hk=({lessonFile:s,onBack:e,theme:t})=>{const[i,a]=xp.useState(""),[l,c]=xp.useState(!0);return xp.useEffect(()=>((async()=>{c(!0);try{const v=await(await fetch(`/permis-online-free/lecon/${s}`)).text(),S=new DOMParser().parseFromString(v,"text/html");S.documentElement.setAttribute("data-theme",t);const N=S.createElement("style");N.textContent=ck+`
                    /* Ensure text color is inherited everywhere */
                    body, p, h1, h2, h3, h4, h5, h6, li, td, span, div {
                        color: inherit;
                    }
                    /* Custom classes from lessons */
                    .box-yellow {
                        background-color: color-mix(in oklab, var(--warning) 10%, transparent);
                        border: 1px solid var(--warning);
                        padding: 15px;
                        border-radius: 8px;
                        margin: 15px 0;
                    }
                    .red, .text-red {
                        color: var(--danger) !important;
                    }
                    .subtitle {
                        color: var(--primary);
                        font-weight: 600;
                        margin-bottom: 5px;
                    }

                    .lesson-video {
                        width: 100%;
                        aspect-ratio: 16 / 9;
                        height: auto;
                        border-radius: 8px;
                        display: block;
                        margin: 20px 0;
                        border: none;
                    }

                    /* Scrollbar styling */
                    ::-webkit-scrollbar {
                        width: 10px;
                        height: 10px;
                    }
                    ::-webkit-scrollbar-track {
                        background: transparent;
                    }
                    ::-webkit-scrollbar-thumb {
                        background: var(--border);
                        border-radius: 5px;
                        border: 2px solid var(--bg);
                    }
                    ::-webkit-scrollbar-thumb:hover {
                        background: var(--muted);
                    }

                    img {
                        max-width: 100%;
                        height: auto;
                        display: inline-block;
                        border-radius: 8px;
                        margin-right: 4px;
                        vertical-align: middle;
                    }
                    /* Use specific styling for the layout tables */
                    .lesson-detail-table {
                        width: 100%;
                        border-collapse: separate;
                        border-spacing: 0 10px;
                    }
                    .lesson-detail-table td {
                        vertical-align: top;
                        padding: 10px;
                        background: color-mix(in oklab, var(--surface) 50%, transparent);
                        border-radius: 8px;
                    }
                    /* Force the image column (first column) to a fixed width container */
                    .lesson-detail-table td:first-child {
                        width: 280px;
                        min-width: 280px;
                        vertical-align: top;
                    }
                    /* Use flexbox on P tags to handle multiple images side-by-side in the first column */
                    .lesson-detail-table td:first-child p {
                        display: flex;
                        flex-wrap: wrap;
                        justify-content: center;
                        gap: 8px;
                        margin: 0 0 8px 0;
                    }
                    /* Images are flex items in first col, but inline-block elsewhere */
                    .lesson-detail-table img {
                        flex: 1 1 120px; 
                        max-width: 100%;
                        width: auto;
                        height: auto;
                        max-height: 180px; 
                        object-fit: contain;
                        background-color: transparent;
                        display: inline-block;
                        margin-right: 4px;
                    }
                    /* Clean up paragraphs with no images if needed, or links */
                    .lesson-detail-table td:first-child a {
                        display: contents; 
                    }
                    /* Sign tables (usually 3 columns) should not be forced */
                    .lesson-signs-3-columns td {
                        text-align: center;
                        padding: 10px;
                    }
                    .lesson-signs-3-columns img {
                        max-height: 150px;
                        width: auto;
                        margin: 0 auto;
                    }
                    
                    /* Body styling */
                    body {
                        max-width: 1100px;
                        margin: 0 auto;
                        padding: 20px;
                        background-color: var(--bg);
                        color: var(--text);
                        overflow-y: auto; /* Allow scrolling inside iframe body */
                    }

                    /* Mobile Responsive for Lesson Content */
                    @media (max-width: 600px) {
                        body {
                            padding: 12px;
                        }
                        .lesson-detail-table, .lesson-detail-table tbody, .lesson-detail-table tr, .lesson-detail-table td {
                            display: block;
                            width: 100% !important;
                            min-width: 0 !important;
                            box-sizing: border-box;
                        }
                        .lesson-detail-table td:first-child {
                            width: 100%;
                            min-width: 0;
                            margin-bottom: 15px;
                            border-bottom: 1px solid var(--border);
                            padding-bottom: 15px;
                        }
                        .lesson-detail-table img {
                            max-height: 200px;
                            width: auto;
                            margin: 0 auto;
                            display: block;
                        }
                        .lesson-detail-table td:first-child p {
                            justify-content: center;
                        }
                    }
                `,S.head.appendChild(N);const Q=S.body.getElementsByTagName("img");for(let se of Q){const ue=se.getAttribute("src");ue&&ue.startsWith("uploads/")&&(se.src=`https://www.permisdeconduire-online.be/${ue}`)}const K=S.body.getElementsByTagName("iframe");for(let se of K)se.setAttribute("allowfullscreen","true"),se.setAttribute("mozallowfullscreen","true"),se.setAttribute("webkitallowfullscreen","true"),se.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"),se.classList.contains("lesson-video")||se.classList.add("lesson-video");const ee=Array.from(S.body.getElementsByTagName("h2")).find(se=>se.textContent.trim()==="Exercices"||se.textContent.trim()==="Les examens");if(ee){const se=ee.previousElementSibling;se&&se.tagName==="HR"&&se.remove();let ue=ee;for(;ue;){const ce=ue.nextElementSibling;ue.remove(),ue=ce}}const W=Array.from(S.body.getElementsByTagName("a")).find(se=>se.textContent.includes("Retour  la page prcdente"));W&&(W.closest("div.align-center")||W).remove(),a(S.documentElement.outerHTML),c(!1)}catch(p){console.error("Failed to load lesson:",p),a("<p>Erreur lors du chargement de la leon.</p>"),c(!1)}})(),document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}),[s,t]),A.jsxs("div",{className:"lesson-viewer",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:100,backgroundColor:"var(--bg)",display:"flex",flexDirection:"column"},children:[A.jsxs("div",{className:"actions",style:{padding:"12px 20px",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",backgroundColor:"var(--surface)",gap:"16px"},children:[A.jsxs("button",{className:"btn-ghost",onClick:e,style:{border:"1px solid var(--border)",display:"flex",alignItems:"center",gap:"6px"},children:[A.jsx(id,{size:16})," Retour"]}),A.jsx("span",{style:{fontWeight:600,fontSize:"1.1rem"},children:"Leon"})]}),A.jsxs("div",{style:{flex:1,display:"flex",overflow:"hidden",position:"relative"},children:[A.jsx("div",{style:{opacity:l?1:0,position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",transition:"opacity 0.2s"},children:"Chargement..."}),A.jsx("iframe",{srcDoc:i,title:"Leon",style:{width:"100%",height:"100%",border:"none",opacity:l?0:1,transition:"opacity 0.3s ease-in-out"}})]})]})},fk=({themeMode:s})=>{const{lessonId:e}=qT(),t=ka(),i=decodeURIComponent(e);return A.jsx(hk,{lessonFile:i,onBack:()=>t("/"),theme:s})};function dk(){z.useEffect(()=>{console.log(" Permis Online Free - Version 1.5 (Score Fix + Interaction Lock)")},[]);const[s,e]=z.useState([]),[t,i]=z.useState({}),[a,l]=z.useState("light"),[c,d]=z.useState(!1),[p,g]=z.useState(!1),[v,b]=z.useState(null),S=z.useRef(!1),N=z.useRef(null);z.useEffect(()=>{const x=localStorage.getItem("theme");if(x){l(x),document.documentElement.setAttribute("data-theme",x);return}const I=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";l(I),document.documentElement.setAttribute("data-theme",I)},[]),z.useEffect(()=>{const x=window.location.hash.replace("#","")||"/";let I="Permis Online Free";x.startsWith("/quiz")?I="Quiz - Permis Online Free":x.startsWith("/resultats")?I="Rsultats - Permis Online Free":x==="/profil"?I="Mon Profil - Permis Online Free":x.startsWith("/lecon")&&(I="Leon - Permis Online Free"),document.title=I},[]);const Q=()=>{const x=a==="light"?"dark":"light";l(x),document.documentElement.setAttribute("data-theme",x),localStorage.setItem("theme",x)},K=()=>{const x=!c;d(x),localStorage.setItem("instantFeedback",JSON.stringify(x))},U=()=>{const x=!p;g(x),localStorage.setItem("autoPlayAudio",JSON.stringify(x))};z.useEffect(()=>{(async()=>{try{const k=await w2();k&&k.sections&&e(k.sections)}catch(k){console.error("Failed to load themes index",k)}})();const I=localStorage.getItem("quizProgress");I&&i(JSON.parse(I));const R=localStorage.getItem("instantFeedback");R&&d(JSON.parse(R));const M=localStorage.getItem("autoPlayAudio");M&&g(JSON.parse(M));const O=vs.onAuthStateChanged(async k=>{k&&(console.log(" User logged in:",k.displayName||k.email),se())});return()=>O()},[]),z.useEffect(()=>{if(localStorage.setItem("quizProgress",JSON.stringify(t)),S.current){S.current=!1;const x=vs.onAuthStateChanged(I=>{I&&(N.current&&clearTimeout(N.current),b("pending"),N.current=setTimeout(()=>{W(t)},2500)),x()})}},[t]);const ee=(x,I,R,M)=>{S.current=!0,i(O=>{const{metadata:k,...C}=O;return{...C,metadata:k||{},[x]:{score:I,total:R,date:new Date().toISOString(),answers:M}}})},J=(x,I)=>{S.current=!0,i(R=>{if(!R[x])return R;const M=R[x],k=(M.answers||[]).map(j=>{const oe=I.find(te=>te.questionId==j.questionId);return oe||j});I.forEach(j=>{k.find(oe=>oe.questionId==j.questionId)||k.push(j)});const C=k.filter(j=>j.isCorrect).length,{metadata:ke,...qe}=R;return{...qe,metadata:ke||{},[x]:{...M,answers:k,score:C,date:new Date().toISOString()}}})},W=async x=>{try{const I=vs.currentUser;if(!I)return;b("syncing"),console.log(` Firestore Sync: Saving to users/${I.uid}...`),await nk(ST(CT,"users",I.uid),x),console.log(" Firestore Sync: Success!"),b("success"),setTimeout(()=>b(null),3e3)}catch(I){console.error(" Firestore Sync Error:",I.code,I.message),I.code==="permission-denied"?console.warn(" ACTION REQUIRED: Check Firestore Rules in Firebase Console!"):I.code==="not-found"&&console.warn(" ACTION REQUIRED: Create 'Cloud Firestore' database in Firebase Console!"),b("error"),setTimeout(()=>b(null),5e3)}},se=async()=>{try{const x=vs.currentUser;if(!x)return;b("syncing"),console.log(` Firestore Pull: Fetching users/${x.uid}...`);const I=await tk(ST(CT,"users",x.uid));if(!I.exists()){console.log(" Firestore Pull: No remote data found."),b(null);return}const R=I.data(),M=JSON.parse(localStorage.getItem("quizProgress")||"{}"),O=R.metadata?.lastResetAll,k=M.metadata?.lastResetAll;if(O){const j=new Date(O).getTime(),oe=k?new Date(k).getTime():0,te=Object.entries(M).reduce((pe,[we,V])=>{if(we==="metadata"||!V||!V.date)return pe;const F=new Date(V.date).getTime();return Math.max(pe,F)},0);if(j>oe&&j>te){console.log(" Remote Reset detected. Clearing local progress."),i(R),localStorage.setItem("quizProgress",JSON.stringify(R)),b("success"),setTimeout(()=>b(null),3e3);return}}const{metadata:C,...ke}=R,qe={...M};if(O){const j=new Date(O).getTime(),oe=k?new Date(k).getTime():0;j>oe&&(qe.metadata={...qe.metadata,lastResetAll:O})}Object.keys(ke).forEach(j=>{const oe=ke[j],te=qe[j];if(!oe)return;const pe=oe.date?new Date(oe.date).getTime():0,we=te&&te.date?new Date(te.date).getTime():0;(!te||pe>we||pe===we&&oe.score>(te.score||0))&&(qe[j]=oe)}),i(qe),localStorage.setItem("quizProgress",JSON.stringify(qe)),b("success"),console.log(" Auto-pull complete!"),setTimeout(()=>b(null),3e3)}catch(x){console.error(" Auto-pull failed:",x),b("error"),setTimeout(()=>b(null),5e3)}},ue=()=>{if(window.confirm("tes-vous sr de vouloir rinitialiser toute votre progression sur TOUS vos appareils ?")){const x={metadata:{lastResetAll:new Date().toISOString()}};S.current=!0,i(x),localStorage.setItem("quizProgress",JSON.stringify(x))}};window.debugApp={sections:s,progress:t,resetProgress:()=>{i({}),localStorage.removeItem("quizProgress"),console.log("Progress reset")}};const ce=a==="dark";return A.jsxs(bR,{basename:"/permis-online-free/",children:[v&&A.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",background:v==="error"?"var(--danger)":"var(--surface-1)",color:v==="error"?"white":"var(--foreground)",padding:"12px 20px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",zIndex:1e4,display:"flex",alignItems:"center",gap:"10px",border:"1px solid var(--border)",fontWeight:"500",animation:"slideUp 0.3s ease-out"},children:[v==="syncing"&&A.jsx("span",{children:" Synchronisation..."}),v==="pending"&&A.jsx("span",{style:{opacity:.7},children:" En attente..."}),v==="success"&&A.jsx("span",{style:{color:"var(--success)"},children:" Synchronis !"}),v==="error"&&A.jsx("span",{children:" Erreur de synchronisation"})]}),A.jsxs(Jx,{children:[A.jsx(ca,{path:"/",element:A.jsx(_2,{sections:s,progress:t,toggleTheme:Q,isDarkMode:ce})}),A.jsx(ca,{path:"/profil",element:A.jsx(uk,{progress:t,themesData:{sections:s},onReset:ue,instantFeedback:c,onToggleInstantFeedback:K,autoPlayAudio:p,onToggleAutoPlayAudio:U,toggleTheme:Q,isDarkMode:ce})}),A.jsx(ca,{path:"/lecon/:lessonId",element:A.jsx(fk,{themeMode:a})}),A.jsx(ca,{path:"/quiz/:themeId",element:A.jsx(A2,{sections:s,onFinishQuiz:ee,onPatchProgress:J,instantFeedback:c,autoPlayAudio:p,toggleTheme:Q,isDarkMode:ce})}),A.jsx(ca,{path:"/revision",element:A.jsx(ME,{toggleTheme:Q,isDarkMode:ce})}),A.jsx(ca,{path:"/resultats",element:A.jsx(ME,{toggleTheme:Q,isDarkMode:ce})})]})]})}console.log("APP VERSION: 2026-02-10 14:30 - Fixed single_choice & Logic");ex.createRoot(document.getElementById("root")).render(A.jsx(z.StrictMode,{children:A.jsx(dk,{})}));export{mk as c,HI as g};
