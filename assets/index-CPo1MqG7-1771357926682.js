(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var mk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gx(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var xp={exports:{}},Tu={};var mb;function Kx(){if(mb)return Tu;mb=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:s,type:r,key:c,ref:a!==void 0?a:null,props:l}}return Tu.Fragment=e,Tu.jsx=t,Tu.jsxs=t,Tu}var pb;function Qx(){return pb||(pb=1,xp.exports=Kx()),xp.exports}var x=Qx(),Ip={exports:{}},De={};var gb;function $x(){if(gb)return De;gb=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function N(V){return V===null||typeof V!="object"?null:(V=S&&V[S]||V["@@iterator"],typeof V=="function"?V:null)}var Q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,L={};function re(V,H,W){this.props=V,this.context=H,this.refs=L,this.updater=W||Q}re.prototype.isReactComponent={},re.prototype.setState=function(V,H){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,H,"setState")},re.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function J(){}J.prototype=re.prototype;function ee(V,H,W){this.props=V,this.context=H,this.refs=L,this.updater=W||Q}var le=ee.prototype=new J;le.constructor=ee,q(le,re.prototype),le.isPureReactComponent=!0;var ce=Array.isArray;function ue(){}var w={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function R(V,H,W){var de=W.ref;return{$$typeof:s,type:V,key:H,ref:de!==void 0?de:null,props:W}}function M(V,H){return R(V.type,H,V.props)}function O(V){return typeof V=="object"&&V!==null&&V.$$typeof===s}function k(V){var H={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(W){return H[W]})}var C=/\/+/g;function Ie(V,H){return typeof V=="object"&&V!==null&&V.key!=null?k(""+V.key):H.toString(36)}function Le(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(ue,ue):(V.status="pending",V.then(function(H){V.status==="pending"&&(V.status="fulfilled",V.value=H)},function(H){V.status==="pending"&&(V.status="rejected",V.reason=H)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function j(V,H,W,de,Te){var Re=typeof V;(Re==="undefined"||Re==="boolean")&&(V=null);var ke=!1;if(V===null)ke=!0;else switch(Re){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(V.$$typeof){case s:case e:ke=!0;break;case v:return ke=V._init,j(ke(V._payload),H,W,de,Te)}}if(ke)return Te=Te(V),ke=de===""?"."+Ie(V,0):de,ce(Te)?(W="",ke!=null&&(W=ke.replace(C,"$&/")+"/"),j(Te,H,W,"",function(Zr){return Zr})):Te!=null&&(O(Te)&&(Te=M(Te,W+(Te.key==null||V&&V.key===Te.key?"":(""+Te.key).replace(C,"$&/")+"/")+ke)),H.push(Te)),1;ke=0;var vt=de===""?".":de+":";if(ce(V))for(var ft=0;ft<V.length;ft++)de=V[ft],Re=vt+Ie(de,ft),ke+=j(de,H,W,Re,Te);else if(ft=N(V),typeof ft=="function")for(V=ft.call(V),ft=0;!(de=V.next()).done;)de=de.value,Re=vt+Ie(de,ft++),ke+=j(de,H,W,Re,Te);else if(Re==="object"){if(typeof V.then=="function")return j(Le(V),H,W,de,Te);throw H=String(V),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return ke}function ae(V,H,W){if(V==null)return V;var de=[],Te=0;return j(V,de,"","",function(Re){return H.call(W,Re,Te++)}),de}function te(V){if(V._status===-1){var H=V._result;H=H(),H.then(function(W){(V._status===0||V._status===-1)&&(V._status=1,V._result=W)},function(W){(V._status===0||V._status===-1)&&(V._status=2,V._result=W)}),V._status===-1&&(V._status=0,V._result=H)}if(V._status===1)return V._result.default;throw V._result}var ge=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},Ae={map:ae,forEach:function(V,H,W){ae(V,function(){H.apply(this,arguments)},W)},count:function(V){var H=0;return ae(V,function(){H++}),H},toArray:function(V){return ae(V,function(H){return H})||[]},only:function(V){if(!O(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return De.Activity=E,De.Children=Ae,De.Component=re,De.Fragment=t,De.Profiler=a,De.PureComponent=ee,De.StrictMode=r,De.Suspense=p,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,De.__COMPILER_RUNTIME={__proto__:null,c:function(V){return w.H.useMemoCache(V)}},De.cache=function(V){return function(){return V.apply(null,arguments)}},De.cacheSignal=function(){return null},De.cloneElement=function(V,H,W){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var de=q({},V.props),Te=V.key;if(H!=null)for(Re in H.key!==void 0&&(Te=""+H.key),H)!A.call(H,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&H.ref===void 0||(de[Re]=H[Re]);var Re=arguments.length-2;if(Re===1)de.children=W;else if(1<Re){for(var ke=Array(Re),vt=0;vt<Re;vt++)ke[vt]=arguments[vt+2];de.children=ke}return R(V.type,Te,de)},De.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:l,_context:V},V},De.createElement=function(V,H,W){var de,Te={},Re=null;if(H!=null)for(de in H.key!==void 0&&(Re=""+H.key),H)A.call(H,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(Te[de]=H[de]);var ke=arguments.length-2;if(ke===1)Te.children=W;else if(1<ke){for(var vt=Array(ke),ft=0;ft<ke;ft++)vt[ft]=arguments[ft+2];Te.children=vt}if(V&&V.defaultProps)for(de in ke=V.defaultProps,ke)Te[de]===void 0&&(Te[de]=ke[de]);return R(V,Re,Te)},De.createRef=function(){return{current:null}},De.forwardRef=function(V){return{$$typeof:d,render:V}},De.isValidElement=O,De.lazy=function(V){return{$$typeof:v,_payload:{_status:-1,_result:V},_init:te}},De.memo=function(V,H){return{$$typeof:g,type:V,compare:H===void 0?null:H}},De.startTransition=function(V){var H=w.T,W={};w.T=W;try{var de=V(),Te=w.S;Te!==null&&Te(W,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(ue,ge)}catch(Re){ge(Re)}finally{H!==null&&W.types!==null&&(H.types=W.types),w.T=H}},De.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},De.use=function(V){return w.H.use(V)},De.useActionState=function(V,H,W){return w.H.useActionState(V,H,W)},De.useCallback=function(V,H){return w.H.useCallback(V,H)},De.useContext=function(V){return w.H.useContext(V)},De.useDebugValue=function(){},De.useDeferredValue=function(V,H){return w.H.useDeferredValue(V,H)},De.useEffect=function(V,H){return w.H.useEffect(V,H)},De.useEffectEvent=function(V){return w.H.useEffectEvent(V)},De.useId=function(){return w.H.useId()},De.useImperativeHandle=function(V,H,W){return w.H.useImperativeHandle(V,H,W)},De.useInsertionEffect=function(V,H){return w.H.useInsertionEffect(V,H)},De.useLayoutEffect=function(V,H){return w.H.useLayoutEffect(V,H)},De.useMemo=function(V,H){return w.H.useMemo(V,H)},De.useOptimistic=function(V,H){return w.H.useOptimistic(V,H)},De.useReducer=function(V,H,W){return w.H.useReducer(V,H,W)},De.useRef=function(V){return w.H.useRef(V)},De.useState=function(V){return w.H.useState(V)},De.useSyncExternalStore=function(V,H,W){return w.H.useSyncExternalStore(V,H,W)},De.useTransition=function(){return w.H.useTransition()},De.version="19.2.4",De}var yb;function Lg(){return yb||(yb=1,Ip.exports=$x()),Ip.exports}var U=Lg();const Lu=Gx(U);var Rp={exports:{}},wu={},Cp={exports:{}},Np={};var _b;function Yx(){return _b||(_b=1,(function(s){function e(j,ae){var te=j.length;j.push(ae);e:for(;0<te;){var ge=te-1>>>1,Ae=j[ge];if(0<a(Ae,ae))j[ge]=ae,j[te]=Ae,te=ge;else break e}}function t(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var ae=j[0],te=j.pop();if(te!==ae){j[0]=te;e:for(var ge=0,Ae=j.length,V=Ae>>>1;ge<V;){var H=2*(ge+1)-1,W=j[H],de=H+1,Te=j[de];if(0>a(W,te))de<Ae&&0>a(Te,W)?(j[ge]=Te,j[de]=te,ge=de):(j[ge]=W,j[H]=te,ge=H);else if(de<Ae&&0>a(Te,te))j[ge]=Te,j[de]=te,ge=de;else break e}}return ae}function a(j,ae){var te=j.sortIndex-ae.sortIndex;return te!==0?te:j.id-ae.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();s.unstable_now=function(){return c.now()-d}}var p=[],g=[],v=1,E=null,S=3,N=!1,Q=!1,q=!1,L=!1,re=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;function le(j){for(var ae=t(g);ae!==null;){if(ae.callback===null)r(g);else if(ae.startTime<=j)r(g),ae.sortIndex=ae.expirationTime,e(p,ae);else break;ae=t(g)}}function ce(j){if(q=!1,le(j),!Q)if(t(p)!==null)Q=!0,ue||(ue=!0,k());else{var ae=t(g);ae!==null&&Le(ce,ae.startTime-j)}}var ue=!1,w=-1,A=5,R=-1;function M(){return L?!0:!(s.unstable_now()-R<A)}function O(){if(L=!1,ue){var j=s.unstable_now();R=j;var ae=!0;try{e:{Q=!1,q&&(q=!1,J(w),w=-1),N=!0;var te=S;try{t:{for(le(j),E=t(p);E!==null&&!(E.expirationTime>j&&M());){var ge=E.callback;if(typeof ge=="function"){E.callback=null,S=E.priorityLevel;var Ae=ge(E.expirationTime<=j);if(j=s.unstable_now(),typeof Ae=="function"){E.callback=Ae,le(j),ae=!0;break t}E===t(p)&&r(p),le(j)}else r(p);E=t(p)}if(E!==null)ae=!0;else{var V=t(g);V!==null&&Le(ce,V.startTime-j),ae=!1}}break e}finally{E=null,S=te,N=!1}ae=void 0}}finally{ae?k():ue=!1}}}var k;if(typeof ee=="function")k=function(){ee(O)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Ie=C.port2;C.port1.onmessage=O,k=function(){Ie.postMessage(null)}}else k=function(){re(O,0)};function Le(j,ae){w=re(function(){j(s.unstable_now())},ae)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(j){j.callback=null},s.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<j?Math.floor(1e3/j):5},s.unstable_getCurrentPriorityLevel=function(){return S},s.unstable_next=function(j){switch(S){case 1:case 2:case 3:var ae=3;break;default:ae=S}var te=S;S=ae;try{return j()}finally{S=te}},s.unstable_requestPaint=function(){L=!0},s.unstable_runWithPriority=function(j,ae){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var te=S;S=j;try{return ae()}finally{S=te}},s.unstable_scheduleCallback=function(j,ae,te){var ge=s.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ge+te:ge):te=ge,j){case 1:var Ae=-1;break;case 2:Ae=250;break;case 5:Ae=1073741823;break;case 4:Ae=1e4;break;default:Ae=5e3}return Ae=te+Ae,j={id:v++,callback:ae,priorityLevel:j,startTime:te,expirationTime:Ae,sortIndex:-1},te>ge?(j.sortIndex=te,e(g,j),t(p)===null&&j===t(g)&&(q?(J(w),w=-1):q=!0,Le(ce,te-ge))):(j.sortIndex=Ae,e(p,j),Q||N||(Q=!0,ue||(ue=!0,k()))),j},s.unstable_shouldYield=M,s.unstable_wrapCallback=function(j){var ae=S;return function(){var te=S;S=ae;try{return j.apply(this,arguments)}finally{S=te}}}})(Np)),Np}var vb;function Xx(){return vb||(vb=1,Cp.exports=Yx()),Cp.exports}var Dp={exports:{}},on={};var bb;function Jx(){if(bb)return on;bb=1;var s=Lg();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,g,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:E==null?null:""+E,children:p,containerInfo:g,implementation:v}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,on.createPortal=function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,v)},on.flushSync=function(p){var g=c.T,v=r.p;try{if(c.T=null,r.p=2,p)return p()}finally{c.T=g,r.p=v,r.d.f()}},on.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(p,g))},on.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},on.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var v=g.as,E=d(v,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,N=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?r.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:N}):v==="script"&&r.d.X(p,{crossOrigin:E,integrity:S,fetchPriority:N,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},on.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=d(g.as,g.crossOrigin);r.d.M(p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(p)},on.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,E=d(v,g.crossOrigin);r.d.L(p,v,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},on.preloadModule=function(p,g){if(typeof p=="string")if(g){var v=d(g.as,g.crossOrigin);r.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(p)},on.requestFormReset=function(p){r.d.r(p)},on.unstable_batchedUpdates=function(p,g){return p(g)},on.useFormState=function(p,g,v){return c.H.useFormState(p,g,v)},on.useFormStatus=function(){return c.H.useHostTransitionStatus()},on.version="19.2.4",on}var Eb;function Wx(){if(Eb)return Dp.exports;Eb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Dp.exports=Jx(),Dp.exports}var Tb;function Zx(){if(Tb)return wu;Tb=1;var s=Xx(),e=Lg(),t=Wx();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function d(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function p(n){if(l(n)!==n)throw Error(r(188))}function g(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(r(188));return i!==n?null:n}for(var o=n,u=i;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return p(f),n;if(m===u)return p(f),i;m=m.sibling}throw Error(r(188))}if(o.return!==u.return)o=f,u=m;else{for(var _=!1,T=f.child;T;){if(T===o){_=!0,o=f,u=m;break}if(T===u){_=!0,u=f,o=m;break}T=T.sibling}if(!_){for(T=m.child;T;){if(T===o){_=!0,o=m,u=f;break}if(T===u){_=!0,u=m,o=f;break}T=T.sibling}if(!_)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:i}function v(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=v(n),i!==null)return i;n=n.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),Q=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),re=Symbol.for("react.profiler"),J=Symbol.for("react.consumer"),ee=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function k(n){return n===null||typeof n!="object"?null:(n=O&&n[O]||n["@@iterator"],typeof n=="function"?n:null)}var C=Symbol.for("react.client.reference");function Ie(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===C?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case q:return"Fragment";case re:return"Profiler";case L:return"StrictMode";case ce:return"Suspense";case ue:return"SuspenseList";case R:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case Q:return"Portal";case ee:return n.displayName||"Context";case J:return(n._context.displayName||"Context")+".Consumer";case le:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case w:return i=n.displayName||null,i!==null?i:Ie(n.type)||"Memo";case A:i=n._payload,n=n._init;try{return Ie(n(i))}catch{}}return null}var Le=Array.isArray,j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},ge=[],Ae=-1;function V(n){return{current:n}}function H(n){0>Ae||(n.current=ge[Ae],ge[Ae]=null,Ae--)}function W(n,i){Ae++,ge[Ae]=n.current,n.current=i}var de=V(null),Te=V(null),Re=V(null),ke=V(null);function vt(n,i){switch(W(Re,i),W(Te,n),W(de,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?L0(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=L0(i),n=z0(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}H(de),W(de,n)}function ft(){H(de),H(Te),H(Re)}function Zr(n){n.memoizedState!==null&&W(ke,n);var i=de.current,o=z0(i,n.type);i!==o&&(W(Te,n),W(de,o))}function er(n){Te.current===n&&(H(de),H(Te)),ke.current===n&&(H(ke),_u._currentValue=te)}var Vi,tr;function fe(n){if(Vi===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Vi=i&&i[1]||"",tr=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vi+n+tr}var ze=!1;function Xe(n,i){if(!n||ze)return"";ze=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(X){var $=X}Reflect.construct(n,[],ie)}else{try{ie.call()}catch(X){$=X}n.call(ie.prototype)}}else{try{throw Error()}catch(X){$=X}(ie=n())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(X){if(X&&$&&typeof X.stack=="string")return[X.stack,$.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),_=m[0],T=m[1];if(_&&T){var D=_.split(`
`),K=T.split(`
`);for(f=u=0;u<D.length&&!D[u].includes("DetermineComponentFrameRoot");)u++;for(;f<K.length&&!K[f].includes("DetermineComponentFrameRoot");)f++;if(u===D.length||f===K.length)for(u=D.length-1,f=K.length-1;1<=u&&0<=f&&D[u]!==K[f];)f--;for(;1<=u&&0<=f;u--,f--)if(D[u]!==K[f]){if(u!==1||f!==1)do if(u--,f--,0>f||D[u]!==K[f]){var Z=`
`+D[u].replace(" at new "," at ");return n.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",n.displayName)),Z}while(1<=u&&0<=f);break}}}finally{ze=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?fe(o):""}function Qe(n,i){switch(n.tag){case 26:case 27:case 5:return fe(n.type);case 16:return fe("Lazy");case 13:return n.child!==i&&i!==null?fe("Suspense Fallback"):fe("Suspense");case 19:return fe("SuspenseList");case 0:case 15:return Xe(n.type,!1);case 11:return Xe(n.type.render,!1);case 1:return Xe(n.type,!0);case 31:return fe("Activity");default:return""}}function Ot(n){try{var i="",o=null;do i+=Qe(n,o),o=n,n=n.return;while(n);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ze=Object.prototype.hasOwnProperty,bt=s.unstable_scheduleCallback,br=s.unstable_cancelCallback,bl=s.unstable_shouldYield,za=s.unstable_requestPaint,Mt=s.unstable_now,Ms=s.unstable_getCurrentPriorityLevel,El=s.unstable_ImmediatePriority,Tl=s.unstable_UserBlockingPriority,Oi=s.unstable_NormalPriority,Cd=s.unstable_LowPriority,Ic=s.unstable_IdlePriority,Rc=s.log,Cc=s.unstable_setDisableYieldValue,nr=null,Zt=null;function zn(n){if(typeof Rc=="function"&&Cc(n),Zt&&typeof Zt.setStrictMode=="function")try{Zt.setStrictMode(nr,n)}catch{}}var It=Math.clz32?Math.clz32:Dc,Nc=Math.log,Ua=Math.LN2;function Dc(n){return n>>>=0,n===0?32:31-(Nc(n)/Ua|0)|0}var Er=256,ks=262144,kt=4194304;function Tr(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function wr(n,i,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,m=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var T=u&134217727;return T!==0?(u=T&~m,u!==0?f=Tr(u):(_&=T,_!==0?f=Tr(_):o||(o=T&~n,o!==0&&(f=Tr(o))))):(T=u&~m,T!==0?f=Tr(T):_!==0?f=Tr(_):o||(o=u&~n,o!==0&&(f=Tr(o)))),f===0?0:i!==0&&i!==f&&(i&m)===0&&(m=f&-f,o=i&-i,m>=o||m===32&&(o&4194048)!==0)?i:f}function rr(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function Nd(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vc(){var n=kt;return kt<<=1,(kt&62914560)===0&&(kt=4194304),n}function Sr(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function Ps(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Dd(n,i,o,u,f,m){var _=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var T=n.entanglements,D=n.expirationTimes,K=n.hiddenUpdates;for(o=_&~o;0<o;){var Z=31-It(o),ie=1<<Z;T[Z]=0,D[Z]=-1;var $=K[Z];if($!==null)for(K[Z]=null,Z=0;Z<$.length;Z++){var X=$[Z];X!==null&&(X.lane&=-536870913)}o&=~ie}u!==0&&Ls(n,u,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(_&~i))}function Ls(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var u=31-It(i);n.entangledLanes|=i,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function wl(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var u=31-It(o),f=1<<u;f&i|n[u]&i&&(n[u]|=i),o&=~f}}function Sl(n,i){var o=i&-i;return o=(o&42)!==0?1:zs(o),(o&(n.suspendedLanes|i))!==0?0:o}function zs(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function ei(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Oc(){var n=ae.p;return n!==0?n:(n=window.event,n===void 0?32:ob(n.type))}function ir(n,i){var o=ae.p;try{return ae.p=n,i()}finally{ae.p=o}}var sr=Math.random().toString(36).slice(2),Pt="__reactFiber$"+sr,$t="__reactProps$"+sr,Ar="__reactContainer$"+sr,ja="__reactEvents$"+sr,Vd="__reactListeners$"+sr,Mc="__reactHandles$"+sr,kc="__reactResources$"+sr,xr="__reactMarker$"+sr;function Ba(n){delete n[Pt],delete n[$t],delete n[ja],delete n[Vd],delete n[Mc]}function Ir(n){var i=n[Pt];if(i)return i;for(var o=n.parentNode;o;){if(i=o[Ar]||o[Pt]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=G0(n);n!==null;){if(o=n[Pt])return o;n=G0(n)}return i}n=o,o=n.parentNode}return null}function Un(n){if(n=n[Pt]||n[Ar]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function Sn(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function Rr(n){var i=n[kc];return i||(i=n[kc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Lt(n){n[xr]=!0}var Al=new Set,xl={};function Cr(n,i){Nr(n,i),Nr(n+"Capture",i)}function Nr(n,i){for(xl[n]=i,n=0;n<i.length;n++)Al.add(i[n])}var Il=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Rl={},Cl={};function Pc(n){return Ze.call(Cl,n)?!0:Ze.call(Rl,n)?!1:Il.test(n)?Cl[n]=!0:(Rl[n]=!0,!1)}function qa(n,i,o){if(Pc(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function An(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function zt(n,i,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+u)}}function Yt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Mi(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Nl(n,i,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,m=u.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){o=""+_,m.call(this,_)}}),Object.defineProperty(n,i,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function et(n){if(!n._valueTracker){var i=Mi(n)?"checked":"value";n._valueTracker=Nl(n,i,""+n[i])}}function Us(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return n&&(u=Mi(n)?n.checked?"true":"false":n.value),n=u,n!==o?(i.setValue(n),!0):!1}function Dr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var js=/[\n"\\]/g;function pn(n){return n.replace(js,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Fa(n,i,o,u,f,m,_,T){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),i!=null?_==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Yt(i)):n.value!==""+Yt(i)&&(n.value=""+Yt(i)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),i!=null?Dl(n,_,Yt(i)):o!=null?Dl(n,_,Yt(o)):u!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+Yt(T):n.removeAttribute("name")}function Lc(n,i,o,u,f,m,_,T){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),i!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||i!=null)){et(n);return}o=o!=null?""+Yt(o):"",i=i!=null?""+Yt(i):o,T||i===n.value||(n.value=i),n.defaultValue=i}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=T?n.checked:!!u,n.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),et(n)}function Dl(n,i,o){i==="number"&&Dr(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function ki(n,i,o,u){if(n=n.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=i.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+Yt(o),i=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function zc(n,i,o){if(i!=null&&(i=""+Yt(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+Yt(o):""}function Pi(n,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(r(92));if(Le(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=Yt(i),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),et(n)}function gn(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var Uc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vl(n,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":u?n.setProperty(i,o):typeof o!="number"||o===0||Uc.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function Ol(n,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in i)u=i[f],i.hasOwnProperty(f)&&o[f]!==u&&Vl(n,f,u)}else for(var m in i)i.hasOwnProperty(m)&&Vl(n,m,i[m])}function Ha(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Li=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ga(n){return Li.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function ar(){}var Ml=null;function jn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var zi=null,Vr=null;function Bs(n){var i=Un(n);if(i&&(n=i.stateNode)){var o=n[$t]||null;e:switch(n=i.stateNode,i.type){case"input":if(Fa(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+pn(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==n&&u.form===n.form){var f=u[$t]||null;if(!f)throw Error(r(90));Fa(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===n.form&&Us(u)}break e;case"textarea":zc(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&ki(n,!!o.multiple,i,!1)}}}var Ka=!1;function Ui(n,i,o){if(Ka)return n(i,o);Ka=!0;try{var u=n(i);return u}finally{if(Ka=!1,(zi!==null||Vr!==null)&&(Oh(),zi&&(i=zi,n=Vr,Vr=zi=null,Bs(i),n)))for(i=0;i<n.length;i++)Bs(n[i])}}function or(n,i){var o=n.stateNode;if(o===null)return null;var u=o[$t]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var Bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qs=!1;if(Bn)try{var st={};Object.defineProperty(st,"passive",{get:function(){qs=!0}}),window.addEventListener("test",st,st),window.removeEventListener("test",st,st)}catch{qs=!1}var Or=null,kl=null,Fs=null;function Pl(){if(Fs)return Fs;var n,i=kl,o=i.length,u,f="value"in Or?Or.value:Or.textContent,m=f.length;for(n=0;n<o&&i[n]===f[n];n++);var _=o-n;for(u=1;u<=_&&i[o-u]===f[m-u];u++);return Fs=f.slice(n,1<u?1-u:void 0)}function Hs(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function ti(){return!0}function lr(){return!1}function en(n){function i(o,u,f,m,_){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(o=n[T],this[T]=o?o(m):m[T]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ti:lr,this.isPropagationStopped=lr,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ti)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ti)},persist:function(){},isPersistent:ti}),i}var ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mr=en(ni),ji=E({},ni,{view:0,detail:0}),Ll=en(ji),Bi,Qa,kr,$a=E({},ji,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qi,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==kr&&(kr&&n.type==="mousemove"?(Bi=n.screenX-kr.screenX,Qa=n.screenY-kr.screenY):Qa=Bi=0,kr=n),Bi)},movementY:function(n){return"movementY"in n?n.movementY:Qa}}),zl=en($a),Gs=E({},$a,{dataTransfer:0}),Bc=en(Gs),qc=E({},ji,{relatedTarget:0}),Ks=en(qc),Ul=E({},ni,{animationName:0,elapsedTime:0,pseudoElement:0}),Fc=en(Ul),Ya=E({},ni,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Hc=en(Ya),Gc=E({},ni,{data:0}),Pr=en(Gc),Kc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$c={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yc(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=$c[n])?!!i[n]:!1}function qi(){return Yc}var fn=E({},ji,{key:function(n){if(n.key){var i=Kc[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Hs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Qc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qi,charCode:function(n){return n.type==="keypress"?Hs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Hs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Xc=en(fn),Jc=E({},$a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ri=en(Jc),h=E({},ji,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qi}),y=en(h),b=E({},ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=en(b),F=E({},$a,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Y=en(F),he=E({},ni,{newState:0,oldState:0}),Ve=en(he),Rt=[9,13,27,32],Je=Bn&&"CompositionEvent"in window,gt=null;Bn&&"documentMode"in document&&(gt=document.documentMode);var qn=Bn&&"TextEvent"in window&&!gt,Lr=Bn&&(!Je||gt&&8<gt&&11>=gt),ur=" ",cr=!1;function Qs(n,i){switch(n){case"keyup":return Rt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xa(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ja=!1;function pA(n,i){switch(n){case"compositionend":return Xa(i);case"keypress":return i.which!==32?null:(cr=!0,ur);case"textInput":return n=i.data,n===ur&&cr?null:n;default:return null}}function gA(n,i){if(Ja)return n==="compositionend"||!Je&&Qs(n,i)?(n=Pl(),Fs=kl=Or=null,Ja=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Lr&&i.locale!=="ko"?null:i.data;default:return null}}var yA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $y(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!yA[n.type]:i==="textarea"}function Yy(n,i,o,u){zi?Vr?Vr.push(u):Vr=[u]:zi=u,i=jh(i,"onChange"),0<i.length&&(o=new Mr("onChange","change",null,o,u),n.push({event:o,listeners:i}))}var jl=null,Bl=null;function _A(n){D0(n,0)}function Wc(n){var i=Sn(n);if(Us(i))return n}function Xy(n,i){if(n==="change")return i}var Jy=!1;if(Bn){var Od;if(Bn){var Md="oninput"in document;if(!Md){var Wy=document.createElement("div");Wy.setAttribute("oninput","return;"),Md=typeof Wy.oninput=="function"}Od=Md}else Od=!1;Jy=Od&&(!document.documentMode||9<document.documentMode)}function Zy(){jl&&(jl.detachEvent("onpropertychange",e_),Bl=jl=null)}function e_(n){if(n.propertyName==="value"&&Wc(Bl)){var i=[];Yy(i,Bl,n,jn(n)),Ui(_A,i)}}function vA(n,i,o){n==="focusin"?(Zy(),jl=i,Bl=o,jl.attachEvent("onpropertychange",e_)):n==="focusout"&&Zy()}function bA(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Wc(Bl)}function EA(n,i){if(n==="click")return Wc(i)}function TA(n,i){if(n==="input"||n==="change")return Wc(i)}function wA(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var xn=typeof Object.is=="function"?Object.is:wA;function ql(n,i){if(xn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Ze.call(i,f)||!xn(n[f],i[f]))return!1}return!0}function t_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function n_(n,i){var o=t_(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=i&&u>=i)return{node:o,offset:i-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=t_(o)}}function r_(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?r_(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function i_(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Dr(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=Dr(n.document)}return i}function kd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var SA=Bn&&"documentMode"in document&&11>=document.documentMode,Wa=null,Pd=null,Fl=null,Ld=!1;function s_(n,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Ld||Wa==null||Wa!==Dr(u)||(u=Wa,"selectionStart"in u&&kd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Fl&&ql(Fl,u)||(Fl=u,u=jh(Pd,"onSelect"),0<u.length&&(i=new Mr("onSelect","select",null,i,o),n.push({event:i,listeners:u}),i.target=Wa)))}function $s(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var Za={animationend:$s("Animation","AnimationEnd"),animationiteration:$s("Animation","AnimationIteration"),animationstart:$s("Animation","AnimationStart"),transitionrun:$s("Transition","TransitionRun"),transitionstart:$s("Transition","TransitionStart"),transitioncancel:$s("Transition","TransitionCancel"),transitionend:$s("Transition","TransitionEnd")},zd={},a_={};Bn&&(a_=document.createElement("div").style,"AnimationEvent"in window||(delete Za.animationend.animation,delete Za.animationiteration.animation,delete Za.animationstart.animation),"TransitionEvent"in window||delete Za.transitionend.transition);function Ys(n){if(zd[n])return zd[n];if(!Za[n])return n;var i=Za[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in a_)return zd[n]=i[o];return n}var o_=Ys("animationend"),l_=Ys("animationiteration"),u_=Ys("animationstart"),AA=Ys("transitionrun"),xA=Ys("transitionstart"),IA=Ys("transitioncancel"),c_=Ys("transitionend"),h_=new Map,Ud="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ud.push("scrollEnd");function hr(n,i){h_.set(n,i),Cr(i,[n])}var Zc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Fn=[],eo=0,jd=0;function eh(){for(var n=eo,i=jd=eo=0;i<n;){var o=Fn[i];Fn[i++]=null;var u=Fn[i];Fn[i++]=null;var f=Fn[i];Fn[i++]=null;var m=Fn[i];if(Fn[i++]=null,u!==null&&f!==null){var _=u.pending;_===null?f.next=f:(f.next=_.next,_.next=f),u.pending=f}m!==0&&f_(o,f,m)}}function th(n,i,o,u){Fn[eo++]=n,Fn[eo++]=i,Fn[eo++]=o,Fn[eo++]=u,jd|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Bd(n,i,o,u){return th(n,i,o,u),nh(n)}function Xs(n,i){return th(n,null,null,i),nh(n)}function f_(n,i,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=n.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&i!==null&&(f=31-It(o),n=m.hiddenUpdates,u=n[f],u===null?n[f]=[i]:u.push(i),i.lane=o|536870912),m):null}function nh(n){if(50<hu)throw hu=0,Xm=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var to={};function RA(n,i,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(n,i,o,u){return new RA(n,i,o,u)}function qd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ii(n,i){var o=n.alternate;return o===null?(o=In(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function d_(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function rh(n,i,o,u,f,m){var _=0;if(u=n,typeof n=="function")qd(n)&&(_=1);else if(typeof n=="string")_=Ox(n,o,de.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case R:return n=In(31,o,i,f),n.elementType=R,n.lanes=m,n;case q:return Js(o.children,f,m,i);case L:_=8,f|=24;break;case re:return n=In(12,o,i,f|2),n.elementType=re,n.lanes=m,n;case ce:return n=In(13,o,i,f),n.elementType=ce,n.lanes=m,n;case ue:return n=In(19,o,i,f),n.elementType=ue,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ee:_=10;break e;case J:_=9;break e;case le:_=11;break e;case w:_=14;break e;case A:_=16,u=null;break e}_=29,o=Error(r(130,n===null?"null":typeof n,"")),u=null}return i=In(_,o,i,f),i.elementType=n,i.type=u,i.lanes=m,i}function Js(n,i,o,u){return n=In(7,n,u,i),n.lanes=o,n}function Fd(n,i,o){return n=In(6,n,null,i),n.lanes=o,n}function m_(n){var i=In(18,null,null,0);return i.stateNode=n,i}function Hd(n,i,o){return i=In(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var p_=new WeakMap;function Hn(n,i){if(typeof n=="object"&&n!==null){var o=p_.get(n);return o!==void 0?o:(i={value:n,source:i,stack:Ot(i)},p_.set(n,i),i)}return{value:n,source:i,stack:Ot(i)}}var no=[],ro=0,ih=null,Hl=0,Gn=[],Kn=0,Fi=null,zr=1,Ur="";function si(n,i){no[ro++]=Hl,no[ro++]=ih,ih=n,Hl=i}function g_(n,i,o){Gn[Kn++]=zr,Gn[Kn++]=Ur,Gn[Kn++]=Fi,Fi=n;var u=zr;n=Ur;var f=32-It(u)-1;u&=~(1<<f),o+=1;var m=32-It(i)+f;if(30<m){var _=f-f%5;m=(u&(1<<_)-1).toString(32),u>>=_,f-=_,zr=1<<32-It(i)+f|o<<f|u,Ur=m+n}else zr=1<<m|o<<f|u,Ur=n}function Gd(n){n.return!==null&&(si(n,1),g_(n,1,0))}function Kd(n){for(;n===ih;)ih=no[--ro],no[ro]=null,Hl=no[--ro],no[ro]=null;for(;n===Fi;)Fi=Gn[--Kn],Gn[Kn]=null,Ur=Gn[--Kn],Gn[Kn]=null,zr=Gn[--Kn],Gn[Kn]=null}function y_(n,i){Gn[Kn++]=zr,Gn[Kn++]=Ur,Gn[Kn++]=Fi,zr=i.id,Ur=i.overflow,Fi=n}var tn=null,mt=null,He=!1,Hi=null,Qn=!1,Qd=Error(r(519));function Gi(n){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Gl(Hn(i,n)),Qd}function __(n){var i=n.stateNode,o=n.type,u=n.memoizedProps;switch(i[Pt]=n,i[$t]=u,o){case"dialog":je("cancel",i),je("close",i);break;case"iframe":case"object":case"embed":je("load",i);break;case"video":case"audio":for(o=0;o<du.length;o++)je(du[o],i);break;case"source":je("error",i);break;case"img":case"image":case"link":je("error",i),je("load",i);break;case"details":je("toggle",i);break;case"input":je("invalid",i),Lc(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":je("invalid",i);break;case"textarea":je("invalid",i),Pi(i,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||k0(i.textContent,o)?(u.popover!=null&&(je("beforetoggle",i),je("toggle",i)),u.onScroll!=null&&je("scroll",i),u.onScrollEnd!=null&&je("scrollend",i),u.onClick!=null&&(i.onclick=ar),i=!0):i=!1,i||Gi(n,!0)}function v_(n){for(tn=n.return;tn;)switch(tn.tag){case 5:case 31:case 13:Qn=!1;return;case 27:case 3:Qn=!0;return;default:tn=tn.return}}function io(n){if(n!==tn)return!1;if(!He)return v_(n),He=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||hp(n.type,n.memoizedProps)),o=!o),o&&mt&&Gi(n),v_(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));mt=H0(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));mt=H0(n)}else i===27?(i=mt,ss(n.type)?(n=gp,gp=null,mt=n):mt=i):mt=tn?Yn(n.stateNode.nextSibling):null;return!0}function Ws(){mt=tn=null,He=!1}function $d(){var n=Hi;return n!==null&&(bn===null?bn=n:bn.push.apply(bn,n),Hi=null),n}function Gl(n){Hi===null?Hi=[n]:Hi.push(n)}var Yd=V(null),Zs=null,ai=null;function Ki(n,i,o){W(Yd,i._currentValue),i._currentValue=o}function oi(n){n._currentValue=Yd.current,H(Yd)}function Xd(n,i,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===o)break;n=n.return}}function Jd(n,i,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var _=f.child;m=m.firstContext;e:for(;m!==null;){var T=m;m=f;for(var D=0;D<i.length;D++)if(T.context===i[D]){m.lanes|=o,T=m.alternate,T!==null&&(T.lanes|=o),Xd(m.return,o,n),u||(_=null);break e}m=T.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(r(341));_.lanes|=o,m=_.alternate,m!==null&&(m.lanes|=o),Xd(_,o,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function so(n,i,o,u){n=null;for(var f=i,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var T=f.type;xn(f.pendingProps.value,_.value)||(n!==null?n.push(T):n=[T])}}else if(f===ke.current){if(_=f.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(_u):n=[_u])}f=f.return}n!==null&&Jd(i,n,o,u),i.flags|=262144}function sh(n){for(n=n.firstContext;n!==null;){if(!xn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ea(n){Zs=n,ai=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function nn(n){return b_(Zs,n)}function ah(n,i){return Zs===null&&ea(n),b_(n,i)}function b_(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},ai===null){if(n===null)throw Error(r(308));ai=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else ai=ai.next=i;return o}var CA=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},NA=s.unstable_scheduleCallback,DA=s.unstable_NormalPriority,Ut={$$typeof:ee,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wd(){return{controller:new CA,data:new Map,refCount:0}}function Kl(n){n.refCount--,n.refCount===0&&NA(DA,function(){n.controller.abort()})}var Ql=null,Zd=0,ao=0,oo=null;function VA(n,i){if(Ql===null){var o=Ql=[];Zd=0,ao=np(),oo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Zd++,i.then(E_,E_),i}function E_(){if(--Zd===0&&Ql!==null){oo!==null&&(oo.status="fulfilled");var n=Ql;Ql=null,ao=0,oo=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function OA(n,i){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var T_=j.S;j.S=function(n,i){s0=Mt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&VA(n,i),T_!==null&&T_(n,i)};var ta=V(null);function em(){var n=ta.current;return n!==null?n:ht.pooledCache}function oh(n,i){i===null?W(ta,ta.current):W(ta,i.pool)}function w_(){var n=em();return n===null?null:{parent:Ut._currentValue,pool:n}}var lo=Error(r(460)),tm=Error(r(474)),lh=Error(r(542)),uh={then:function(){}};function S_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function A_(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(ar,ar),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,I_(n),n;default:if(typeof i.status=="string")i.then(ar,ar);else{if(n=ht,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(u){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=u}},function(u){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,I_(n),n}throw ra=i,lo}}function na(n){try{var i=n._init;return i(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(ra=o,lo):o}}var ra=null;function x_(){if(ra===null)throw Error(r(459));var n=ra;return ra=null,n}function I_(n){if(n===lo||n===lh)throw Error(r(483))}var uo=null,$l=0;function ch(n){var i=$l;return $l+=1,uo===null&&(uo=[]),A_(uo,n,i)}function Yl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function hh(n,i){throw i.$$typeof===S?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function R_(n){function i(z,P){if(n){var G=z.deletions;G===null?(z.deletions=[P],z.flags|=16):G.push(P)}}function o(z,P){if(!n)return null;for(;P!==null;)i(z,P),P=P.sibling;return null}function u(z){for(var P=new Map;z!==null;)z.key!==null?P.set(z.key,z):P.set(z.index,z),z=z.sibling;return P}function f(z,P){return z=ii(z,P),z.index=0,z.sibling=null,z}function m(z,P,G){return z.index=G,n?(G=z.alternate,G!==null?(G=G.index,G<P?(z.flags|=67108866,P):G):(z.flags|=67108866,P)):(z.flags|=1048576,P)}function _(z){return n&&z.alternate===null&&(z.flags|=67108866),z}function T(z,P,G,ne){return P===null||P.tag!==6?(P=Fd(G,z.mode,ne),P.return=z,P):(P=f(P,G),P.return=z,P)}function D(z,P,G,ne){var we=G.type;return we===q?Z(z,P,G.props.children,ne,G.key):P!==null&&(P.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===A&&na(we)===P.type)?(P=f(P,G.props),Yl(P,G),P.return=z,P):(P=rh(G.type,G.key,G.props,null,z.mode,ne),Yl(P,G),P.return=z,P)}function K(z,P,G,ne){return P===null||P.tag!==4||P.stateNode.containerInfo!==G.containerInfo||P.stateNode.implementation!==G.implementation?(P=Hd(G,z.mode,ne),P.return=z,P):(P=f(P,G.children||[]),P.return=z,P)}function Z(z,P,G,ne,we){return P===null||P.tag!==7?(P=Js(G,z.mode,ne,we),P.return=z,P):(P=f(P,G),P.return=z,P)}function ie(z,P,G){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=Fd(""+P,z.mode,G),P.return=z,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case N:return G=rh(P.type,P.key,P.props,null,z.mode,G),Yl(G,P),G.return=z,G;case Q:return P=Hd(P,z.mode,G),P.return=z,P;case A:return P=na(P),ie(z,P,G)}if(Le(P)||k(P))return P=Js(P,z.mode,G,null),P.return=z,P;if(typeof P.then=="function")return ie(z,ch(P),G);if(P.$$typeof===ee)return ie(z,ah(z,P),G);hh(z,P)}return null}function $(z,P,G,ne){var we=P!==null?P.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return we!==null?null:T(z,P,""+G,ne);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case N:return G.key===we?D(z,P,G,ne):null;case Q:return G.key===we?K(z,P,G,ne):null;case A:return G=na(G),$(z,P,G,ne)}if(Le(G)||k(G))return we!==null?null:Z(z,P,G,ne,null);if(typeof G.then=="function")return $(z,P,ch(G),ne);if(G.$$typeof===ee)return $(z,P,ah(z,G),ne);hh(z,G)}return null}function X(z,P,G,ne,we){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return z=z.get(G)||null,T(P,z,""+ne,we);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case N:return z=z.get(ne.key===null?G:ne.key)||null,D(P,z,ne,we);case Q:return z=z.get(ne.key===null?G:ne.key)||null,K(P,z,ne,we);case A:return ne=na(ne),X(z,P,G,ne,we)}if(Le(ne)||k(ne))return z=z.get(G)||null,Z(P,z,ne,we,null);if(typeof ne.then=="function")return X(z,P,G,ch(ne),we);if(ne.$$typeof===ee)return X(z,P,G,ah(P,ne),we);hh(P,ne)}return null}function _e(z,P,G,ne){for(var we=null,$e=null,be=P,Me=P=0,qe=null;be!==null&&Me<G.length;Me++){be.index>Me?(qe=be,be=null):qe=be.sibling;var Ye=$(z,be,G[Me],ne);if(Ye===null){be===null&&(be=qe);break}n&&be&&Ye.alternate===null&&i(z,be),P=m(Ye,P,Me),$e===null?we=Ye:$e.sibling=Ye,$e=Ye,be=qe}if(Me===G.length)return o(z,be),He&&si(z,Me),we;if(be===null){for(;Me<G.length;Me++)be=ie(z,G[Me],ne),be!==null&&(P=m(be,P,Me),$e===null?we=be:$e.sibling=be,$e=be);return He&&si(z,Me),we}for(be=u(be);Me<G.length;Me++)qe=X(be,z,Me,G[Me],ne),qe!==null&&(n&&qe.alternate!==null&&be.delete(qe.key===null?Me:qe.key),P=m(qe,P,Me),$e===null?we=qe:$e.sibling=qe,$e=qe);return n&&be.forEach(function(cs){return i(z,cs)}),He&&si(z,Me),we}function xe(z,P,G,ne){if(G==null)throw Error(r(151));for(var we=null,$e=null,be=P,Me=P=0,qe=null,Ye=G.next();be!==null&&!Ye.done;Me++,Ye=G.next()){be.index>Me?(qe=be,be=null):qe=be.sibling;var cs=$(z,be,Ye.value,ne);if(cs===null){be===null&&(be=qe);break}n&&be&&cs.alternate===null&&i(z,be),P=m(cs,P,Me),$e===null?we=cs:$e.sibling=cs,$e=cs,be=qe}if(Ye.done)return o(z,be),He&&si(z,Me),we;if(be===null){for(;!Ye.done;Me++,Ye=G.next())Ye=ie(z,Ye.value,ne),Ye!==null&&(P=m(Ye,P,Me),$e===null?we=Ye:$e.sibling=Ye,$e=Ye);return He&&si(z,Me),we}for(be=u(be);!Ye.done;Me++,Ye=G.next())Ye=X(be,z,Me,Ye.value,ne),Ye!==null&&(n&&Ye.alternate!==null&&be.delete(Ye.key===null?Me:Ye.key),P=m(Ye,P,Me),$e===null?we=Ye:$e.sibling=Ye,$e=Ye);return n&&be.forEach(function(Hx){return i(z,Hx)}),He&&si(z,Me),we}function lt(z,P,G,ne){if(typeof G=="object"&&G!==null&&G.type===q&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case N:e:{for(var we=G.key;P!==null;){if(P.key===we){if(we=G.type,we===q){if(P.tag===7){o(z,P.sibling),ne=f(P,G.props.children),ne.return=z,z=ne;break e}}else if(P.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===A&&na(we)===P.type){o(z,P.sibling),ne=f(P,G.props),Yl(ne,G),ne.return=z,z=ne;break e}o(z,P);break}else i(z,P);P=P.sibling}G.type===q?(ne=Js(G.props.children,z.mode,ne,G.key),ne.return=z,z=ne):(ne=rh(G.type,G.key,G.props,null,z.mode,ne),Yl(ne,G),ne.return=z,z=ne)}return _(z);case Q:e:{for(we=G.key;P!==null;){if(P.key===we)if(P.tag===4&&P.stateNode.containerInfo===G.containerInfo&&P.stateNode.implementation===G.implementation){o(z,P.sibling),ne=f(P,G.children||[]),ne.return=z,z=ne;break e}else{o(z,P);break}else i(z,P);P=P.sibling}ne=Hd(G,z.mode,ne),ne.return=z,z=ne}return _(z);case A:return G=na(G),lt(z,P,G,ne)}if(Le(G))return _e(z,P,G,ne);if(k(G)){if(we=k(G),typeof we!="function")throw Error(r(150));return G=we.call(G),xe(z,P,G,ne)}if(typeof G.then=="function")return lt(z,P,ch(G),ne);if(G.$$typeof===ee)return lt(z,P,ah(z,G),ne);hh(z,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,P!==null&&P.tag===6?(o(z,P.sibling),ne=f(P,G),ne.return=z,z=ne):(o(z,P),ne=Fd(G,z.mode,ne),ne.return=z,z=ne),_(z)):o(z,P)}return function(z,P,G,ne){try{$l=0;var we=lt(z,P,G,ne);return uo=null,we}catch(be){if(be===lo||be===lh)throw be;var $e=In(29,be,null,z.mode);return $e.lanes=ne,$e.return=z,$e}}}var ia=R_(!0),C_=R_(!1),Qi=!1;function nm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rm(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function $i(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Yi(n,i,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(We&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,i=nh(n),f_(n,null,o),i}return th(n,u,i,o),nh(n)}function Xl(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,wl(n,o)}}function im(n,i){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=_:m=m.next=_,o=o.next}while(o!==null);m===null?f=m=i:m=m.next=i}else f=m=i;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var sm=!1;function Jl(){if(sm){var n=oo;if(n!==null)throw n}}function Wl(n,i,o,u){sm=!1;var f=n.updateQueue;Qi=!1;var m=f.firstBaseUpdate,_=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var D=T,K=D.next;D.next=null,_===null?m=K:_.next=K,_=D;var Z=n.alternate;Z!==null&&(Z=Z.updateQueue,T=Z.lastBaseUpdate,T!==_&&(T===null?Z.firstBaseUpdate=K:T.next=K,Z.lastBaseUpdate=D))}if(m!==null){var ie=f.baseState;_=0,Z=K=D=null,T=m;do{var $=T.lane&-536870913,X=$!==T.lane;if(X?(Be&$)===$:(u&$)===$){$!==0&&$===ao&&(sm=!0),Z!==null&&(Z=Z.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var _e=n,xe=T;$=i;var lt=o;switch(xe.tag){case 1:if(_e=xe.payload,typeof _e=="function"){ie=_e.call(lt,ie,$);break e}ie=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=xe.payload,$=typeof _e=="function"?_e.call(lt,ie,$):_e,$==null)break e;ie=E({},ie,$);break e;case 2:Qi=!0}}$=T.callback,$!==null&&(n.flags|=64,X&&(n.flags|=8192),X=f.callbacks,X===null?f.callbacks=[$]:X.push($))}else X={lane:$,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Z===null?(K=Z=X,D=ie):Z=Z.next=X,_|=$;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;X=T,T=X.next,X.next=null,f.lastBaseUpdate=X,f.shared.pending=null}}while(!0);Z===null&&(D=ie),f.baseState=D,f.firstBaseUpdate=K,f.lastBaseUpdate=Z,m===null&&(f.shared.lanes=0),es|=_,n.lanes=_,n.memoizedState=ie}}function N_(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function D_(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)N_(o[n],i)}var co=V(null),fh=V(0);function V_(n,i){n=gi,W(fh,n),W(co,i),gi=n|i.baseLanes}function am(){W(fh,gi),W(co,co.current)}function om(){gi=fh.current,H(co),H(fh)}var Rn=V(null),$n=null;function Xi(n){var i=n.alternate;W(Ct,Ct.current&1),W(Rn,n),$n===null&&(i===null||co.current!==null||i.memoizedState!==null)&&($n=n)}function lm(n){W(Ct,Ct.current),W(Rn,n),$n===null&&($n=n)}function O_(n){n.tag===22?(W(Ct,Ct.current),W(Rn,n),$n===null&&($n=n)):Ji()}function Ji(){W(Ct,Ct.current),W(Rn,Rn.current)}function Cn(n){H(Rn),$n===n&&($n=null),H(Ct)}var Ct=V(0);function dh(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||mp(o)||pp(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var li=0,Oe=null,at=null,jt=null,mh=!1,ho=!1,sa=!1,ph=0,Zl=0,fo=null,MA=0;function wt(){throw Error(r(321))}function um(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!xn(n[o],i[o]))return!1;return!0}function cm(n,i,o,u,f,m){return li=m,Oe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,j.H=n===null||n.memoizedState===null?gv:Am,sa=!1,m=o(u,f),sa=!1,ho&&(m=k_(i,o,u,f)),M_(n),m}function M_(n){j.H=nu;var i=at!==null&&at.next!==null;if(li=0,jt=at=Oe=null,mh=!1,Zl=0,fo=null,i)throw Error(r(300));n===null||Bt||(n=n.dependencies,n!==null&&sh(n)&&(Bt=!0))}function k_(n,i,o,u){Oe=n;var f=0;do{if(ho&&(fo=null),Zl=0,ho=!1,25<=f)throw Error(r(301));if(f+=1,jt=at=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}j.H=yv,m=i(o,u)}while(ho);return m}function kA(){var n=j.H,i=n.useState()[0];return i=typeof i.then=="function"?eu(i):i,n=n.useState()[0],(at!==null?at.memoizedState:null)!==n&&(Oe.flags|=1024),i}function hm(){var n=ph!==0;return ph=0,n}function fm(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function dm(n){if(mh){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}mh=!1}li=0,jt=at=Oe=null,ho=!1,Zl=ph=0,fo=null}function dn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?Oe.memoizedState=jt=n:jt=jt.next=n,jt}function Nt(){if(at===null){var n=Oe.alternate;n=n!==null?n.memoizedState:null}else n=at.next;var i=jt===null?Oe.memoizedState:jt.next;if(i!==null)jt=i,at=n;else{if(n===null)throw Oe.alternate===null?Error(r(467)):Error(r(310));at=n,n={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},jt===null?Oe.memoizedState=jt=n:jt=jt.next=n}return jt}function gh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function eu(n){var i=Zl;return Zl+=1,fo===null&&(fo=[]),n=A_(fo,n,i),i=Oe,(jt===null?i.memoizedState:jt.next)===null&&(i=i.alternate,j.H=i===null||i.memoizedState===null?gv:Am),n}function yh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return eu(n);if(n.$$typeof===ee)return nn(n)}throw Error(r(438,String(n)))}function mm(n){var i=null,o=Oe.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=Oe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=gh(),Oe.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),u=0;u<n;u++)o[u]=M;return i.index++,o}function ui(n,i){return typeof i=="function"?i(n):i}function _h(n){var i=Nt();return pm(i,at,n)}function pm(n,i,o){var u=n.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var f=n.baseQueue,m=u.pending;if(m!==null){if(f!==null){var _=f.next;f.next=m.next,m.next=_}i.baseQueue=f=m,u.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{i=f.next;var T=_=null,D=null,K=i,Z=!1;do{var ie=K.lane&-536870913;if(ie!==K.lane?(Be&ie)===ie:(li&ie)===ie){var $=K.revertLane;if($===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ie===ao&&(Z=!0);else if((li&$)===$){K=K.next,$===ao&&(Z=!0);continue}else ie={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},D===null?(T=D=ie,_=m):D=D.next=ie,Oe.lanes|=$,es|=$;ie=K.action,sa&&o(m,ie),m=K.hasEagerState?K.eagerState:o(m,ie)}else $={lane:ie,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},D===null?(T=D=$,_=m):D=D.next=$,Oe.lanes|=ie,es|=ie;K=K.next}while(K!==null&&K!==i);if(D===null?_=m:D.next=T,!xn(m,n.memoizedState)&&(Bt=!0,Z&&(o=oo,o!==null)))throw o;n.memoizedState=m,n.baseState=_,n.baseQueue=D,u.lastRenderedState=m}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function gm(n){var i=Nt(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,m=i.memoizedState;if(f!==null){o.pending=null;var _=f=f.next;do m=n(m,_.action),_=_.next;while(_!==f);xn(m,i.memoizedState)||(Bt=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),o.lastRenderedState=m}return[m,u]}function P_(n,i,o){var u=Oe,f=Nt(),m=He;if(m){if(o===void 0)throw Error(r(407));o=o()}else o=i();var _=!xn((at||f).memoizedState,o);if(_&&(f.memoizedState=o,Bt=!0),f=f.queue,vm(U_.bind(null,u,f,n),[n]),f.getSnapshot!==i||_||jt!==null&&jt.memoizedState.tag&1){if(u.flags|=2048,mo(9,{destroy:void 0},z_.bind(null,u,f,o,i),null),ht===null)throw Error(r(349));m||(li&127)!==0||L_(u,i,o)}return o}function L_(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=Oe.updateQueue,i===null?(i=gh(),Oe.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function z_(n,i,o,u){i.value=o,i.getSnapshot=u,j_(i)&&B_(n)}function U_(n,i,o){return o(function(){j_(i)&&B_(n)})}function j_(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!xn(n,o)}catch{return!0}}function B_(n){var i=Xs(n,2);i!==null&&En(i,n,2)}function ym(n){var i=dn();if(typeof n=="function"){var o=n;if(n=o(),sa){zn(!0);try{o()}finally{zn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:n},i}function q_(n,i,o,u){return n.baseState=o,pm(n,at,typeof u=="function"?u:ui)}function PA(n,i,o,u,f){if(Eh(n))throw Error(r(485));if(n=i.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};j.T!==null?o(!0):m.isTransition=!1,u(m),o=i.pending,o===null?(m.next=i.pending=m,F_(i,m)):(m.next=o.next,i.pending=o.next=m)}}function F_(n,i){var o=i.action,u=i.payload,f=n.state;if(i.isTransition){var m=j.T,_={};j.T=_;try{var T=o(f,u),D=j.S;D!==null&&D(_,T),H_(n,i,T)}catch(K){_m(n,i,K)}finally{m!==null&&_.types!==null&&(m.types=_.types),j.T=m}}else try{m=o(f,u),H_(n,i,m)}catch(K){_m(n,i,K)}}function H_(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){G_(n,i,u)},function(u){return _m(n,i,u)}):G_(n,i,o)}function G_(n,i,o){i.status="fulfilled",i.value=o,K_(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,F_(n,o)))}function _m(n,i,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,K_(i),i=i.next;while(i!==u)}n.action=null}function K_(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function Q_(n,i){return i}function $_(n,i){if(He){var o=ht.formState;if(o!==null){e:{var u=Oe;if(He){if(mt){t:{for(var f=mt,m=Qn;f.nodeType!==8;){if(!m){f=null;break t}if(f=Yn(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){mt=Yn(f.nextSibling),u=f.data==="F!";break e}}Gi(u)}u=!1}u&&(i=o[0])}}return o=dn(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Q_,lastRenderedState:i},o.queue=u,o=dv.bind(null,Oe,u),u.dispatch=o,u=ym(!1),m=Sm.bind(null,Oe,!1,u.queue),u=dn(),f={state:i,dispatch:null,action:n,pending:null},u.queue=f,o=PA.bind(null,Oe,f,m,o),f.dispatch=o,u.memoizedState=n,[i,o,!1]}function Y_(n){var i=Nt();return X_(i,at,n)}function X_(n,i,o){if(i=pm(n,i,Q_)[0],n=_h(ui)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=eu(i)}catch(_){throw _===lo?lh:_}else u=i;i=Nt();var f=i.queue,m=f.dispatch;return o!==i.memoizedState&&(Oe.flags|=2048,mo(9,{destroy:void 0},LA.bind(null,f,o),null)),[u,m,n]}function LA(n,i){n.action=i}function J_(n){var i=Nt(),o=at;if(o!==null)return X_(i,o,n);Nt(),i=i.memoizedState,o=Nt();var u=o.queue.dispatch;return o.memoizedState=n,[i,u,!1]}function mo(n,i,o,u){return n={tag:n,create:o,deps:u,inst:i,next:null},i=Oe.updateQueue,i===null&&(i=gh(),Oe.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,i.lastEffect=n),n}function W_(){return Nt().memoizedState}function vh(n,i,o,u){var f=dn();Oe.flags|=n,f.memoizedState=mo(1|i,{destroy:void 0},o,u===void 0?null:u)}function bh(n,i,o,u){var f=Nt();u=u===void 0?null:u;var m=f.memoizedState.inst;at!==null&&u!==null&&um(u,at.memoizedState.deps)?f.memoizedState=mo(i,m,o,u):(Oe.flags|=n,f.memoizedState=mo(1|i,m,o,u))}function Z_(n,i){vh(8390656,8,n,i)}function vm(n,i){bh(2048,8,n,i)}function zA(n){Oe.flags|=4;var i=Oe.updateQueue;if(i===null)i=gh(),Oe.updateQueue=i,i.events=[n];else{var o=i.events;o===null?i.events=[n]:o.push(n)}}function ev(n){var i=Nt().memoizedState;return zA({ref:i,nextImpl:n}),function(){if((We&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function tv(n,i){return bh(4,2,n,i)}function nv(n,i){return bh(4,4,n,i)}function rv(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function iv(n,i,o){o=o!=null?o.concat([n]):null,bh(4,4,rv.bind(null,i,n),o)}function bm(){}function sv(n,i){var o=Nt();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&um(i,u[1])?u[0]:(o.memoizedState=[n,i],n)}function av(n,i){var o=Nt();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&um(i,u[1]))return u[0];if(u=n(),sa){zn(!0);try{n()}finally{zn(!1)}}return o.memoizedState=[u,i],u}function Em(n,i,o){return o===void 0||(li&1073741824)!==0&&(Be&261930)===0?n.memoizedState=i:(n.memoizedState=o,n=o0(),Oe.lanes|=n,es|=n,o)}function ov(n,i,o,u){return xn(o,i)?o:co.current!==null?(n=Em(n,o,u),xn(n,i)||(Bt=!0),n):(li&42)===0||(li&1073741824)!==0&&(Be&261930)===0?(Bt=!0,n.memoizedState=o):(n=o0(),Oe.lanes|=n,es|=n,i)}function lv(n,i,o,u,f){var m=ae.p;ae.p=m!==0&&8>m?m:8;var _=j.T,T={};j.T=T,Sm(n,!1,i,o);try{var D=f(),K=j.S;if(K!==null&&K(T,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var Z=OA(D,u);tu(n,i,Z,Vn(n))}else tu(n,i,u,Vn(n))}catch(ie){tu(n,i,{then:function(){},status:"rejected",reason:ie},Vn())}finally{ae.p=m,_!==null&&T.types!==null&&(_.types=T.types),j.T=_}}function UA(){}function Tm(n,i,o,u){if(n.tag!==5)throw Error(r(476));var f=uv(n).queue;lv(n,f,i,te,o===null?UA:function(){return cv(n),o(u)})}function uv(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:te},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function cv(n){var i=uv(n);i.next===null&&(i=n.alternate.memoizedState),tu(n,i.next.queue,{},Vn())}function wm(){return nn(_u)}function hv(){return Nt().memoizedState}function fv(){return Nt().memoizedState}function jA(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=Vn();n=$i(o);var u=Yi(i,n,o);u!==null&&(En(u,i,o),Xl(u,i,o)),i={cache:Wd()},n.payload=i;return}i=i.return}}function BA(n,i,o){var u=Vn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Eh(n)?mv(i,o):(o=Bd(n,i,o,u),o!==null&&(En(o,n,u),pv(o,i,u)))}function dv(n,i,o){var u=Vn();tu(n,i,o,u)}function tu(n,i,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Eh(n))mv(i,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var _=i.lastRenderedState,T=m(_,o);if(f.hasEagerState=!0,f.eagerState=T,xn(T,_))return th(n,i,f,0),ht===null&&eh(),!1}catch{}if(o=Bd(n,i,f,u),o!==null)return En(o,n,u),pv(o,i,u),!0}return!1}function Sm(n,i,o,u){if(u={lane:2,revertLane:np(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Eh(n)){if(i)throw Error(r(479))}else i=Bd(n,o,u,2),i!==null&&En(i,n,2)}function Eh(n){var i=n.alternate;return n===Oe||i!==null&&i===Oe}function mv(n,i){ho=mh=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function pv(n,i,o){if((o&4194048)!==0){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,wl(n,o)}}var nu={readContext:nn,use:yh,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useLayoutEffect:wt,useInsertionEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useSyncExternalStore:wt,useId:wt,useHostTransitionStatus:wt,useFormState:wt,useActionState:wt,useOptimistic:wt,useMemoCache:wt,useCacheRefresh:wt};nu.useEffectEvent=wt;var gv={readContext:nn,use:yh,useCallback:function(n,i){return dn().memoizedState=[n,i===void 0?null:i],n},useContext:nn,useEffect:Z_,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,vh(4194308,4,rv.bind(null,i,n),o)},useLayoutEffect:function(n,i){return vh(4194308,4,n,i)},useInsertionEffect:function(n,i){vh(4,2,n,i)},useMemo:function(n,i){var o=dn();i=i===void 0?null:i;var u=n();if(sa){zn(!0);try{n()}finally{zn(!1)}}return o.memoizedState=[u,i],u},useReducer:function(n,i,o){var u=dn();if(o!==void 0){var f=o(i);if(sa){zn(!0);try{o(i)}finally{zn(!1)}}}else f=i;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=BA.bind(null,Oe,n),[u.memoizedState,n]},useRef:function(n){var i=dn();return n={current:n},i.memoizedState=n},useState:function(n){n=ym(n);var i=n.queue,o=dv.bind(null,Oe,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:bm,useDeferredValue:function(n,i){var o=dn();return Em(o,n,i)},useTransition:function(){var n=ym(!1);return n=lv.bind(null,Oe,n.queue,!0,!1),dn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var u=Oe,f=dn();if(He){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),ht===null)throw Error(r(349));(Be&127)!==0||L_(u,i,o)}f.memoizedState=o;var m={value:o,getSnapshot:i};return f.queue=m,Z_(U_.bind(null,u,m,n),[n]),u.flags|=2048,mo(9,{destroy:void 0},z_.bind(null,u,m,o,i),null),o},useId:function(){var n=dn(),i=ht.identifierPrefix;if(He){var o=Ur,u=zr;o=(u&~(1<<32-It(u)-1)).toString(32)+o,i="_"+i+"R_"+o,o=ph++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=MA++,i="_"+i+"r_"+o.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:wm,useFormState:$_,useActionState:$_,useOptimistic:function(n){var i=dn();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Sm.bind(null,Oe,!0,o),o.dispatch=i,[n,i]},useMemoCache:mm,useCacheRefresh:function(){return dn().memoizedState=jA.bind(null,Oe)},useEffectEvent:function(n){var i=dn(),o={impl:n};return i.memoizedState=o,function(){if((We&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},Am={readContext:nn,use:yh,useCallback:sv,useContext:nn,useEffect:vm,useImperativeHandle:iv,useInsertionEffect:tv,useLayoutEffect:nv,useMemo:av,useReducer:_h,useRef:W_,useState:function(){return _h(ui)},useDebugValue:bm,useDeferredValue:function(n,i){var o=Nt();return ov(o,at.memoizedState,n,i)},useTransition:function(){var n=_h(ui)[0],i=Nt().memoizedState;return[typeof n=="boolean"?n:eu(n),i]},useSyncExternalStore:P_,useId:hv,useHostTransitionStatus:wm,useFormState:Y_,useActionState:Y_,useOptimistic:function(n,i){var o=Nt();return q_(o,at,n,i)},useMemoCache:mm,useCacheRefresh:fv};Am.useEffectEvent=ev;var yv={readContext:nn,use:yh,useCallback:sv,useContext:nn,useEffect:vm,useImperativeHandle:iv,useInsertionEffect:tv,useLayoutEffect:nv,useMemo:av,useReducer:gm,useRef:W_,useState:function(){return gm(ui)},useDebugValue:bm,useDeferredValue:function(n,i){var o=Nt();return at===null?Em(o,n,i):ov(o,at.memoizedState,n,i)},useTransition:function(){var n=gm(ui)[0],i=Nt().memoizedState;return[typeof n=="boolean"?n:eu(n),i]},useSyncExternalStore:P_,useId:hv,useHostTransitionStatus:wm,useFormState:J_,useActionState:J_,useOptimistic:function(n,i){var o=Nt();return at!==null?q_(o,at,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:mm,useCacheRefresh:fv};yv.useEffectEvent=ev;function xm(n,i,o,u){i=n.memoizedState,o=o(u,i),o=o==null?i:E({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Im={enqueueSetState:function(n,i,o){n=n._reactInternals;var u=Vn(),f=$i(u);f.payload=i,o!=null&&(f.callback=o),i=Yi(n,f,u),i!==null&&(En(i,n,u),Xl(i,n,u))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var u=Vn(),f=$i(u);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=Yi(n,f,u),i!==null&&(En(i,n,u),Xl(i,n,u))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=Vn(),u=$i(o);u.tag=2,i!=null&&(u.callback=i),i=Yi(n,u,o),i!==null&&(En(i,n,o),Xl(i,n,o))}};function _v(n,i,o,u,f,m,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,_):i.prototype&&i.prototype.isPureReactComponent?!ql(o,u)||!ql(f,m):!0}function vv(n,i,o,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==n&&Im.enqueueReplaceState(i,i.state,null)}function aa(n,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(n=n.defaultProps){o===i&&(o=E({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}function bv(n){Zc(n)}function Ev(n){console.error(n)}function Tv(n){Zc(n)}function Th(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function wv(n,i,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Rm(n,i,o){return o=$i(o),o.tag=3,o.payload={element:null},o.callback=function(){Th(n,i)},o}function Sv(n){return n=$i(n),n.tag=3,n}function Av(n,i,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;n.payload=function(){return f(m)},n.callback=function(){wv(i,o,u)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){wv(i,o,u),typeof f!="function"&&(ts===null?ts=new Set([this]):ts.add(this));var T=u.stack;this.componentDidCatch(u.value,{componentStack:T!==null?T:""})})}function qA(n,i,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&so(i,o,f,!0),o=Rn.current,o!==null){switch(o.tag){case 31:case 13:return $n===null?Mh():o.alternate===null&&St===0&&(St=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===uh?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),Zm(n,u,f)),!1;case 22:return o.flags|=65536,u===uh?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),Zm(n,u,f)),!1}throw Error(r(435,o.tag))}return Zm(n,u,f),Mh(),!1}if(He)return i=Rn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,u!==Qd&&(n=Error(r(422),{cause:u}),Gl(Hn(n,o)))):(u!==Qd&&(i=Error(r(423),{cause:u}),Gl(Hn(i,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=Hn(u,o),f=Rm(n.stateNode,u,f),im(n,f),St!==4&&(St=2)),!1;var m=Error(r(520),{cause:u});if(m=Hn(m,o),cu===null?cu=[m]:cu.push(m),St!==4&&(St=2),i===null)return!0;u=Hn(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=Rm(o.stateNode,u,n),im(o,n),!1;case 1:if(i=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ts===null||!ts.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Sv(f),Av(f,n,o,u),im(o,f),!1}o=o.return}while(o!==null);return!1}var Cm=Error(r(461)),Bt=!1;function rn(n,i,o,u){i.child=n===null?C_(i,null,o,u):ia(i,n.child,o,u)}function xv(n,i,o,u,f){o=o.render;var m=i.ref;if("ref"in u){var _={};for(var T in u)T!=="ref"&&(_[T]=u[T])}else _=u;return ea(i),u=cm(n,i,o,_,m,f),T=hm(),n!==null&&!Bt?(fm(n,i,f),ci(n,i,f)):(He&&T&&Gd(i),i.flags|=1,rn(n,i,u,f),i.child)}function Iv(n,i,o,u,f){if(n===null){var m=o.type;return typeof m=="function"&&!qd(m)&&m.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=m,Rv(n,i,m,u,f)):(n=rh(o.type,null,u,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(m=n.child,!Lm(n,f)){var _=m.memoizedProps;if(o=o.compare,o=o!==null?o:ql,o(_,u)&&n.ref===i.ref)return ci(n,i,f)}return i.flags|=1,n=ii(m,u),n.ref=i.ref,n.return=i,i.child=n}function Rv(n,i,o,u,f){if(n!==null){var m=n.memoizedProps;if(ql(m,u)&&n.ref===i.ref)if(Bt=!1,i.pendingProps=u=m,Lm(n,f))(n.flags&131072)!==0&&(Bt=!0);else return i.lanes=n.lanes,ci(n,i,f)}return Nm(n,i,o,u,f)}function Cv(n,i,o,u){var f=u.children,m=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,n!==null){for(u=i.child=n.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~m}else u=0,i.child=null;return Nv(n,i,m,o,u)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&oh(i,m!==null?m.cachePool:null),m!==null?V_(i,m):am(),O_(i);else return u=i.lanes=536870912,Nv(n,i,m!==null?m.baseLanes|o:o,o,u)}else m!==null?(oh(i,m.cachePool),V_(i,m),Ji(),i.memoizedState=null):(n!==null&&oh(i,null),am(),Ji());return rn(n,i,f,o),i.child}function ru(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Nv(n,i,o,u,f){var m=em();return m=m===null?null:{parent:Ut._currentValue,pool:m},i.memoizedState={baseLanes:o,cachePool:m},n!==null&&oh(i,null),am(),O_(i),n!==null&&so(n,i,u,!0),i.childLanes=f,null}function wh(n,i){return i=Ah({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function Dv(n,i,o){return ia(i,n.child,null,o),n=wh(i,i.pendingProps),n.flags|=2,Cn(i),i.memoizedState=null,n}function FA(n,i,o){var u=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(He){if(u.mode==="hidden")return n=wh(i,u),i.lanes=536870912,ru(null,n);if(lm(i),(n=mt)?(n=F0(n,Qn),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Fi!==null?{id:zr,overflow:Ur}:null,retryLane:536870912,hydrationErrors:null},o=m_(n),o.return=i,i.child=o,tn=i,mt=null)):n=null,n===null)throw Gi(i);return i.lanes=536870912,null}return wh(i,u)}var m=n.memoizedState;if(m!==null){var _=m.dehydrated;if(lm(i),f)if(i.flags&256)i.flags&=-257,i=Dv(n,i,o);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(r(558));else if(Bt||so(n,i,o,!1),f=(o&n.childLanes)!==0,Bt||f){if(u=ht,u!==null&&(_=Sl(u,o),_!==0&&_!==m.retryLane))throw m.retryLane=_,Xs(n,_),En(u,n,_),Cm;Mh(),i=Dv(n,i,o)}else n=m.treeContext,mt=Yn(_.nextSibling),tn=i,He=!0,Hi=null,Qn=!1,n!==null&&y_(i,n),i=wh(i,u),i.flags|=4096;return i}return n=ii(n.child,{mode:u.mode,children:u.children}),n.ref=i.ref,i.child=n,n.return=i,n}function Sh(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function Nm(n,i,o,u,f){return ea(i),o=cm(n,i,o,u,void 0,f),u=hm(),n!==null&&!Bt?(fm(n,i,f),ci(n,i,f)):(He&&u&&Gd(i),i.flags|=1,rn(n,i,o,f),i.child)}function Vv(n,i,o,u,f,m){return ea(i),i.updateQueue=null,o=k_(i,u,o,f),M_(n),u=hm(),n!==null&&!Bt?(fm(n,i,m),ci(n,i,m)):(He&&u&&Gd(i),i.flags|=1,rn(n,i,o,m),i.child)}function Ov(n,i,o,u,f){if(ea(i),i.stateNode===null){var m=to,_=o.contextType;typeof _=="object"&&_!==null&&(m=nn(_)),m=new o(u,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Im,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=u,m.state=i.memoizedState,m.refs={},nm(i),_=o.contextType,m.context=typeof _=="object"&&_!==null?nn(_):to,m.state=i.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(xm(i,o,_,u),m.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&Im.enqueueReplaceState(m,m.state,null),Wl(i,u,m,f),Jl(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(n===null){m=i.stateNode;var T=i.memoizedProps,D=aa(o,T);m.props=D;var K=m.context,Z=o.contextType;_=to,typeof Z=="object"&&Z!==null&&(_=nn(Z));var ie=o.getDerivedStateFromProps;Z=typeof ie=="function"||typeof m.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,Z||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T||K!==_)&&vv(i,m,u,_),Qi=!1;var $=i.memoizedState;m.state=$,Wl(i,u,m,f),Jl(),K=i.memoizedState,T||$!==K||Qi?(typeof ie=="function"&&(xm(i,o,ie,u),K=i.memoizedState),(D=Qi||_v(i,o,D,u,$,K,_))?(Z||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=K),m.props=u,m.state=K,m.context=_,u=D):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{m=i.stateNode,rm(n,i),_=i.memoizedProps,Z=aa(o,_),m.props=Z,ie=i.pendingProps,$=m.context,K=o.contextType,D=to,typeof K=="object"&&K!==null&&(D=nn(K)),T=o.getDerivedStateFromProps,(K=typeof T=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==ie||$!==D)&&vv(i,m,u,D),Qi=!1,$=i.memoizedState,m.state=$,Wl(i,u,m,f),Jl();var X=i.memoizedState;_!==ie||$!==X||Qi||n!==null&&n.dependencies!==null&&sh(n.dependencies)?(typeof T=="function"&&(xm(i,o,T,u),X=i.memoizedState),(Z=Qi||_v(i,o,Z,u,$,X,D)||n!==null&&n.dependencies!==null&&sh(n.dependencies))?(K||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,X,D),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,X,D)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&$===n.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&$===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=X),m.props=u,m.state=X,m.context=D,u=Z):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&$===n.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&$===n.memoizedState||(i.flags|=1024),u=!1)}return m=u,Sh(n,i),u=(i.flags&128)!==0,m||u?(m=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,n!==null&&u?(i.child=ia(i,n.child,null,f),i.child=ia(i,null,o,f)):rn(n,i,o,f),i.memoizedState=m.state,n=i.child):n=ci(n,i,f),n}function Mv(n,i,o,u){return Ws(),i.flags|=256,rn(n,i,o,u),i.child}var Dm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vm(n){return{baseLanes:n,cachePool:w_()}}function Om(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=Dn),n}function kv(n,i,o){var u=i.pendingProps,f=!1,m=(i.flags&128)!==0,_;if((_=m)||(_=n!==null&&n.memoizedState===null?!1:(Ct.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,n===null){if(He){if(f?Xi(i):Ji(),(n=mt)?(n=F0(n,Qn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Fi!==null?{id:zr,overflow:Ur}:null,retryLane:536870912,hydrationErrors:null},o=m_(n),o.return=i,i.child=o,tn=i,mt=null)):n=null,n===null)throw Gi(i);return pp(n)?i.lanes=32:i.lanes=536870912,null}var T=u.children;return u=u.fallback,f?(Ji(),f=i.mode,T=Ah({mode:"hidden",children:T},f),u=Js(u,f,o,null),T.return=i,u.return=i,T.sibling=u,i.child=T,u=i.child,u.memoizedState=Vm(o),u.childLanes=Om(n,_,o),i.memoizedState=Dm,ru(null,u)):(Xi(i),Mm(i,T))}var D=n.memoizedState;if(D!==null&&(T=D.dehydrated,T!==null)){if(m)i.flags&256?(Xi(i),i.flags&=-257,i=km(n,i,o)):i.memoizedState!==null?(Ji(),i.child=n.child,i.flags|=128,i=null):(Ji(),T=u.fallback,f=i.mode,u=Ah({mode:"visible",children:u.children},f),T=Js(T,f,o,null),T.flags|=2,u.return=i,T.return=i,u.sibling=T,i.child=u,ia(i,n.child,null,o),u=i.child,u.memoizedState=Vm(o),u.childLanes=Om(n,_,o),i.memoizedState=Dm,i=ru(null,u));else if(Xi(i),pp(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var K=_.dgst;_=K,u=Error(r(419)),u.stack="",u.digest=_,Gl({value:u,source:null,stack:null}),i=km(n,i,o)}else if(Bt||so(n,i,o,!1),_=(o&n.childLanes)!==0,Bt||_){if(_=ht,_!==null&&(u=Sl(_,o),u!==0&&u!==D.retryLane))throw D.retryLane=u,Xs(n,u),En(_,n,u),Cm;mp(T)||Mh(),i=km(n,i,o)}else mp(T)?(i.flags|=192,i.child=n.child,i=null):(n=D.treeContext,mt=Yn(T.nextSibling),tn=i,He=!0,Hi=null,Qn=!1,n!==null&&y_(i,n),i=Mm(i,u.children),i.flags|=4096);return i}return f?(Ji(),T=u.fallback,f=i.mode,D=n.child,K=D.sibling,u=ii(D,{mode:"hidden",children:u.children}),u.subtreeFlags=D.subtreeFlags&65011712,K!==null?T=ii(K,T):(T=Js(T,f,o,null),T.flags|=2),T.return=i,u.return=i,u.sibling=T,i.child=u,ru(null,u),u=i.child,T=n.child.memoizedState,T===null?T=Vm(o):(f=T.cachePool,f!==null?(D=Ut._currentValue,f=f.parent!==D?{parent:D,pool:D}:f):f=w_(),T={baseLanes:T.baseLanes|o,cachePool:f}),u.memoizedState=T,u.childLanes=Om(n,_,o),i.memoizedState=Dm,ru(n.child,u)):(Xi(i),o=n.child,n=o.sibling,o=ii(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,n!==null&&(_=i.deletions,_===null?(i.deletions=[n],i.flags|=16):_.push(n)),i.child=o,i.memoizedState=null,o)}function Mm(n,i){return i=Ah({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Ah(n,i){return n=In(22,n,null,i),n.lanes=0,n}function km(n,i,o){return ia(i,n.child,null,o),n=Mm(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Pv(n,i,o){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),Xd(n.return,i,o)}function Pm(n,i,o,u,f,m){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:m}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=o,_.tailMode=f,_.treeForkCount=m)}function Lv(n,i,o){var u=i.pendingProps,f=u.revealOrder,m=u.tail;u=u.children;var _=Ct.current,T=(_&2)!==0;if(T?(_=_&1|2,i.flags|=128):_&=1,W(Ct,_),rn(n,i,u,o),u=He?Hl:0,!T&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Pv(n,o,i);else if(n.tag===19)Pv(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(o=i.child,f=null;o!==null;)n=o.alternate,n!==null&&dh(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),Pm(i,!1,f,o,m,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&dh(n)===null){i.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}Pm(i,!0,o,null,m,u);break;case"together":Pm(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function ci(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),es|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(so(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,o=ii(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=ii(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function Lm(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&sh(n)))}function HA(n,i,o){switch(i.tag){case 3:vt(i,i.stateNode.containerInfo),Ki(i,Ut,n.memoizedState.cache),Ws();break;case 27:case 5:Zr(i);break;case 4:vt(i,i.stateNode.containerInfo);break;case 10:Ki(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,lm(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Xi(i),i.flags|=128,null):(o&i.child.childLanes)!==0?kv(n,i,o):(Xi(i),n=ci(n,i,o),n!==null?n.sibling:null);Xi(i);break;case 19:var f=(n.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(so(n,i,o,!1),u=(o&i.childLanes)!==0),f){if(u)return Lv(n,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),W(Ct,Ct.current),u)break;return null;case 22:return i.lanes=0,Cv(n,i,o,i.pendingProps);case 24:Ki(i,Ut,n.memoizedState.cache)}return ci(n,i,o)}function zv(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)Bt=!0;else{if(!Lm(n,o)&&(i.flags&128)===0)return Bt=!1,HA(n,i,o);Bt=(n.flags&131072)!==0}else Bt=!1,He&&(i.flags&1048576)!==0&&g_(i,Hl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(n=na(i.elementType),i.type=n,typeof n=="function")qd(n)?(u=aa(n,u),i.tag=1,i=Ov(null,i,n,u,o)):(i.tag=0,i=Nm(null,i,n,u,o));else{if(n!=null){var f=n.$$typeof;if(f===le){i.tag=11,i=xv(null,i,n,u,o);break e}else if(f===w){i.tag=14,i=Iv(null,i,n,u,o);break e}}throw i=Ie(n)||n,Error(r(306,i,""))}}return i;case 0:return Nm(n,i,i.type,i.pendingProps,o);case 1:return u=i.type,f=aa(u,i.pendingProps),Ov(n,i,u,f,o);case 3:e:{if(vt(i,i.stateNode.containerInfo),n===null)throw Error(r(387));u=i.pendingProps;var m=i.memoizedState;f=m.element,rm(n,i),Wl(i,u,null,o);var _=i.memoizedState;if(u=_.cache,Ki(i,Ut,u),u!==m.cache&&Jd(i,[Ut],o,!0),Jl(),u=_.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=Mv(n,i,u,o);break e}else if(u!==f){f=Hn(Error(r(424)),i),Gl(f),i=Mv(n,i,u,o);break e}else for(n=i.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,mt=Yn(n.firstChild),tn=i,He=!0,Hi=null,Qn=!0,o=C_(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Ws(),u===f){i=ci(n,i,o);break e}rn(n,i,u,o)}i=i.child}return i;case 26:return Sh(n,i),n===null?(o=Y0(i.type,null,i.pendingProps,null))?i.memoizedState=o:He||(o=i.type,n=i.pendingProps,u=Bh(Re.current).createElement(o),u[Pt]=i,u[$t]=n,sn(u,o,n),Lt(u),i.stateNode=u):i.memoizedState=Y0(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Zr(i),n===null&&He&&(u=i.stateNode=K0(i.type,i.pendingProps,Re.current),tn=i,Qn=!0,f=mt,ss(i.type)?(gp=f,mt=Yn(u.firstChild)):mt=f),rn(n,i,i.pendingProps.children,o),Sh(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&He&&((f=u=mt)&&(u=bx(u,i.type,i.pendingProps,Qn),u!==null?(i.stateNode=u,tn=i,mt=Yn(u.firstChild),Qn=!1,f=!0):f=!1),f||Gi(i)),Zr(i),f=i.type,m=i.pendingProps,_=n!==null?n.memoizedProps:null,u=m.children,hp(f,m)?u=null:_!==null&&hp(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=cm(n,i,kA,null,null,o),_u._currentValue=f),Sh(n,i),rn(n,i,u,o),i.child;case 6:return n===null&&He&&((n=o=mt)&&(o=Ex(o,i.pendingProps,Qn),o!==null?(i.stateNode=o,tn=i,mt=null,n=!0):n=!1),n||Gi(i)),null;case 13:return kv(n,i,o);case 4:return vt(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=ia(i,null,u,o):rn(n,i,u,o),i.child;case 11:return xv(n,i,i.type,i.pendingProps,o);case 7:return rn(n,i,i.pendingProps,o),i.child;case 8:return rn(n,i,i.pendingProps.children,o),i.child;case 12:return rn(n,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,Ki(i,i.type,u.value),rn(n,i,u.children,o),i.child;case 9:return f=i.type._context,u=i.pendingProps.children,ea(i),f=nn(f),u=u(f),i.flags|=1,rn(n,i,u,o),i.child;case 14:return Iv(n,i,i.type,i.pendingProps,o);case 15:return Rv(n,i,i.type,i.pendingProps,o);case 19:return Lv(n,i,o);case 31:return FA(n,i,o);case 22:return Cv(n,i,o,i.pendingProps);case 24:return ea(i),u=nn(Ut),n===null?(f=em(),f===null&&(f=ht,m=Wd(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),i.memoizedState={parent:u,cache:f},nm(i),Ki(i,Ut,f)):((n.lanes&o)!==0&&(rm(n,i),Wl(i,null,null,o),Jl()),f=n.memoizedState,m=i.memoizedState,f.parent!==u?(f={parent:u,cache:u},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Ki(i,Ut,u)):(u=m.cache,Ki(i,Ut,u),u!==f.cache&&Jd(i,[Ut],o,!0))),rn(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function hi(n){n.flags|=4}function zm(n,i,o,u,f){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(h0())n.flags|=8192;else throw ra=uh,tm}else n.flags&=-16777217}function Uv(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!eb(i))if(h0())n.flags|=8192;else throw ra=uh,tm}function xh(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Vc():536870912,n.lanes|=i,_o|=i)}function iu(n,i){if(!He)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function pt(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(i)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,i}function GA(n,i,o){var u=i.pendingProps;switch(Kd(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(i),null;case 1:return pt(i),null;case 3:return o=i.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),oi(Ut),ft(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(io(i)?hi(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,$d())),pt(i),null;case 26:var f=i.type,m=i.memoizedState;return n===null?(hi(i),m!==null?(pt(i),Uv(i,m)):(pt(i),zm(i,f,null,u,o))):m?m!==n.memoizedState?(hi(i),pt(i),Uv(i,m)):(pt(i),i.flags&=-16777217):(n=n.memoizedProps,n!==u&&hi(i),pt(i),zm(i,f,n,u,o)),null;case 27:if(er(i),o=Re.current,f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&hi(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return pt(i),null}n=de.current,io(i)?__(i):(n=K0(f,u,o),i.stateNode=n,hi(i))}return pt(i),null;case 5:if(er(i),f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&hi(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return pt(i),null}if(m=de.current,io(i))__(i);else{var _=Bh(Re.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?_.createElement(f,{is:u.is}):_.createElement(f)}}m[Pt]=i,m[$t]=u;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=m;e:switch(sn(m,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&hi(i)}}return pt(i),zm(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,o),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==u&&hi(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(r(166));if(n=Re.current,io(i)){if(n=i.stateNode,o=i.memoizedProps,u=null,f=tn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[Pt]=i,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||k0(n.nodeValue,o)),n||Gi(i,!0)}else n=Bh(n).createTextNode(u),n[Pt]=i,i.stateNode=n}return pt(i),null;case 31:if(o=i.memoizedState,n===null||n.memoizedState!==null){if(u=io(i),o!==null){if(n===null){if(!u)throw Error(r(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[Pt]=i}else Ws(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;pt(i),n=!1}else o=$d(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return i.flags&256?(Cn(i),i):(Cn(i),null);if((i.flags&128)!==0)throw Error(r(558))}return pt(i),null;case 13:if(u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=io(i),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Pt]=i}else Ws(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;pt(i),f=!1}else f=$d(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Cn(i),i):(Cn(i),null)}return Cn(i),(i.flags&128)!==0?(i.lanes=o,i):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=i.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)),o!==n&&o&&(i.child.flags|=8192),xh(i,i.updateQueue),pt(i),null);case 4:return ft(),n===null&&ap(i.stateNode.containerInfo),pt(i),null;case 10:return oi(i.type),pt(i),null;case 19:if(H(Ct),u=i.memoizedState,u===null)return pt(i),null;if(f=(i.flags&128)!==0,m=u.rendering,m===null)if(f)iu(u,!1);else{if(St!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(m=dh(n),m!==null){for(i.flags|=128,iu(u,!1),n=m.updateQueue,i.updateQueue=n,xh(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)d_(o,n),o=o.sibling;return W(Ct,Ct.current&1|2),He&&si(i,u.treeForkCount),i.child}n=n.sibling}u.tail!==null&&Mt()>Dh&&(i.flags|=128,f=!0,iu(u,!1),i.lanes=4194304)}else{if(!f)if(n=dh(m),n!==null){if(i.flags|=128,f=!0,n=n.updateQueue,i.updateQueue=n,xh(i,n),iu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!He)return pt(i),null}else 2*Mt()-u.renderingStartTime>Dh&&o!==536870912&&(i.flags|=128,f=!0,iu(u,!1),i.lanes=4194304);u.isBackwards?(m.sibling=i.child,i.child=m):(n=u.last,n!==null?n.sibling=m:i.child=m,u.last=m)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Mt(),n.sibling=null,o=Ct.current,W(Ct,f?o&1|2:o&1),He&&si(i,u.treeForkCount),n):(pt(i),null);case 22:case 23:return Cn(i),om(),u=i.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(pt(i),i.subtreeFlags&6&&(i.flags|=8192)):pt(i),o=i.updateQueue,o!==null&&xh(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),n!==null&&H(ta),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),oi(Ut),pt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function KA(n,i){switch(Kd(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return oi(Ut),ft(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return er(i),null;case 31:if(i.memoizedState!==null){if(Cn(i),i.alternate===null)throw Error(r(340));Ws()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(Cn(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Ws()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return H(Ct),null;case 4:return ft(),null;case 10:return oi(i.type),null;case 22:case 23:return Cn(i),om(),n!==null&&H(ta),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return oi(Ut),null;case 25:return null;default:return null}}function jv(n,i){switch(Kd(i),i.tag){case 3:oi(Ut),ft();break;case 26:case 27:case 5:er(i);break;case 4:ft();break;case 31:i.memoizedState!==null&&Cn(i);break;case 13:Cn(i);break;case 19:H(Ct);break;case 10:oi(i.type);break;case 22:case 23:Cn(i),om(),n!==null&&H(ta);break;case 24:oi(Ut)}}function su(n,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var m=o.create,_=o.inst;u=m(),_.destroy=u}o=o.next}while(o!==f)}}catch(T){nt(i,i.return,T)}}function Wi(n,i,o){try{var u=i.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&n)===n){var _=u.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,f=i;var D=o,K=T;try{K()}catch(Z){nt(f,D,Z)}}}u=u.next}while(u!==m)}}catch(Z){nt(i,i.return,Z)}}function Bv(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{D_(i,o)}catch(u){nt(n,n.return,u)}}}function qv(n,i,o){o.props=aa(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){nt(n,i,u)}}function au(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){nt(n,i,f)}}function jr(n,i){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){nt(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){nt(n,i,f)}else o.current=null}function Fv(n){var i=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){nt(n,n.return,f)}}function Um(n,i,o){try{var u=n.stateNode;mx(u,n.type,o,i),u[$t]=i}catch(f){nt(n,n.return,f)}}function Hv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ss(n.type)||n.tag===4}function jm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Hv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ss(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Bm(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=ar));else if(u!==4&&(u===27&&ss(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(Bm(n,i,o),n=n.sibling;n!==null;)Bm(n,i,o),n=n.sibling}function Ih(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(u!==4&&(u===27&&ss(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Ih(n,i,o),n=n.sibling;n!==null;)Ih(n,i,o),n=n.sibling}function Gv(n){var i=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);sn(i,u,o),i[Pt]=n,i[$t]=o}catch(m){nt(n,n.return,m)}}var fi=!1,qt=!1,qm=!1,Kv=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function QA(n,i){if(n=n.containerInfo,up=$h,n=i_(n),kd(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var _=0,T=-1,D=-1,K=0,Z=0,ie=n,$=null;t:for(;;){for(var X;ie!==o||f!==0&&ie.nodeType!==3||(T=_+f),ie!==m||u!==0&&ie.nodeType!==3||(D=_+u),ie.nodeType===3&&(_+=ie.nodeValue.length),(X=ie.firstChild)!==null;)$=ie,ie=X;for(;;){if(ie===n)break t;if($===o&&++K===f&&(T=_),$===m&&++Z===u&&(D=_),(X=ie.nextSibling)!==null)break;ie=$,$=ie.parentNode}ie=X}o=T===-1||D===-1?null:{start:T,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(cp={focusedElem:n,selectionRange:o},$h=!1,Xt=i;Xt!==null;)if(i=Xt,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Xt=n;else for(;Xt!==null;){switch(i=Xt,m=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)f=n[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=i,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var _e=aa(o.type,f);n=u.getSnapshotBeforeUpdate(_e,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(xe){nt(o,o.return,xe)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)dp(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":dp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,Xt=n;break}Xt=i.return}}function Qv(n,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:mi(n,o),u&4&&su(5,o);break;case 1:if(mi(n,o),u&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(_){nt(o,o.return,_)}else{var f=aa(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(_){nt(o,o.return,_)}}u&64&&Bv(o),u&512&&au(o,o.return);break;case 3:if(mi(n,o),u&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{D_(n,i)}catch(_){nt(o,o.return,_)}}break;case 27:i===null&&u&4&&Gv(o);case 26:case 5:mi(n,o),i===null&&u&4&&Fv(o),u&512&&au(o,o.return);break;case 12:mi(n,o);break;case 31:mi(n,o),u&4&&Xv(n,o);break;case 13:mi(n,o),u&4&&Jv(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=nx.bind(null,o),Tx(n,o))));break;case 22:if(u=o.memoizedState!==null||fi,!u){i=i!==null&&i.memoizedState!==null||qt,f=fi;var m=qt;fi=u,(qt=i)&&!m?pi(n,o,(o.subtreeFlags&8772)!==0):mi(n,o),fi=f,qt=m}break;case 30:break;default:mi(n,o)}}function $v(n){var i=n.alternate;i!==null&&(n.alternate=null,$v(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Ba(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var yt=null,yn=!1;function di(n,i,o){for(o=o.child;o!==null;)Yv(n,i,o),o=o.sibling}function Yv(n,i,o){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(nr,o)}catch{}switch(o.tag){case 26:qt||jr(o,i),di(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:qt||jr(o,i);var u=yt,f=yn;ss(o.type)&&(yt=o.stateNode,yn=!1),di(n,i,o),pu(o.stateNode),yt=u,yn=f;break;case 5:qt||jr(o,i);case 6:if(u=yt,f=yn,yt=null,di(n,i,o),yt=u,yn=f,yt!==null)if(yn)try{(yt.nodeType===9?yt.body:yt.nodeName==="HTML"?yt.ownerDocument.body:yt).removeChild(o.stateNode)}catch(m){nt(o,i,m)}else try{yt.removeChild(o.stateNode)}catch(m){nt(o,i,m)}break;case 18:yt!==null&&(yn?(n=yt,B0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),xo(n)):B0(yt,o.stateNode));break;case 4:u=yt,f=yn,yt=o.stateNode.containerInfo,yn=!0,di(n,i,o),yt=u,yn=f;break;case 0:case 11:case 14:case 15:Wi(2,o,i),qt||Wi(4,o,i),di(n,i,o);break;case 1:qt||(jr(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&qv(o,i,u)),di(n,i,o);break;case 21:di(n,i,o);break;case 22:qt=(u=qt)||o.memoizedState!==null,di(n,i,o),qt=u;break;default:di(n,i,o)}}function Xv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{xo(n)}catch(o){nt(i,i.return,o)}}}function Jv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{xo(n)}catch(o){nt(i,i.return,o)}}function $A(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Kv),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Kv),i;default:throw Error(r(435,n.tag))}}function Rh(n,i){var o=$A(n);i.forEach(function(u){if(!o.has(u)){o.add(u);var f=rx.bind(null,n,u);u.then(f,f)}})}function _n(n,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=n,_=i,T=_;e:for(;T!==null;){switch(T.tag){case 27:if(ss(T.type)){yt=T.stateNode,yn=!1;break e}break;case 5:yt=T.stateNode,yn=!1;break e;case 3:case 4:yt=T.stateNode.containerInfo,yn=!0;break e}T=T.return}if(yt===null)throw Error(r(160));Yv(m,_,f),yt=null,yn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Wv(i,n),i=i.sibling}var fr=null;function Wv(n,i){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:_n(i,n),vn(n),u&4&&(Wi(3,n,n.return),su(3,n),Wi(5,n,n.return));break;case 1:_n(i,n),vn(n),u&512&&(qt||o===null||jr(o,o.return)),u&64&&fi&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=fr;if(_n(i,n),vn(n),u&512&&(qt||o===null||jr(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[xr]||m[Pt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),sn(m,u,o),m[Pt]=n,Lt(m),u=m;break e;case"link":var _=W0("link","href",f).get(u+(o.href||""));if(_){for(var T=0;T<_.length;T++)if(m=_[T],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(T,1);break t}}m=f.createElement(u),sn(m,u,o),f.head.appendChild(m);break;case"meta":if(_=W0("meta","content",f).get(u+(o.content||""))){for(T=0;T<_.length;T++)if(m=_[T],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(T,1);break t}}m=f.createElement(u),sn(m,u,o),f.head.appendChild(m);break;default:throw Error(r(468,u))}m[Pt]=n,Lt(m),u=m}n.stateNode=u}else Z0(f,n.type,n.stateNode);else n.stateNode=J0(f,u,n.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?Z0(f,n.type,n.stateNode):J0(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Um(n,n.memoizedProps,o.memoizedProps)}break;case 27:_n(i,n),vn(n),u&512&&(qt||o===null||jr(o,o.return)),o!==null&&u&4&&Um(n,n.memoizedProps,o.memoizedProps);break;case 5:if(_n(i,n),vn(n),u&512&&(qt||o===null||jr(o,o.return)),n.flags&32){f=n.stateNode;try{gn(f,"")}catch(_e){nt(n,n.return,_e)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,Um(n,f,o!==null?o.memoizedProps:f)),u&1024&&(qm=!0);break;case 6:if(_n(i,n),vn(n),u&4){if(n.stateNode===null)throw Error(r(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(_e){nt(n,n.return,_e)}}break;case 3:if(Hh=null,f=fr,fr=qh(i.containerInfo),_n(i,n),fr=f,vn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{xo(i.containerInfo)}catch(_e){nt(n,n.return,_e)}qm&&(qm=!1,Zv(n));break;case 4:u=fr,fr=qh(n.stateNode.containerInfo),_n(i,n),vn(n),fr=u;break;case 12:_n(i,n),vn(n);break;case 31:_n(i,n),vn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Rh(n,u)));break;case 13:_n(i,n),vn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Nh=Mt()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Rh(n,u)));break;case 22:f=n.memoizedState!==null;var D=o!==null&&o.memoizedState!==null,K=fi,Z=qt;if(fi=K||f,qt=Z||D,_n(i,n),qt=Z,fi=K,vn(n),u&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||D||fi||qt||oa(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){D=o=i;try{if(m=D.stateNode,f)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=D.stateNode;var ie=D.memoizedProps.style,$=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;T.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(_e){nt(D,D.return,_e)}}}else if(i.tag===6){if(o===null){D=i;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(_e){nt(D,D.return,_e)}}}else if(i.tag===18){if(o===null){D=i;try{var X=D.stateNode;f?q0(X,!0):q0(D.stateNode,!1)}catch(_e){nt(D,D.return,_e)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Rh(n,o))));break;case 19:_n(i,n),vn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Rh(n,u)));break;case 30:break;case 21:break;default:_n(i,n),vn(n)}}function vn(n){var i=n.flags;if(i&2){try{for(var o,u=n.return;u!==null;){if(Hv(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,m=jm(n);Ih(n,m,f);break;case 5:var _=o.stateNode;o.flags&32&&(gn(_,""),o.flags&=-33);var T=jm(n);Ih(n,T,_);break;case 3:case 4:var D=o.stateNode.containerInfo,K=jm(n);Bm(n,K,D);break;default:throw Error(r(161))}}catch(Z){nt(n,n.return,Z)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Zv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;Zv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function mi(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Qv(n,i.alternate,i),i=i.sibling}function oa(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Wi(4,i,i.return),oa(i);break;case 1:jr(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&qv(i,i.return,o),oa(i);break;case 27:pu(i.stateNode);case 26:case 5:jr(i,i.return),oa(i);break;case 22:i.memoizedState===null&&oa(i);break;case 30:oa(i);break;default:oa(i)}n=n.sibling}}function pi(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,f=n,m=i,_=m.flags;switch(m.tag){case 0:case 11:case 15:pi(f,m,o),su(4,m);break;case 1:if(pi(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(K){nt(u,u.return,K)}if(u=m,f=u.updateQueue,f!==null){var T=u.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)N_(D[f],T)}catch(K){nt(u,u.return,K)}}o&&_&64&&Bv(m),au(m,m.return);break;case 27:Gv(m);case 26:case 5:pi(f,m,o),o&&u===null&&_&4&&Fv(m),au(m,m.return);break;case 12:pi(f,m,o);break;case 31:pi(f,m,o),o&&_&4&&Xv(f,m);break;case 13:pi(f,m,o),o&&_&4&&Jv(f,m);break;case 22:m.memoizedState===null&&pi(f,m,o),au(m,m.return);break;case 30:break;default:pi(f,m,o)}i=i.sibling}}function Fm(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Kl(o))}function Hm(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Kl(n))}function dr(n,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)e0(n,i,o,u),i=i.sibling}function e0(n,i,o,u){var f=i.flags;switch(i.tag){case 0:case 11:case 15:dr(n,i,o,u),f&2048&&su(9,i);break;case 1:dr(n,i,o,u);break;case 3:dr(n,i,o,u),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Kl(n)));break;case 12:if(f&2048){dr(n,i,o,u),n=i.stateNode;try{var m=i.memoizedProps,_=m.id,T=m.onPostCommit;typeof T=="function"&&T(_,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(D){nt(i,i.return,D)}}else dr(n,i,o,u);break;case 31:dr(n,i,o,u);break;case 13:dr(n,i,o,u);break;case 23:break;case 22:m=i.stateNode,_=i.alternate,i.memoizedState!==null?m._visibility&2?dr(n,i,o,u):ou(n,i):m._visibility&2?dr(n,i,o,u):(m._visibility|=2,po(n,i,o,u,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Fm(_,i);break;case 24:dr(n,i,o,u),f&2048&&Hm(i.alternate,i);break;default:dr(n,i,o,u)}}function po(n,i,o,u,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var m=n,_=i,T=o,D=u,K=_.flags;switch(_.tag){case 0:case 11:case 15:po(m,_,T,D,f),su(8,_);break;case 23:break;case 22:var Z=_.stateNode;_.memoizedState!==null?Z._visibility&2?po(m,_,T,D,f):ou(m,_):(Z._visibility|=2,po(m,_,T,D,f)),f&&K&2048&&Fm(_.alternate,_);break;case 24:po(m,_,T,D,f),f&&K&2048&&Hm(_.alternate,_);break;default:po(m,_,T,D,f)}i=i.sibling}}function ou(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,u=i,f=u.flags;switch(u.tag){case 22:ou(o,u),f&2048&&Fm(u.alternate,u);break;case 24:ou(o,u),f&2048&&Hm(u.alternate,u);break;default:ou(o,u)}i=i.sibling}}var lu=8192;function go(n,i,o){if(n.subtreeFlags&lu)for(n=n.child;n!==null;)t0(n,i,o),n=n.sibling}function t0(n,i,o){switch(n.tag){case 26:go(n,i,o),n.flags&lu&&n.memoizedState!==null&&Mx(o,fr,n.memoizedState,n.memoizedProps);break;case 5:go(n,i,o);break;case 3:case 4:var u=fr;fr=qh(n.stateNode.containerInfo),go(n,i,o),fr=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=lu,lu=16777216,go(n,i,o),lu=u):go(n,i,o));break;default:go(n,i,o)}}function n0(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function uu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Xt=u,i0(u,n)}n0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)r0(n),n=n.sibling}function r0(n){switch(n.tag){case 0:case 11:case 15:uu(n),n.flags&2048&&Wi(9,n,n.return);break;case 3:uu(n);break;case 12:uu(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Ch(n)):uu(n);break;default:uu(n)}}function Ch(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Xt=u,i0(u,n)}n0(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Wi(8,i,i.return),Ch(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Ch(i));break;default:Ch(i)}n=n.sibling}}function i0(n,i){for(;Xt!==null;){var o=Xt;switch(o.tag){case 0:case 11:case 15:Wi(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Kl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Xt=u;else e:for(o=n;Xt!==null;){u=Xt;var f=u.sibling,m=u.return;if($v(u),u===o){Xt=null;break e}if(f!==null){f.return=m,Xt=f;break e}Xt=m}}}var YA={getCacheForType:function(n){var i=nn(Ut),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o},cacheSignal:function(){return nn(Ut).controller.signal}},XA=typeof WeakMap=="function"?WeakMap:Map,We=0,ht=null,Ue=null,Be=0,tt=0,Nn=null,Zi=!1,yo=!1,Gm=!1,gi=0,St=0,es=0,la=0,Km=0,Dn=0,_o=0,cu=null,bn=null,Qm=!1,Nh=0,s0=0,Dh=1/0,Vh=null,ts=null,Gt=0,ns=null,vo=null,yi=0,$m=0,Ym=null,a0=null,hu=0,Xm=null;function Vn(){return(We&2)!==0&&Be!==0?Be&-Be:j.T!==null?np():Oc()}function o0(){if(Dn===0)if((Be&536870912)===0||He){var n=ks;ks<<=1,(ks&3932160)===0&&(ks=262144),Dn=n}else Dn=536870912;return n=Rn.current,n!==null&&(n.flags|=32),Dn}function En(n,i,o){(n===ht&&(tt===2||tt===9)||n.cancelPendingCommit!==null)&&(bo(n,0),rs(n,Be,Dn,!1)),Ps(n,o),((We&2)===0||n!==ht)&&(n===ht&&((We&2)===0&&(la|=o),St===4&&rs(n,Be,Dn,!1)),Br(n))}function l0(n,i,o){if((We&6)!==0)throw Error(r(327));var u=!o&&(i&127)===0&&(i&n.expiredLanes)===0||rr(n,i),f=u?ZA(n,i):Wm(n,i,!0),m=u;do{if(f===0){yo&&!u&&rs(n,i,0,!1);break}else{if(o=n.current.alternate,m&&!JA(o)){f=Wm(n,i,!1),m=!1;continue}if(f===2){if(m=i,n.errorRecoveryDisabledLanes&m)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var T=n;f=cu;var D=T.current.memoizedState.isDehydrated;if(D&&(bo(T,_).flags|=256),_=Wm(T,_,!1),_!==2){if(Gm&&!D){T.errorRecoveryDisabledLanes|=m,la|=m,f=4;break e}m=bn,bn=f,m!==null&&(bn===null?bn=m:bn.push.apply(bn,m))}f=_}if(m=!1,f!==2)continue}}if(f===1){bo(n,0),rs(n,i,0,!0);break}e:{switch(u=n,m=f,m){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:rs(u,i,Dn,!Zi);break e;case 2:bn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=Nh+300-Mt(),10<f)){if(rs(u,i,Dn,!Zi),wr(u,0,!0)!==0)break e;yi=i,u.timeoutHandle=U0(u0.bind(null,u,o,bn,Vh,Qm,i,Dn,la,_o,Zi,m,"Throttled",-0,0),f);break e}u0(u,o,bn,Vh,Qm,i,Dn,la,_o,Zi,m,null,-0,0)}}break}while(!0);Br(n)}function u0(n,i,o,u,f,m,_,T,D,K,Z,ie,$,X){if(n.timeoutHandle=-1,ie=i.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ar},t0(i,m,ie);var _e=(m&62914560)===m?Nh-Mt():(m&4194048)===m?s0-Mt():0;if(_e=kx(ie,_e),_e!==null){yi=m,n.cancelPendingCommit=_e(y0.bind(null,n,i,m,o,u,f,_,T,D,Z,ie,null,$,X)),rs(n,m,_,!K);return}}y0(n,i,m,o,u,f,_,T,D)}function JA(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!xn(m(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function rs(n,i,o,u){i&=~Km,i&=~la,n.suspendedLanes|=i,n.pingedLanes&=~i,u&&(n.warmLanes|=i),u=n.expirationTimes;for(var f=i;0<f;){var m=31-It(f),_=1<<m;u[m]=-1,f&=~_}o!==0&&Ls(n,o,i)}function Oh(){return(We&6)===0?(fu(0),!1):!0}function Jm(){if(Ue!==null){if(tt===0)var n=Ue.return;else n=Ue,ai=Zs=null,dm(n),uo=null,$l=0,n=Ue;for(;n!==null;)jv(n.alternate,n),n=n.return;Ue=null}}function bo(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,yx(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),yi=0,Jm(),ht=n,Ue=o=ii(n.current,null),Be=i,tt=0,Nn=null,Zi=!1,yo=rr(n,i),Gm=!1,_o=Dn=Km=la=es=St=0,bn=cu=null,Qm=!1,(i&8)!==0&&(i|=i&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=i;0<u;){var f=31-It(u),m=1<<f;i|=n[f],u&=~m}return gi=i,eh(),o}function c0(n,i){Oe=null,j.H=nu,i===lo||i===lh?(i=x_(),tt=3):i===tm?(i=x_(),tt=4):tt=i===Cm?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Nn=i,Ue===null&&(St=1,Th(n,Hn(i,n.current)))}function h0(){var n=Rn.current;return n===null?!0:(Be&4194048)===Be?$n===null:(Be&62914560)===Be||(Be&536870912)!==0?n===$n:!1}function f0(){var n=j.H;return j.H=nu,n===null?nu:n}function d0(){var n=j.A;return j.A=YA,n}function Mh(){St=4,Zi||(Be&4194048)!==Be&&Rn.current!==null||(yo=!0),(es&134217727)===0&&(la&134217727)===0||ht===null||rs(ht,Be,Dn,!1)}function Wm(n,i,o){var u=We;We|=2;var f=f0(),m=d0();(ht!==n||Be!==i)&&(Vh=null,bo(n,i)),i=!1;var _=St;e:do try{if(tt!==0&&Ue!==null){var T=Ue,D=Nn;switch(tt){case 8:Jm(),_=6;break e;case 3:case 2:case 9:case 6:Rn.current===null&&(i=!0);var K=tt;if(tt=0,Nn=null,Eo(n,T,D,K),o&&yo){_=0;break e}break;default:K=tt,tt=0,Nn=null,Eo(n,T,D,K)}}WA(),_=St;break}catch(Z){c0(n,Z)}while(!0);return i&&n.shellSuspendCounter++,ai=Zs=null,We=u,j.H=f,j.A=m,Ue===null&&(ht=null,Be=0,eh()),_}function WA(){for(;Ue!==null;)m0(Ue)}function ZA(n,i){var o=We;We|=2;var u=f0(),f=d0();ht!==n||Be!==i?(Vh=null,Dh=Mt()+500,bo(n,i)):yo=rr(n,i);e:do try{if(tt!==0&&Ue!==null){i=Ue;var m=Nn;t:switch(tt){case 1:tt=0,Nn=null,Eo(n,i,m,1);break;case 2:case 9:if(S_(m)){tt=0,Nn=null,p0(i);break}i=function(){tt!==2&&tt!==9||ht!==n||(tt=7),Br(n)},m.then(i,i);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:S_(m)?(tt=0,Nn=null,p0(i)):(tt=0,Nn=null,Eo(n,i,m,7));break;case 5:var _=null;switch(Ue.tag){case 26:_=Ue.memoizedState;case 5:case 27:var T=Ue;if(_?eb(_):T.stateNode.complete){tt=0,Nn=null;var D=T.sibling;if(D!==null)Ue=D;else{var K=T.return;K!==null?(Ue=K,kh(K)):Ue=null}break t}}tt=0,Nn=null,Eo(n,i,m,5);break;case 6:tt=0,Nn=null,Eo(n,i,m,6);break;case 8:Jm(),St=6;break e;default:throw Error(r(462))}}ex();break}catch(Z){c0(n,Z)}while(!0);return ai=Zs=null,j.H=u,j.A=f,We=o,Ue!==null?0:(ht=null,Be=0,eh(),St)}function ex(){for(;Ue!==null&&!bl();)m0(Ue)}function m0(n){var i=zv(n.alternate,n,gi);n.memoizedProps=n.pendingProps,i===null?kh(n):Ue=i}function p0(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=Vv(o,i,i.pendingProps,i.type,void 0,Be);break;case 11:i=Vv(o,i,i.pendingProps,i.type.render,i.ref,Be);break;case 5:dm(i);default:jv(o,i),i=Ue=d_(i,gi),i=zv(o,i,gi)}n.memoizedProps=n.pendingProps,i===null?kh(n):Ue=i}function Eo(n,i,o,u){ai=Zs=null,dm(i),uo=null,$l=0;var f=i.return;try{if(qA(n,f,i,o,Be)){St=1,Th(n,Hn(o,n.current)),Ue=null;return}}catch(m){if(f!==null)throw Ue=f,m;St=1,Th(n,Hn(o,n.current)),Ue=null;return}i.flags&32768?(He||u===1?n=!0:yo||(Be&536870912)!==0?n=!1:(Zi=n=!0,(u===2||u===9||u===3||u===6)&&(u=Rn.current,u!==null&&u.tag===13&&(u.flags|=16384))),g0(i,n)):kh(i)}function kh(n){var i=n;do{if((i.flags&32768)!==0){g0(i,Zi);return}n=i.return;var o=GA(i.alternate,i,gi);if(o!==null){Ue=o;return}if(i=i.sibling,i!==null){Ue=i;return}Ue=i=n}while(i!==null);St===0&&(St=5)}function g0(n,i){do{var o=KA(n.alternate,n);if(o!==null){o.flags&=32767,Ue=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){Ue=n;return}Ue=n=o}while(n!==null);St=6,Ue=null}function y0(n,i,o,u,f,m,_,T,D){n.cancelPendingCommit=null;do Ph();while(Gt!==0);if((We&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(m=i.lanes|i.childLanes,m|=jd,Dd(n,o,m,_,T,D),n===ht&&(Ue=ht=null,Be=0),vo=i,ns=n,yi=o,$m=m,Ym=f,a0=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,ix(Oi,function(){return T0(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=j.T,j.T=null,f=ae.p,ae.p=2,_=We,We|=4;try{QA(n,i,o)}finally{We=_,ae.p=f,j.T=u}}Gt=1,_0(),v0(),b0()}}function _0(){if(Gt===1){Gt=0;var n=ns,i=vo,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=j.T,j.T=null;var u=ae.p;ae.p=2;var f=We;We|=4;try{Wv(i,n);var m=cp,_=i_(n.containerInfo),T=m.focusedElem,D=m.selectionRange;if(_!==T&&T&&T.ownerDocument&&r_(T.ownerDocument.documentElement,T)){if(D!==null&&kd(T)){var K=D.start,Z=D.end;if(Z===void 0&&(Z=K),"selectionStart"in T)T.selectionStart=K,T.selectionEnd=Math.min(Z,T.value.length);else{var ie=T.ownerDocument||document,$=ie&&ie.defaultView||window;if($.getSelection){var X=$.getSelection(),_e=T.textContent.length,xe=Math.min(D.start,_e),lt=D.end===void 0?xe:Math.min(D.end,_e);!X.extend&&xe>lt&&(_=lt,lt=xe,xe=_);var z=n_(T,xe),P=n_(T,lt);if(z&&P&&(X.rangeCount!==1||X.anchorNode!==z.node||X.anchorOffset!==z.offset||X.focusNode!==P.node||X.focusOffset!==P.offset)){var G=ie.createRange();G.setStart(z.node,z.offset),X.removeAllRanges(),xe>lt?(X.addRange(G),X.extend(P.node,P.offset)):(G.setEnd(P.node,P.offset),X.addRange(G))}}}}for(ie=[],X=T;X=X.parentNode;)X.nodeType===1&&ie.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ie.length;T++){var ne=ie[T];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}$h=!!up,cp=up=null}finally{We=f,ae.p=u,j.T=o}}n.current=i,Gt=2}}function v0(){if(Gt===2){Gt=0;var n=ns,i=vo,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=j.T,j.T=null;var u=ae.p;ae.p=2;var f=We;We|=4;try{Qv(n,i.alternate,i)}finally{We=f,ae.p=u,j.T=o}}Gt=3}}function b0(){if(Gt===4||Gt===3){Gt=0,za();var n=ns,i=vo,o=yi,u=a0;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Gt=5:(Gt=0,vo=ns=null,E0(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(ts=null),ei(o),i=i.stateNode,Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(nr,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=j.T,f=ae.p,ae.p=2,j.T=null;try{for(var m=n.onRecoverableError,_=0;_<u.length;_++){var T=u[_];m(T.value,{componentStack:T.stack})}}finally{j.T=i,ae.p=f}}(yi&3)!==0&&Ph(),Br(n),f=n.pendingLanes,(o&261930)!==0&&(f&42)!==0?n===Xm?hu++:(hu=0,Xm=n):hu=0,fu(0)}}function E0(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Kl(i)))}function Ph(){return _0(),v0(),b0(),T0()}function T0(){if(Gt!==5)return!1;var n=ns,i=$m;$m=0;var o=ei(yi),u=j.T,f=ae.p;try{ae.p=32>o?32:o,j.T=null,o=Ym,Ym=null;var m=ns,_=yi;if(Gt=0,vo=ns=null,yi=0,(We&6)!==0)throw Error(r(331));var T=We;if(We|=4,r0(m.current),e0(m,m.current,_,o),We=T,fu(0,!1),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(nr,m)}catch{}return!0}finally{ae.p=f,j.T=u,E0(n,i)}}function w0(n,i,o){i=Hn(o,i),i=Rm(n.stateNode,i,2),n=Yi(n,i,2),n!==null&&(Ps(n,2),Br(n))}function nt(n,i,o){if(n.tag===3)w0(n,n,o);else for(;i!==null;){if(i.tag===3){w0(i,n,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ts===null||!ts.has(u))){n=Hn(o,n),o=Sv(2),u=Yi(i,o,2),u!==null&&(Av(o,u,i,n),Ps(u,2),Br(u));break}}i=i.return}}function Zm(n,i,o){var u=n.pingCache;if(u===null){u=n.pingCache=new XA;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(o)||(Gm=!0,f.add(o),n=tx.bind(null,n,i,o),i.then(n,n))}function tx(n,i,o){var u=n.pingCache;u!==null&&u.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,ht===n&&(Be&o)===o&&(St===4||St===3&&(Be&62914560)===Be&&300>Mt()-Nh?(We&2)===0&&bo(n,0):Km|=o,_o===Be&&(_o=0)),Br(n)}function S0(n,i){i===0&&(i=Vc()),n=Xs(n,i),n!==null&&(Ps(n,i),Br(n))}function nx(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),S0(n,o)}function rx(n,i){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(i),S0(n,o)}function ix(n,i){return bt(n,i)}var Lh=null,To=null,ep=!1,zh=!1,tp=!1,is=0;function Br(n){n!==To&&n.next===null&&(To===null?Lh=To=n:To=To.next=n),zh=!0,ep||(ep=!0,ax())}function fu(n,i){if(!tp&&zh){tp=!0;do for(var o=!1,u=Lh;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var _=u.suspendedLanes,T=u.pingedLanes;m=(1<<31-It(42|n)+1)-1,m&=f&~(_&~T),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,R0(u,m))}else m=Be,m=wr(u,u===ht?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||rr(u,m)||(o=!0,R0(u,m));u=u.next}while(o);tp=!1}}function sx(){A0()}function A0(){zh=ep=!1;var n=0;is!==0&&gx()&&(n=is);for(var i=Mt(),o=null,u=Lh;u!==null;){var f=u.next,m=x0(u,i);m===0?(u.next=null,o===null?Lh=f:o.next=f,f===null&&(To=o)):(o=u,(n!==0||(m&3)!==0)&&(zh=!0)),u=f}Gt!==0&&Gt!==5||fu(n),is!==0&&(is=0)}function x0(n,i){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var _=31-It(m),T=1<<_,D=f[_];D===-1?((T&o)===0||(T&u)!==0)&&(f[_]=Nd(T,i)):D<=i&&(n.expiredLanes|=T),m&=~T}if(i=ht,o=Be,o=wr(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===i&&(tt===2||tt===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&br(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||rr(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(u!==null&&br(u),ei(o)){case 2:case 8:o=Tl;break;case 32:o=Oi;break;case 268435456:o=Ic;break;default:o=Oi}return u=I0.bind(null,n),o=bt(o,u),n.callbackPriority=i,n.callbackNode=o,i}return u!==null&&u!==null&&br(u),n.callbackPriority=2,n.callbackNode=null,2}function I0(n,i){if(Gt!==0&&Gt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Ph()&&n.callbackNode!==o)return null;var u=Be;return u=wr(n,n===ht?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(l0(n,u,i),x0(n,Mt()),n.callbackNode!=null&&n.callbackNode===o?I0.bind(null,n):null)}function R0(n,i){if(Ph())return null;l0(n,i,!0)}function ax(){_x(function(){(We&6)!==0?bt(El,sx):A0()})}function np(){if(is===0){var n=ao;n===0&&(n=Er,Er<<=1,(Er&261888)===0&&(Er=256)),is=n}return is}function C0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ga(""+n)}function N0(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function ox(n,i,o,u,f){if(i==="submit"&&o&&o.stateNode===f){var m=C0((f[$t]||null).action),_=u.submitter;_&&(i=(i=_[$t]||null)?C0(i.formAction):_.getAttribute("formAction"),i!==null&&(m=i,_=null));var T=new Mr("action","action",null,u,f);n.push({event:T,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(is!==0){var D=_?N0(f,_):new FormData(f);Tm(o,{pending:!0,data:D,method:f.method,action:m},null,D)}}else typeof m=="function"&&(T.preventDefault(),D=_?N0(f,_):new FormData(f),Tm(o,{pending:!0,data:D,method:f.method,action:m},m,D))},currentTarget:f}]})}}for(var rp=0;rp<Ud.length;rp++){var ip=Ud[rp],lx=ip.toLowerCase(),ux=ip[0].toUpperCase()+ip.slice(1);hr(lx,"on"+ux)}hr(o_,"onAnimationEnd"),hr(l_,"onAnimationIteration"),hr(u_,"onAnimationStart"),hr("dblclick","onDoubleClick"),hr("focusin","onFocus"),hr("focusout","onBlur"),hr(AA,"onTransitionRun"),hr(xA,"onTransitionStart"),hr(IA,"onTransitionCancel"),hr(c_,"onTransitionEnd"),Nr("onMouseEnter",["mouseout","mouseover"]),Nr("onMouseLeave",["mouseout","mouseover"]),Nr("onPointerEnter",["pointerout","pointerover"]),Nr("onPointerLeave",["pointerout","pointerover"]),Cr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Cr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Cr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Cr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Cr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Cr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var du="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(du));function D0(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;e:{var m=void 0;if(i)for(var _=u.length-1;0<=_;_--){var T=u[_],D=T.instance,K=T.currentTarget;if(T=T.listener,D!==m&&f.isPropagationStopped())break e;m=T,f.currentTarget=K;try{m(f)}catch(Z){Zc(Z)}f.currentTarget=null,m=D}else for(_=0;_<u.length;_++){if(T=u[_],D=T.instance,K=T.currentTarget,T=T.listener,D!==m&&f.isPropagationStopped())break e;m=T,f.currentTarget=K;try{m(f)}catch(Z){Zc(Z)}f.currentTarget=null,m=D}}}}function je(n,i){var o=i[ja];o===void 0&&(o=i[ja]=new Set);var u=n+"__bubble";o.has(u)||(V0(i,n,2,!1),o.add(u))}function sp(n,i,o){var u=0;i&&(u|=4),V0(o,n,u,i)}var Uh="_reactListening"+Math.random().toString(36).slice(2);function ap(n){if(!n[Uh]){n[Uh]=!0,Al.forEach(function(o){o!=="selectionchange"&&(cx.has(o)||sp(o,!1,n),sp(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Uh]||(i[Uh]=!0,sp("selectionchange",!1,i))}}function V0(n,i,o,u){switch(ob(i)){case 2:var f=zx;break;case 8:f=Ux;break;default:f=Ep}o=f.bind(null,i,o,n),f=void 0,!qs||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(i,o,{capture:!0,passive:f}):n.addEventListener(i,o,!0):f!==void 0?n.addEventListener(i,o,{passive:f}):n.addEventListener(i,o,!1)}function op(n,i,o,u,f){var m=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var T=u.stateNode.containerInfo;if(T===f)break;if(_===4)for(_=u.return;_!==null;){var D=_.tag;if((D===3||D===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;T!==null;){if(_=Ir(T),_===null)return;if(D=_.tag,D===5||D===6||D===26||D===27){u=m=_;continue e}T=T.parentNode}}u=u.return}Ui(function(){var K=m,Z=jn(o),ie=[];e:{var $=h_.get(n);if($!==void 0){var X=Mr,_e=n;switch(n){case"keypress":if(Hs(o)===0)break e;case"keydown":case"keyup":X=Xc;break;case"focusin":_e="focus",X=Ks;break;case"focusout":_e="blur",X=Ks;break;case"beforeblur":case"afterblur":X=Ks;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=zl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Bc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=y;break;case o_:case l_:case u_:X=Fc;break;case c_:X=I;break;case"scroll":case"scrollend":X=Ll;break;case"wheel":X=Y;break;case"copy":case"cut":case"paste":X=Hc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=ri;break;case"toggle":case"beforetoggle":X=Ve}var xe=(i&4)!==0,lt=!xe&&(n==="scroll"||n==="scrollend"),z=xe?$!==null?$+"Capture":null:$;xe=[];for(var P=K,G;P!==null;){var ne=P;if(G=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||G===null||z===null||(ne=or(P,z),ne!=null&&xe.push(mu(P,ne,G))),lt)break;P=P.return}0<xe.length&&($=new X($,_e,null,o,Z),ie.push({event:$,listeners:xe}))}}if((i&7)===0){e:{if($=n==="mouseover"||n==="pointerover",X=n==="mouseout"||n==="pointerout",$&&o!==Ml&&(_e=o.relatedTarget||o.fromElement)&&(Ir(_e)||_e[Ar]))break e;if((X||$)&&($=Z.window===Z?Z:($=Z.ownerDocument)?$.defaultView||$.parentWindow:window,X?(_e=o.relatedTarget||o.toElement,X=K,_e=_e?Ir(_e):null,_e!==null&&(lt=l(_e),xe=_e.tag,_e!==lt||xe!==5&&xe!==27&&xe!==6)&&(_e=null)):(X=null,_e=K),X!==_e)){if(xe=zl,ne="onMouseLeave",z="onMouseEnter",P="mouse",(n==="pointerout"||n==="pointerover")&&(xe=ri,ne="onPointerLeave",z="onPointerEnter",P="pointer"),lt=X==null?$:Sn(X),G=_e==null?$:Sn(_e),$=new xe(ne,P+"leave",X,o,Z),$.target=lt,$.relatedTarget=G,ne=null,Ir(Z)===K&&(xe=new xe(z,P+"enter",_e,o,Z),xe.target=G,xe.relatedTarget=lt,ne=xe),lt=ne,X&&_e)t:{for(xe=hx,z=X,P=_e,G=0,ne=z;ne;ne=xe(ne))G++;ne=0;for(var we=P;we;we=xe(we))ne++;for(;0<G-ne;)z=xe(z),G--;for(;0<ne-G;)P=xe(P),ne--;for(;G--;){if(z===P||P!==null&&z===P.alternate){xe=z;break t}z=xe(z),P=xe(P)}xe=null}else xe=null;X!==null&&O0(ie,$,X,xe,!1),_e!==null&&lt!==null&&O0(ie,lt,_e,xe,!0)}}e:{if($=K?Sn(K):window,X=$.nodeName&&$.nodeName.toLowerCase(),X==="select"||X==="input"&&$.type==="file")var $e=Xy;else if($y($))if(Jy)$e=TA;else{$e=bA;var be=vA}else X=$.nodeName,!X||X.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?K&&Ha(K.elementType)&&($e=Xy):$e=EA;if($e&&($e=$e(n,K))){Yy(ie,$e,o,Z);break e}be&&be(n,$,K),n==="focusout"&&K&&$.type==="number"&&K.memoizedProps.value!=null&&Dl($,"number",$.value)}switch(be=K?Sn(K):window,n){case"focusin":($y(be)||be.contentEditable==="true")&&(Wa=be,Pd=K,Fl=null);break;case"focusout":Fl=Pd=Wa=null;break;case"mousedown":Ld=!0;break;case"contextmenu":case"mouseup":case"dragend":Ld=!1,s_(ie,o,Z);break;case"selectionchange":if(SA)break;case"keydown":case"keyup":s_(ie,o,Z)}var Me;if(Je)e:{switch(n){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else Ja?Qs(n,o)&&(qe="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(qe="onCompositionStart");qe&&(Lr&&o.locale!=="ko"&&(Ja||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&Ja&&(Me=Pl()):(Or=Z,kl="value"in Or?Or.value:Or.textContent,Ja=!0)),be=jh(K,qe),0<be.length&&(qe=new Pr(qe,n,null,o,Z),ie.push({event:qe,listeners:be}),Me?qe.data=Me:(Me=Xa(o),Me!==null&&(qe.data=Me)))),(Me=qn?pA(n,o):gA(n,o))&&(qe=jh(K,"onBeforeInput"),0<qe.length&&(be=new Pr("onBeforeInput","beforeinput",null,o,Z),ie.push({event:be,listeners:qe}),be.data=Me)),ox(ie,n,K,o,Z)}D0(ie,i)})}function mu(n,i,o){return{instance:n,listener:i,currentTarget:o}}function jh(n,i){for(var o=i+"Capture",u=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=or(n,o),f!=null&&u.unshift(mu(n,f,m)),f=or(n,i),f!=null&&u.push(mu(n,f,m))),n.tag===3)return u;n=n.return}return[]}function hx(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function O0(n,i,o,u,f){for(var m=i._reactName,_=[];o!==null&&o!==u;){var T=o,D=T.alternate,K=T.stateNode;if(T=T.tag,D!==null&&D===u)break;T!==5&&T!==26&&T!==27||K===null||(D=K,f?(K=or(o,m),K!=null&&_.unshift(mu(o,K,D))):f||(K=or(o,m),K!=null&&_.push(mu(o,K,D)))),o=o.return}_.length!==0&&n.push({event:i,listeners:_})}var fx=/\r\n?/g,dx=/\u0000|\uFFFD/g;function M0(n){return(typeof n=="string"?n:""+n).replace(fx,`
`).replace(dx,"")}function k0(n,i){return i=M0(i),M0(n)===i}function ot(n,i,o,u,f,m){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||gn(n,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&gn(n,""+u);break;case"className":An(n,"class",u);break;case"tabIndex":An(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":An(n,o,u);break;case"style":Ol(n,u,m);break;case"data":if(i!=="object"){An(n,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Ga(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(i!=="input"&&ot(n,i,"name",f.name,f,null),ot(n,i,"formEncType",f.formEncType,f,null),ot(n,i,"formMethod",f.formMethod,f,null),ot(n,i,"formTarget",f.formTarget,f,null)):(ot(n,i,"encType",f.encType,f,null),ot(n,i,"method",f.method,f,null),ot(n,i,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Ga(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=ar);break;case"onScroll":u!=null&&je("scroll",n);break;case"onScrollEnd":u!=null&&je("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Ga(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":je("beforetoggle",n),je("toggle",n),qa(n,"popover",u);break;case"xlinkActuate":zt(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":zt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":zt(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":zt(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":zt(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":zt(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":zt(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":zt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":zt(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":qa(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=jc.get(o)||o,qa(n,o,u))}}function lp(n,i,o,u,f,m){switch(o){case"style":Ol(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof u=="string"?gn(n,u):(typeof u=="number"||typeof u=="bigint")&&gn(n,""+u);break;case"onScroll":u!=null&&je("scroll",n);break;case"onScrollEnd":u!=null&&je("scrollend",n);break;case"onClick":u!=null&&(n.onclick=ar);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xl.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),m=n[$t]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(i,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,u,f);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):qa(n,o,u)}}}function sn(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",n),je("load",n);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var _=o[m];if(_!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:ot(n,i,m,_,o,null)}}f&&ot(n,i,"srcSet",o.srcSet,o,null),u&&ot(n,i,"src",o.src,o,null);return;case"input":je("invalid",n);var T=m=_=f=null,D=null,K=null;for(u in o)if(o.hasOwnProperty(u)){var Z=o[u];if(Z!=null)switch(u){case"name":f=Z;break;case"type":_=Z;break;case"checked":D=Z;break;case"defaultChecked":K=Z;break;case"value":m=Z;break;case"defaultValue":T=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,i));break;default:ot(n,i,u,Z,o,null)}}Lc(n,m,T,D,K,_,f,!1);return;case"select":je("invalid",n),u=_=m=null;for(f in o)if(o.hasOwnProperty(f)&&(T=o[f],T!=null))switch(f){case"value":m=T;break;case"defaultValue":_=T;break;case"multiple":u=T;default:ot(n,i,f,T,o,null)}i=m,o=_,n.multiple=!!u,i!=null?ki(n,!!u,i,!1):o!=null&&ki(n,!!u,o,!0);return;case"textarea":je("invalid",n),m=f=u=null;for(_ in o)if(o.hasOwnProperty(_)&&(T=o[_],T!=null))switch(_){case"value":u=T;break;case"defaultValue":f=T;break;case"children":m=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:ot(n,i,_,T,o,null)}Pi(n,u,f,m);return;case"option":for(D in o)o.hasOwnProperty(D)&&(u=o[D],u!=null)&&(D==="selected"?n.selected=u&&typeof u!="function"&&typeof u!="symbol":ot(n,i,D,u,o,null));return;case"dialog":je("beforetoggle",n),je("toggle",n),je("cancel",n),je("close",n);break;case"iframe":case"object":je("load",n);break;case"video":case"audio":for(u=0;u<du.length;u++)je(du[u],n);break;case"image":je("error",n),je("load",n);break;case"details":je("toggle",n);break;case"embed":case"source":case"link":je("error",n),je("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in o)if(o.hasOwnProperty(K)&&(u=o[K],u!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:ot(n,i,K,u,o,null)}return;default:if(Ha(i)){for(Z in o)o.hasOwnProperty(Z)&&(u=o[Z],u!==void 0&&lp(n,i,Z,u,o,void 0));return}}for(T in o)o.hasOwnProperty(T)&&(u=o[T],u!=null&&ot(n,i,T,u,o,null))}function mx(n,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,_=null,T=null,D=null,K=null,Z=null;for(X in o){var ie=o[X];if(o.hasOwnProperty(X)&&ie!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":D=ie;default:u.hasOwnProperty(X)||ot(n,i,X,null,u,ie)}}for(var $ in u){var X=u[$];if(ie=o[$],u.hasOwnProperty($)&&(X!=null||ie!=null))switch($){case"type":m=X;break;case"name":f=X;break;case"checked":K=X;break;case"defaultChecked":Z=X;break;case"value":_=X;break;case"defaultValue":T=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,i));break;default:X!==ie&&ot(n,i,$,X,u,ie)}}Fa(n,_,T,D,K,Z,m,f);return;case"select":X=_=T=$=null;for(m in o)if(D=o[m],o.hasOwnProperty(m)&&D!=null)switch(m){case"value":break;case"multiple":X=D;default:u.hasOwnProperty(m)||ot(n,i,m,null,u,D)}for(f in u)if(m=u[f],D=o[f],u.hasOwnProperty(f)&&(m!=null||D!=null))switch(f){case"value":$=m;break;case"defaultValue":T=m;break;case"multiple":_=m;default:m!==D&&ot(n,i,f,m,u,D)}i=T,o=_,u=X,$!=null?ki(n,!!o,$,!1):!!u!=!!o&&(i!=null?ki(n,!!o,i,!0):ki(n,!!o,o?[]:"",!1));return;case"textarea":X=$=null;for(T in o)if(f=o[T],o.hasOwnProperty(T)&&f!=null&&!u.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:ot(n,i,T,null,u,f)}for(_ in u)if(f=u[_],m=o[_],u.hasOwnProperty(_)&&(f!=null||m!=null))switch(_){case"value":$=f;break;case"defaultValue":X=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==m&&ot(n,i,_,f,u,m)}zc(n,$,X);return;case"option":for(var _e in o)$=o[_e],o.hasOwnProperty(_e)&&$!=null&&!u.hasOwnProperty(_e)&&(_e==="selected"?n.selected=!1:ot(n,i,_e,null,u,$));for(D in u)$=u[D],X=o[D],u.hasOwnProperty(D)&&$!==X&&($!=null||X!=null)&&(D==="selected"?n.selected=$&&typeof $!="function"&&typeof $!="symbol":ot(n,i,D,$,u,X));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in o)$=o[xe],o.hasOwnProperty(xe)&&$!=null&&!u.hasOwnProperty(xe)&&ot(n,i,xe,null,u,$);for(K in u)if($=u[K],X=o[K],u.hasOwnProperty(K)&&$!==X&&($!=null||X!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,i));break;default:ot(n,i,K,$,u,X)}return;default:if(Ha(i)){for(var lt in o)$=o[lt],o.hasOwnProperty(lt)&&$!==void 0&&!u.hasOwnProperty(lt)&&lp(n,i,lt,void 0,u,$);for(Z in u)$=u[Z],X=o[Z],!u.hasOwnProperty(Z)||$===X||$===void 0&&X===void 0||lp(n,i,Z,$,u,X);return}}for(var z in o)$=o[z],o.hasOwnProperty(z)&&$!=null&&!u.hasOwnProperty(z)&&ot(n,i,z,null,u,$);for(ie in u)$=u[ie],X=o[ie],!u.hasOwnProperty(ie)||$===X||$==null&&X==null||ot(n,i,ie,$,u,X)}function P0(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function px(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],m=f.transferSize,_=f.initiatorType,T=f.duration;if(m&&T&&P0(_)){for(_=0,T=f.responseEnd,u+=1;u<o.length;u++){var D=o[u],K=D.startTime;if(K>T)break;var Z=D.transferSize,ie=D.initiatorType;Z&&P0(ie)&&(D=D.responseEnd,_+=Z*(D<T?1:(T-K)/(D-K)))}if(--u,i+=8*(m+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var up=null,cp=null;function Bh(n){return n.nodeType===9?n:n.ownerDocument}function L0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function z0(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function hp(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var fp=null;function gx(){var n=window.event;return n&&n.type==="popstate"?n===fp?!1:(fp=n,!0):(fp=null,!1)}var U0=typeof setTimeout=="function"?setTimeout:void 0,yx=typeof clearTimeout=="function"?clearTimeout:void 0,j0=typeof Promise=="function"?Promise:void 0,_x=typeof queueMicrotask=="function"?queueMicrotask:typeof j0<"u"?function(n){return j0.resolve(null).then(n).catch(vx)}:U0;function vx(n){setTimeout(function(){throw n})}function ss(n){return n==="head"}function B0(n,i){var o=i,u=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(f),xo(i);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")pu(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,pu(o);for(var m=o.firstChild;m;){var _=m.nextSibling,T=m.nodeName;m[xr]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=_}}else o==="body"&&pu(n.ownerDocument.body);o=f}while(o);xo(i)}function q0(n,i){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function dp(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":dp(o),Ba(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function bx(n,i,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[xr])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Yn(n.nextSibling),n===null)break}return null}function Ex(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Yn(n.nextSibling),n===null))return null;return n}function F0(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Yn(n.nextSibling),n===null))return null;return n}function mp(n){return n.data==="$?"||n.data==="$~"}function pp(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function Tx(n,i){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||o.readyState!=="loading")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Yn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var gp=null;function H0(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(i===0)return Yn(n.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}n=n.nextSibling}return null}function G0(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return n;i--}else o!=="/$"&&o!=="/&"||i++}n=n.previousSibling}return null}function K0(n,i,o){switch(i=Bh(o),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function pu(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Ba(n)}var Xn=new Map,Q0=new Set;function qh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var _i=ae.d;ae.d={f:wx,r:Sx,D:Ax,C:xx,L:Ix,m:Rx,X:Nx,S:Cx,M:Dx};function wx(){var n=_i.f(),i=Oh();return n||i}function Sx(n){var i=Un(n);i!==null&&i.tag===5&&i.type==="form"?cv(i):_i.r(n)}var wo=typeof document>"u"?null:document;function $0(n,i,o){var u=wo;if(u&&typeof i=="string"&&i){var f=pn(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),Q0.has(f)||(Q0.add(f),n={rel:n,crossOrigin:o,href:i},u.querySelector(f)===null&&(i=u.createElement("link"),sn(i,"link",n),Lt(i),u.head.appendChild(i)))}}function Ax(n){_i.D(n),$0("dns-prefetch",n,null)}function xx(n,i){_i.C(n,i),$0("preconnect",n,i)}function Ix(n,i,o){_i.L(n,i,o);var u=wo;if(u&&n&&i){var f='link[rel="preload"][as="'+pn(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+pn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+pn(o.imageSizes)+'"]')):f+='[href="'+pn(n)+'"]';var m=f;switch(i){case"style":m=So(n);break;case"script":m=Ao(n)}Xn.has(m)||(n=E({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),Xn.set(m,n),u.querySelector(f)!==null||i==="style"&&u.querySelector(gu(m))||i==="script"&&u.querySelector(yu(m))||(i=u.createElement("link"),sn(i,"link",n),Lt(i),u.head.appendChild(i)))}}function Rx(n,i){_i.m(n,i);var o=wo;if(o&&n){var u=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+pn(u)+'"][href="'+pn(n)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Ao(n)}if(!Xn.has(m)&&(n=E({rel:"modulepreload",href:n},i),Xn.set(m,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(yu(m)))return}u=o.createElement("link"),sn(u,"link",n),Lt(u),o.head.appendChild(u)}}}function Cx(n,i,o){_i.S(n,i,o);var u=wo;if(u&&n){var f=Rr(u).hoistableStyles,m=So(n);i=i||"default";var _=f.get(m);if(!_){var T={loading:0,preload:null};if(_=u.querySelector(gu(m)))T.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":i},o),(o=Xn.get(m))&&yp(n,o);var D=_=u.createElement("link");Lt(D),sn(D,"link",n),D._p=new Promise(function(K,Z){D.onload=K,D.onerror=Z}),D.addEventListener("load",function(){T.loading|=1}),D.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Fh(_,i,u)}_={type:"stylesheet",instance:_,count:1,state:T},f.set(m,_)}}}function Nx(n,i){_i.X(n,i);var o=wo;if(o&&n){var u=Rr(o).hoistableScripts,f=Ao(n),m=u.get(f);m||(m=o.querySelector(yu(f)),m||(n=E({src:n,async:!0},i),(i=Xn.get(f))&&_p(n,i),m=o.createElement("script"),Lt(m),sn(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function Dx(n,i){_i.M(n,i);var o=wo;if(o&&n){var u=Rr(o).hoistableScripts,f=Ao(n),m=u.get(f);m||(m=o.querySelector(yu(f)),m||(n=E({src:n,async:!0,type:"module"},i),(i=Xn.get(f))&&_p(n,i),m=o.createElement("script"),Lt(m),sn(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function Y0(n,i,o,u){var f=(f=Re.current)?qh(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=So(o.href),o=Rr(f).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=So(o.href);var m=Rr(f).hoistableStyles,_=m.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,_),(m=f.querySelector(gu(n)))&&!m._p&&(_.instance=m,_.state.loading=5),Xn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Xn.set(n,o),m||Vx(f,n,o,_.state))),i&&u===null)throw Error(r(528,""));return _}if(i&&u!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ao(o),o=Rr(f).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function So(n){return'href="'+pn(n)+'"'}function gu(n){return'link[rel="stylesheet"]['+n+"]"}function X0(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function Vx(n,i,o,u){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=n.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),sn(i,"link",o),Lt(i),n.head.appendChild(i))}function Ao(n){return'[src="'+pn(n)+'"]'}function yu(n){return"script[async]"+n}function J0(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=n.querySelector('style[data-href~="'+pn(o.href)+'"]');if(u)return i.instance=u,Lt(u),u;var f=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Lt(u),sn(u,"style",f),Fh(u,o.precedence,n),i.instance=u;case"stylesheet":f=So(o.href);var m=n.querySelector(gu(f));if(m)return i.state.loading|=4,i.instance=m,Lt(m),m;u=X0(o),(f=Xn.get(f))&&yp(u,f),m=(n.ownerDocument||n).createElement("link"),Lt(m);var _=m;return _._p=new Promise(function(T,D){_.onload=T,_.onerror=D}),sn(m,"link",u),i.state.loading|=4,Fh(m,o.precedence,n),i.instance=m;case"script":return m=Ao(o.src),(f=n.querySelector(yu(m)))?(i.instance=f,Lt(f),f):(u=o,(f=Xn.get(m))&&(u=E({},o),_p(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),Lt(f),sn(f,"link",u),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Fh(u,o.precedence,n));return i.instance}function Fh(n,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,_=0;_<u.length;_++){var T=u[_];if(T.dataset.precedence===i)m=T;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function yp(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function _p(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Hh=null;function W0(n,i,o){if(Hh===null){var u=new Map,f=Hh=new Map;f.set(o,u)}else f=Hh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var m=o[f];if(!(m[xr]||m[Pt]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(i)||"";_=n+_;var T=u.get(_);T?T.push(m):u.set(_,[m])}}return u}function Z0(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function Ox(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(n=i.disabled,typeof i.precedence=="string"&&n==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function eb(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Mx(n,i,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=So(u.href),m=i.querySelector(gu(f));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=Gh.bind(n),i.then(n,n)),o.state.loading|=4,o.instance=m,Lt(m);return}m=i.ownerDocument||i,u=X0(u),(f=Xn.get(f))&&yp(u,f),m=m.createElement("link"),Lt(m);var _=m;_._p=new Promise(function(T,D){_.onload=T,_.onerror=D}),sn(m,"link",u),o.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Gh.bind(n),i.addEventListener("load",o),i.addEventListener("error",o))}}var vp=0;function kx(n,i){return n.stylesheets&&n.count===0&&Qh(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&Qh(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+i);0<n.imgBytes&&vp===0&&(vp=62500*px());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Qh(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>vp?50:800)+i);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function Gh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Kh=null;function Qh(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Kh=new Map,i.forEach(Px,n),Kh=null,Gh.call(n))}function Px(n,i){if(!(i.state.loading&4)){var o=Kh.get(n);if(o)var u=o.get(null);else{o=new Map,Kh.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var _=f[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),u=_)}u&&o.set(null,u)}f=i.instance,_=f.getAttribute("data-precedence"),m=o.get(_)||u,m===u&&o.set(null,f),o.set(_,f),this.count++,u=Gh.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var _u={$$typeof:ee,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function Lx(n,i,o,u,f,m,_,T,D){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Sr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sr(0),this.hiddenUpdates=Sr(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function tb(n,i,o,u,f,m,_,T,D,K,Z,ie){return n=new Lx(n,i,o,_,D,K,Z,ie,T),i=1,m===!0&&(i|=24),m=In(3,null,null,i),n.current=m,m.stateNode=n,i=Wd(),i.refCount++,n.pooledCache=i,i.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:i},nm(m),n}function nb(n){return n?(n=to,n):to}function rb(n,i,o,u,f,m){f=nb(f),u.context===null?u.context=f:u.pendingContext=f,u=$i(i),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=Yi(n,u,i),o!==null&&(En(o,n,i),Xl(o,n,i))}function ib(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function bp(n,i){ib(n,i),(n=n.alternate)&&ib(n,i)}function sb(n){if(n.tag===13||n.tag===31){var i=Xs(n,67108864);i!==null&&En(i,n,67108864),bp(n,67108864)}}function ab(n){if(n.tag===13||n.tag===31){var i=Vn();i=zs(i);var o=Xs(n,i);o!==null&&En(o,n,i),bp(n,i)}}var $h=!0;function zx(n,i,o,u){var f=j.T;j.T=null;var m=ae.p;try{ae.p=2,Ep(n,i,o,u)}finally{ae.p=m,j.T=f}}function Ux(n,i,o,u){var f=j.T;j.T=null;var m=ae.p;try{ae.p=8,Ep(n,i,o,u)}finally{ae.p=m,j.T=f}}function Ep(n,i,o,u){if($h){var f=Tp(u);if(f===null)op(n,i,u,Yh,o),lb(n,u);else if(Bx(f,n,i,o,u))u.stopPropagation();else if(lb(n,u),i&4&&-1<jx.indexOf(n)){for(;f!==null;){var m=Un(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=Tr(m.pendingLanes);if(_!==0){var T=m;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var D=1<<31-It(_);T.entanglements[1]|=D,_&=~D}Br(m),(We&6)===0&&(Dh=Mt()+500,fu(0))}}break;case 31:case 13:T=Xs(m,2),T!==null&&En(T,m,2),Oh(),bp(m,2)}if(m=Tp(u),m===null&&op(n,i,u,Yh,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else op(n,i,u,null,o)}}function Tp(n){return n=jn(n),wp(n)}var Yh=null;function wp(n){if(Yh=null,n=Ir(n),n!==null){var i=l(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=c(i),n!==null)return n;n=null}else if(o===31){if(n=d(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Yh=n,null}function ob(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ms()){case El:return 2;case Tl:return 8;case Oi:case Cd:return 32;case Ic:return 268435456;default:return 32}default:return 32}}var Sp=!1,as=null,os=null,ls=null,vu=new Map,bu=new Map,us=[],jx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lb(n,i){switch(n){case"focusin":case"focusout":as=null;break;case"dragenter":case"dragleave":os=null;break;case"mouseover":case"mouseout":ls=null;break;case"pointerover":case"pointerout":vu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":bu.delete(i.pointerId)}}function Eu(n,i,o,u,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},i!==null&&(i=Un(i),i!==null&&sb(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function Bx(n,i,o,u,f){switch(i){case"focusin":return as=Eu(as,n,i,o,u,f),!0;case"dragenter":return os=Eu(os,n,i,o,u,f),!0;case"mouseover":return ls=Eu(ls,n,i,o,u,f),!0;case"pointerover":var m=f.pointerId;return vu.set(m,Eu(vu.get(m)||null,n,i,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,bu.set(m,Eu(bu.get(m)||null,n,i,o,u,f)),!0}return!1}function ub(n){var i=Ir(n.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){n.blockedOn=i,ir(n.priority,function(){ab(o)});return}}else if(i===31){if(i=d(o),i!==null){n.blockedOn=i,ir(n.priority,function(){ab(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Xh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=Tp(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Ml=u,o.target.dispatchEvent(u),Ml=null}else return i=Un(o),i!==null&&sb(i),n.blockedOn=o,!1;i.shift()}return!0}function cb(n,i,o){Xh(n)&&o.delete(i)}function qx(){Sp=!1,as!==null&&Xh(as)&&(as=null),os!==null&&Xh(os)&&(os=null),ls!==null&&Xh(ls)&&(ls=null),vu.forEach(cb),bu.forEach(cb)}function Jh(n,i){n.blockedOn===i&&(n.blockedOn=null,Sp||(Sp=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,qx)))}var Wh=null;function hb(n){Wh!==n&&(Wh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Wh===n&&(Wh=null);for(var i=0;i<n.length;i+=3){var o=n[i],u=n[i+1],f=n[i+2];if(typeof u!="function"){if(wp(u||o)===null)continue;break}var m=Un(o);m!==null&&(n.splice(i,3),i-=3,Tm(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function xo(n){function i(D){return Jh(D,n)}as!==null&&Jh(as,n),os!==null&&Jh(os,n),ls!==null&&Jh(ls,n),vu.forEach(i),bu.forEach(i);for(var o=0;o<us.length;o++){var u=us[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<us.length&&(o=us[0],o.blockedOn===null);)ub(o),o.blockedOn===null&&us.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],_=f[$t]||null;if(typeof m=="function")_||hb(o);else if(_){var T=null;if(m&&m.hasAttribute("formAction")){if(f=m,_=m[$t]||null)T=_.formAction;else if(wp(f)!==null)continue}else T=_.action;typeof T=="function"?o[u+1]=T:(o.splice(u,3),u-=3),hb(o)}}}function fb(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function Ap(n){this._internalRoot=n}Zh.prototype.render=Ap.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,u=Vn();rb(o,u,n,i,null,null)},Zh.prototype.unmount=Ap.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;rb(n.current,2,null,n,null,null),Oh(),i[Ar]=null}};function Zh(n){this._internalRoot=n}Zh.prototype.unstable_scheduleHydration=function(n){if(n){var i=Oc();n={blockedOn:null,target:n,priority:i};for(var o=0;o<us.length&&i!==0&&i<us[o].priority;o++);us.splice(o,0,n),o===0&&ub(n)}};var db=e.version;if(db!=="19.2.4")throw Error(r(527,db,"19.2.4"));ae.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=g(i),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var Fx={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ef=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ef.isDisabled&&ef.supportsFiber)try{nr=ef.inject(Fx),Zt=ef}catch{}}return wu.createRoot=function(n,i){if(!a(n))throw Error(r(299));var o=!1,u="",f=bv,m=Ev,_=Tv;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=tb(n,1,!1,null,null,o,u,null,f,m,_,fb),n[Ar]=i.current,ap(n),new Ap(i)},wu.hydrateRoot=function(n,i,o){if(!a(n))throw Error(r(299));var u=!1,f="",m=bv,_=Ev,T=Tv,D=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError),o.formState!==void 0&&(D=o.formState)),i=tb(n,1,!0,i,o??null,u,f,D,m,_,T,fb),i.context=nb(null),o=i.current,u=Vn(),u=zs(u),f=$i(u),f.callback=null,Yi(o,f,u),o=u,i.current.lanes=o,Ps(i,o),Br(i),n[Ar]=i.current,ap(n),new Zh(i)},wu.version="19.2.4",wu}var wb;function eI(){if(wb)return Rp.exports;wb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Rp.exports=Zx(),Rp.exports}var tI=eI();var Sb="popstate";function nI(s={}){function e(r,a){let{pathname:l,search:c,hash:d}=r.location;return Zp("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){return typeof a=="string"?a:Xu(a)}return iI(e,t,null,s)}function Tt(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Yr(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rI(){return Math.random().toString(36).substring(2,10)}function Ab(s,e){return{usr:s.state,key:s.key,idx:e}}function Zp(s,e,t=null,r){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?cl(e):e,state:t,key:e&&e.key||r||rI()}}function Xu({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function cl(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let r=s.indexOf("?");r>=0&&(e.search=s.substring(r),s=s.substring(0,r)),s&&(e.pathname=s)}return e}function iI(s,e,t,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,c=a.history,d="POP",p=null,g=v();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function v(){return(c.state||{idx:null}).idx}function E(){d="POP";let L=v(),re=L==null?null:L-g;g=L,p&&p({action:d,location:q.location,delta:re})}function S(L,re){d="PUSH";let J=Zp(q.location,L,re);g=v()+1;let ee=Ab(J,g),le=q.createHref(J);try{c.pushState(ee,"",le)}catch(ce){if(ce instanceof DOMException&&ce.name==="DataCloneError")throw ce;a.location.assign(le)}l&&p&&p({action:d,location:q.location,delta:1})}function N(L,re){d="REPLACE";let J=Zp(q.location,L,re);g=v();let ee=Ab(J,g),le=q.createHref(J);c.replaceState(ee,"",le),l&&p&&p({action:d,location:q.location,delta:0})}function Q(L){return sI(L)}let q={get action(){return d},get location(){return s(a,c)},listen(L){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(Sb,E),p=L,()=>{a.removeEventListener(Sb,E),p=null}},createHref(L){return e(a,L)},createURL:Q,encodeLocation(L){let re=Q(L);return{pathname:re.pathname,search:re.search,hash:re.hash}},push:S,replace:N,go(L){return c.go(L)}};return q}function sI(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Tt(t,"No window.location.(origin|href) available to create URL");let r=typeof s=="string"?s:Xu(s);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function DT(s,e,t="/"){return aI(s,e,t,!1)}function aI(s,e,t,r){let a=typeof e=="string"?cl(e):e,l=Si(a.pathname||"/",t);if(l==null)return null;let c=VT(s);oI(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let g=_I(l);d=gI(c[p],g,r)}return d}function VT(s,e=[],t=[],r="",a=!1){let l=(c,d,p=a,g)=>{let v={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(r)&&p)return;Tt(v.relativePath.startsWith(r),`Absolute route path "${v.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(r.length)}let E=Ti([r,v.relativePath]),S=t.concat(v);c.children&&c.children.length>0&&(Tt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),VT(c.children,e,S,E,p)),!(c.path==null&&!c.index)&&e.push({path:E,score:mI(E,c.index),routesMeta:S})};return s.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))l(c,d);else for(let p of OT(c.path))l(c,d,!0,p)}),e}function OT(s){let e=s.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let c=OT(r.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),a&&d.push(...c),d.map(p=>s.startsWith("/")&&p===""?"/":p)}function oI(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:pI(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var lI=/^:[\w-]+$/,uI=3,cI=2,hI=1,fI=10,dI=-2,xb=s=>s==="*";function mI(s,e){let t=s.split("/"),r=t.length;return t.some(xb)&&(r+=dI),e&&(r+=cI),t.filter(a=>!xb(a)).reduce((a,l)=>a+(lI.test(l)?uI:l===""?hI:fI),r)}function pI(s,e){return s.length===e.length&&s.slice(0,-1).every((r,a)=>r===e[a])?s[s.length-1]-e[e.length-1]:0}function gI(s,e,t=!1){let{routesMeta:r}=s,a={},l="/",c=[];for(let d=0;d<r.length;++d){let p=r[d],g=d===r.length-1,v=l==="/"?e:e.slice(l.length)||"/",E=Cf({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},v),S=p.route;if(!E&&g&&t&&!r[r.length-1].route.index&&(E=Cf({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!E)return null;Object.assign(a,E.params),c.push({params:a,pathname:Ti([l,E.pathname]),pathnameBase:TI(Ti([l,E.pathnameBase])),route:S}),E.pathnameBase!=="/"&&(l=Ti([l,E.pathnameBase]))}return c}function Cf(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,r]=yI(s.path,s.caseSensitive,s.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:r.reduce((g,{paramName:v,isOptional:E},S)=>{if(v==="*"){let Q=d[S]||"";c=l.slice(0,l.length-Q.length).replace(/(.)\/+$/,"$1")}const N=d[S];return E&&!N?g[v]=void 0:g[v]=(N||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:s}}function yI(s,e=!1,t=!0){Yr(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let r=[],a="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(r.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(r.push({paramName:"*"}),a+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":s!==""&&s!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function _I(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yr(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function Si(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=s.charAt(t);return r&&r!=="/"?null:s.slice(t)||"/"}var vI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function bI(s,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof s=="string"?cl(s):s,l;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?l=Ib(t.substring(1),"/"):l=Ib(t,e)):l=e,{pathname:l,search:wI(r),hash:SI(a)}}function Ib(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Vp(s,e,t,r){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function EI(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function MT(s){let e=EI(s);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function kT(s,e,t,r=!1){let a;typeof s=="string"?a=cl(s):(a={...s},Tt(!a.pathname||!a.pathname.includes("?"),Vp("?","pathname","search",a)),Tt(!a.pathname||!a.pathname.includes("#"),Vp("#","pathname","hash",a)),Tt(!a.search||!a.search.includes("#"),Vp("#","search","hash",a)));let l=s===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let E=e.length-1;if(!r&&c.startsWith("..")){let S=c.split("/");for(;S[0]==="..";)S.shift(),E-=1;a.pathname=S.join("/")}d=E>=0?e[E]:"/"}let p=bI(a,d),g=c&&c!=="/"&&c.endsWith("/"),v=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||v)&&(p.pathname+="/"),p}var Ti=s=>s.join("/").replace(/\/\/+/g,"/"),TI=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),wI=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,SI=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,AI=class{constructor(s,e,t,r=!1){this.status=s,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function xI(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function II(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var PT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function LT(s,e){let t=s;if(typeof t!="string"||!vI.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,a=!1;if(PT)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),d=Si(c.pathname,e);c.origin===l.origin&&d!=null?t=d+c.search+c.hash:a=!0}catch{Yr(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:a,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var zT=["POST","PUT","PATCH","DELETE"];new Set(zT);var RI=["GET",...zT];new Set(RI);var hl=U.createContext(null);hl.displayName="DataRouter";var rd=U.createContext(null);rd.displayName="DataRouterState";var CI=U.createContext(!1),UT=U.createContext({isTransitioning:!1});UT.displayName="ViewTransition";var NI=U.createContext(new Map);NI.displayName="Fetchers";var DI=U.createContext(null);DI.displayName="Await";var Zn=U.createContext(null);Zn.displayName="Navigation";var fc=U.createContext(null);fc.displayName="Location";var Wr=U.createContext({outlet:null,matches:[],isDataRoute:!1});Wr.displayName="Route";var zg=U.createContext(null);zg.displayName="RouteError";var jT="REACT_ROUTER_ERROR",VI="REDIRECT",OI="ROUTE_ERROR_RESPONSE";function MI(s){if(s.startsWith(`${jT}:${VI}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function kI(s){if(s.startsWith(`${jT}:${OI}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new AI(e.status,e.statusText,e.data)}catch{}}function PI(s,{relative:e}={}){Tt(dc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=U.useContext(Zn),{hash:a,pathname:l,search:c}=mc(s,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Ti([t,l])),r.createHref({pathname:d,search:c,hash:a})}function dc(){return U.useContext(fc)!=null}function Ci(){return Tt(dc(),"useLocation() may be used only in the context of a <Router> component."),U.useContext(fc).location}var BT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function qT(s){U.useContext(Zn).static||U.useLayoutEffect(s)}function ka(){let{isDataRoute:s}=U.useContext(Wr);return s?YI():LI()}function LI(){Tt(dc(),"useNavigate() may be used only in the context of a <Router> component.");let s=U.useContext(hl),{basename:e,navigator:t}=U.useContext(Zn),{matches:r}=U.useContext(Wr),{pathname:a}=Ci(),l=JSON.stringify(MT(r)),c=U.useRef(!1);return qT(()=>{c.current=!0}),U.useCallback((p,g={})=>{if(Yr(c.current,BT),!c.current)return;if(typeof p=="number"){t.go(p);return}let v=kT(p,JSON.parse(l),a,g.relative==="path");s==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Ti([e,v.pathname])),(g.replace?t.replace:t.push)(v,g.state,g)},[e,t,l,a,s])}U.createContext(null);function FT(){let{matches:s}=U.useContext(Wr),e=s[s.length-1];return e?e.params:{}}function mc(s,{relative:e}={}){let{matches:t}=U.useContext(Wr),{pathname:r}=Ci(),a=JSON.stringify(MT(t));return U.useMemo(()=>kT(s,JSON.parse(a),r,e==="path"),[s,a,r,e])}function zI(s,e){return HT(s,e)}function HT(s,e,t,r,a){Tt(dc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=U.useContext(Zn),{matches:c}=U.useContext(Wr),d=c[c.length-1],p=d?d.params:{},g=d?d.pathname:"/",v=d?d.pathnameBase:"/",E=d&&d.route;{let J=E&&E.path||"";KT(g,!E||J.endsWith("*")||J.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${J}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${J}"> to <Route path="${J==="/"?"*":`${J}/*`}">.`)}let S=Ci(),N;if(e){let J=typeof e=="string"?cl(e):e;Tt(v==="/"||J.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${J.pathname}" was given in the \`location\` prop.`),N=J}else N=S;let Q=N.pathname||"/",q=Q;if(v!=="/"){let J=v.replace(/^\//,"").split("/");q="/"+Q.replace(/^\//,"").split("/").slice(J.length).join("/")}let L=DT(s,{pathname:q});Yr(E||L!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),Yr(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let re=FI(L&&L.map(J=>Object.assign({},J,{params:Object.assign({},p,J.params),pathname:Ti([v,l.encodeLocation?l.encodeLocation(J.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:J.pathname]),pathnameBase:J.pathnameBase==="/"?v:Ti([v,l.encodeLocation?l.encodeLocation(J.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:J.pathnameBase])})),c,t,r,a);return e&&re?U.createElement(fc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},re):re}function UI(){let s=$I(),e=xI(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",s),c=U.createElement(U.Fragment,null,U.createElement("p",null," Hey developer "),U.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",U.createElement("code",{style:l},"ErrorBoundary")," or"," ",U.createElement("code",{style:l},"errorElement")," prop on your route.")),U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),t?U.createElement("pre",{style:a},t):null,c)}var jI=U.createElement(UI,null),GT=class extends U.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const t=kI(s.digest);t&&(s=t)}let e=s!==void 0?U.createElement(Wr.Provider,{value:this.props.routeContext},U.createElement(zg.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?U.createElement(BI,{error:s},e):e}};GT.contextType=CI;var Op=new WeakMap;function BI({children:s,error:e}){let{basename:t}=U.useContext(Zn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=MI(e.digest);if(r){let a=Op.get(e);if(a)throw a;let l=LT(r.location,t);if(PT&&!Op.get(e))if(l.isExternal||r.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:r.replace}));throw Op.set(e,c),c}return U.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return s}function qI({routeContext:s,match:e,children:t}){let r=U.useContext(hl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),U.createElement(Wr.Provider,{value:s},t)}function FI(s,e=[],t=null,r=null,a=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let l=s,c=t?.errors;if(c!=null){let v=l.findIndex(E=>E.route.id&&c?.[E.route.id]!==void 0);Tt(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,v+1))}let d=!1,p=-1;if(t)for(let v=0;v<l.length;v++){let E=l[v];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(p=v),E.route.id){let{loaderData:S,errors:N}=t,Q=E.route.loader&&!S.hasOwnProperty(E.route.id)&&(!N||N[E.route.id]===void 0);if(E.route.lazy||Q){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let g=t&&r?(v,E)=>{r(v,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:II(t.matches),errorInfo:E})}:void 0;return l.reduceRight((v,E,S)=>{let N,Q=!1,q=null,L=null;t&&(N=c&&E.route.id?c[E.route.id]:void 0,q=E.route.errorElement||jI,d&&(p<0&&S===0?(KT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),Q=!0,L=null):p===S&&(Q=!0,L=E.route.hydrateFallbackElement||null)));let re=e.concat(l.slice(0,S+1)),J=()=>{let ee;return N?ee=q:Q?ee=L:E.route.Component?ee=U.createElement(E.route.Component,null):E.route.element?ee=E.route.element:ee=v,U.createElement(qI,{match:E,routeContext:{outlet:v,matches:re,isDataRoute:t!=null},children:ee})};return t&&(E.route.ErrorBoundary||E.route.errorElement||S===0)?U.createElement(GT,{location:t.location,revalidation:t.revalidation,component:q,error:N,children:J(),routeContext:{outlet:null,matches:re,isDataRoute:!0},onError:g}):J()},null)}function Ug(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function HI(s){let e=U.useContext(hl);return Tt(e,Ug(s)),e}function GI(s){let e=U.useContext(rd);return Tt(e,Ug(s)),e}function KI(s){let e=U.useContext(Wr);return Tt(e,Ug(s)),e}function jg(s){let e=KI(s),t=e.matches[e.matches.length-1];return Tt(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function QI(){return jg("useRouteId")}function $I(){let s=U.useContext(zg),e=GI("useRouteError"),t=jg("useRouteError");return s!==void 0?s:e.errors?.[t]}function YI(){let{router:s}=HI("useNavigate"),e=jg("useNavigate"),t=U.useRef(!1);return qT(()=>{t.current=!0}),U.useCallback(async(a,l={})=>{Yr(t.current,BT),t.current&&(typeof a=="number"?await s.navigate(a):await s.navigate(a,{fromRouteId:e,...l}))},[s,e])}var Rb={};function KT(s,e,t){!e&&!Rb[s]&&(Rb[s]=!0,Yr(!1,t))}U.memo(XI);function XI({routes:s,future:e,state:t,onError:r}){return HT(s,void 0,t,r,e)}function ca(s){Tt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function JI({basename:s="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:l=!1,unstable_useTransitions:c}){Tt(!dc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=s.replace(/^\/*/,"/"),p=U.useMemo(()=>({basename:d,navigator:a,static:l,unstable_useTransitions:c,future:{}}),[d,a,l,c]);typeof t=="string"&&(t=cl(t));let{pathname:g="/",search:v="",hash:E="",state:S=null,key:N="default"}=t,Q=U.useMemo(()=>{let q=Si(g,d);return q==null?null:{location:{pathname:q,search:v,hash:E,state:S,key:N},navigationType:r}},[d,g,v,E,S,N,r]);return Yr(Q!=null,`<Router basename="${d}"> is not able to match the URL "${g}${v}${E}" because it does not start with the basename, so the <Router> won't render anything.`),Q==null?null:U.createElement(Zn.Provider,{value:p},U.createElement(fc.Provider,{children:e,value:Q}))}function WI({children:s,location:e}){return zI(eg(s),e)}function eg(s,e=[]){let t=[];return U.Children.forEach(s,(r,a)=>{if(!U.isValidElement(r))return;let l=[...e,a];if(r.type===U.Fragment){t.push.apply(t,eg(r.props.children,l));return}Tt(r.type===ca,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Tt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=eg(r.props.children,l)),t.push(c)}),t}var hf="get",ff="application/x-www-form-urlencoded";function id(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function ZI(s){return id(s)&&s.tagName.toLowerCase()==="button"}function eR(s){return id(s)&&s.tagName.toLowerCase()==="form"}function tR(s){return id(s)&&s.tagName.toLowerCase()==="input"}function nR(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function rR(s,e){return s.button===0&&(!e||e==="_self")&&!nR(s)}var tf=null;function iR(){if(tf===null)try{new FormData(document.createElement("form"),0),tf=!1}catch{tf=!0}return tf}var sR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Mp(s){return s!=null&&!sR.has(s)?(Yr(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ff}"`),null):s}function aR(s,e){let t,r,a,l,c;if(eR(s)){let d=s.getAttribute("action");r=d?Si(d,e):null,t=s.getAttribute("method")||hf,a=Mp(s.getAttribute("enctype"))||ff,l=new FormData(s)}else if(ZI(s)||tR(s)&&(s.type==="submit"||s.type==="image")){let d=s.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=s.getAttribute("formaction")||d.getAttribute("action");if(r=p?Si(p,e):null,t=s.getAttribute("formmethod")||d.getAttribute("method")||hf,a=Mp(s.getAttribute("formenctype"))||Mp(d.getAttribute("enctype"))||ff,l=new FormData(d,s),!iR()){let{name:g,type:v,value:E}=s;if(v==="image"){let S=g?`${g}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else g&&l.append(g,E)}}else{if(id(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=hf,r=null,a=ff,c=s}return l&&a==="text/plain"&&(c=l,l=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Bg(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function oR(s,e,t,r){let a=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${r}`:a.pathname=`${a.pathname}.${r}`:a.pathname==="/"?a.pathname=`_root.${r}`:e&&Si(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${r}`,a}async function lR(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function uR(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function cR(s,e,t){let r=await Promise.all(s.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await lR(l,t);return c.links?c.links():[]}return[]}));return mR(r.flat(1).filter(uR).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Cb(s,e,t,r,a,l){let c=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,d=(p,g)=>t[g].pathname!==p.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==p.params["*"];return l==="assets"?e.filter((p,g)=>c(p,g)||d(p,g)):l==="data"?e.filter((p,g)=>{let v=r.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(c(p,g)||d(p,g))return!0;if(p.route.shouldRevalidate){let E=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function hR(s,e,{includeHydrateFallback:t}={}){return fR(s.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function fR(s){return[...new Set(s)]}function dR(s){let e={},t=Object.keys(s).sort();for(let r of t)e[r]=s[r];return e}function mR(s,e){let t=new Set;return new Set(e),s.reduce((r,a)=>{let l=JSON.stringify(dR(a));return t.has(l)||(t.add(l),r.push({key:l,link:a})),r},[])}function QT(){let s=U.useContext(hl);return Bg(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function pR(){let s=U.useContext(rd);return Bg(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var qg=U.createContext(void 0);qg.displayName="FrameworkContext";function $T(){let s=U.useContext(qg);return Bg(s,"You must render this element inside a <HydratedRouter> element"),s}function gR(s,e){let t=U.useContext(qg),[r,a]=U.useState(!1),[l,c]=U.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:g,onMouseLeave:v,onTouchStart:E}=e,S=U.useRef(null);U.useEffect(()=>{if(s==="render"&&c(!0),s==="viewport"){let q=re=>{re.forEach(J=>{c(J.isIntersecting)})},L=new IntersectionObserver(q,{threshold:.5});return S.current&&L.observe(S.current),()=>{L.disconnect()}}},[s]),U.useEffect(()=>{if(r){let q=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(q)}}},[r]);let N=()=>{a(!0)},Q=()=>{a(!1),c(!1)};return t?s!=="intent"?[l,S,{}]:[l,S,{onFocus:Su(d,N),onBlur:Su(p,Q),onMouseEnter:Su(g,N),onMouseLeave:Su(v,Q),onTouchStart:Su(E,N)}]:[!1,S,{}]}function Su(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function yR({page:s,...e}){let{router:t}=QT(),r=U.useMemo(()=>DT(t.routes,s,t.basename),[t.routes,s,t.basename]);return r?U.createElement(vR,{page:s,matches:r,...e}):null}function _R(s){let{manifest:e,routeModules:t}=$T(),[r,a]=U.useState([]);return U.useEffect(()=>{let l=!1;return cR(s,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[s,e,t]),r}function vR({page:s,matches:e,...t}){let r=Ci(),{future:a,manifest:l,routeModules:c}=$T(),{basename:d}=QT(),{loaderData:p,matches:g}=pR(),v=U.useMemo(()=>Cb(s,e,g,l,r,"data"),[s,e,g,l,r]),E=U.useMemo(()=>Cb(s,e,g,l,r,"assets"),[s,e,g,l,r]),S=U.useMemo(()=>{if(s===r.pathname+r.search+r.hash)return[];let q=new Set,L=!1;if(e.forEach(J=>{let ee=l.routes[J.route.id];!ee||!ee.hasLoader||(!v.some(le=>le.route.id===J.route.id)&&J.route.id in p&&c[J.route.id]?.shouldRevalidate||ee.hasClientLoader?L=!0:q.add(J.route.id))}),q.size===0)return[];let re=oR(s,d,a.unstable_trailingSlashAwareDataRequests,"data");return L&&q.size>0&&re.searchParams.set("_routes",e.filter(J=>q.has(J.route.id)).map(J=>J.route.id).join(",")),[re.pathname+re.search]},[d,a.unstable_trailingSlashAwareDataRequests,p,r,l,v,e,s,c]),N=U.useMemo(()=>hR(E,l),[E,l]),Q=_R(E);return U.createElement(U.Fragment,null,S.map(q=>U.createElement("link",{key:q,rel:"prefetch",as:"fetch",href:q,...t})),N.map(q=>U.createElement("link",{key:q,rel:"modulepreload",href:q,...t})),Q.map(({key:q,link:L})=>U.createElement("link",{key:q,nonce:t.nonce,...L,crossOrigin:L.crossOrigin??t.crossOrigin})))}function bR(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var ER=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ER&&(window.__reactRouterVersion="7.13.0")}catch{}function TR({basename:s,children:e,unstable_useTransitions:t,window:r}){let a=U.useRef();a.current==null&&(a.current=nI({window:r,v5Compat:!0}));let l=a.current,[c,d]=U.useState({action:l.action,location:l.location}),p=U.useCallback(g=>{t===!1?d(g):U.startTransition(()=>d(g))},[t]);return U.useLayoutEffect(()=>l.listen(p),[l,p]),U.createElement(JI,{basename:s,children:e,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:t})}var YT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,XT=U.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:l,replace:c,state:d,target:p,to:g,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:S,...N},Q){let{basename:q,unstable_useTransitions:L}=U.useContext(Zn),re=typeof g=="string"&&YT.test(g),J=LT(g,q);g=J.to;let ee=PI(g,{relative:a}),[le,ce,ue]=gR(r,N),w=xR(g,{replace:c,state:d,target:p,preventScrollReset:v,relative:a,viewTransition:E,unstable_defaultShouldRevalidate:S,unstable_useTransitions:L});function A(M){e&&e(M),M.defaultPrevented||w(M)}let R=U.createElement("a",{...N,...ue,href:J.absoluteURL||ee,onClick:J.isExternal||l?e:A,ref:bR(Q,ce),target:p,"data-discover":!re&&t==="render"?"true":void 0});return le&&!re?U.createElement(U.Fragment,null,R,U.createElement(yR,{page:ee})):R});XT.displayName="Link";var wR=U.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:l,to:c,viewTransition:d,children:p,...g},v){let E=mc(c,{relative:g.relative}),S=Ci(),N=U.useContext(rd),{navigator:Q,basename:q}=U.useContext(Zn),L=N!=null&&DR(E)&&d===!0,re=Q.encodeLocation?Q.encodeLocation(E).pathname:E.pathname,J=S.pathname,ee=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;t||(J=J.toLowerCase(),ee=ee?ee.toLowerCase():null,re=re.toLowerCase()),ee&&q&&(ee=Si(ee,q)||ee);const le=re!=="/"&&re.endsWith("/")?re.length-1:re.length;let ce=J===re||!a&&J.startsWith(re)&&J.charAt(le)==="/",ue=ee!=null&&(ee===re||!a&&ee.startsWith(re)&&ee.charAt(re.length)==="/"),w={isActive:ce,isPending:ue,isTransitioning:L},A=ce?e:void 0,R;typeof r=="function"?R=r(w):R=[r,ce?"active":null,ue?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let M=typeof l=="function"?l(w):l;return U.createElement(XT,{...g,"aria-current":A,className:R,ref:v,style:M,to:c,viewTransition:d},typeof p=="function"?p(w):p)});wR.displayName="NavLink";var SR=U.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:l,method:c=hf,action:d,onSubmit:p,relative:g,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:S,...N},Q)=>{let{unstable_useTransitions:q}=U.useContext(Zn),L=CR(),re=NR(d,{relative:g}),J=c.toLowerCase()==="get"?"get":"post",ee=typeof d=="string"&&YT.test(d),le=ce=>{if(p&&p(ce),ce.defaultPrevented)return;ce.preventDefault();let ue=ce.nativeEvent.submitter,w=ue?.getAttribute("formmethod")||c,A=()=>L(ue||ce.currentTarget,{fetcherKey:e,method:w,navigate:t,replace:a,state:l,relative:g,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:S});q&&t!==!1?U.startTransition(()=>A()):A()};return U.createElement("form",{ref:Q,method:J,action:re,onSubmit:r?p:le,...N,"data-discover":!ee&&s==="render"?"true":void 0})});SR.displayName="Form";function AR(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function JT(s){let e=U.useContext(hl);return Tt(e,AR(s)),e}function xR(s,{target:e,replace:t,state:r,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d,unstable_useTransitions:p}={}){let g=ka(),v=Ci(),E=mc(s,{relative:l});return U.useCallback(S=>{if(rR(S,e)){S.preventDefault();let N=t!==void 0?t:Xu(v)===Xu(E),Q=()=>g(s,{replace:N,state:r,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d});p?U.startTransition(()=>Q()):Q()}},[v,g,E,t,r,e,s,a,l,c,d,p])}var IR=0,RR=()=>`__${String(++IR)}__`;function CR(){let{router:s}=JT("useSubmit"),{basename:e}=U.useContext(Zn),t=QI(),r=s.fetch,a=s.navigate;return U.useCallback(async(l,c={})=>{let{action:d,method:p,encType:g,formData:v,body:E}=aR(l,e);if(c.navigate===!1){let S=c.fetcherKey||RR();await r(S,t,c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:v,body:E,formMethod:c.method||p,formEncType:c.encType||g,flushSync:c.flushSync})}else await a(c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:v,body:E,formMethod:c.method||p,formEncType:c.encType||g,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[r,a,e,t])}function NR(s,{relative:e}={}){let{basename:t}=U.useContext(Zn),r=U.useContext(Wr);Tt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={...mc(s||".",{relative:e})},c=Ci();if(s==null){l.search=c.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(v=>v==="")){d.delete("index"),p.filter(E=>E).forEach(E=>d.append("index",E));let v=d.toString();l.search=v?`?${v}`:""}}return(!s||s===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Ti([t,l.pathname])),Xu(l)}function DR(s,{relative:e}={}){let t=U.useContext(UT);Tt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=JT("useViewTransitionState"),a=mc(s,{relative:e});if(!t.isTransitioning)return!1;let l=Si(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=Si(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Cf(a.pathname,c)!=null||Cf(a.pathname,l)!=null}const WT=(...s)=>s.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();const VR=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const OR=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());const Nb=s=>{const e=OR(s);return e.charAt(0).toUpperCase()+e.slice(1)};var MR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const kR=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const PR=U.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:a="",children:l,iconNode:c,...d},p)=>U.createElement("svg",{ref:p,...MR,width:e,height:e,stroke:s,strokeWidth:r?Number(t)*24/Number(e):t,className:WT("lucide",a),...!l&&!kR(d)&&{"aria-hidden":"true"},...d},[...c.map(([g,v])=>U.createElement(g,v)),...Array.isArray(l)?l:[l]]));const xt=(s,e)=>{const t=U.forwardRef(({className:r,...a},l)=>U.createElement(PR,{ref:l,iconNode:e,className:WT(`lucide-${VR(Nb(s))}`,`lucide-${s}`,r),...a}));return t.displayName=Nb(s),t};const LR=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],sd=xt("arrow-left",LR);const zR=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Db=xt("award",zR);const UR=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],ZT=xt("book-open",UR);const jR=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],zo=xt("circle-check-big",jR);const BR=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],qR=xt("clock",BR);const FR=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],HR=xt("funnel",FR);const GR=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],KR=xt("github",GR);const QR=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],$R=xt("key",QR);const YR=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Vb=xt("log-out",YR);const XR=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],JR=xt("moon",XR);const WR=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],ZR=xt("party-popper",WR);const e2=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],kp=xt("refresh-ccw",e2);const t2=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],n2=xt("save",t2);const r2=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],i2=xt("search",r2);const s2=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],a2=xt("settings",s2);const o2=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],l2=xt("sun",o2);const u2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Du=xt("target",u2);const c2=[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]],h2=xt("thumbs-up",c2);const f2=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],d2=xt("triangle-alert",f2);const m2=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],tg=xt("trophy",m2);const p2=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],e1=xt("user",p2);const g2=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ob=xt("x",g2),y2=({sections:s,progress:e,onSelectTheme:t,onSelectLesson:r})=>{const[a,l]=U.useState(""),c=U.useMemo(()=>{const d=a.trim().toLowerCase();return d?(s||[]).map(p=>{const g=p.items.filter(v=>v.name.toLowerCase().includes(d));return{...p,items:g}}).filter(p=>p.items.length>0):s||[]},[s,a]);return x.jsxs("div",{className:"page container",children:[x.jsx("div",{style:{display:"flex",alignItems:"flex-start",marginTop:"60px"},children:x.jsxs("div",{children:[x.jsx("h1",{className:"page-title",children:"Entranement Code de la Route"}),x.jsx("p",{className:"muted",children:"Choisissez un sujet et lancez le Quiz."})]})}),x.jsxs("div",{className:"search",style:{position:"relative"},children:[x.jsx(i2,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--muted)"}}),x.jsx("input",{className:"input",type:"search",placeholder:"Rechercher un thme",value:a,onChange:d=>l(d.target.value),"aria-label":"Rechercher un thme",style:{paddingLeft:"40px"}})]}),c.map((d,p)=>x.jsxs("div",{className:"section mb-5",children:[d.title&&x.jsx("h2",{className:"mt-4 mb-3",style:{fontSize:"1.4rem"},children:d.title}),x.jsx("div",{className:"theme-grid",children:d.items.map(g=>{const v=e&&e[g.id],E=v?v.score:null,S=E!==null,N=g.id==="examen_B"||d.title==="Examen",Q=g.lessonFile||!N&&g.file;return x.jsxs("div",{className:"theme-card card",style:{padding:"16px",display:"flex",flexDirection:"column",gap:"12px",position:"relative",overflow:"hidden",...N?{borderColor:"var(--warning)",background:"linear-gradient(to bottom right, var(--surface), rgba(245, 158, 11, 0.1))",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.15)"}:{}},children:[S&&x.jsxs("div",{style:{position:"absolute",top:0,right:0,background:"var(--primary)",color:"white",fontSize:"10px",padding:"2px 8px",borderBottomLeftRadius:"8px"},children:[E,"/",g.totalQuestions]}),x.jsxs("div",{style:{flex:1},children:[x.jsx("div",{className:"theme-name",style:{fontWeight:600,marginBottom:4,paddingRight:S?"40px":"0",...N?{color:"var(--warning)",fontSize:"1.1rem"}:{}},children:g.name}),g.totalQuestions>0&&x.jsxs("div",{className:"theme-meta",style:{color:"var(--muted)",fontSize:"13px"},children:[g.totalQuestions," questions"]})]}),x.jsxs("div",{style:{display:"flex",gap:"8px"},children:[g.file?x.jsx("button",{type:"button",className:`btn-primary ${N?"btn-exam":""}`,style:{flex:1,padding:"8px",display:"grid",placeItems:"center",...N?{background:"var(--warning)",borderColor:"var(--warning)",color:"#000"}:{}},onClick:()=>t(g),children:"Quiz"}):x.jsx("button",{type:"button",className:"btn-primary",style:{flex:1,padding:"8px",opacity:.5,cursor:"not-allowed",display:"grid",placeItems:"center"},disabled:!0,children:"Quiz"}),!N&&x.jsxs("button",{type:"button",className:"btn-ghost",style:{flex:1,padding:"8px",border:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",...Q?{}:{opacity:.5,cursor:"not-allowed"}},disabled:!Q,onClick:()=>{if(!Q)return;const q=g.lessonFile||(g.file?g.file.replace(".json",".html"):null);q&&r(q)},children:[x.jsx(ZT,{size:16})," Leon"]})]})]},g.id)})})]},p)),c.length===0&&x.jsx("p",{className:"muted text-center mt-5",children:"Aucun rsultat trouv."})]})},Fg=({onOpenProfile:s,toggleTheme:e,isDarkMode:t,showProfileButton:r=!0})=>x.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",display:"flex",gap:"4px",zIndex:1e3,background:"var(--surface)",padding:"4px",borderRadius:"30px",border:"1px solid var(--border)",boxShadow:"var(--shadow-sm)"},children:[r&&x.jsx("button",{className:"btn-ghost",onClick:s,title:"Mon Profil",style:{width:"36px",height:"36px",display:"grid",placeItems:"center",padding:0,borderRadius:"50%"},children:x.jsx(e1,{size:20})}),x.jsx("button",{className:"theme-toggle btn-ghost",onClick:e,title:t?"Mode clair":"Mode sombre",style:{width:"36px",height:"36px",display:"grid",placeItems:"center",padding:0,borderRadius:"50%"},children:t?x.jsx(l2,{size:20}):x.jsx(JR,{size:20})})]}),_2=({sections:s,progress:e,toggleTheme:t,isDarkMode:r})=>{const a=ka(),l=d=>{a(`/quiz/${d.id}`)},c=d=>{a(`/lecon/${encodeURIComponent(d)}`)};return x.jsxs(x.Fragment,{children:[x.jsx(Fg,{onOpenProfile:()=>a("/profil"),toggleTheme:t,isDarkMode:r}),x.jsx(y2,{sections:s,progress:e,onSelectTheme:l,onSelectLesson:c})]})},v2="modulepreload",b2=function(s){return"/permis-online-free/"+s},Mb={},Pp=function(e,t,r){let a=Promise.resolve();if(t&&t.length>0){let p=function(g){return Promise.all(g.map(v=>Promise.resolve(v).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");a=p(t.map(g=>{if(g=b2(g),g in Mb)return;Mb[g]=!0;const v=g.endsWith(".css"),E=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${E}`))return;const S=document.createElement("link");if(S.rel=v?"stylesheet":v2,v||(S.as="script"),S.crossOrigin="",S.href=g,d&&S.setAttribute("nonce",d),document.head.appendChild(S),v)return new Promise((N,Q)=>{S.addEventListener("load",N),S.addEventListener("error",()=>Q(new Error(`Unable to preload CSS for ${g}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return a.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})},E2=({question:s,onAnswer:e,currentIndex:t,total:r,instantFeedback:a,autoPlayAudio:l,onNext:c,isLastQuestion:d,fileName:p,onQuestionUpdated:g})=>{const[v,E]=U.useState(null),[S,N]=U.useState(!1),[Q,q]=U.useState(!1),[L,re]=U.useState(""),[J,ee]=U.useState(null),[le,ce]=U.useState(!1),ue=3e4,[w,A]=U.useState(ue),R=U.useRef(null),M=U.useRef(null),O=U.useRef(!1),[k,C]=U.useState(!1),[Ie,Le]=U.useState(null),[j,ae]=U.useState(null),[te,ge]=U.useState(""),[Ae,V]=U.useState(null),H=Ie||s,W=!!Ie;U.useEffect(()=>{C(!1),Le(null),ae(null),ge("")},[s?.id]),U.useEffect(()=>{const fe=()=>{const Xe=window.speechSynthesis.getVoices().filter(Ot=>Ot.lang.startsWith("fr")),Qe=Xe.find(Ot=>Ot.name.includes("Google"))||Xe.find(Ot=>Ot.name.includes("Microsoft"))||Xe.find(Ot=>Ot.name.includes("Natural"))||Xe[0];V(Qe)};return fe(),window.speechSynthesis.onvoiceschanged=fe,()=>{window.speechSynthesis.onvoiceschanged=null}},[]),U.useEffect(()=>{if(l&&H){window.speechSynthesis.cancel();let fe=H.question||"";if(H.propositions&&Array.isArray(H.propositions)){const Xe=H.propositions.map(Qe=>`${Qe.letter}... ${Qe.text}`).join(". ");fe+=`. ${Xe}`}else H.type==="yes_no"&&(fe+=". A... Oui. B... Non.");const ze=new SpeechSynthesisUtterance(fe);Ae&&(ze.voice=Ae),ze.lang="fr-FR",ze.rate=1,window.speechSynthesis.speak(ze)}else window.speechSynthesis.cancel();return()=>{window.speechSynthesis.cancel()}},[H,l,Ae]),U.useEffect(()=>{if(E(null),N(!1),re(""),ee(null),ce(!1),A(ue),clearInterval(R.current),clearTimeout(M.current),W&&(j===null||j==="error"))return;const ze=Date.now();return R.current=setInterval(()=>{const Xe=Date.now()-ze,Qe=Math.max(0,ue-Xe);A(Qe)},100),M.current=setTimeout(()=>{O.current||(ce(!0),E(null),N(!0),ee("incorrect"),e({isCorrect:!1,userAnswer:null,correctAnswer:H.correctAnswer,questionId:H.id}))},ue),()=>{clearInterval(R.current),clearTimeout(M.current)}},[H?.id,H?.question,W,j]),U.useEffect(()=>{O.current=S},[S]);const de=U.useMemo(()=>{const fe=H?.correctAnswer??"";return String(fe).trim()},[H?.correctAnswer]),Te=fe=>{const ze=String(fe??"").trim(),Xe=String(de??"").trim(),Qe=Number(ze.replace(",",".")),Ot=Number(Xe.replace(",","."));return!Number.isNaN(Qe)&&!Number.isNaN(Ot)&&ze!==""&&Xe!==""?Qe===Ot:ze.toUpperCase()===Xe.toUpperCase()},Re=fe=>{if(S)return;E(fe),N(!0);const ze=fe===H.correctAnswer;ee(ze?"correct":"incorrect"),clearInterval(R.current),clearTimeout(M.current),e({isCorrect:ze,userAnswer:fe,correctAnswer:H.correctAnswer,questionId:H.id})},ke=()=>{if(S)return;const fe=String(L??"").trim();if(!fe)return;const ze=Te(fe);E(fe),N(!0),ee(ze?"correct":"incorrect"),clearInterval(R.current),clearTimeout(M.current),e({isCorrect:ze,userAnswer:fe,correctAnswer:H.correctAnswer,questionId:H.id})},vt=fe=>le?"dimmed":S&&a?fe===H.correctAnswer?"correct":fe===v&&v!==H.correctAnswer?"incorrect":"dimmed":v==null?"":fe===v?"selected":"dimmed",ft=async()=>{const fe=localStorage.getItem("groq_api_key");if(!fe){alert("Veuillez ajouter votre cl API Groq dans le Profil.");return}C(!0),ae(null);try{const{fixQuestionWithGroq:ze}=await Pp(async()=>{const{fixQuestionWithGroq:Qe}=await import("./groq-BVVAa691-1771357926682.js");return{fixQuestionWithGroq:Qe}},[]),Xe=await ze(s,fe);Le(Xe)}catch(ze){console.error(ze),alert("Erreur lors de la correction : "+ze.message)}finally{C(!1)}},Zr=async()=>{if(!Ie)return;const{saveQuestionLocally:fe}=await Pp(async()=>{const{saveQuestionLocally:Ze}=await import("./api-Y8rDLHL4-1771357926682.js");return{saveQuestionLocally:Ze}},[]),{saveQuestionToGitHub:ze,getUser:Xe}=await Pp(async()=>{const{saveQuestionToGitHub:Ze,getUser:bt}=await import("./githubClient-BBVHbWf_-1771357926682.js");return{saveQuestionToGitHub:Ze,getUser:bt}},[]);ae("saving");const Qe=s.sourceFile||p;if(!Qe){ae("error"),ge("Erreur: Nom de fichier manquant");return}try{await fe(Qe,s.id,Ie)}catch{}const Ot=localStorage.getItem("github_token");if(!Ot){navigator.clipboard.writeText(JSON.stringify(Ie,null,2)),ae("success"),ge("Copi (Pas de token GitHub)");return}try{const Ze=await Xe(Ot),bt="skyreks00",br="permis-online-free",bl=`public/data/${Qe}`,za=`fix(content): correct question ${s.id} in ${Qe} (Manual+AI)`,Mt=await ze(Ot,bt,br,bl,s.id,Ie,za,Ze);ae("success"),Mt.type==="pr"?ge(x.jsx("a",{href:Mt.url,target:"_blank",rel:"noreferrer",children:"PR cre !"})):Mt.type==="commit"?ge(x.jsx("a",{href:Mt.url,target:"_blank",rel:"noreferrer",children:"Commit effectu !"})):ge("Sauvegard !"),g&&g(Ie),setTimeout(()=>{Le(null),ae(null)},2e3)}catch(Ze){ae("error"),ge("Erreur GitHub: "+(Ze.message||"Problme de sauvegarde"))}},er=(fe,ze)=>{Le(Xe=>({...Xe,[fe]:ze}))},Vi=(fe,ze)=>{Le(Xe=>{const Qe=[...Xe.propositions];return Qe[fe]={...Qe[fe],text:ze},{...Xe,propositions:Qe}})},tr=fe=>{W&&er("correctAnswer",fe)};return x.jsxs("div",{className:`question-card ${le?"timed-out":""} ${W?"correction-mode":""}`,style:W?{border:"2px solid var(--warning)",boxShadow:"0 0 15px rgba(255, 193, 7, 0.3)"}:{},children:[x.jsxs("div",{className:"question-header",children:[x.jsxs("div",{className:"question-progress","aria-live":"polite",children:["Question ",Math.min(t+1,r)," / ",r,W&&x.jsx("span",{className:"text-warning font-bold ml-2",children:" CORRECTION SUGGRE"})]}),localStorage.getItem("groq_api_key")&&!W&&x.jsx("button",{onClick:ft,disabled:k,className:"btn-ghost",style:{fontSize:"12px",padding:"4px 8px",display:"flex",alignItems:"center",gap:"4px"},title:"Suggrer une correction",children:k?"...":" Corriger"})]}),W&&x.jsxs("div",{className:"correction-toolbar",children:[x.jsxs("div",{className:"correction-badge",children:[x.jsx("div",{className:"correction-badge-dot"}),x.jsx("span",{children:"DITION MASTER"})]}),x.jsxs("div",{className:"correction-actions",children:[x.jsx("button",{onClick:()=>Le(null),className:"btn-cancel",disabled:j==="saving",children:"Annuler"}),x.jsx("button",{onClick:Zr,className:"btn-save",disabled:j==="saving",children:j==="saving"?"...":"Enregistrer"})]})]}),W&&x.jsx("div",{className:"correction-floating-bar",children:x.jsxs("div",{className:"correction-input-wrapper",children:[x.jsx("textarea",{className:"correction-explanation-input",rows:1,placeholder:"Message de commit / explication...",value:Ie.explanation||"",onChange:fe=>er("explanation",fe.target.value),onFocus:fe=>fe.target.rows=3,onBlur:fe=>!fe.target.value&&(fe.target.rows=1),disabled:!!j}),j==="error"&&x.jsxs("div",{className:"correction-error-msg",children:[x.jsx(Ob,{size:12})," ",te]})]})}),(j==="success"||j==="saving")&&x.jsxs("div",{className:"toast-notification",children:[x.jsx(zo,{size:24,className:j==="success"?"text-success":"text-muted"}),x.jsxs("div",{children:[x.jsx("div",{className:"font-bold text-sm",children:j==="success"?"Correction envoye !":"Envoi en cours..."}),j==="success"&&x.jsx("div",{className:"text-xs text-muted",children:te}),j==="saving"&&x.jsx("div",{className:"text-xs text-muted",children:"Vous pouvez continuer  jouer"})]})]}),S&&x.jsxs("div",{className:"quiz-nav-buttons",children:[a&&s?.explanation&&x.jsxs("button",{onClick:()=>q(!0),className:"btn-explanation",children:[x.jsx(ZT,{size:20}),"Explication"]}),x.jsx("button",{type:"button",onClick:c,className:"btn-next",children:d?"Terminer":"Suivant"})]}),x.jsxs("div",{className:"question-main",style:{opacity:W&&(j===null||j==="error")?.6:1,filter:W&&(j===null||j==="error")?"grayscale(100%)":"none",transition:"all 0.3s ease"},children:[x.jsx("div",{className:"question-left",children:H.image?x.jsx("div",{className:"question-image",children:x.jsx("img",{src:H.image,alt:"Illustration"})}):x.jsx("div",{className:"question-image placeholder"})}),x.jsxs("div",{className:"question-right",children:[x.jsx("div",{className:"question-text",children:x.jsx("div",{children:W?x.jsxs("div",{className:"correction-question-container",children:[x.jsx("textarea",{className:"correction-question-input",value:Ie.question,onChange:fe=>er("question",fe.target.value),onInput:fe=>{fe.target.style.height="auto",fe.target.style.height=fe.target.scrollHeight+"px"},disabled:!!j}),x.jsx("div",{className:"correction-underline"})]}):x.jsx("div",{className:"question-text-inner",children:H.question})})}),x.jsx("div",{className:"answers",children:(H.type==="multiple_choice"||H.type==="single_choice")&&H.propositions?H.propositions.map((fe,ze)=>{const Xe=S&&a&&fe.letter===H.correctAnswer;return x.jsxs("button",{className:`answer-btn transition-all duration-300 ${vt(fe.letter)} 
                      ${W?"!bg-transparent border-none shadow-none opacity-80 hover:opacity-100":""}
                      ${W&&fe.letter===Ie.correctAnswer?"scale-[1.02] !opacity-100":""}`,onClick:()=>W?tr(fe.letter):Re(fe.letter),disabled:j==="saving"||j==="success"&&W,children:[x.jsx("div",{className:`answer-key shrink-0 transition-all !bg-transparent border border-white/10
                        ${W?"hover:border-warning/50 hover:text-warning":""}
                        ${W&&fe.letter===Ie.correctAnswer?"border-warning text-warning bg-warning/10":""}`,onClick:Qe=>{W&&(Qe.stopPropagation(),tr(fe.letter))},children:fe.letter}),W?x.jsxs("div",{className:"correction-answer-wrapper",children:[x.jsx("input",{className:"correction-answer-input",value:fe.text,onChange:Qe=>Vi(ze,Qe.target.value),onClick:Qe=>Qe.stopPropagation(),disabled:!!j,placeholder:"Texte de la rponse..."}),x.jsx("div",{className:"correction-answer-underline"})]}):x.jsx("div",{className:"answer-text",children:fe.text}),(Xe||W&&fe.letter===Ie.correctAnswer)&&x.jsx(zo,{size:18,className:`answer-check transition-all ${W?"text-warning":"text-success"}`})]},`${fe.letter}-${ze}`)}):H.type==="yes_no"?x.jsxs(x.Fragment,{children:[x.jsxs("button",{className:`answer-btn ${vt("OUI")} ${W&&Ie.correctAnswer==="OUI"?"border-warning border-2":""}`,onClick:()=>W?tr("OUI"):Re("OUI"),disabled:j==="saving",children:[x.jsx("div",{className:`answer-key ${W?"cursor-pointer hover:bg-warning hover:text-black transition-colors":""}`,children:"A"}),x.jsx("div",{className:"answer-text",children:"Oui"}),S&&a&&H.correctAnswer==="OUI"||W&&Ie.correctAnswer==="OUI"?x.jsx(zo,{size:20,className:"answer-check text-warning"}):null]}),x.jsxs("button",{className:`answer-btn ${vt("NON")} ${W&&Ie.correctAnswer==="NON"?"border-warning border-2":""}`,onClick:()=>W?tr("NON"):Re("NON"),disabled:j==="saving",children:[x.jsx("div",{className:`answer-key ${W?"cursor-pointer hover:bg-warning hover:text-black transition-colors":""}`,children:"B"}),x.jsx("div",{className:"answer-text",children:"Non"}),S&&a&&H.correctAnswer==="NON"||W&&Ie.correctAnswer==="NON"?x.jsx(zo,{size:20,className:"answer-check text-warning"}):null]})]}):x.jsx("div",{className:"number-wrap",children:x.jsxs("div",{className:`number-field ${W?"border-warning":S?a?J==="correct"?"correct":"incorrect":"selected":""}`,children:[x.jsx("input",{className:"number-input",type:"text",inputMode:"numeric",placeholder:W?"Rponse correcte...":"Votre rponse",value:W?Ie.correctAnswer:L,disabled:j==="saving",onChange:fe=>W?er("correctAnswer",fe.target.value):re(fe.target.value),onKeyDown:fe=>{fe.key==="Enter"&&!W&&ke()}}),!W&&x.jsx("button",{className:"number-submit",type:"button",onClick:ke,disabled:S||!String(L??"").trim(),children:"OK"})]})})}),x.jsx("div",{className:"countdown","aria-hidden":"true",children:x.jsx("div",{className:"countdown-track",children:x.jsx("div",{className:"countdown-fill",style:{width:`${Math.max(0,Math.min(100,w/ue*100))}%`}})})})]})]}),Q&&x.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.75)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",backdropFilter:"blur(4px)"},onClick:()=>q(!1),children:x.jsxs("div",{style:{background:"var(--surface)",color:"var(--foreground)",padding:"24px",borderRadius:"16px",maxWidth:"600px",width:"100%",maxHeight:"90vh",overflowY:"auto",position:"relative",boxShadow:"var(--shadow-lg)",border:"1px solid var(--border)"},onClick:fe=>fe.stopPropagation(),className:"animate-in fade-in zoom-in-95 duration-200",children:[x.jsx("button",{onClick:()=>q(!1),style:{position:"absolute",top:"16px",right:"16px",background:"transparent",border:"none",color:"var(--muted-foreground)",cursor:"pointer",padding:"4px"},children:x.jsx(Ob,{size:24})}),x.jsx("div",{style:{lineHeight:"1.6",fontSize:"1.05rem"},children:s.explanation.replace(/^\s*INFO\W*PERMIS\W*DE\W*CONDUIRE\W*/i,"").replace(/^\s*Signification\W*/i,"").replace(/^\s*Explication\W*/i,"").replace(/^\s*LE(?:|C)ON\s*\d+(?:\s*[\-:]\s*[^.\n]*)?(?:[.\n]\s*)?/i,"").trim()})]})})]})},T2=({questions:s,themeName:e,onFinish:t,onExit:r,instantFeedback:a,autoPlayAudio:l,fileName:c})=>{const[d,p]=U.useState(0),[g,v]=U.useState(0),[E,S]=U.useState(!1),[N,Q]=U.useState(s);U.useRef(0);const q=U.useRef([]);Lu.useEffect(()=>{const le=ce=>{ce.key==="Enter"&&E&&J()};return window.addEventListener("keydown",le),()=>window.removeEventListener("keydown",le)},[E,d]);const L=N[d],re=({isCorrect:le,userAnswer:ce,correctAnswer:ue,questionId:w})=>{console.log("DEBUG: handleAnswer called",{currentQuestionIndex:d,questionId:w,isCorrect:le}),q.current[d]={questionId:w,userAnswer:ce,correctAnswer:ue,isCorrect:le},console.log("DEBUG: answersRef updated",JSON.stringify(q.current));const A=q.current.filter(R=>R&&R.isCorrect).length;console.log("DEBUG: newScore calculated",A),v(A),S(!0)},J=()=>{if(d<N.length-1)p(d+1),S(!1);else{const le=q.current.filter(ce=>ce&&ce.isCorrect).length;t({score:le,answers:q.current})}},ee=async le=>{const ce=[...N];ce[d]=le,Q(ce)};return x.jsxs("div",{className:"quiz",children:[x.jsx("div",{className:"quiz-topbar",children:x.jsxs("button",{className:"exit-btn",onClick:r,style:{display:"flex",alignItems:"center",gap:"6px"},children:[x.jsx(sd,{size:18})," Retour"]})}),x.jsx("div",{className:"quiz-content",children:x.jsx(E2,{title:e,question:L,onAnswer:re,currentIndex:d,total:N.length,instantFeedback:a,autoPlayAudio:l,onNext:J,isLastQuestion:d===N.length-1,fileName:c,onQuestionUpdated:ee},`${d}-${L?.id??"q"}`)})]})},w2="https://raw.githubusercontent.com/skyreks00/permis-online-free/main/public/data",t1=async(s,e=null)=>{try{console.log(`[ContentLoader] Fetching ${s} from local data...`);const r=await fetch(`/permis-online-free/data/${s}?_=${Date.now()}`);if(r.ok){const a=await r.json();return console.log(`[ContentLoader] Successfully loaded ${s} from local data`),a}}catch(r){console.warn(`[ContentLoader] Local fetch failed for ${s}`,r.message)}const t=`${w2}/${s}?_=${Date.now()}`;try{console.log(`[ContentLoader] Fetching ${s} from GitHub...`);const r=await fetch(t);if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);const a=await r.json();return console.log(`[ContentLoader] Successfully loaded ${s} from GitHub`),a}catch(r){console.warn(`[ContentLoader] Failed to load ${s} from GitHub:`,r.message),console.log(`[ContentLoader] Trying local fallback for ${s}...`)}try{console.log(`[ContentLoader] Fetching ${s} from local data...`);const r=await fetch(`data/${s}`);if(r.ok){const a=await r.json();return console.log(`[ContentLoader] Successfully loaded ${s} from local data`),a}}catch{console.warn(`[ContentLoader] Local fetch also failed for ${s}`)}if(e)return console.log(`[ContentLoader] Using bundled fallback for ${s}`),e;throw new Error(`Failed to load ${s} from all sources`)},ng=async(s,e=null)=>t1(s,e),S2=async(s=null)=>t1("themes.json",s),A2=({sections:s,onFinishQuiz:e,onPatchProgress:t,instantFeedback:r,autoPlayAudio:a,toggleTheme:l,isDarkMode:c,onMistakesCorrected:d})=>{const{themeId:p}=FT(),g=ka(),v=Ci(),[E,S]=U.useState([]),[N,Q]=U.useState(null),[q,L]=U.useState(!0),[re,J]=U.useState(null);U.useEffect(()=>{const le=async()=>{if(v.state?.questions&&v.state?.theme){Q(v.state.theme),S(v.state.questions),L(!1);return}if(!s||s.length===0)return;if(L(!0),J(null),v.state&&v.state.questions){Q({id:"review",name:v.state.title||"Rvision des erreurs",file:null}),S(v.state.questions),L(!1);return}let ce=null;if(p==="examen_B")ce={id:"examen_B",name:"Examen Blanc",file:"examen_B.json"};else for(const ue of s){const A=(ue.items||ue.themes||[]).find(R=>R.id===p);if(A){ce=A;break}}if(!ce){J("Thme non trouv"),L(!1);return}Q(ce);try{let w=(await ng(ce.file)).questions||[];w.length===0&&(w=(await(await fetch(`/permis-online-free/data/${ce.file}`)).json()).questions||[]);const A=[...w].sort(()=>Math.random()-.5);ce.id.includes("examen")?S(A.slice(0,50)):S(A)}catch(ue){console.error("Failed to load questions",ue),J("Erreur de chargement des questions")}finally{L(!1)}};(s.length>0||v.state&&v.state.questions)&&le()},[p,s,v.state]);const ee=le=>{const ce=typeof le=="number"?le:le.score,ue=typeof le=="object"?le.answers:[],w=v.state&&v.state.isReview;if(e&&!w)e(N.id,ce,E.length,le.answers);else if(w&&t){const R=(le.answers||[]).filter(M=>M&&M.isCorrect);if(R.length>0){const M={};E.forEach(k=>{k.originalThemeId&&(M[k.id]=k.originalThemeId)});const O={};R.forEach(k=>{const C=M[k.questionId];C&&(O[C]||(O[C]=[]),O[C].push(k))}),Object.keys(O).forEach(k=>{t(k,O[k])})}}g("/resultats",{state:{score:ce,total:E.length,questions:E,answers:ue,isExamMode:N.id.includes("examen"),isReviewSession:w}})};return q||!s||s.length===0?x.jsxs("div",{className:"p-8 text-center",children:[x.jsx("span",{className:"loading loading-spinner loading-lg"}),x.jsx("br",{}),"Chargement du quiz..."]}):re?x.jsxs("div",{className:"p-8 text-center text-error",children:[re," ",x.jsx("br",{}),x.jsx("button",{onClick:()=>g("/"),className:"btn mt-4",children:"Retour"})]}):x.jsxs(x.Fragment,{children:[x.jsx(Fg,{showProfileButton:!1,toggleTheme:l,isDarkMode:c}),N&&E.length>0&&x.jsx(T2,{questions:E,themeName:N.name,onFinish:ee,onExit:()=>g("/"),instantFeedback:r&&!N.id.includes("examen"),autoPlayAudio:a,fileName:N.file})]})},x2=({score:s,total:e,questions:t=[],answers:r=[],showReview:a=!1,onRestart:l,onBackToThemes:c,isExamMode:d,isReviewOnly:p=!1,customErrorItems:g=null,onBackToProfile:v})=>{const E=e>0?Math.round(s/e*100):0,N=p?{icon:x.jsx(Du,{size:48,className:"text-primary"}),text:"Mode Rvision",tone:"info"}:d?e-s>=9?{icon:x.jsx(Du,{size:48,className:"text-danger"}),text:"CHEC - 9 fautes ou plus",tone:"danger"}:{icon:x.jsx(tg,{size:48,className:"text-success"}),text:"RUSSI !",tone:"success"}:E>=90?{icon:x.jsx(tg,{size:48,className:"text-success"}),text:"Excellent !",tone:"success"}:E>=75?{icon:x.jsx(h2,{size:48,className:"text-success"}),text:"Trs bien !",tone:"success"}:E>=50?{icon:x.jsx(Db,{size:48,className:"text-warning"}),text:"Pas mal !",tone:"warn"}:{icon:x.jsx(Du,{size:48,className:"text-danger"}),text:"Continue  t'entraner !",tone:"danger"},Q=g||(t||[]).map((L,re)=>({q:L,a:r?.[re],idx:re})).filter(({a:L})=>L&&L.isCorrect===!1),q=L=>L?L.replace(/^\s*INFO\W*PERMIS\W*DE\W*CONDUIRE\W*/i,"").replace(/^\s*Signification\W*/i,"").replace(/^\s*Explication\W*/i,"").replace(/^\s*LE(?:|C)ON\s*\d+(?:\s*[\-:]\s*[^.\n]*)?(?:[.\n]\s*)?/i,"").trim():"";return x.jsxs("div",{className:"results container",style:{textAlign:"center"},children:[p?x.jsxs("div",{style:{margin:"20px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[x.jsx(Du,{size:32,className:"text-primary"}),x.jsx("h1",{style:{margin:0},children:"Rvision des erreurs"})]}),x.jsx("p",{className:"text-muted",children:"Voici les points  retravailler. Prenez le temps de lire les explications."}),x.jsxs("button",{onClick:v,className:"btn-secondary flex items-center gap-2",children:[x.jsx(sd,{size:20})," Retour au profil"]})]}):x.jsxs(x.Fragment,{children:[x.jsxs("div",{style:{margin:"20px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[N.icon,x.jsx("h1",{style:{margin:0},children:N.text})]}),x.jsxs("p",{style:{fontSize:"1.2rem",marginBottom:"20px"},children:["Score: ",x.jsx("strong",{children:s})," / ",e," (",E,"%)"]}),x.jsxs("p",{children:["Correctes: ",x.jsx("strong",{children:s})," | Incorrectes: ",x.jsx("strong",{children:e-s})]}),x.jsxs("div",{className:"results-actions",style:{justifyContent:"center"},children:[x.jsx("button",{type:"button",className:"btn-primary",onClick:l,children:"Recommencer"}),x.jsx("button",{type:"button",onClick:c,children:"Choisir un autre thme"}),x.jsx("button",{type:"button",className:"btn-secondary",onClick:v,children:"Retour au profil"})]})]}),(a||p)&&x.jsx("div",{style:{marginTop:"30px",textAlign:"left",display:"flex",flexDirection:"column",gap:"32px"},children:Q.length===0?x.jsxs("div",{className:"card",style:{padding:"32px",textAlign:"center"},children:[x.jsxs("p",{className:"muted",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"1.2rem",margin:0},children:[x.jsx(ZR,{size:24})," Aucune erreur  rviser. Bravo !"]}),p&&x.jsx("button",{onClick:v,className:"btn-primary mt-4",children:"Retour au profil"})]}):Q.map(({q:L,a:re,idx:J})=>x.jsxs("div",{className:"question-card card",children:[x.jsx("div",{className:"question-header",children:x.jsxs("div",{className:"question-progress",style:{color:"var(--danger)"},children:["Question ",J+1]})}),x.jsxs("div",{className:"question-main",children:[x.jsx("div",{className:"question-left",children:L.image?x.jsx("div",{className:"question-image",children:x.jsx("img",{src:L.image,alt:"Illustration"})}):x.jsx("div",{className:"question-image placeholder"})}),x.jsxs("div",{className:"question-right",children:[x.jsx("div",{className:"question-text",children:x.jsx("div",{className:"question-text-inner",children:L.question})}),x.jsx("div",{className:"answers",children:L.type==="multiple_choice"&&L.propositions?L.propositions.map(ee=>{const le=ee.letter===L.correctAnswer,ce=re?.userAnswer===ee.letter;let ue="";return le?ue="correct":ce?ue="incorrect":ue="dimmed",x.jsxs("button",{className:`answer-btn ${ue}`,disabled:!0,style:{opacity:1,cursor:"default"},children:[x.jsx("div",{className:"answer-key",children:ee.letter}),x.jsx("div",{className:"answer-text",children:ee.text}),le&&x.jsx(zo,{size:20,className:"text-success"})]},ee.letter)}):L.type==="yes_no"?x.jsx(x.Fragment,{children:["OUI","NON"].map((ee,le)=>{const ce=le===0?"A":"B",ue=le===0?"Oui":"Non",w=ee===L.correctAnswer,A=re?.userAnswer===ee;let R="";return w?R="correct":A?R="incorrect":R="dimmed",x.jsxs("button",{className:`answer-btn ${R}`,disabled:!0,style:{opacity:1,cursor:"default"},children:[x.jsx("div",{className:"answer-key",children:ce}),x.jsx("div",{className:"answer-text",children:ue}),w&&x.jsx(zo,{size:20,className:"text-success"})]},ee)})}):x.jsxs("div",{className:"p-4 border rounded bg-surface-2",children:[x.jsxs("p",{children:[x.jsx("strong",{children:"Votre rponse:"})," ",re?.userAnswer||""]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Rponse attendue:"})," ",L.correctAnswer]})]})})]})]}),L.explanation&&x.jsxs("div",{className:"explanation animate-fade-in",children:[x.jsxs("div",{className:"explanation-title",style:{display:"flex",alignItems:"center",gap:"8px"},children:[x.jsx(Db,{size:20,className:"text-primary"}),"Conseil"]}),x.jsx("div",{className:"explanation-text",style:{fontSize:"1.05rem",lineHeight:1.6},children:q(L.explanation)})]})]},`${L.id}-${J}`))})]})},kb=({toggleTheme:s,isDarkMode:e})=>{const t=Ci(),r=ka(),a=t.state||{};U.useEffect(()=>{t.state||console.warn("No state found in ResultsPage, redirecting to home.")},[t.state]);const l=()=>{const g=a.results?{...a,...a.results}:a;if(g.isReviewSession){const v=(g.questions||[]).filter((E,S)=>{const N=g.answers?.[S];return N&&N.isCorrect===!1});if(v.length>0){r("/quiz/review",{state:{questions:v,title:g.title||"Rvision des erreurs",isReview:!0}});return}}if(g.questions&&g.questions.length>0){const E=g.questions[0].originalThemeId||g.themeId;r(E?`/quiz/${E}`:"/")}else r("/")},c=()=>{r("/")},d=()=>{r("/profil")},p=a.results?{...a,...a.results}:a;return x.jsx("div",{className:"page animate-fade-in",children:x.jsx(x2,{...p,onRestart:l,onBackToThemes:c,onBackToProfile:d,toggleTheme:s,isDarkMode:e,showReview:!0})})},I2=()=>{};var Pb={};const n1=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let a=s.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},R2=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const a=s[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=s[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=s[t++],c=s[t++],d=s[t++],p=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const l=s[t++],c=s[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},r1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<s.length;a+=3){const l=s[a],c=a+1<s.length,d=c?s[a+1]:0,p=a+2<s.length,g=p?s[a+2]:0,v=l>>2,E=(l&3)<<4|d>>4;let S=(d&15)<<2|g>>6,N=g&63;p||(N=64,c||(S=64)),r.push(t[v],t[E],t[S],t[N])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(n1(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):R2(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<s.length;){const l=t[s.charAt(a++)],d=a<s.length?t[s.charAt(a)]:0;++a;const g=a<s.length?t[s.charAt(a)]:64;++a;const E=a<s.length?t[s.charAt(a)]:64;if(++a,l==null||d==null||g==null||E==null)throw new C2;const S=l<<2|d>>4;if(r.push(S),g!==64){const N=d<<4&240|g>>2;if(r.push(N),E!==64){const Q=g<<6&192|E;r.push(Q)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class C2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const N2=function(s){const e=n1(s);return r1.encodeByteArray(e,!0)},i1=function(s){return N2(s).replace(/\./g,"")},s1=function(s){try{return r1.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function a1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const D2=()=>a1().__FIREBASE_DEFAULTS__,V2=()=>{if(typeof process>"u"||typeof Pb>"u")return;const s=Pb.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},O2=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&s1(s[1]);return e&&JSON.parse(e)},ad=()=>{try{return I2()||D2()||V2()||O2()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},M2=s=>ad()?.emulatorHosts?.[s],o1=()=>ad()?.config,l1=s=>ad()?.[`_${s}`];class k2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function fl(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function u1(s){return(await fetch(s,{credentials:"include"})).ok}const zu={};function P2(){const s={prod:[],emulator:[]};for(const e of Object.keys(zu))zu[e]?s.emulator.push(e):s.prod.push(e);return s}function L2(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let Lb=!1;function z2(s,e){if(typeof window>"u"||typeof document>"u"||!fl(window.location.host)||zu[s]===e||zu[s]||Lb)return;zu[s]=e;function t(S){return`__firebase__banner__${S}`}const r="__firebase__banner",l=P2().prod.length>0;function c(){const S=document.getElementById(r);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,N){S.setAttribute("width","24"),S.setAttribute("id",N),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Lb=!0,c()},S}function v(S,N){S.setAttribute("id",N),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=L2(r),N=t("text"),Q=document.getElementById(N)||document.createElement("span"),q=t("learnmore"),L=document.getElementById(q)||document.createElement("a"),re=t("preprendIcon"),J=document.getElementById(re)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const ee=S.element;d(ee),v(L,q);const le=g();p(J,re),ee.append(J,Q,L,le),document.body.appendChild(ee)}l?(Q.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Q.innerText="Preview backend running in this workspace."),Q.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function Kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function U2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kt())}function c1(){const s=ad()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function j2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function B2(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function q2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function F2(){const s=Kt();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function h1(){return!c1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function f1(){return!c1()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function d1(){try{return typeof indexedDB=="object"}catch{return!1}}function H2(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const G2="FirebaseError";class Ni extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=G2,Object.setPrototypeOf(this,Ni.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pc.prototype.create)}}class pc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?K2(l,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Ni(a,d,r)}}function K2(s,e){return s.replace(Q2,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const Q2=/\{\$([^}]+)}/g;function $2(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Aa(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=s[a],c=e[a];if(zb(l)&&zb(c)){if(!Aa(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function zb(s){return s!==null&&typeof s=="object"}function gc(s){const e=[];for(const[t,r]of Object.entries(s))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Y2(s,e){const t=new X2(s,e);return t.subscribe.bind(t)}class X2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");J2(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=Lp),a.error===void 0&&(a.error=Lp),a.complete===void 0&&(a.complete=Lp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function J2(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function Lp(){}function vr(s){return s&&s._delegate?s._delegate:s}class xa{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ha="[DEFAULT]";class W2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new k2;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eC(e))try{this.getOrInitializeService({instanceIdentifier:ha})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=ha){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ha){return this.instances.has(e)}getOptions(e=ha){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Z2(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ha){return this.component?this.component.multipleInstances?e:ha:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Z2(s){return s===ha?void 0:s}function eC(s){return s.instantiationMode==="EAGER"}class tC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new W2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Fe;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Fe||(Fe={}));const nC={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},rC=Fe.INFO,iC={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},sC=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),a=iC[e];if(a)console[a](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hg{constructor(e){this.name=e,this._logLevel=rC,this._logHandler=sC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const aC=(s,e)=>e.some(t=>s instanceof t);let Ub,jb;function oC(){return Ub||(Ub=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lC(){return jb||(jb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const m1=new WeakMap,rg=new WeakMap,p1=new WeakMap,zp=new WeakMap,Gg=new WeakMap;function uC(s){const e=new Promise((t,r)=>{const a=()=>{s.removeEventListener("success",l),s.removeEventListener("error",c)},l=()=>{t(Es(s.result)),a()},c=()=>{r(s.error),a()};s.addEventListener("success",l),s.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&m1.set(t,s)}).catch(()=>{}),Gg.set(e,s),e}function cC(s){if(rg.has(s))return;const e=new Promise((t,r)=>{const a=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",c),s.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{r(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",l),s.addEventListener("error",c),s.addEventListener("abort",c)});rg.set(s,e)}let ig={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return rg.get(s);if(e==="objectStoreNames")return s.objectStoreNames||p1.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Es(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function hC(s){ig=s(ig)}function fC(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(Up(this),e,...t);return p1.set(r,e.sort?e.sort():[e]),Es(r)}:lC().includes(s)?function(...e){return s.apply(Up(this),e),Es(m1.get(this))}:function(...e){return Es(s.apply(Up(this),e))}}function dC(s){return typeof s=="function"?fC(s):(s instanceof IDBTransaction&&cC(s),aC(s,oC())?new Proxy(s,ig):s)}function Es(s){if(s instanceof IDBRequest)return uC(s);if(zp.has(s))return zp.get(s);const e=dC(s);return e!==s&&(zp.set(s,e),Gg.set(e,s)),e}const Up=s=>Gg.get(s);function mC(s,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(s,e),d=Es(c);return r&&c.addEventListener("upgradeneeded",p=>{r(Es(c.result),p.oldVersion,p.newVersion,Es(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const pC=["get","getKey","getAll","getAllKeys","count"],gC=["put","add","delete","clear"],jp=new Map;function Bb(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(jp.get(e))return jp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=gC.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||pC.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,a?"readwrite":"readonly");let g=p.store;return r&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&p.done]))[0]};return jp.set(e,l),l}hC(s=>({...s,get:(e,t,r)=>Bb(e,t)||s.get(e,t,r),has:(e,t)=>!!Bb(e,t)||s.has(e,t)}));class yC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(_C(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function _C(s){return s.getComponent()?.type==="VERSION"}const sg="@firebase/app",qb="0.14.8";const Ai=new Hg("@firebase/app"),vC="@firebase/app-compat",bC="@firebase/analytics-compat",EC="@firebase/analytics",TC="@firebase/app-check-compat",wC="@firebase/app-check",SC="@firebase/auth",AC="@firebase/auth-compat",xC="@firebase/database",IC="@firebase/data-connect",RC="@firebase/database-compat",CC="@firebase/functions",NC="@firebase/functions-compat",DC="@firebase/installations",VC="@firebase/installations-compat",OC="@firebase/messaging",MC="@firebase/messaging-compat",kC="@firebase/performance",PC="@firebase/performance-compat",LC="@firebase/remote-config",zC="@firebase/remote-config-compat",UC="@firebase/storage",jC="@firebase/storage-compat",BC="@firebase/firestore",qC="@firebase/ai",FC="@firebase/firestore-compat",HC="firebase",GC="12.9.0";const ag="[DEFAULT]",KC={[sg]:"fire-core",[vC]:"fire-core-compat",[EC]:"fire-analytics",[bC]:"fire-analytics-compat",[wC]:"fire-app-check",[TC]:"fire-app-check-compat",[SC]:"fire-auth",[AC]:"fire-auth-compat",[xC]:"fire-rtdb",[IC]:"fire-data-connect",[RC]:"fire-rtdb-compat",[CC]:"fire-fn",[NC]:"fire-fn-compat",[DC]:"fire-iid",[VC]:"fire-iid-compat",[OC]:"fire-fcm",[MC]:"fire-fcm-compat",[kC]:"fire-perf",[PC]:"fire-perf-compat",[LC]:"fire-rc",[zC]:"fire-rc-compat",[UC]:"fire-gcs",[jC]:"fire-gcs-compat",[BC]:"fire-fst",[FC]:"fire-fst-compat",[qC]:"fire-vertex","fire-js":"fire-js",[HC]:"fire-js-all"};const Nf=new Map,QC=new Map,og=new Map;function Fb(s,e){try{s.container.addComponent(e)}catch(t){Ai.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Ho(s){const e=s.name;if(og.has(e))return Ai.debug(`There were multiple attempts to register component ${e}.`),!1;og.set(e,s);for(const t of Nf.values())Fb(t,s);for(const t of QC.values())Fb(t,s);return!0}function Kg(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function pr(s){return s==null?!1:s.settings!==void 0}const $C={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ts=new pc("app","Firebase",$C);class YC{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ts.create("app-deleted",{appName:this._name})}}const dl=GC;function g1(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r={name:ag,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw Ts.create("bad-app-name",{appName:String(a)});if(t||(t=o1()),!t)throw Ts.create("no-options");const l=Nf.get(a);if(l){if(Aa(t,l.options)&&Aa(r,l.config))return l;throw Ts.create("duplicate-app",{appName:a})}const c=new tC(a);for(const p of og.values())c.addComponent(p);const d=new YC(t,r,c);return Nf.set(a,d),d}function XC(s=ag){const e=Nf.get(s);if(!e&&s===ag&&o1())return g1();if(!e)throw Ts.create("no-app",{appName:s});return e}function ws(s,e,t){let r=KC[s]??s;t&&(r+=`-${t}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${r}" with version "${e}":`];a&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ai.warn(c.join(" "));return}Ho(new xa(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const JC="firebase-heartbeat-database",WC=1,Ju="firebase-heartbeat-store";let Bp=null;function y1(){return Bp||(Bp=mC(JC,WC,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Ju)}catch(t){console.warn(t)}}}}).catch(s=>{throw Ts.create("idb-open",{originalErrorMessage:s.message})})),Bp}async function ZC(s){try{const t=(await y1()).transaction(Ju),r=await t.objectStore(Ju).get(_1(s));return await t.done,r}catch(e){if(e instanceof Ni)Ai.warn(e.message);else{const t=Ts.create("idb-get",{originalErrorMessage:e?.message});Ai.warn(t.message)}}}async function Hb(s,e){try{const r=(await y1()).transaction(Ju,"readwrite");await r.objectStore(Ju).put(e,_1(s)),await r.done}catch(t){if(t instanceof Ni)Ai.warn(t.message);else{const r=Ts.create("idb-set",{originalErrorMessage:t?.message});Ai.warn(r.message)}}}function _1(s){return`${s.name}!${s.options.appId}`}const eN=1024,tN=30;class nN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new iN(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Gb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>tN){const a=sN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ai.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Gb(),{heartbeatsToSend:t,unsentEntries:r}=rN(this._heartbeatsCache.heartbeats),a=i1(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Ai.warn(e),""}}}function Gb(){return new Date().toISOString().substring(0,10)}function rN(s,e=eN){const t=[];let r=s.slice();for(const a of s){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),Kb(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),Kb(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class iN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return d1()?H2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await ZC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Hb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Hb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Kb(s){return i1(JSON.stringify({version:2,heartbeats:s})).length}function sN(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}function aN(s){Ho(new xa("platform-logger",e=>new yC(e),"PRIVATE")),Ho(new xa("heartbeat",e=>new nN(e),"PRIVATE")),ws(sg,qb,s),ws(sg,qb,"esm2020"),ws("fire-js","")}aN("");var oN="firebase",lN="12.9.0";ws(oN,lN,"app");function v1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uN=v1,b1=new pc("auth","Firebase",v1());const Df=new Hg("@firebase/auth");function cN(s,...e){Df.logLevel<=Fe.WARN&&Df.warn(`Auth (${dl}): ${s}`,...e)}function df(s,...e){Df.logLevel<=Fe.ERROR&&Df.error(`Auth (${dl}): ${s}`,...e)}function Xr(s,...e){throw $g(s,...e)}function yr(s,...e){return $g(s,...e)}function Qg(s,e,t){const r={...uN(),[e]:t};return new pc("auth","Firebase",r).create(e,{appName:s.name})}function ba(s){return Qg(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hN(s,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Xr(s,"argument-error"),Qg(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $g(s,...e){if(typeof s!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(t,...r)}return b1.create(s,...e)}function Ce(s,e,...t){if(!s)throw $g(e,...t)}function vi(s){const e="INTERNAL ASSERTION FAILED: "+s;throw df(e),new Error(e)}function xi(s,e){s||vi(e)}function lg(){return typeof self<"u"&&self.location?.href||""}function fN(){return Qb()==="http:"||Qb()==="https:"}function Qb(){return typeof self<"u"&&self.location?.protocol||null}function dN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fN()||B2()||"connection"in navigator)?navigator.onLine:!0}function mN(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class yc{constructor(e,t){this.shortDelay=e,this.longDelay=t,xi(t>e,"Short delay should be less than long delay!"),this.isMobile=U2()||q2()}get(){return dN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Yg(s,e){xi(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class E1{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const pN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const gN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],yN=new yc(3e4,6e4);function Xg(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function ml(s,e,t,r,a={}){return T1(s,a,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const d=gc({key:s.config.apiKey,...c}).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const g={method:e,headers:p,...l};return j2()||(g.referrerPolicy="no-referrer"),s.emulatorConfig&&fl(s.emulatorConfig.host)&&(g.credentials="include"),E1.fetch()(await w1(s,s.config.apiHost,t,d),g)})}async function T1(s,e,t){s._canInitEmulator=!1;const r={...pN,...e};try{const a=new vN(s),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw nf(s,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw nf(s,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw nf(s,"email-already-in-use",c);if(p==="USER_DISABLED")throw nf(s,"user-disabled",c);const v=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Qg(s,v,g);Xr(s,v)}}catch(a){if(a instanceof Ni)throw a;Xr(s,"network-request-failed",{message:String(a)})}}async function _N(s,e,t,r,a={}){const l=await ml(s,e,t,r,a);return"mfaPendingCredential"in l&&Xr(s,"multi-factor-auth-required",{_serverResponse:l}),l}async function w1(s,e,t,r){const a=`${e}${t}?${r}`,l=s,c=l.config.emulator?Yg(s.config,a):`${s.config.apiScheme}://${a}`;return gN.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class vN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(yr(this.auth,"network-request-failed")),yN.get())})}}function nf(s,e,t){const r={appName:s.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=yr(s,e,r);return a.customData._tokenResponse=t,a}async function bN(s,e){return ml(s,"POST","/v1/accounts:delete",e)}async function Vf(s,e){return ml(s,"POST","/v1/accounts:lookup",e)}function Uu(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function EN(s,e=!1){const t=vr(s),r=await t.getIdToken(e),a=Jg(r);Ce(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:r,authTime:Uu(qp(a.auth_time)),issuedAtTime:Uu(qp(a.iat)),expirationTime:Uu(qp(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function qp(s){return Number(s)*1e3}function Jg(s){const[e,t,r]=s.split(".");if(e===void 0||t===void 0||r===void 0)return df("JWT malformed, contained fewer than 3 sections"),null;try{const a=s1(t);return a?JSON.parse(a):(df("Failed to decode base64 JWT payload"),null)}catch(a){return df("Caught error parsing JWT payload as JSON",a?.toString()),null}}function $b(s){const e=Jg(s);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Wu(s,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ni&&TN(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function TN({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class wN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class ug{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Uu(this.lastLoginAt),this.creationTime=Uu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Of(s){const e=s.auth,t=await s.getIdToken(),r=await Wu(s,Vf(e,{idToken:t}));Ce(r?.users.length,e,"internal-error");const a=r.users[0];s._notifyReloadListener(a);const l=a.providerUserInfo?.length?S1(a.providerUserInfo):[],c=AN(s.providerData,l),d=s.isAnonymous,p=!(s.email&&a.passwordHash)&&!c?.length,g=d?p:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new ug(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(s,v)}async function SN(s){const e=vr(s);await Of(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function AN(s,e){return[...s.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function S1(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function xN(s,e){const t=await T1(s,{},async()=>{const r=gc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=s.config,c=await w1(s,a,"/v1/token",`key=${l}`),d=await s._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:r};return s.emulatorConfig&&fl(s.emulatorConfig.host)&&(p.credentials="include"),E1.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function IN(s,e){return ml(s,"POST","/v2/accounts:revokeToken",Xg(s,e))}class Uo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$b(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=$b(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await xN(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,c=new Uo;return r&&(Ce(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(Ce(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Ce(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Uo,this.toJSON())}_performRefresh(){return vi("not implemented")}}function hs(s,e){Ce(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class gr{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new wN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new ug(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Wu(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return EN(this,e)}reload(){return SN(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new gr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Of(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pr(this.auth.app))return Promise.reject(ba(this.auth));const e=await this.getIdToken();return await Wu(this,bN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:N,providerData:Q,stsTokenManager:q}=t;Ce(E&&q,e,"internal-error");const L=Uo.fromJSON(this.name,q);Ce(typeof E=="string",e,"internal-error"),hs(r,e.name),hs(a,e.name),Ce(typeof S=="boolean",e,"internal-error"),Ce(typeof N=="boolean",e,"internal-error"),hs(l,e.name),hs(c,e.name),hs(d,e.name),hs(p,e.name),hs(g,e.name),hs(v,e.name);const re=new gr({uid:E,auth:e,email:a,emailVerified:S,displayName:r,isAnonymous:N,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:L,createdAt:g,lastLoginAt:v});return Q&&Array.isArray(Q)&&(re.providerData=Q.map(J=>({...J}))),p&&(re._redirectEventId=p),re}static async _fromIdTokenResponse(e,t,r=!1){const a=new Uo;a.updateFromServerResponse(t);const l=new gr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await Of(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];Ce(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?S1(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new Uo;d.updateFromIdToken(r);const p=new gr({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new ug(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(p,g),p}}const Yb=new Map;function bi(s){xi(s instanceof Function,"Expected a class definition");let e=Yb.get(s);return e?(xi(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,Yb.set(s,e),e)}class A1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}A1.type="NONE";const Xb=A1;function mf(s,e,t){return`firebase:${s}:${e}:${t}`}class jo{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=mf(this.userKey,a.apiKey,l),this.fullPersistenceKey=mf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Vf(this.auth,{idToken:e}).catch(()=>{});return t?gr._fromGetAccountInfoResponse(this.auth,t,e):null}return gr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new jo(bi(Xb),e,r);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||bi(Xb);const c=mf(r,e.config.apiKey,e.name);let d=null;for(const g of t)try{const v=await g._get(c);if(v){let E;if(typeof v=="string"){const S=await Vf(e,{idToken:v}).catch(()=>{});if(!S)break;E=await gr._fromGetAccountInfoResponse(e,S,v)}else E=gr._fromJSON(e,v);g!==l&&(d=E),l=g;break}}catch{}const p=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new jo(l,e,r):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new jo(l,e,r))}}function Jb(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(C1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(x1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(D1(e))return"Blackberry";if(V1(e))return"Webos";if(I1(e))return"Safari";if((e.includes("chrome/")||R1(e))&&!e.includes("edge/"))return"Chrome";if(N1(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(t);if(r?.length===2)return r[1]}return"Other"}function x1(s=Kt()){return/firefox\//i.test(s)}function I1(s=Kt()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function R1(s=Kt()){return/crios\//i.test(s)}function C1(s=Kt()){return/iemobile/i.test(s)}function N1(s=Kt()){return/android/i.test(s)}function D1(s=Kt()){return/blackberry/i.test(s)}function V1(s=Kt()){return/webos/i.test(s)}function Wg(s=Kt()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function RN(s=Kt()){return Wg(s)&&!!window.navigator?.standalone}function CN(){return F2()&&document.documentMode===10}function O1(s=Kt()){return Wg(s)||N1(s)||V1(s)||D1(s)||/windows phone/i.test(s)||C1(s)}function M1(s,e=[]){let t;switch(s){case"Browser":t=Jb(Kt());break;case"Worker":t=`${Jb(Kt())}-${s}`;break;default:t=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${dl}/${r}`}class NN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function DN(s,e={}){return ml(s,"GET","/v2/passwordPolicy",Xg(s,e))}const VN=6;class ON{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??VN,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class MN{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wb(this),this.idTokenSubscription=new Wb(this),this.beforeStateQueue=new NN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=b1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=bi(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await jo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Vf(this,{idToken:e}),r=await gr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(pr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=r?._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&d?.user&&(r=d.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Of(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=mN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pr(this.app))return Promise.reject(ba(this));const t=e?vr(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pr(this.app)?Promise.reject(ba(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pr(this.app)?Promise.reject(ba(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await DN(this),t=new ON(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new pc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await IN(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&bi(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await jo.create(this,[bi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,a);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=M1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(pr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&cN(`Error while retrieving App Check token: ${e.error}`),e?.token}}function od(s){return vr(s)}class Wb{constructor(e){this.auth=e,this.observer=null,this.addObserver=Y2(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Zg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kN(s){Zg=s}function PN(s){return Zg.loadJS(s)}function LN(){return Zg.gapiScript}function zN(s){return`__${s}${Math.floor(Math.random()*1e6)}`}function UN(s,e){const t=Kg(s,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Aa(l,e??{}))return a;Xr(a,"already-initialized")}return t.initialize({options:e})}function jN(s,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(bi);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function BN(s,e,t){const r=od(s);Ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=k1(e),{host:c,port:d}=qN(e),p=d===null?"":`:${d}`,g={url:`${l}//${c}${p}/`},v=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){Ce(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ce(Aa(g,r.config.emulator)&&Aa(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,fl(c)?(u1(`${l}//${c}${p}`),z2("Auth",!0)):FN()}function k1(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function qN(s){const e=k1(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:Zb(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:Zb(c)}}}function Zb(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function FN(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class P1{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return vi("not implemented")}_getIdTokenResponse(e){return vi("not implemented")}_linkToIdToken(e,t){return vi("not implemented")}_getReauthenticationResolver(e){return vi("not implemented")}}async function Bo(s,e){return _N(s,"POST","/v1/accounts:signInWithIdp",Xg(s,e))}const HN="http://localhost";class Ia extends P1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ia(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Xr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=t;if(!r||!a)return null;const c=new Ia(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Bo(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Bo(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Bo(e,t)}buildRequest(){const e={requestUri:HN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=gc(t)}return e}}class ey{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class _c extends ey{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ps extends _c{constructor(){super("facebook.com")}static credential(e){return Ia._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ps.credential(e.oauthAccessToken)}catch{return null}}}ps.FACEBOOK_SIGN_IN_METHOD="facebook.com";ps.PROVIDER_ID="facebook.com";class gs extends _c{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ia._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return gs.credential(t,r)}catch{return null}}}gs.GOOGLE_SIGN_IN_METHOD="google.com";gs.PROVIDER_ID="google.com";class Hr extends _c{constructor(){super("github.com")}static credential(e){return Ia._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hr.credential(e.oauthAccessToken)}catch{return null}}}Hr.GITHUB_SIGN_IN_METHOD="github.com";Hr.PROVIDER_ID="github.com";class ys extends _c{constructor(){super("twitter.com")}static credential(e,t){return Ia._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ys.credential(t,r)}catch{return null}}}ys.TWITTER_SIGN_IN_METHOD="twitter.com";ys.PROVIDER_ID="twitter.com";class Go{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await gr._fromIdTokenResponse(e,r,a),c=eE(r);return new Go({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=eE(r);return new Go({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function eE(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class Mf extends Ni{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Mf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new Mf(e,t,r,a)}}function L1(s,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Mf._fromErrorAndOperation(s,l,e,r):l})}async function GN(s,e,t=!1){const r=await Wu(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Go._forOperation(s,"link",r)}async function KN(s,e,t=!1){const{auth:r}=s;if(pr(r.app))return Promise.reject(ba(r));const a="reauthenticate";try{const l=await Wu(s,L1(r,a,e,s),t);Ce(l.idToken,r,"internal-error");const c=Jg(l.idToken);Ce(c,r,"internal-error");const{sub:d}=c;return Ce(s.uid===d,r,"user-mismatch"),Go._forOperation(s,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Xr(r,"user-mismatch"),l}}async function QN(s,e,t=!1){if(pr(s.app))return Promise.reject(ba(s));const r="signIn",a=await L1(s,r,e),l=await Go._fromIdTokenResponse(s,r,a);return t||await s._updateCurrentUser(l.user),l}function $N(s,e,t,r){return vr(s).onIdTokenChanged(e,t,r)}function YN(s,e,t){return vr(s).beforeAuthStateChanged(e,t)}function XN(s){return vr(s).signOut()}const kf="__sak";class z1{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(kf,"1"),this.storage.removeItem(kf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const JN=1e3,WN=10;class U1 extends z1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=O1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);CN()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,WN):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},JN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}U1.type="LOCAL";const ZN=U1;class j1 extends z1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}j1.type="SESSION";const B1=j1;function eD(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class ld{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new ld(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const d=Array.from(c).map(async g=>g(t.origin,l)),p=await eD(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ld.receivers=[];function ty(s="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return s+t}class tD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const g=ty("",20);a.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(E){const S=E;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(S.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Qr(){return window}function nD(s){Qr().location.href=s}function q1(){return typeof Qr().WorkerGlobalScope<"u"&&typeof Qr().importScripts=="function"}async function rD(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function iD(){return navigator?.serviceWorker?.controller||null}function sD(){return q1()?self:null}const F1="firebaseLocalStorageDb",aD=1,Pf="firebaseLocalStorage",H1="fbase_key";class vc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ud(s,e){return s.transaction([Pf],e?"readwrite":"readonly").objectStore(Pf)}function oD(){const s=indexedDB.deleteDatabase(F1);return new vc(s).toPromise()}function cg(){const s=indexedDB.open(F1,aD);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(Pf,{keyPath:H1})}catch(a){t(a)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(Pf)?e(r):(r.close(),await oD(),e(await cg()))})})}async function tE(s,e,t){const r=ud(s,!0).put({[H1]:e,value:t});return new vc(r).toPromise()}async function lD(s,e){const t=ud(s,!1).get(e),r=await new vc(t).toPromise();return r===void 0?null:r.value}function nE(s,e){const t=ud(s,!0).delete(e);return new vc(t).toPromise()}const uD=800,cD=3;class G1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>cD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return q1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ld._getInstance(sD()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await rD(),!this.activeServiceWorker)return;this.sender=new tD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||iD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cg();return await tE(e,kf,"1"),await nE(e,kf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>tE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>lD(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>nE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=ud(a,!1).getAll();return new vc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),uD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}G1.type="LOCAL";const hD=G1;new yc(3e4,6e4);function K1(s,e){return e?bi(e):(Ce(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class ny extends P1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Bo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Bo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function fD(s){return QN(s.auth,new ny(s),s.bypassAuthState)}function dD(s){const{auth:e,user:t}=s;return Ce(t,e,"internal-error"),KN(t,new ny(s),s.bypassAuthState)}async function mD(s){const{auth:e,user:t}=s;return Ce(t,e,"internal-error"),GN(t,new ny(s),s.bypassAuthState)}class Q1{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fD;case"linkViaPopup":case"linkViaRedirect":return mD;case"reauthViaPopup":case"reauthViaRedirect":return dD;default:Xr(this.auth,"internal-error")}}resolve(e){xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const pD=new yc(2e3,1e4);async function gD(s,e,t){if(pr(s.app))return Promise.reject(yr(s,"operation-not-supported-in-this-environment"));const r=od(s);hN(s,e,ey);const a=K1(r,t);return new _a(r,"signInViaPopup",e,a).executeNotNull()}class _a extends Q1{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,_a.currentPopupAction&&_a.currentPopupAction.cancel(),_a.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){xi(this.filter.length===1,"Popup operations only handle one event");const e=ty();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(yr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(yr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_a.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,pD.get())};e()}}_a.currentPopupAction=null;const yD="pendingRedirect",pf=new Map;class _D extends Q1{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=pf.get(this.auth._key());if(!e){try{const r=await vD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}pf.set(this.auth._key(),e)}return this.bypassAuthState||pf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vD(s,e){const t=TD(e),r=ED(s);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function bD(s,e){pf.set(s._key(),e)}function ED(s){return bi(s._redirectPersistence)}function TD(s){return mf(yD,s.config.apiKey,s.name)}async function wD(s,e,t=!1){if(pr(s.app))return Promise.reject(ba(s));const r=od(s),a=K1(r,e),c=await new _D(r,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const SD=600*1e3;class AD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!xD(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!$1(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(yr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=SD&&this.cachedEventUids.clear(),this.cachedEventUids.has(rE(e))}saveEventToCache(e){this.cachedEventUids.add(rE(e)),this.lastProcessedEventTime=Date.now()}}function rE(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function $1({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function xD(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $1(s);default:return!1}}async function ID(s,e={}){return ml(s,"GET","/v1/projects",e)}const RD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CD=/^https?/;async function ND(s){if(s.config.emulator)return;const{authorizedDomains:e}=await ID(s);for(const t of e)try{if(DD(t))return}catch{}Xr(s,"unauthorized-domain")}function DD(s){const e=lg(),{protocol:t,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const c=new URL(s);return c.hostname===""&&r===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!CD.test(t))return!1;if(RD.test(s))return r===s;const a=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const VD=new yc(3e4,6e4);function iE(){const s=Qr().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function OD(s){return new Promise((e,t)=>{function r(){iE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{iE(),t(yr(s,"network-request-failed"))},timeout:VD.get()})}if(Qr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Qr().gapi?.load)r();else{const a=zN("iframefcb");return Qr()[a]=()=>{gapi.load?r():t(yr(s,"network-request-failed"))},PN(`${LN()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw gf=null,e})}let gf=null;function MD(s){return gf=gf||OD(s),gf}const kD=new yc(5e3,15e3),PD="__/auth/iframe",LD="emulator/auth/iframe",zD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jD(s){const e=s.config;Ce(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?Yg(e,LD):`https://${s.config.authDomain}/${PD}`,r={apiKey:e.apiKey,appName:s.name,v:dl},a=UD.get(s.config.apiHost);a&&(r.eid=a);const l=s._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${gc(r).slice(1)}`}async function BD(s){const e=await MD(s),t=Qr().gapi;return Ce(t,s,"internal-error"),e.open({where:document.body,url:jD(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zD,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=yr(s,"network-request-failed"),d=Qr().setTimeout(()=>{l(c)},kD.get());function p(){Qr().clearTimeout(d),a(r)}r.ping(p).then(p,()=>{l(c)})}))}const qD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FD=500,HD=600,GD="_blank",KD="http://localhost";class sE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function QD(s,e,t,r=FD,a=HD){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const p={...qD,width:r.toString(),height:a.toString(),top:l,left:c},g=Kt().toLowerCase();t&&(d=R1(g)?GD:t),x1(g)&&(e=e||KD,p.scrollbars="yes");const v=Object.entries(p).reduce((S,[N,Q])=>`${S}${N}=${Q},`,"");if(RN(g)&&d!=="_self")return $D(e||"",d),new sE(null);const E=window.open(e||"",d,v);Ce(E,s,"popup-blocked");try{E.focus()}catch{}return new sE(E)}function $D(s,e){const t=document.createElement("a");t.href=s,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const YD="__/auth/handler",XD="emulator/auth/handler",JD=encodeURIComponent("fac");async function aE(s,e,t,r,a,l){Ce(s.config.authDomain,s,"auth-domain-config-required"),Ce(s.config.apiKey,s,"invalid-api-key");const c={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:r,v:dl,eventId:a};if(e instanceof ey){e.setDefaultLanguage(s.languageCode),c.providerId=e.providerId||"",$2(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(e instanceof _c){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}s.tenantId&&(c.tid=s.tenantId);const d=c;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const p=await s._getAppCheckToken(),g=p?`#${JD}=${encodeURIComponent(p)}`:"";return`${WD(s)}?${gc(d).slice(1)}${g}`}function WD({config:s}){return s.emulator?Yg(s,XD):`https://${s.authDomain}/${YD}`}const Fp="webStorageSupport";class ZD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=B1,this._completeRedirectFn=wD,this._overrideRedirectResult=bD}async _openPopup(e,t,r,a){xi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await aE(e,t,r,lg(),a);return QD(e,l,ty())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await aE(e,t,r,lg(),a);return nD(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(xi(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await BD(e),r=new AD(e);return t.register("authEvent",a=>(Ce(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Fp,{type:Fp},a=>{const l=a?.[0]?.[Fp];l!==void 0&&t(!!l),Xr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ND(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return O1()||I1()||Wg()}}const eV=ZD;var oE="@firebase/auth",lE="1.12.0";class tV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function nV(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rV(s){Ho(new xa("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;Ce(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:c,authDomain:d,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:M1(s)},g=new MN(r,a,l,p);return jN(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ho(new xa("auth-internal",e=>{const t=od(e.getProvider("auth").getImmediate());return(r=>new tV(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ws(oE,lE,nV(s)),ws(oE,lE,"esm2020")}const iV=300,sV=l1("authIdTokenMaxAge")||iV;let uE=null;const aV=s=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>sV)return;const a=t?.token;uE!==a&&(uE=a,await fetch(s,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function oV(s=XC()){const e=Kg(s,"auth");if(e.isInitialized())return e.getImmediate();const t=UN(s,{popupRedirectResolver:eV,persistence:[hD,ZN,B1]}),r=l1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=aV(l.toString());YN(t,c,()=>c(t.currentUser)),$N(t,d=>c(d))}}const a=M2("auth");return a&&BN(t,`http://${a}`),t}function lV(){return document.getElementsByTagName("head")?.[0]??document}kN({loadJS(s){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=a=>{const l=yr("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",lV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rV("Browser");var cE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ss,Y1;(function(){var s;function e(w,A){function R(){}R.prototype=A.prototype,w.F=A.prototype,w.prototype=new R,w.prototype.constructor=w,w.D=function(M,O,k){for(var C=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)C[Ie-2]=arguments[Ie];return A.prototype[O].apply(M,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(w,A,R){R||(R=0);const M=Array(16);if(typeof A=="string")for(var O=0;O<16;++O)M[O]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(O=0;O<16;++O)M[O]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=w.g[0],R=w.g[1],O=w.g[2];let k=w.g[3],C;C=A+(k^R&(O^k))+M[0]+3614090360&4294967295,A=R+(C<<7&4294967295|C>>>25),C=k+(O^A&(R^O))+M[1]+3905402710&4294967295,k=A+(C<<12&4294967295|C>>>20),C=O+(R^k&(A^R))+M[2]+606105819&4294967295,O=k+(C<<17&4294967295|C>>>15),C=R+(A^O&(k^A))+M[3]+3250441966&4294967295,R=O+(C<<22&4294967295|C>>>10),C=A+(k^R&(O^k))+M[4]+4118548399&4294967295,A=R+(C<<7&4294967295|C>>>25),C=k+(O^A&(R^O))+M[5]+1200080426&4294967295,k=A+(C<<12&4294967295|C>>>20),C=O+(R^k&(A^R))+M[6]+2821735955&4294967295,O=k+(C<<17&4294967295|C>>>15),C=R+(A^O&(k^A))+M[7]+4249261313&4294967295,R=O+(C<<22&4294967295|C>>>10),C=A+(k^R&(O^k))+M[8]+1770035416&4294967295,A=R+(C<<7&4294967295|C>>>25),C=k+(O^A&(R^O))+M[9]+2336552879&4294967295,k=A+(C<<12&4294967295|C>>>20),C=O+(R^k&(A^R))+M[10]+4294925233&4294967295,O=k+(C<<17&4294967295|C>>>15),C=R+(A^O&(k^A))+M[11]+2304563134&4294967295,R=O+(C<<22&4294967295|C>>>10),C=A+(k^R&(O^k))+M[12]+1804603682&4294967295,A=R+(C<<7&4294967295|C>>>25),C=k+(O^A&(R^O))+M[13]+4254626195&4294967295,k=A+(C<<12&4294967295|C>>>20),C=O+(R^k&(A^R))+M[14]+2792965006&4294967295,O=k+(C<<17&4294967295|C>>>15),C=R+(A^O&(k^A))+M[15]+1236535329&4294967295,R=O+(C<<22&4294967295|C>>>10),C=A+(O^k&(R^O))+M[1]+4129170786&4294967295,A=R+(C<<5&4294967295|C>>>27),C=k+(R^O&(A^R))+M[6]+3225465664&4294967295,k=A+(C<<9&4294967295|C>>>23),C=O+(A^R&(k^A))+M[11]+643717713&4294967295,O=k+(C<<14&4294967295|C>>>18),C=R+(k^A&(O^k))+M[0]+3921069994&4294967295,R=O+(C<<20&4294967295|C>>>12),C=A+(O^k&(R^O))+M[5]+3593408605&4294967295,A=R+(C<<5&4294967295|C>>>27),C=k+(R^O&(A^R))+M[10]+38016083&4294967295,k=A+(C<<9&4294967295|C>>>23),C=O+(A^R&(k^A))+M[15]+3634488961&4294967295,O=k+(C<<14&4294967295|C>>>18),C=R+(k^A&(O^k))+M[4]+3889429448&4294967295,R=O+(C<<20&4294967295|C>>>12),C=A+(O^k&(R^O))+M[9]+568446438&4294967295,A=R+(C<<5&4294967295|C>>>27),C=k+(R^O&(A^R))+M[14]+3275163606&4294967295,k=A+(C<<9&4294967295|C>>>23),C=O+(A^R&(k^A))+M[3]+4107603335&4294967295,O=k+(C<<14&4294967295|C>>>18),C=R+(k^A&(O^k))+M[8]+1163531501&4294967295,R=O+(C<<20&4294967295|C>>>12),C=A+(O^k&(R^O))+M[13]+2850285829&4294967295,A=R+(C<<5&4294967295|C>>>27),C=k+(R^O&(A^R))+M[2]+4243563512&4294967295,k=A+(C<<9&4294967295|C>>>23),C=O+(A^R&(k^A))+M[7]+1735328473&4294967295,O=k+(C<<14&4294967295|C>>>18),C=R+(k^A&(O^k))+M[12]+2368359562&4294967295,R=O+(C<<20&4294967295|C>>>12),C=A+(R^O^k)+M[5]+4294588738&4294967295,A=R+(C<<4&4294967295|C>>>28),C=k+(A^R^O)+M[8]+2272392833&4294967295,k=A+(C<<11&4294967295|C>>>21),C=O+(k^A^R)+M[11]+1839030562&4294967295,O=k+(C<<16&4294967295|C>>>16),C=R+(O^k^A)+M[14]+4259657740&4294967295,R=O+(C<<23&4294967295|C>>>9),C=A+(R^O^k)+M[1]+2763975236&4294967295,A=R+(C<<4&4294967295|C>>>28),C=k+(A^R^O)+M[4]+1272893353&4294967295,k=A+(C<<11&4294967295|C>>>21),C=O+(k^A^R)+M[7]+4139469664&4294967295,O=k+(C<<16&4294967295|C>>>16),C=R+(O^k^A)+M[10]+3200236656&4294967295,R=O+(C<<23&4294967295|C>>>9),C=A+(R^O^k)+M[13]+681279174&4294967295,A=R+(C<<4&4294967295|C>>>28),C=k+(A^R^O)+M[0]+3936430074&4294967295,k=A+(C<<11&4294967295|C>>>21),C=O+(k^A^R)+M[3]+3572445317&4294967295,O=k+(C<<16&4294967295|C>>>16),C=R+(O^k^A)+M[6]+76029189&4294967295,R=O+(C<<23&4294967295|C>>>9),C=A+(R^O^k)+M[9]+3654602809&4294967295,A=R+(C<<4&4294967295|C>>>28),C=k+(A^R^O)+M[12]+3873151461&4294967295,k=A+(C<<11&4294967295|C>>>21),C=O+(k^A^R)+M[15]+530742520&4294967295,O=k+(C<<16&4294967295|C>>>16),C=R+(O^k^A)+M[2]+3299628645&4294967295,R=O+(C<<23&4294967295|C>>>9),C=A+(O^(R|~k))+M[0]+4096336452&4294967295,A=R+(C<<6&4294967295|C>>>26),C=k+(R^(A|~O))+M[7]+1126891415&4294967295,k=A+(C<<10&4294967295|C>>>22),C=O+(A^(k|~R))+M[14]+2878612391&4294967295,O=k+(C<<15&4294967295|C>>>17),C=R+(k^(O|~A))+M[5]+4237533241&4294967295,R=O+(C<<21&4294967295|C>>>11),C=A+(O^(R|~k))+M[12]+1700485571&4294967295,A=R+(C<<6&4294967295|C>>>26),C=k+(R^(A|~O))+M[3]+2399980690&4294967295,k=A+(C<<10&4294967295|C>>>22),C=O+(A^(k|~R))+M[10]+4293915773&4294967295,O=k+(C<<15&4294967295|C>>>17),C=R+(k^(O|~A))+M[1]+2240044497&4294967295,R=O+(C<<21&4294967295|C>>>11),C=A+(O^(R|~k))+M[8]+1873313359&4294967295,A=R+(C<<6&4294967295|C>>>26),C=k+(R^(A|~O))+M[15]+4264355552&4294967295,k=A+(C<<10&4294967295|C>>>22),C=O+(A^(k|~R))+M[6]+2734768916&4294967295,O=k+(C<<15&4294967295|C>>>17),C=R+(k^(O|~A))+M[13]+1309151649&4294967295,R=O+(C<<21&4294967295|C>>>11),C=A+(O^(R|~k))+M[4]+4149444226&4294967295,A=R+(C<<6&4294967295|C>>>26),C=k+(R^(A|~O))+M[11]+3174756917&4294967295,k=A+(C<<10&4294967295|C>>>22),C=O+(A^(k|~R))+M[2]+718787259&4294967295,O=k+(C<<15&4294967295|C>>>17),C=R+(k^(O|~A))+M[9]+3951481745&4294967295,w.g[0]=w.g[0]+A&4294967295,w.g[1]=w.g[1]+(O+(C<<21&4294967295|C>>>11))&4294967295,w.g[2]=w.g[2]+O&4294967295,w.g[3]=w.g[3]+k&4294967295}r.prototype.v=function(w,A){A===void 0&&(A=w.length);const R=A-this.blockSize,M=this.C;let O=this.h,k=0;for(;k<A;){if(O==0)for(;k<=R;)a(this,w,k),k+=this.blockSize;if(typeof w=="string"){for(;k<A;)if(M[O++]=w.charCodeAt(k++),O==this.blockSize){a(this,M),O=0;break}}else for(;k<A;)if(M[O++]=w[k++],O==this.blockSize){a(this,M),O=0;break}}this.h=O,this.o+=A},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var A=1;A<w.length-8;++A)w[A]=0;A=this.o*8;for(var R=w.length-8;R<w.length;++R)w[R]=A&255,A/=256;for(this.v(w),w=Array(16),A=0,R=0;R<4;++R)for(let M=0;M<32;M+=8)w[A++]=this.g[R]>>>M&255;return w};function l(w,A){var R=d;return Object.prototype.hasOwnProperty.call(R,w)?R[w]:R[w]=A(w)}function c(w,A){this.h=A;const R=[];let M=!0;for(let O=w.length-1;O>=0;O--){const k=w[O]|0;M&&k==A||(R[O]=k,M=!1)}this.g=R}var d={};function p(w){return-128<=w&&w<128?l(w,function(A){return new c([A|0],A<0?-1:0)}):new c([w|0],w<0?-1:0)}function g(w){if(isNaN(w)||!isFinite(w))return E;if(w<0)return L(g(-w));const A=[];let R=1;for(let M=0;w>=R;M++)A[M]=w/R|0,R*=4294967296;return new c(A,0)}function v(w,A){if(w.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(w.charAt(0)=="-")return L(v(w.substring(1),A));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=g(Math.pow(A,8));let M=E;for(let k=0;k<w.length;k+=8){var O=Math.min(8,w.length-k);const C=parseInt(w.substring(k,k+O),A);O<8?(O=g(Math.pow(A,O)),M=M.j(O).add(g(C))):(M=M.j(R),M=M.add(g(C)))}return M}var E=p(0),S=p(1),N=p(16777216);s=c.prototype,s.m=function(){if(q(this))return-L(this).m();let w=0,A=1;for(let R=0;R<this.g.length;R++){const M=this.i(R);w+=(M>=0?M:4294967296+M)*A,A*=4294967296}return w},s.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(Q(this))return"0";if(q(this))return"-"+L(this).toString(w);const A=g(Math.pow(w,6));var R=this;let M="";for(;;){const O=le(R,A).g;R=re(R,O.j(A));let k=((R.g.length>0?R.g[0]:R.h)>>>0).toString(w);if(R=O,Q(R))return k+M;for(;k.length<6;)k="0"+k;M=k+M}},s.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function Q(w){if(w.h!=0)return!1;for(let A=0;A<w.g.length;A++)if(w.g[A]!=0)return!1;return!0}function q(w){return w.h==-1}s.l=function(w){return w=re(this,w),q(w)?-1:Q(w)?0:1};function L(w){const A=w.g.length,R=[];for(let M=0;M<A;M++)R[M]=~w.g[M];return new c(R,~w.h).add(S)}s.abs=function(){return q(this)?L(this):this},s.add=function(w){const A=Math.max(this.g.length,w.g.length),R=[];let M=0;for(let O=0;O<=A;O++){let k=M+(this.i(O)&65535)+(w.i(O)&65535),C=(k>>>16)+(this.i(O)>>>16)+(w.i(O)>>>16);M=C>>>16,k&=65535,C&=65535,R[O]=C<<16|k}return new c(R,R[R.length-1]&-2147483648?-1:0)};function re(w,A){return w.add(L(A))}s.j=function(w){if(Q(this)||Q(w))return E;if(q(this))return q(w)?L(this).j(L(w)):L(L(this).j(w));if(q(w))return L(this.j(L(w)));if(this.l(N)<0&&w.l(N)<0)return g(this.m()*w.m());const A=this.g.length+w.g.length,R=[];for(var M=0;M<2*A;M++)R[M]=0;for(M=0;M<this.g.length;M++)for(let O=0;O<w.g.length;O++){const k=this.i(M)>>>16,C=this.i(M)&65535,Ie=w.i(O)>>>16,Le=w.i(O)&65535;R[2*M+2*O]+=C*Le,J(R,2*M+2*O),R[2*M+2*O+1]+=k*Le,J(R,2*M+2*O+1),R[2*M+2*O+1]+=C*Ie,J(R,2*M+2*O+1),R[2*M+2*O+2]+=k*Ie,J(R,2*M+2*O+2)}for(w=0;w<A;w++)R[w]=R[2*w+1]<<16|R[2*w];for(w=A;w<2*A;w++)R[w]=0;return new c(R,0)};function J(w,A){for(;(w[A]&65535)!=w[A];)w[A+1]+=w[A]>>>16,w[A]&=65535,A++}function ee(w,A){this.g=w,this.h=A}function le(w,A){if(Q(A))throw Error("division by zero");if(Q(w))return new ee(E,E);if(q(w))return A=le(L(w),A),new ee(L(A.g),L(A.h));if(q(A))return A=le(w,L(A)),new ee(L(A.g),A.h);if(w.g.length>30){if(q(w)||q(A))throw Error("slowDivide_ only works with positive integers.");for(var R=S,M=A;M.l(w)<=0;)R=ce(R),M=ce(M);var O=ue(R,1),k=ue(M,1);for(M=ue(M,2),R=ue(R,2);!Q(M);){var C=k.add(M);C.l(w)<=0&&(O=O.add(R),k=C),M=ue(M,1),R=ue(R,1)}return A=re(w,O.j(A)),new ee(O,A)}for(O=E;w.l(A)>=0;){for(R=Math.max(1,Math.floor(w.m()/A.m())),M=Math.ceil(Math.log(R)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),k=g(R),C=k.j(A);q(C)||C.l(w)>0;)R-=M,k=g(R),C=k.j(A);Q(k)&&(k=S),O=O.add(k),w=re(w,C)}return new ee(O,w)}s.B=function(w){return le(this,w).h},s.and=function(w){const A=Math.max(this.g.length,w.g.length),R=[];for(let M=0;M<A;M++)R[M]=this.i(M)&w.i(M);return new c(R,this.h&w.h)},s.or=function(w){const A=Math.max(this.g.length,w.g.length),R=[];for(let M=0;M<A;M++)R[M]=this.i(M)|w.i(M);return new c(R,this.h|w.h)},s.xor=function(w){const A=Math.max(this.g.length,w.g.length),R=[];for(let M=0;M<A;M++)R[M]=this.i(M)^w.i(M);return new c(R,this.h^w.h)};function ce(w){const A=w.g.length+1,R=[];for(let M=0;M<A;M++)R[M]=w.i(M)<<1|w.i(M-1)>>>31;return new c(R,w.h)}function ue(w,A){const R=A>>5;A%=32;const M=w.g.length-R,O=[];for(let k=0;k<M;k++)O[k]=A>0?w.i(k+R)>>>A|w.i(k+R+1)<<32-A:w.i(k+R);return new c(O,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Y1=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=v,Ss=c}).apply(typeof cE<"u"?cE:typeof self<"u"?self:typeof window<"u"?window:{});var rf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var X1,Vu,J1,yf,hg,W1,Z1,ew;(function(){var s,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof rf=="object"&&rf];for(var y=0;y<h.length;++y){var b=h[y];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=t(this);function a(h,y){if(y)e:{var b=r;h=h.split(".");for(var I=0;I<h.length-1;I++){var F=h[I];if(!(F in b))break e;b=b[F]}h=h[h.length-1],I=b[h],y=y(I),y!=I&&y!=null&&e(b,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var b=[],I;for(I in y)Object.prototype.hasOwnProperty.call(y,I)&&b.push([I,y[I]]);return b}});var l=l||{},c=this||self;function d(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function p(h,y,b){return h.call.apply(h.bind,arguments)}function g(h,y,b){return g=p,g.apply(null,arguments)}function v(h,y){var b=Array.prototype.slice.call(arguments,1);return function(){var I=b.slice();return I.push.apply(I,arguments),h.apply(this,I)}}function E(h,y){function b(){}b.prototype=y.prototype,h.Z=y.prototype,h.prototype=new b,h.prototype.constructor=h,h.Ob=function(I,F,Y){for(var he=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)he[Ve-2]=arguments[Ve];return y.prototype[F].apply(I,he)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function N(h){const y=h.length;if(y>0){const b=Array(y);for(let I=0;I<y;I++)b[I]=h[I];return b}return[]}function Q(h,y){for(let I=1;I<arguments.length;I++){const F=arguments[I];var b=typeof F;if(b=b!="object"?b:F?Array.isArray(F)?"array":b:"null",b=="array"||b=="object"&&typeof F.length=="number"){b=h.length||0;const Y=F.length||0;h.length=b+Y;for(let he=0;he<Y;he++)h[b+he]=F[he]}else h.push(F)}}class q{constructor(y,b){this.i=y,this.j=b,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function L(h){c.setTimeout(()=>{throw h},0)}function re(){var h=w;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class J{constructor(){this.h=this.g=null}add(y,b){const I=ee.get();I.set(y,b),this.h?this.h.next=I:this.g=I,this.h=I}}var ee=new q(()=>new le,h=>h.reset());class le{constructor(){this.next=this.g=this.h=null}set(y,b){this.h=y,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,ue=!1,w=new J,A=()=>{const h=Promise.resolve(void 0);ce=()=>{h.then(R)}};function R(){for(var h;h=re();){try{h.h.call(h.g)}catch(b){L(b)}var y=ee;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}ue=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};c.addEventListener("test",b,y),c.removeEventListener("test",b,y)}catch{}return h})();function C(h){return/^[\s\xa0]*$/.test(h)}function Ie(h,y){O.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}E(Ie,O),Ie.prototype.init=function(h,y){const b=this.type=h.type,I=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(b=="mouseover"?y=h.fromElement:b=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ie.Z.h.call(this)},Ie.prototype.h=function(){Ie.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Le="closure_listenable_"+(Math.random()*1e6|0),j=0;function ae(h,y,b,I,F){this.listener=h,this.proxy=null,this.src=y,this.type=b,this.capture=!!I,this.ha=F,this.key=++j,this.da=this.fa=!1}function te(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ge(h,y,b){for(const I in h)y.call(b,h[I],I,h)}function Ae(h,y){for(const b in h)y.call(void 0,h[b],b,h)}function V(h){const y={};for(const b in h)y[b]=h[b];return y}const H="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function W(h,y){let b,I;for(let F=1;F<arguments.length;F++){I=arguments[F];for(b in I)h[b]=I[b];for(let Y=0;Y<H.length;Y++)b=H[Y],Object.prototype.hasOwnProperty.call(I,b)&&(h[b]=I[b])}}function de(h){this.src=h,this.g={},this.h=0}de.prototype.add=function(h,y,b,I,F){const Y=h.toString();h=this.g[Y],h||(h=this.g[Y]=[],this.h++);const he=Re(h,y,I,F);return he>-1?(y=h[he],b||(y.fa=!1)):(y=new ae(y,this.src,Y,!!I,F),y.fa=b,h.push(y)),y};function Te(h,y){const b=y.type;if(b in h.g){var I=h.g[b],F=Array.prototype.indexOf.call(I,y,void 0),Y;(Y=F>=0)&&Array.prototype.splice.call(I,F,1),Y&&(te(y),h.g[b].length==0&&(delete h.g[b],h.h--))}}function Re(h,y,b,I){for(let F=0;F<h.length;++F){const Y=h[F];if(!Y.da&&Y.listener==y&&Y.capture==!!b&&Y.ha==I)return F}return-1}var ke="closure_lm_"+(Math.random()*1e6|0),vt={};function ft(h,y,b,I,F){if(Array.isArray(y)){for(let Y=0;Y<y.length;Y++)ft(h,y[Y],b,I,F);return null}return b=Ot(b),h&&h[Le]?h.J(y,b,d(I)?!!I.capture:!1,F):Zr(h,y,b,!1,I,F)}function Zr(h,y,b,I,F,Y){if(!y)throw Error("Invalid event type");const he=d(F)?!!F.capture:!!F;let Ve=Xe(h);if(Ve||(h[ke]=Ve=new de(h)),b=Ve.add(y,b,I,he,Y),b.proxy)return b;if(I=er(),b.proxy=I,I.src=h,I.listener=b,h.addEventListener)k||(F=he),F===void 0&&(F=!1),h.addEventListener(y.toString(),I,F);else if(h.attachEvent)h.attachEvent(fe(y.toString()),I);else if(h.addListener&&h.removeListener)h.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return b}function er(){function h(b){return y.call(h.src,h.listener,b)}const y=ze;return h}function Vi(h,y,b,I,F){if(Array.isArray(y))for(var Y=0;Y<y.length;Y++)Vi(h,y[Y],b,I,F);else I=d(I)?!!I.capture:!!I,b=Ot(b),h&&h[Le]?(h=h.i,Y=String(y).toString(),Y in h.g&&(y=h.g[Y],b=Re(y,b,I,F),b>-1&&(te(y[b]),Array.prototype.splice.call(y,b,1),y.length==0&&(delete h.g[Y],h.h--)))):h&&(h=Xe(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Re(y,b,I,F)),(b=h>-1?y[h]:null)&&tr(b))}function tr(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Le])Te(y.i,h);else{var b=h.type,I=h.proxy;y.removeEventListener?y.removeEventListener(b,I,h.capture):y.detachEvent?y.detachEvent(fe(b),I):y.addListener&&y.removeListener&&y.removeListener(I),(b=Xe(y))?(Te(b,h),b.h==0&&(b.src=null,y[ke]=null)):te(h)}}}function fe(h){return h in vt?vt[h]:vt[h]="on"+h}function ze(h,y){if(h.da)h=!0;else{y=new Ie(y,this);const b=h.listener,I=h.ha||h.src;h.fa&&tr(h),h=b.call(I,y)}return h}function Xe(h){return h=h[ke],h instanceof de?h:null}var Qe="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ot(h){return typeof h=="function"?h:(h[Qe]||(h[Qe]=function(y){return h.handleEvent(y)}),h[Qe])}function Ze(){M.call(this),this.i=new de(this),this.M=this,this.G=null}E(Ze,M),Ze.prototype[Le]=!0,Ze.prototype.removeEventListener=function(h,y,b,I){Vi(this,h,y,b,I)};function bt(h,y){var b,I=h.G;if(I)for(b=[];I;I=I.G)b.push(I);if(h=h.M,I=y.type||y,typeof y=="string")y=new O(y,h);else if(y instanceof O)y.target=y.target||h;else{var F=y;y=new O(I,h),W(y,F)}F=!0;let Y,he;if(b)for(he=b.length-1;he>=0;he--)Y=y.g=b[he],F=br(Y,I,!0,y)&&F;if(Y=y.g=h,F=br(Y,I,!0,y)&&F,F=br(Y,I,!1,y)&&F,b)for(he=0;he<b.length;he++)Y=y.g=b[he],F=br(Y,I,!1,y)&&F}Ze.prototype.N=function(){if(Ze.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const b=h.g[y];for(let I=0;I<b.length;I++)te(b[I]);delete h.g[y],h.h--}}this.G=null},Ze.prototype.J=function(h,y,b,I){return this.i.add(String(h),y,!1,b,I)},Ze.prototype.K=function(h,y,b,I){return this.i.add(String(h),y,!0,b,I)};function br(h,y,b,I){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let F=!0;for(let Y=0;Y<y.length;++Y){const he=y[Y];if(he&&!he.da&&he.capture==b){const Ve=he.listener,Rt=he.ha||he.src;he.fa&&Te(h.i,he),F=Ve.call(Rt,I)!==!1&&F}}return F&&!I.defaultPrevented}function bl(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function za(h){h.g=bl(()=>{h.g=null,h.i&&(h.i=!1,za(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Mt extends M{constructor(y,b){super(),this.m=y,this.l=b,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:za(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ms(h){M.call(this),this.h=h,this.g={}}E(Ms,M);var El=[];function Tl(h){ge(h.g,function(y,b){this.g.hasOwnProperty(b)&&tr(y)},h),h.g={}}Ms.prototype.N=function(){Ms.Z.N.call(this),Tl(this)},Ms.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Oi=c.JSON.stringify,Cd=c.JSON.parse,Ic=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Rc(){}function Cc(){}var nr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Zt(){O.call(this,"d")}E(Zt,O);function zn(){O.call(this,"c")}E(zn,O);var It={},Nc=null;function Ua(){return Nc=Nc||new Ze}It.Ia="serverreachability";function Dc(h){O.call(this,It.Ia,h)}E(Dc,O);function Er(h){const y=Ua();bt(y,new Dc(y))}It.STAT_EVENT="statevent";function ks(h,y){O.call(this,It.STAT_EVENT,h),this.stat=y}E(ks,O);function kt(h){const y=Ua();bt(y,new ks(y,h))}It.Ja="timingevent";function Tr(h,y){O.call(this,It.Ja,h),this.size=y}E(Tr,O);function wr(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function rr(){this.g=!0}rr.prototype.ua=function(){this.g=!1};function Nd(h,y,b,I,F,Y){h.info(function(){if(h.g)if(Y){var he="",Ve=Y.split("&");for(let Je=0;Je<Ve.length;Je++){var Rt=Ve[Je].split("=");if(Rt.length>1){const gt=Rt[0];Rt=Rt[1];const qn=gt.split("_");he=qn.length>=2&&qn[1]=="type"?he+(gt+"="+Rt+"&"):he+(gt+"=redacted&")}}}else he=null;else he=Y;return"XMLHTTP REQ ("+I+") [attempt "+F+"]: "+y+`
`+b+`
`+he})}function Vc(h,y,b,I,F,Y,he){h.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+F+"]: "+y+`
`+b+`
`+Y+" "+he})}function Sr(h,y,b,I){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Dd(h,b)+(I?" "+I:"")})}function Ps(h,y){h.info(function(){return"TIMEOUT: "+y})}rr.prototype.info=function(){};function Dd(h,y){if(!h.g)return y;if(!y)return null;try{const Y=JSON.parse(y);if(Y){for(h=0;h<Y.length;h++)if(Array.isArray(Y[h])){var b=Y[h];if(!(b.length<2)){var I=b[1];if(Array.isArray(I)&&!(I.length<1)){var F=I[0];if(F!="noop"&&F!="stop"&&F!="close")for(let he=1;he<I.length;he++)I[he]=""}}}}return Oi(Y)}catch{return y}}var Ls={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},wl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Sl;function zs(){}E(zs,Rc),zs.prototype.g=function(){return new XMLHttpRequest},Sl=new zs;function ei(h){return encodeURIComponent(String(h))}function Oc(h){var y=1;h=h.split(":");const b=[];for(;y>0&&h.length;)b.push(h.shift()),y--;return h.length&&b.push(h.join(":")),b}function ir(h,y,b,I){this.j=h,this.i=y,this.l=b,this.S=I||1,this.V=new Ms(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new sr}function sr(){this.i=null,this.g="",this.h=!1}var Pt={},$t={};function Ar(h,y,b){h.M=1,h.A=Us(zt(y)),h.u=b,h.R=!0,ja(h,null)}function ja(h,y){h.F=Date.now(),xr(h),h.B=zt(h.A);var b=h.B,I=h.S;Array.isArray(I)||(I=[String(I)]),Ha(b.i,"t",I),h.C=0,b=h.j.L,h.h=new sr,h.g=$c(h.j,b?y:null,!h.u),h.P>0&&(h.O=new Mt(g(h.Y,h,h.g),h.P)),y=h.V,b=h.g,I=h.ba;var F="readystatechange";Array.isArray(F)||(F&&(El[0]=F.toString()),F=El);for(let Y=0;Y<F.length;Y++){const he=ft(b,F[Y],I||y.handleEvent,!1,y.h||y);if(!he)break;y.g[he.key]=he}y=h.J?V(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Er(),Nd(h.i,h.v,h.B,h.l,h.S,h.u)}ir.prototype.ba=function(h){h=h.target;const y=this.O;y&&lr(h)==3?y.j():this.Y(h)},ir.prototype.Y=function(h){try{if(h==this.g)e:{const Ve=lr(this.g),Rt=this.g.ya(),Je=this.g.ca();if(!(Ve<3)&&(Ve!=3||this.g&&(this.h.h||this.g.la()||en(this.g)))){this.K||Ve!=4||Rt==7||(Rt==8||Je<=0?Er(3):Er(2)),Ir(this);var y=this.g.ca();this.X=y;var b=Vd(this);if(this.o=y==200,Vc(this.i,this.v,this.B,this.l,this.S,Ve,y),this.o){if(this.U&&!this.L){t:{if(this.g){var I,F=this.g;if((I=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(I)){var Y=I;break t}}Y=null}if(h=Y)Sr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Rr(this,h);else{this.o=!1,this.m=3,kt(12),Sn(this),Un(this);break e}}if(this.R){h=!0;let gt;for(;!this.K&&this.C<b.length;)if(gt=kc(this,b),gt==$t){Ve==4&&(this.m=4,kt(14),h=!1),Sr(this.i,this.l,null,"[Incomplete Response]");break}else if(gt==Pt){this.m=4,kt(15),Sr(this.i,this.l,b,"[Invalid Chunk]"),h=!1;break}else Sr(this.i,this.l,gt,null),Rr(this,gt);if(Mc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ve!=4||b.length!=0||this.h.h||(this.m=1,kt(16),h=!1),this.o=this.o&&h,!h)Sr(this.i,this.l,b,"[Invalid Chunked Response]"),Sn(this),Un(this);else if(b.length>0&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.aa&&!he.P&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),Ul(he),he.P=!0,kt(11))}}else Sr(this.i,this.l,b,null),Rr(this,b);Ve==4&&Sn(this),this.o&&!this.K&&(Ve==4?Hc(this.j,this):(this.o=!1,xr(this)))}else ni(this.g),y==400&&b.indexOf("Unknown SID")>0?(this.m=3,kt(12)):(this.m=0,kt(13)),Sn(this),Un(this)}}}catch{}};function Vd(h){if(!Mc(h))return h.g.la();const y=en(h.g);if(y==="")return"";let b="";const I=y.length,F=lr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Sn(h),Un(h),"";h.h.i=new c.TextDecoder}for(let Y=0;Y<I;Y++)h.h.h=!0,b+=h.h.i.decode(y[Y],{stream:!(F&&Y==I-1)});return y.length=0,h.h.g+=b,h.C=0,h.h.g}function Mc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function kc(h,y){var b=h.C,I=y.indexOf(`
`,b);return I==-1?$t:(b=Number(y.substring(b,I)),isNaN(b)?Pt:(I+=1,I+b>y.length?$t:(y=y.slice(I,I+b),h.C=I+b,y)))}ir.prototype.cancel=function(){this.K=!0,Sn(this)};function xr(h){h.T=Date.now()+h.H,Ba(h,h.H)}function Ba(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=wr(g(h.aa,h),y)}function Ir(h){h.D&&(c.clearTimeout(h.D),h.D=null)}ir.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Ps(this.i,this.B),this.M!=2&&(Er(),kt(17)),Sn(this),this.m=2,Un(this)):Ba(this,this.T-h)};function Un(h){h.j.I==0||h.K||Hc(h.j,h)}function Sn(h){Ir(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Tl(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Rr(h,y){try{var b=h.j;if(b.I!=0&&(b.g==h||Nr(b.h,h))){if(!h.L&&Nr(b.h,h)&&b.I==3){try{var I=b.Ba.g.parse(y)}catch{I=null}if(Array.isArray(I)&&I.length==3){var F=I;if(F[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<h.F)Ya(b),Bi(b);else break e;Ks(b),kt(18)}}else b.xa=F[1],0<b.xa-b.K&&F[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=wr(g(b.Va,b),6e3));Cr(b.h)<=1&&b.ta&&(b.ta=void 0)}else Pr(b,11)}else if((h.L||b.g==h)&&Ya(b),!C(y))for(F=b.Ba.g.parse(y),y=0;y<F.length;y++){let Je=F[y];const gt=Je[0];if(!(gt<=b.K))if(b.K=gt,Je=Je[1],b.I==2)if(Je[0]=="c"){b.M=Je[1],b.ba=Je[2];const qn=Je[3];qn!=null&&(b.ka=qn,b.j.info("VER="+b.ka));const Lr=Je[4];Lr!=null&&(b.za=Lr,b.j.info("SVER="+b.za));const ur=Je[5];ur!=null&&typeof ur=="number"&&ur>0&&(I=1.5*ur,b.O=I,b.j.info("backChannelRequestTimeoutMs_="+I)),I=b;const cr=h.g;if(cr){const Qs=cr.g?cr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qs){var Y=I.h;Y.g||Qs.indexOf("spdy")==-1&&Qs.indexOf("quic")==-1&&Qs.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Il(Y,Y.h),Y.h=null))}if(I.G){const Xa=cr.g?cr.g.getResponseHeader("X-HTTP-Session-Id"):null;Xa&&(I.wa=Xa,et(I.J,I.G,Xa))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-h.F,b.j.info("Handshake RTT: "+b.T+"ms")),I=b;var he=h;if(I.na=Qc(I,I.L?I.ba:null,I.W),he.L){Rl(I.h,he);var Ve=he,Rt=I.O;Rt&&(Ve.H=Rt),Ve.D&&(Ir(Ve),xr(Ve)),I.g=he}else qc(I);b.i.length>0&&kr(b)}else Je[0]!="stop"&&Je[0]!="close"||Pr(b,7);else b.I==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?Pr(b,7):Ll(b):Je[0]!="noop"&&b.l&&b.l.qa(Je),b.A=0)}}Er(4)}catch{}}var Lt=class{constructor(h,y){this.g=h,this.map=y}};function Al(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function xl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Cr(h){return h.h?1:h.g?h.g.size:0}function Nr(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Il(h,y){h.g?h.g.add(y):h.h=y}function Rl(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Al.prototype.cancel=function(){if(this.i=Cl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Cl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const b of h.g.values())y=y.concat(b.G);return y}return N(h.i)}var Pc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qa(h,y){if(h){h=h.split("&");for(let b=0;b<h.length;b++){const I=h[b].indexOf("=");let F,Y=null;I>=0?(F=h[b].substring(0,I),Y=h[b].substring(I+1)):F=h[b],y(F,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function An(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof An?(this.l=h.l,Yt(this,h.j),this.o=h.o,this.g=h.g,Mi(this,h.u),this.h=h.h,Nl(this,jc(h.i)),this.m=h.m):h&&(y=String(h).match(Pc))?(this.l=!1,Yt(this,y[1]||"",!0),this.o=Dr(y[2]||""),this.g=Dr(y[3]||"",!0),Mi(this,y[4]),this.h=Dr(y[5]||"",!0),Nl(this,y[6]||"",!0),this.m=Dr(y[7]||"")):(this.l=!1,this.i=new Pi(null,this.l))}An.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(js(y,Fa,!0),":");var b=this.g;return(b||y=="file")&&(h.push("//"),(y=this.o)&&h.push(js(y,Fa,!0),"@"),h.push(ei(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&h.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push(js(b,b.charAt(0)=="/"?Dl:Lc,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",js(b,zc)),h.join("")},An.prototype.resolve=function(h){const y=zt(this);let b=!!h.j;b?Yt(y,h.j):b=!!h.o,b?y.o=h.o:b=!!h.g,b?y.g=h.g:b=h.u!=null;var I=h.h;if(b)Mi(y,h.u);else if(b=!!h.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var F=y.h.lastIndexOf("/");F!=-1&&(I=y.h.slice(0,F+1)+I)}if(F=I,F==".."||F==".")I="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){I=F.lastIndexOf("/",0)==0,F=F.split("/");const Y=[];for(let he=0;he<F.length;){const Ve=F[he++];Ve=="."?I&&he==F.length&&Y.push(""):Ve==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),I&&he==F.length&&Y.push("")):(Y.push(Ve),I=!0)}I=Y.join("/")}else I=F}return b?y.h=I:b=h.i.toString()!=="",b?Nl(y,jc(h.i)):b=!!h.m,b&&(y.m=h.m),y};function zt(h){return new An(h)}function Yt(h,y,b){h.j=b?Dr(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Mi(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Nl(h,y,b){y instanceof Pi?(h.i=y,Ga(h.i,h.l)):(b||(y=js(y,ki)),h.i=new Pi(y,h.l))}function et(h,y,b){h.i.set(y,b)}function Us(h){return et(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Dr(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function js(h,y,b){return typeof h=="string"?(h=encodeURI(h).replace(y,pn),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function pn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Fa=/[#\/\?@]/g,Lc=/[#\?:]/g,Dl=/[#\?]/g,ki=/[#\?@]/g,zc=/#/g;function Pi(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function gn(h){h.g||(h.g=new Map,h.h=0,h.i&&qa(h.i,function(y,b){h.add(decodeURIComponent(y.replace(/\+/g," ")),b)}))}s=Pi.prototype,s.add=function(h,y){gn(this),this.i=null,h=Li(this,h);let b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(y),this.h+=1,this};function Uc(h,y){gn(h),y=Li(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Vl(h,y){return gn(h),y=Li(h,y),h.g.has(y)}s.forEach=function(h,y){gn(this),this.g.forEach(function(b,I){b.forEach(function(F){h.call(y,F,I,this)},this)},this)};function Ol(h,y){gn(h);let b=[];if(typeof y=="string")Vl(h,y)&&(b=b.concat(h.g.get(Li(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)b=b.concat(h[y]);return b}s.set=function(h,y){return gn(this),this.i=null,h=Li(this,h),Vl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=Ol(this,h),h.length>0?String(h[0]):y):y};function Ha(h,y,b){Uc(h,y),b.length>0&&(h.i=null,h.g.set(Li(h,y),N(b)),h.h+=b.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let I=0;I<y.length;I++){var b=y[I];const F=ei(b);b=Ol(this,b);for(let Y=0;Y<b.length;Y++){let he=F;b[Y]!==""&&(he+="="+ei(b[Y])),h.push(he)}}return this.i=h.join("&")};function jc(h){const y=new Pi;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Li(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Ga(h,y){y&&!h.j&&(gn(h),h.i=null,h.g.forEach(function(b,I){const F=I.toLowerCase();I!=F&&(Uc(this,I),Ha(this,F,b))},h)),h.j=y}function ar(h,y){const b=new rr;if(c.Image){const I=new Image;I.onload=v(jn,b,"TestLoadImage: loaded",!0,y,I),I.onerror=v(jn,b,"TestLoadImage: error",!1,y,I),I.onabort=v(jn,b,"TestLoadImage: abort",!1,y,I),I.ontimeout=v(jn,b,"TestLoadImage: timeout",!1,y,I),c.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=h}else y(!1)}function Ml(h,y){const b=new rr,I=new AbortController,F=setTimeout(()=>{I.abort(),jn(b,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:I.signal}).then(Y=>{clearTimeout(F),Y.ok?jn(b,"TestPingServer: ok",!0,y):jn(b,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(F),jn(b,"TestPingServer: error",!1,y)})}function jn(h,y,b,I,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),I(b)}catch{}}function zi(){this.g=new Ic}function Vr(h){this.i=h.Sb||null,this.h=h.ab||!1}E(Vr,Rc),Vr.prototype.g=function(){return new Bs(this.i,this.h)};function Bs(h,y){Ze.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Bs,Ze),s=Bs.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,or(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ui(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,or(this)),this.g&&(this.readyState=3,or(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ka(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ka(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Ui(this):or(this),this.readyState==3&&Ka(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,Ui(this))},s.Na=function(h){this.g&&(this.response=h,Ui(this))},s.ga=function(){this.g&&Ui(this)};function Ui(h){h.readyState=4,h.l=null,h.j=null,h.B=null,or(h)}s.setRequestHeader=function(h,y){this.A.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var b=y.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=y.next();return h.join(`\r
`)};function or(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Bs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Bn(h){let y="";return ge(h,function(b,I){y+=I,y+=":",y+=b,y+=`\r
`}),y}function qs(h,y,b){e:{for(I in b){var I=!1;break e}I=!0}I||(b=Bn(b),typeof h=="string"?b!=null&&ei(b):et(h,y,b))}function st(h){Ze.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(st,Ze);var Or=/^https?$/i,kl=["POST","PUT"];s=st.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,y,b,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Sl.g(),this.g.onreadystatechange=S(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Y){Fs(this,Y);return}if(h=b||"",b=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var F in I)b.set(F,I[F]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const Y of I.keys())b.set(Y,I.get(Y));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(b.keys()).find(Y=>Y.toLowerCase()=="content-type"),F=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(kl,y,void 0)>=0)||I||F||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,he]of b)this.g.setRequestHeader(Y,he);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Y){Fs(this,Y)}};function Fs(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Pl(h),ti(h)}function Pl(h){h.A||(h.A=!0,bt(h,"complete"),bt(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,bt(this,"complete"),bt(this,"abort"),ti(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ti(this,!0)),st.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Hs(this):this.Xa())},s.Xa=function(){Hs(this)};function Hs(h){if(h.h&&typeof l<"u"){if(h.v&&lr(h)==4)setTimeout(h.Ca.bind(h),0);else if(bt(h,"readystatechange"),lr(h)==4){h.h=!1;try{const Y=h.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var b;if(!(b=y)){var I;if(I=Y===0){let he=String(h.D).match(Pc)[1]||null;!he&&c.self&&c.self.location&&(he=c.self.location.protocol.slice(0,-1)),I=!Or.test(he?he.toLowerCase():"")}b=I}if(b)bt(h,"complete"),bt(h,"success");else{h.o=6;try{var F=lr(h)>2?h.g.statusText:""}catch{F=""}h.l=F+" ["+h.ca()+"]",Pl(h)}}finally{ti(h)}}}}function ti(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const b=h.g;h.g=null,y||bt(h,"ready");try{b.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function lr(h){return h.g?h.g.readyState:0}s.ca=function(){try{return lr(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Cd(y)}};function en(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ni(h){const y={};h=(h.g&&lr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<h.length;I++){if(C(h[I]))continue;var b=Oc(h[I]);const F=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const Y=y[F]||[];y[F]=Y,Y.push(b)}Ae(y,function(I){return I.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mr(h,y,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||y}function ji(h){this.za=0,this.i=[],this.j=new rr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Mr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Mr("baseRetryDelayMs",5e3,h),this.Za=Mr("retryDelaySeedMs",1e4,h),this.Ta=Mr("forwardChannelMaxRetries",2,h),this.va=Mr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Al(h&&h.concurrentRequestLimit),this.Ba=new zi,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=ji.prototype,s.ka=8,s.I=1,s.connect=function(h,y,b,I){kt(0),this.W=h,this.H=y||{},b&&I!==void 0&&(this.H.OSID=b,this.H.OAID=I),this.F=this.X,this.J=Qc(this,null,this.W),kr(this)};function Ll(h){if(Qa(h),h.I==3){var y=h.V++,b=zt(h.J);if(et(b,"SID",h.M),et(b,"RID",y),et(b,"TYPE","terminate"),Gs(h,b),y=new ir(h,h.j,y),y.M=2,y.A=Us(zt(b)),b=!1,c.navigator&&c.navigator.sendBeacon)try{b=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!b&&c.Image&&(new Image().src=y.A,b=!0),b||(y.g=$c(y.j,null),y.g.ea(y.A)),y.F=Date.now(),xr(y)}Kc(h)}function Bi(h){h.g&&(Ul(h),h.g.cancel(),h.g=null)}function Qa(h){Bi(h),h.v&&(c.clearTimeout(h.v),h.v=null),Ya(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function kr(h){if(!xl(h.h)&&!h.m){h.m=!0;var y=h.Ea;ce||A(),ue||(ce(),ue=!0),w.add(y,h),h.D=0}}function $a(h,y){return Cr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=wr(g(h.Ea,h,y),Gc(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const F=new ir(this,this.j,h);let Y=this.o;if(this.U&&(Y?(Y=V(Y),W(Y,this.U)):Y=this.U),this.u!==null||this.R||(F.J=Y,Y=null),this.S)e:{for(var y=0,b=0;b<this.i.length;b++){t:{var I=this.i[b];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(y+=I,y>4096){y=b;break e}if(y===4096||b===this.i.length-1){y=b+1;break e}}y=1e3}else y=1e3;y=Bc(this,F,y),b=zt(this.J),et(b,"RID",h),et(b,"CVER",22),this.G&&et(b,"X-HTTP-Session-Id",this.G),Gs(this,b),Y&&(this.R?y="headers="+ei(Bn(Y))+"&"+y:this.u&&qs(b,this.u,Y)),Il(this.h,F),this.Ra&&et(b,"TYPE","init"),this.S?(et(b,"$req",y),et(b,"SID","null"),F.U=!0,Ar(F,b,null)):Ar(F,b,y),this.I=2}}else this.I==3&&(h?zl(this,h):this.i.length==0||xl(this.h)||zl(this))};function zl(h,y){var b;y?b=y.l:b=h.V++;const I=zt(h.J);et(I,"SID",h.M),et(I,"RID",b),et(I,"AID",h.K),Gs(h,I),h.u&&h.o&&qs(I,h.u,h.o),b=new ir(h,h.j,b,h.D+1),h.u===null&&(b.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Bc(h,b,1e3),b.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Il(h.h,b),Ar(b,I,y)}function Gs(h,y){h.H&&ge(h.H,function(b,I){et(y,I,b)}),h.l&&ge({},function(b,I){et(y,I,b)})}function Bc(h,y,b){b=Math.min(h.i.length,b);const I=h.l?g(h.l.Ka,h.l,h):null;e:{var F=h.i;let Ve=-1;for(;;){const Rt=["count="+b];Ve==-1?b>0?(Ve=F[0].g,Rt.push("ofs="+Ve)):Ve=0:Rt.push("ofs="+Ve);let Je=!0;for(let gt=0;gt<b;gt++){var Y=F[gt].g;const qn=F[gt].map;if(Y-=Ve,Y<0)Ve=Math.max(0,F[gt].g-100),Je=!1;else try{Y="req"+Y+"_"||"";try{var he=qn instanceof Map?qn:Object.entries(qn);for(const[Lr,ur]of he){let cr=ur;d(ur)&&(cr=Oi(ur)),Rt.push(Y+Lr+"="+encodeURIComponent(cr))}}catch(Lr){throw Rt.push(Y+"type="+encodeURIComponent("_badmap")),Lr}}catch{I&&I(qn)}}if(Je){he=Rt.join("&");break e}}he=void 0}return h=h.i.splice(0,b),y.G=h,he}function qc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;ce||A(),ue||(ce(),ue=!0),w.add(y,h),h.A=0}}function Ks(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=wr(g(h.Da,h),Gc(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,Fc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=wr(g(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,kt(10),Bi(this),Fc(this))};function Ul(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Fc(h){h.g=new ir(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=zt(h.na);et(y,"RID","rpc"),et(y,"SID",h.M),et(y,"AID",h.K),et(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&et(y,"TO",h.ia),et(y,"TYPE","xmlhttp"),Gs(h,y),h.u&&h.o&&qs(y,h.u,h.o),h.O&&(h.g.H=h.O);var b=h.g;h=h.ba,b.M=1,b.A=Us(zt(y)),b.u=null,b.R=!0,ja(b,h)}s.Va=function(){this.C!=null&&(this.C=null,Bi(this),Ks(this),kt(19))};function Ya(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Hc(h,y){var b=null;if(h.g==y){Ya(h),Ul(h),h.g=null;var I=2}else if(Nr(h.h,y))b=y.G,Rl(h.h,y),I=1;else return;if(h.I!=0){if(y.o)if(I==1){b=y.u?y.u.length:0,y=Date.now()-y.F;var F=h.D;I=Ua(),bt(I,new Tr(I,b)),kr(h)}else qc(h);else if(F=y.m,F==3||F==0&&y.X>0||!(I==1&&$a(h,y)||I==2&&Ks(h)))switch(b&&b.length>0&&(y=h.h,y.i=y.i.concat(b)),F){case 1:Pr(h,5);break;case 4:Pr(h,10);break;case 3:Pr(h,6);break;default:Pr(h,2)}}}function Gc(h,y){let b=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(b*=2),b*y}function Pr(h,y){if(h.j.info("Error code "+y),y==2){var b=g(h.bb,h),I=h.Ua;const F=!I;I=new An(I||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Yt(I,"https"),Us(I),F?ar(I.toString(),b):Ml(I.toString(),b)}else kt(2);h.I=0,h.l&&h.l.pa(y),Kc(h),Qa(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function Kc(h){if(h.I=0,h.ja=[],h.l){const y=Cl(h.h);(y.length!=0||h.i.length!=0)&&(Q(h.ja,y),Q(h.ja,h.i),h.h.i.length=0,N(h.i),h.i.length=0),h.l.oa()}}function Qc(h,y,b){var I=b instanceof An?zt(b):new An(b);if(I.g!="")y&&(I.g=y+"."+I.g),Mi(I,I.u);else{var F=c.location;I=F.protocol,y=y?y+"."+F.hostname:F.hostname,F=+F.port;const Y=new An(null);I&&Yt(Y,I),y&&(Y.g=y),F&&Mi(Y,F),b&&(Y.h=b),I=Y}return b=h.G,y=h.wa,b&&y&&et(I,b,y),et(I,"VER",h.ka),Gs(h,I),I}function $c(h,y,b){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new st(new Vr({ab:b})):new st(h.ma),y.Fa(h.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yc(){}s=Yc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function qi(){}qi.prototype.g=function(h,y){return new fn(h,y)};function fn(h,y){Ze.call(this),this.g=new ji(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!C(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!C(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new ri(this)}E(fn,Ze),fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Ll(this.g)},fn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.v&&(b={},b.__data__=Oi(h),h=b);y.i.push(new Lt(y.Ya++,h)),y.I==3&&kr(y)},fn.prototype.N=function(){this.g.l=null,delete this.j,Ll(this.g),delete this.g,fn.Z.N.call(this)};function Xc(h){Zt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const b in y){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(Xc,Zt);function Jc(){zn.call(this),this.status=1}E(Jc,zn);function ri(h){this.g=h}E(ri,Yc),ri.prototype.ra=function(){bt(this.g,"a")},ri.prototype.qa=function(h){bt(this.g,new Xc(h))},ri.prototype.pa=function(h){bt(this.g,new Jc)},ri.prototype.oa=function(){bt(this.g,"b")},qi.prototype.createWebChannel=qi.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,ew=function(){return new qi},Z1=function(){return Ua()},W1=It,hg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ls.NO_ERROR=0,Ls.TIMEOUT=8,Ls.HTTP_ERROR=6,yf=Ls,wl.COMPLETE="complete",J1=wl,Cc.EventType=nr,nr.OPEN="a",nr.CLOSE="b",nr.ERROR="c",nr.MESSAGE="d",Ze.prototype.listen=Ze.prototype.J,Vu=Cc,st.prototype.listenOnce=st.prototype.K,st.prototype.getLastError=st.prototype.Ha,st.prototype.getLastErrorCode=st.prototype.ya,st.prototype.getStatus=st.prototype.ca,st.prototype.getResponseJson=st.prototype.La,st.prototype.getResponseText=st.prototype.la,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Fa,X1=st}).apply(typeof rf<"u"?rf:typeof self<"u"?self:typeof window<"u"?window:{});class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");let pl="12.9.0";function uV(s){pl=s}const Ra=new Hg("@firebase/firestore");function Oo(){return Ra.logLevel}function oe(s,...e){if(Ra.logLevel<=Fe.DEBUG){const t=e.map(ry);Ra.debug(`Firestore (${pl}): ${s}`,...t)}}function Dt(s,...e){if(Ra.logLevel<=Fe.ERROR){const t=e.map(ry);Ra.error(`Firestore (${pl}): ${s}`,...t)}}function Ko(s,...e){if(Ra.logLevel<=Fe.WARN){const t=e.map(ry);Ra.warn(`Firestore (${pl}): ${s}`,...t)}}function ry(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function ye(s,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,tw(s,r,t)}function tw(s,e,t){let r=`FIRESTORE (${pl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Dt(r),new Error(r)}function Ee(s,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,s||tw(e,a,r)}function ve(s,e){return s}const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Ni{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class wi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class cV{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(un.UNAUTHENTICATED)))}shutdown(){}}class fV{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ee(this.o===void 0,42304);let r=this.i;const a=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let l=new wi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new wi,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},d=p=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new wi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string",31837,{l:r}),new cV(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string",2055,{h:e}),new un(e)}}class dV{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=un.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class mV{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new dV(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class hE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pV{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,pr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ee(this.o===void 0,3512);const r=l=>{l.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,oe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new hE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ee(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new hE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function gV(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<s;r++)t[r]=Math.floor(256*Math.random());return t}class iy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=gV(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function Ne(s,e){return s<e?-1:s>e?1:0}function fg(s,e){const t=Math.min(s.length,e.length);for(let r=0;r<t;r++){const a=s.charAt(r),l=e.charAt(r);if(a!==l)return Hp(a)===Hp(l)?Ne(a,l):Hp(a)?1:-1}return Ne(s.length,e.length)}const yV=55296,_V=57343;function Hp(s){const e=s.charCodeAt(0);return e>=yV&&e<=_V}function Qo(s,e,t){return s.length===e.length&&s.every(((r,a)=>t(r,e[a])))}function nw(s){return s+"\0"}const fE="__name__";class qr{constructor(e,t,r){t===void 0?t=0:t>e.length&&ye(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ye(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return qr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof qr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=qr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Ne(e.length,t.length)}static compareSegments(e,t){const r=qr.isNumericId(e),a=qr.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?qr.extractNumericId(e).compare(qr.extractNumericId(t)):fg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ss.fromString(e.substring(4,e.length-2))}}class ut extends qr{construct(e,t,r){return new ut(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new pe(se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new ut(t)}static emptyPath(){return new ut([])}}const vV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Et extends qr{construct(e,t,r){return new Et(e,t,r)}static isValidIdentifier(e){return vV.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Et.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fE}static keyField(){return new Et([fE])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new pe(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new pe(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new pe(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(l(),a++)}if(l(),c)throw new pe(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Et(t)}static emptyPath(){return new Et([])}}class me{constructor(e){this.path=e}static fromPath(e){return new me(ut.fromString(e))}static fromName(e){return new me(ut.fromString(e).popFirst(5))}static empty(){return new me(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ut.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new ut(e.slice()))}}function bV(s,e,t){if(!t)throw new pe(se.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function EV(s,e,t,r){if(e===!0&&r===!0)throw new pe(se.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function dE(s){if(!me.isDocumentKey(s))throw new pe(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function rw(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function sy(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":ye(12329,{type:typeof s})}function Lf(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new pe(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=sy(s);throw new pe(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function Ht(s,e){const t={typeString:s};return e&&(t.value=e),t}function bc(s,e){if(!rw(s))throw new pe(se.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){t=`JSON missing required field: '${r}'`;break}const c=s[r];if(a&&typeof c!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new pe(se.INVALID_ARGUMENT,t);return!0}const mE=-62135596800,pE=1e6;class rt{static now(){return rt.fromMillis(Date.now())}static fromDate(e){return rt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*pE);return new rt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<mE)throw new pe(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/pE}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:rt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bc(e,rt._jsonSchema))return new rt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-mE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}rt._jsonSchemaVersion="firestore/timestamp/1.0",rt._jsonSchema={type:Ht("string",rt._jsonSchemaVersion),seconds:Ht("number"),nanoseconds:Ht("number")};class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new rt(0,0))}static max(){return new Se(new rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const $o=-1;class zf{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function dg(s){return s.fields.find((e=>e.kind===2))}function fa(s){return s.fields.filter((e=>e.kind!==2))}zf.UNKNOWN_ID=-1;class _f{constructor(e,t){this.fieldPath=e,this.kind=t}}class Zu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Zu(0,Ln.min())}}function iw(s,e){const t=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,a=Se.fromTimestamp(r===1e9?new rt(t+1,0):new rt(t,r));return new Ln(a,me.empty(),e)}function sw(s){return new Ln(s.readTime,s.key,$o)}class Ln{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ln(Se.min(),me.empty(),$o)}static max(){return new Ln(Se.max(),me.empty(),$o)}}function ay(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=me.comparator(s.documentKey,e.documentKey),t!==0?t:Ne(s.largestBatchId,e.largestBatchId))}const aw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ow{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ns(s){if(s.code!==se.FAILED_PRECONDITION||s.message!==aw)throw s;oe("LocalStore","Unexpectedly lost primary lease")}class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new B(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof B?t:B.resolve(t)}catch(t){return B.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):B.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):B.reject(t)}static resolve(e){return new B(((t,r)=>{t(e)}))}static reject(e){return new B(((t,r)=>{r(e)}))}static waitFor(e){return new B(((t,r)=>{let a=0,l=0,c=!1;e.forEach((d=>{++a,d.next((()=>{++l,c&&l===a&&t()}),(p=>r(p)))})),c=!0,l===a&&t()}))}static or(e){let t=B.resolve(!1);for(const r of e)t=t.next((a=>a?B.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new B(((r,a)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((v=>{c[g]=v,++d,d===l&&r(c)}),(v=>a(v)))}}))}static doWhile(e,t){return new B(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}const On="SimpleDb";class cd{static open(e,t,r,a){try{return new cd(t,e.transaction(a,r))}catch(l){throw new ju(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new wi,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new ju(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const a=oy(r.target.error);this.S.reject(new ju(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(oe(On,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new wV(t)}}class As{static delete(e){return oe(On,"Removing database:",e),ma(a1().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!d1())return!1;if(As.F())return!0;const e=Kt(),t=As.M(e),r=0<t&&t<10,a=lw(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,As.M(Kt())===12.2&&Dt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(oe(On,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{r(new ju(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?r(new pe(se.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new pe(se.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new ju(e,c))},a.onupgradeneeded=l=>{oe(On,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.N.k(c,a.transaction,l.oldVersion,this.version).next((()=>{oe(On,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const d=cd.open(this.db,e,l?"readonly":"readwrite",r),p=a(d).next((g=>(d.C(),g))).catch((g=>(d.abort(g),B.reject(g)))).toPromise();return p.catch((()=>{})),await d.D,p}catch(d){const p=d,g=p.name!=="FirebaseError"&&c<3;if(oe(On,"Transaction failed with error:",p.message,"Retrying:",g),this.close(),!g)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function lw(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class TV{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return ma(this.U.delete())}}class ju extends pe{constructor(e,t){super(se.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ds(s){return s.name==="IndexedDbTransactionError"}class wV{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(oe(On,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(oe(On,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ma(r)}add(e){return oe(On,"ADD",this.store.name,e,e),ma(this.store.add(e))}get(e){return ma(this.store.get(e)).next((t=>(t===void 0&&(t=null),oe(On,"GET",this.store.name,e,t),t)))}delete(e){return oe(On,"DELETE",this.store.name,e),ma(this.store.delete(e))}count(){return oe(On,"COUNT",this.store.name),ma(this.store.count())}H(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(r.range);return new B(((c,d)=>{l.onerror=p=>{d(p.target.error)},l.onsuccess=p=>{c(p.target.result)}}))}{const l=this.cursor(r),c=[];return this.J(l,((d,p)=>{c.push(p)})).next((()=>c))}}Z(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new B(((a,l)=>{r.onerror=c=>{l(c.target.error)},r.onsuccess=c=>{a(c.target.result)}}))}X(e,t){oe(On,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const a=this.cursor(r);return this.J(a,((l,c,d)=>d.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.J(a,t)}te(e){const t=this.cursor({});return new B(((r,a)=>{t.onerror=l=>{const c=oy(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next((d=>{d?c.continue():r()})):r()}}))}J(e,t){const r=[];return new B(((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const p=new TV(d),g=t(d.primaryKey,d.value,p);if(g instanceof B){const v=g.catch((E=>(p.done(),B.reject(E))));r.push(v)}p.isDone?a():p.G===null?d.continue():d.continue(p.G)}})).next((()=>B.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ma(s){return new B(((e,t)=>{s.onsuccess=r=>{const a=r.target.result;e(a)},s.onerror=r=>{const a=oy(r.target.error);t(a)}}))}let gE=!1;function oy(s){const e=As.M(Kt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(t)>=0){const r=new pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return gE||(gE=!0,setTimeout((()=>{throw r}),0)),r}}return s}const Bu="IndexBackfiller";class SV{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){oe(Bu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();oe(Bu,`Documents written: ${t}`)}catch(t){Ds(t)?oe(Bu,"Ignoring IndexedDB error during index backfill: ",t):await Ns(t)}await this.re(6e4)}))}}class AV{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let a=t,l=!0;return B.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!r.has(c))return oe(Bu,`Processing collection: ${c}`),this.oe(e,c,a).next((d=>{a-=d,r.add(c)}));l=!1})))).next((()=>t-a))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(a,l))).next((d=>(oe(Bu,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d)))).next((()=>c.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((a,l)=>{const c=sw(l);ay(c,r)>0&&(r=c)})),new Ln(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class wn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}wn.ce=-1;const Ea=-1;function hd(s){return s==null}function ec(s){return s===0&&1/s==-1/0}function uw(s){return typeof s=="number"&&Number.isInteger(s)&&!ec(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const Uf="";function hn(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=yE(e)),e=xV(s.get(t),e);return yE(e)}function xV(s,e){let t=e;const r=s.length;for(let a=0;a<r;a++){const l=s.charAt(a);switch(l){case"\0":t+="";break;case Uf:t+="";break;default:t+=l}}return t}function yE(s){return s+Uf+""}function Gr(s){const e=s.length;if(Ee(e>=2,64408,{path:s}),e===2)return Ee(s.charAt(0)===Uf&&s.charAt(1)==="",56145,{path:s}),ut.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const c=s.indexOf(Uf,l);switch((c<0||c>t)&&ye(50515,{path:s}),s.charAt(c+1)){case"":const d=s.substring(l,c);let p;a.length===0?p=d:(a+=d,p=a,a=""),r.push(p);break;case"":a+=s.substring(l,c),a+="\0";break;case"":a+=s.substring(l,c+1);break;default:ye(61167,{path:s})}l=c+2}return new ut(r)}const da="remoteDocuments",Ec="owner",Io="owner",tc="mutationQueues",IV="userId",mr="mutations",_E="batchId",va="userMutationsIndex",vE=["userId","batchId"];function vf(s,e){return[s,hn(e)]}function cw(s,e,t){return[s,hn(e),t]}const RV={},Yo="documentMutations",jf="remoteDocumentsV14",CV=["prefixPath","collectionGroup","readTime","documentId"],bf="documentKeyIndex",NV=["prefixPath","collectionGroup","documentId"],hw="collectionGroupIndex",DV=["collectionGroup","readTime","prefixPath","documentId"],nc="remoteDocumentGlobal",mg="remoteDocumentGlobalKey",Xo="targets",fw="queryTargetsIndex",VV=["canonicalId","targetId"],Jo="targetDocuments",OV=["targetId","path"],ly="documentTargetsIndex",MV=["path","targetId"],Bf="targetGlobalKey",Ta="targetGlobal",rc="collectionParents",kV=["collectionId","parent"],Wo="clientMetadata",PV="clientId",fd="bundles",LV="bundleId",dd="namedQueries",zV="name",uy="indexConfiguration",UV="indexId",pg="collectionGroupIndex",jV="collectionGroup",qu="indexState",BV=["indexId","uid"],dw="sequenceNumberIndex",qV=["uid","sequenceNumber"],Fu="indexEntries",FV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],mw="documentKeyIndex",HV=["indexId","uid","orderedDocumentKey"],md="documentOverlays",GV=["userId","collectionPath","documentId"],gg="collectionPathOverlayIndex",KV=["userId","collectionPath","largestBatchId"],pw="collectionGroupOverlayIndex",QV=["userId","collectionGroup","largestBatchId"],cy="globals",$V="name",gw=[tc,mr,Yo,da,Xo,Ec,Ta,Jo,Wo,nc,rc,fd,dd],YV=[...gw,md],yw=[tc,mr,Yo,jf,Xo,Ec,Ta,Jo,Wo,nc,rc,fd,dd,md],_w=yw,hy=[..._w,uy,qu,Fu],XV=hy,vw=[...hy,cy],JV=vw;class yg extends ow{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Qt(s,e){const t=ve(s);return As.O(t.le,e)}function bE(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Pa(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function bw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class dt{constructor(e,t){this.comparator=e,this.root=t||an.EMPTY}insert(e,t){return new dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,an.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,an.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sf(this.root,e,this.comparator,!1)}getReverseIterator(){return new sf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sf(this.root,e,this.comparator,!0)}}class sf{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class an{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??an.RED,this.left=a??an.EMPTY,this.right=l??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new an(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return an.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ye(27949);return e+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw ye(57766)}get value(){throw ye(16141)}get color(){throw ye(16727)}get left(){throw ye(29726)}get right(){throw ye(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new an(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class it{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new EE(this.data.getIterator())}getIteratorFrom(e){return new EE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof it)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new it(this.comparator);return t.data=e,t}}class EE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ro(s){return s.hasNext()?s.getNext():void 0}class Wn{constructor(e){this.fields=e,e.sort(Et.comparator)}static empty(){return new Wn([])}unionWith(e){let t=new it(Et.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Wn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qo(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class Ew extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Ew("Invalid base64 string: "+l):l}})(e);return new Vt(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new Vt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const WV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ii(s){if(Ee(!!s,39018),typeof s=="string"){let e=0;const t=WV.exec(s);if(Ee(!!t,46558,{timestamp:s}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_t(s.seconds),nanos:_t(s.nanos)}}function _t(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Ri(s){return typeof s=="string"?Vt.fromBase64String(s):Vt.fromUint8Array(s)}const Tw="server_timestamp",ww="__type__",Sw="__previous_value__",Aw="__local_write_time__";function fy(s){return(s?.mapValue?.fields||{})[ww]?.stringValue===Tw}function pd(s){const e=s.mapValue.fields[Sw];return fy(e)?pd(e):e}function ic(s){const e=Ii(s.mapValue.fields[Aw].timestampValue);return new rt(e.seconds,e.nanos)}class ZV{constructor(e,t,r,a,l,c,d,p,g,v,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=v,this.apiKey=E}}const qf="(default)";class Ca{constructor(e,t){this.projectId=e,this.database=t||qf}static empty(){return new Ca("","")}get isDefaultDatabase(){return this.database===qf}isEqual(e){return e instanceof Ca&&e.projectId===this.projectId&&e.database===this.database}}function eO(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new pe(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ca(s.options.projectId,e)}const dy="__type__",xw="__max__",vs={mapValue:{fields:{__type__:{stringValue:xw}}}},my="__vector__",Zo="value",Ef={nullValue:"NULL_VALUE"};function xs(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?fy(s)?4:Iw(s)?9007199254740991:gd(s)?10:11:ye(28295,{value:s})}function Jr(s,e){if(s===e)return!0;const t=xs(s);if(t!==xs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return ic(s).isEqual(ic(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Ii(a.timestampValue),d=Ii(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(a,l){return Ri(a.bytesValue).isEqual(Ri(l.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(a,l){return _t(a.geoPointValue.latitude)===_t(l.geoPointValue.latitude)&&_t(a.geoPointValue.longitude)===_t(l.geoPointValue.longitude)})(s,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return _t(a.integerValue)===_t(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=_t(a.doubleValue),d=_t(l.doubleValue);return c===d?ec(c)===ec(d):isNaN(c)&&isNaN(d)}return!1})(s,e);case 9:return Qo(s.arrayValue.values||[],e.arrayValue.values||[],Jr);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(bE(c)!==bE(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Jr(c[p],d[p])))return!1;return!0})(s,e);default:return ye(52216,{left:s})}}function sc(s,e){return(s.values||[]).find((t=>Jr(t,e)))!==void 0}function Is(s,e){if(s===e)return 0;const t=xs(s),r=xs(e);if(t!==r)return Ne(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ne(s.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=_t(l.integerValue||l.doubleValue),p=_t(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(s,e);case 3:return TE(s.timestampValue,e.timestampValue);case 4:return TE(ic(s),ic(e));case 5:return fg(s.stringValue,e.stringValue);case 6:return(function(l,c){const d=Ri(l),p=Ri(c);return d.compareTo(p)})(s.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let g=0;g<d.length&&g<p.length;g++){const v=Ne(d[g],p[g]);if(v!==0)return v}return Ne(d.length,p.length)})(s.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Ne(_t(l.latitude),_t(c.latitude));return d!==0?d:Ne(_t(l.longitude),_t(c.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return wE(s.arrayValue,e.arrayValue);case 10:return(function(l,c){const d=l.fields||{},p=c.fields||{},g=d[Zo]?.arrayValue,v=p[Zo]?.arrayValue,E=Ne(g?.values?.length||0,v?.values?.length||0);return E!==0?E:wE(g,v)})(s.mapValue,e.mapValue);case 11:return(function(l,c){if(l===vs.mapValue&&c===vs.mapValue)return 0;if(l===vs.mapValue)return 1;if(c===vs.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),g=c.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let E=0;E<p.length&&E<v.length;++E){const S=fg(p[E],v[E]);if(S!==0)return S;const N=Is(d[p[E]],g[v[E]]);if(N!==0)return N}return Ne(p.length,v.length)})(s.mapValue,e.mapValue);default:throw ye(23264,{he:t})}}function TE(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ne(s,e);const t=Ii(s),r=Ii(e),a=Ne(t.seconds,r.seconds);return a!==0?a:Ne(t.nanos,r.nanos)}function wE(s,e){const t=s.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=Is(t[a],r[a]);if(l)return l}return Ne(t.length,r.length)}function el(s){return _g(s)}function _g(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const r=Ii(t);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return Ri(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return me.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=_g(l);return r+"]"})(s.arrayValue):"mapValue"in s?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${_g(t.fields[c])}`;return a+"}"})(s.mapValue):ye(61005,{value:s})}function Tf(s){switch(xs(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=pd(s);return e?16+Tf(e):16;case 5:return 2*s.stringValue.length;case 6:return Ri(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+Tf(l)),0)})(s.arrayValue);case 10:case 11:return(function(r){let a=0;return Pa(r.fields,((l,c)=>{a+=l.length+Tf(c)})),a})(s.mapValue);default:throw ye(13486,{value:s})}}function py(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function vg(s){return!!s&&"integerValue"in s}function ac(s){return!!s&&"arrayValue"in s}function SE(s){return!!s&&"nullValue"in s}function AE(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function wf(s){return!!s&&"mapValue"in s}function gd(s){return(s?.mapValue?.fields||{})[dy]?.stringValue===my}function Hu(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Pa(s.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Hu(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hu(s.arrayValue.values[t]);return e}return{...s}}function Iw(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===xw}const Rw={mapValue:{fields:{[dy]:{stringValue:my},[Zo]:{arrayValue:{}}}}};function tO(s){return"nullValue"in s?Ef:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?py(Ca.empty(),me.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?gd(s)?Rw:{mapValue:{}}:ye(35942,{value:s})}function nO(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?py(Ca.empty(),me.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?Rw:"mapValue"in s?gd(s)?{mapValue:{}}:vs:ye(61959,{value:s})}function xE(s,e){const t=Is(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function IE(s,e){const t=Is(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}class Tn{constructor(e){this.value=e}static empty(){return new Tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!wf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hu(t)}setAll(e){let t=Et.emptyPath(),r={},a=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,a),r={},a=[],t=d.popLast()}c?r[d.lastSegment()]=Hu(c):a.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());wf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Jr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];wf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Pa(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new Tn(Hu(this.value))}}function Cw(s){const e=[];return Pa(s.fields,((t,r)=>{const a=new Et([t]);if(wf(r)){const l=Cw(r.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new Wn(e)}class At{constructor(e,t,r,a,l,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new At(e,0,Se.min(),Se.min(),Se.min(),Tn.empty(),0)}static newFoundDocument(e,t,r,a){return new At(e,1,t,Se.min(),r,a,0)}static newNoDocument(e,t){return new At(e,2,t,Se.min(),Se.min(),Tn.empty(),0)}static newUnknownDocument(e,t){return new At(e,3,t,Se.min(),Se.min(),Tn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof At&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new At(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class tl{constructor(e,t){this.position=e,this.inclusive=t}}function RE(s,e,t){let r=0;for(let a=0;a<s.position.length;a++){const l=e[a],c=s.position[a];if(l.field.isKeyField()?r=me.comparator(me.fromName(c.referenceValue),t.key):r=Is(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function CE(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Jr(s.position[t],e.position[t]))return!1;return!0}class Ff{constructor(e,t="asc"){this.field=e,this.dir=t}}function rO(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class Nw{}class Ge extends Nw{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new iO(e,t,r):t==="array-contains"?new oO(e,r):t==="in"?new Pw(e,r):t==="not-in"?new lO(e,r):t==="array-contains-any"?new uO(e,r):new Ge(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new sO(e,r):new aO(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Is(t,this.value)):t!==null&&xs(this.value)===xs(t)&&this.matchesComparison(Is(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ct extends Nw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ct(e,t)}matches(e){return nl(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function nl(s){return s.op==="and"}function bg(s){return s.op==="or"}function gy(s){return Dw(s)&&nl(s)}function Dw(s){for(const e of s.filters)if(e instanceof ct)return!1;return!0}function Eg(s){if(s instanceof Ge)return s.field.canonicalString()+s.op.toString()+el(s.value);if(gy(s))return s.filters.map((e=>Eg(e))).join(",");{const e=s.filters.map((t=>Eg(t))).join(",");return`${s.op}(${e})`}}function Vw(s,e){return s instanceof Ge?(function(r,a){return a instanceof Ge&&r.op===a.op&&r.field.isEqual(a.field)&&Jr(r.value,a.value)})(s,e):s instanceof ct?(function(r,a){return a instanceof ct&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,c,d)=>l&&Vw(c,a.filters[d])),!0):!1})(s,e):void ye(19439)}function Ow(s,e){const t=s.filters.concat(e);return ct.create(t,s.op)}function Mw(s){return s instanceof Ge?(function(t){return`${t.field.canonicalString()} ${t.op} ${el(t.value)}`})(s):s instanceof ct?(function(t){return t.op.toString()+" {"+t.getFilters().map(Mw).join(" ,")+"}"})(s):"Filter"}class iO extends Ge{constructor(e,t,r){super(e,t,r),this.key=me.fromName(r.referenceValue)}matches(e){const t=me.comparator(e.key,this.key);return this.matchesComparison(t)}}class sO extends Ge{constructor(e,t){super(e,"in",t),this.keys=kw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class aO extends Ge{constructor(e,t){super(e,"not-in",t),this.keys=kw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function kw(s,e){return(e.arrayValue?.values||[]).map((t=>me.fromName(t.referenceValue)))}class oO extends Ge{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ac(t)&&sc(t.arrayValue,this.value)}}class Pw extends Ge{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&sc(this.value.arrayValue,t)}}class lO extends Ge{constructor(e,t){super(e,"not-in",t)}matches(e){if(sc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!sc(this.value.arrayValue,t)}}class uO extends Ge{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ac(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>sc(this.value.arrayValue,r)))}}class cO{constructor(e,t=null,r=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function Tg(s,e=null,t=[],r=[],a=null,l=null,c=null){return new cO(s,e,t,r,a,l,c)}function Na(s){const e=ve(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Eg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),hd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>el(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>el(r))).join(",")),e.Te=t}return e.Te}function Tc(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!rO(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!Vw(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!CE(s.startAt,e.startAt)&&CE(s.endAt,e.endAt)}function Hf(s){return me.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Gf(s,e){return s.filters.filter((t=>t instanceof Ge&&t.field.isEqual(e)))}function NE(s,e,t){let r=Ef,a=!0;for(const l of Gf(s,e)){let c=Ef,d=!0;switch(l.op){case"<":case"<=":c=tO(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=Ef}xE({value:r,inclusive:a},{value:c,inclusive:d})<0&&(r=c,a=d)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const c=t.position[l];xE({value:r,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}function DE(s,e,t){let r=vs,a=!0;for(const l of Gf(s,e)){let c=vs,d=!0;switch(l.op){case">=":case">":c=nO(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=vs}IE({value:r,inclusive:a},{value:c,inclusive:d})>0&&(r=c,a=d)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const c=t.position[l];IE({value:r,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}class yd{constructor(e,t=null,r=[],a=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Lw(s,e,t,r,a,l,c,d){return new yd(s,e,t,r,a,l,c,d)}function _d(s){return new yd(s)}function VE(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function hO(s){return me.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function fO(s){return s.collectionGroup!==null}function Gu(s){const e=ve(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new it(Et.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Ff(l,r))})),t.has(Et.keyField().canonicalString())||e.Ie.push(new Ff(Et.keyField(),r))}return e.Ie}function Pn(s){const e=ve(s);return e.Ee||(e.Ee=dO(e,Gu(s))),e.Ee}function dO(s,e){if(s.limitType==="F")return Tg(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Ff(a.field,l)}));const t=s.endAt?new tl(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new tl(s.startAt.position,s.startAt.inclusive):null;return Tg(s.path,s.collectionGroup,e,s.filters,s.limit,t,r)}}function wg(s,e,t){return new yd(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function vd(s,e){return Tc(Pn(s),Pn(e))&&s.limitType===e.limitType}function zw(s){return`${Na(Pn(s))}|lt:${s.limitType}`}function Mo(s){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>Mw(a))).join(", ")}]`),hd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>el(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>el(a))).join(",")),`Target(${r})`})(Pn(s))}; limitType=${s.limitType})`}function wc(s,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):me.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(s,e)&&(function(r,a){for(const l of Gu(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(s,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(s,e)&&(function(r,a){return!(r.startAt&&!(function(c,d,p){const g=RE(c,d,p);return c.inclusive?g<=0:g<0})(r.startAt,Gu(r),a)||r.endAt&&!(function(c,d,p){const g=RE(c,d,p);return c.inclusive?g>=0:g>0})(r.endAt,Gu(r),a))})(s,e)}function Uw(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function jw(s){return(e,t)=>{let r=!1;for(const a of Gu(s)){const l=mO(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function mO(s,e,t){const r=s.field.isKeyField()?me.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),g=d.data.field(l);return p!==null&&g!==null?Is(p,g):ye(42886)})(s.field,e,t);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return ye(19790,{direction:s.dir})}}class Di{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Pa(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return bw(this.inner)}size(){return this.innerSize}}const pO=new dt(me.comparator);function Mn(){return pO}const Bw=new dt(me.comparator);function Ou(...s){let e=Bw;for(const t of s)e=e.insert(t.key,t);return e}function qw(s){let e=Bw;return s.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Kr(){return Ku()}function Fw(){return Ku()}function Ku(){return new Di((s=>s.toString()),((s,e)=>s.isEqual(e)))}const gO=new dt(me.comparator),yO=new it(me.comparator);function Pe(...s){let e=yO;for(const t of s)e=e.add(t);return e}const _O=new it(Ne);function yy(){return _O}function _y(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ec(e)?"-0":e}}function Hw(s){return{integerValue:""+s}}function vO(s,e){return uw(e)?Hw(e):_y(s,e)}class bd{constructor(){this._=void 0}}function bO(s,e,t){return s instanceof oc?(function(a,l){const c={fields:{[ww]:{stringValue:Tw},[Aw]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&fy(l)&&(l=pd(l)),l&&(c.fields[Sw]=l),{mapValue:c}})(t,e):s instanceof rl?Kw(s,e):s instanceof il?Qw(s,e):(function(a,l){const c=Gw(a,l),d=OE(c)+OE(a.Ae);return vg(c)&&vg(a.Ae)?Hw(d):_y(a.serializer,d)})(s,e)}function EO(s,e,t){return s instanceof rl?Kw(s,e):s instanceof il?Qw(s,e):t}function Gw(s,e){return s instanceof lc?(function(r){return vg(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class oc extends bd{}class rl extends bd{constructor(e){super(),this.elements=e}}function Kw(s,e){const t=$w(e);for(const r of s.elements)t.some((a=>Jr(a,r)))||t.push(r);return{arrayValue:{values:t}}}class il extends bd{constructor(e){super(),this.elements=e}}function Qw(s,e){let t=$w(e);for(const r of s.elements)t=t.filter((a=>!Jr(a,r)));return{arrayValue:{values:t}}}class lc extends bd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function OE(s){return _t(s.integerValue||s.doubleValue)}function $w(s){return ac(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class TO{constructor(e,t){this.field=e,this.transform=t}}function wO(s,e){return s.field.isEqual(e.field)&&(function(r,a){return r instanceof rl&&a instanceof rl||r instanceof il&&a instanceof il?Qo(r.elements,a.elements,Jr):r instanceof lc&&a instanceof lc?Jr(r.Ae,a.Ae):r instanceof oc&&a instanceof oc})(s.transform,e.transform)}class SO{constructor(e,t){this.version=e,this.transformResults=t}}class kn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new kn}static exists(e){return new kn(void 0,e)}static updateTime(e){return new kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sf(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Ed{}function Yw(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new vy(s.key,kn.none()):new gl(s.key,s.data,kn.none());{const t=s.data,r=Tn.empty();let a=new it(Et.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new Vs(s.key,r,new Wn(a.toArray()),kn.none())}}function AO(s,e,t){s instanceof gl?(function(a,l,c){const d=a.value.clone(),p=kE(a.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(s,e,t):s instanceof Vs?(function(a,l,c){if(!Sf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=kE(a.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(Xw(a)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(s,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Qu(s,e,t,r){return s instanceof gl?(function(l,c,d,p){if(!Sf(l.precondition,c))return d;const g=l.value.clone(),v=PE(l.fieldTransforms,p,c);return g.setAll(v),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(s,e,t,r):s instanceof Vs?(function(l,c,d,p){if(!Sf(l.precondition,c))return d;const g=PE(l.fieldTransforms,p,c),v=c.data;return v.setAll(Xw(l)),v.setAll(g),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(s,e,t,r):(function(l,c,d){return Sf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(s,e,t)}function xO(s,e){let t=null;for(const r of s.fieldTransforms){const a=e.data.field(r.field),l=Gw(r.transform,a||null);l!=null&&(t===null&&(t=Tn.empty()),t.set(r.field,l))}return t||null}function ME(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&Qo(r,a,((l,c)=>wO(l,c)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class gl extends Ed{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Vs extends Ed{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Xw(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=s.data.field(t);e.set(t,r)}})),e}function kE(s,e,t){const r=new Map;Ee(s.length===t.length,32656,{Ve:t.length,de:s.length});for(let a=0;a<t.length;a++){const l=s[a],c=l.transform,d=e.data.field(l.field);r.set(l.field,EO(c,d,t[a]))}return r}function PE(s,e,t){const r=new Map;for(const a of s){const l=a.transform,c=t.data.field(a.field);r.set(a.field,bO(l,c,e))}return r}class vy extends Ed{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Jw extends Ed{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class by{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&AO(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Qu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Qu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Fw();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const p=Yw(c,d);p!==null&&r.set(a.key,p),c.isValidDocument()||c.convertToNoDocument(Se.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Pe())}isEqual(e){return this.batchId===e.batchId&&Qo(this.mutations,e.mutations,((t,r)=>ME(t,r)))&&Qo(this.baseMutations,e.baseMutations,((t,r)=>ME(t,r)))}}class Ey{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){Ee(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return gO})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new Ey(e,t,r,a)}}class Ty{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class IO{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ft,Ke;function RO(s){switch(s){case se.OK:return ye(64938);case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return ye(15467,{code:s})}}function Ww(s){if(s===void 0)return Dt("GRPC error has no .code"),se.UNKNOWN;switch(s){case Ft.OK:return se.OK;case Ft.CANCELLED:return se.CANCELLED;case Ft.UNKNOWN:return se.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return se.INTERNAL;case Ft.UNAVAILABLE:return se.UNAVAILABLE;case Ft.UNAUTHENTICATED:return se.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case Ft.NOT_FOUND:return se.NOT_FOUND;case Ft.ALREADY_EXISTS:return se.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return se.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case Ft.ABORTED:return se.ABORTED;case Ft.OUT_OF_RANGE:return se.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return se.UNIMPLEMENTED;case Ft.DATA_LOSS:return se.DATA_LOSS;default:return ye(39323,{code:s})}}(Ke=Ft||(Ft={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";function CO(){return new TextEncoder}const NO=new Ss([4294967295,4294967295],0);function LE(s){const e=CO().encode(s),t=new Y1;return t.update(e),new Uint8Array(t.digest())}function zE(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ss([t,r],0),new Ss([a,l],0)]}class wy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Mu(`Invalid padding: ${t}`);if(r<0)throw new Mu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Mu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Mu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ss.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(Ss.fromNumber(r)));return a.compare(NO)===1&&(a=new Ss([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=LE(e),[r,a]=zE(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);if(!this.we(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new wy(l,a,t);return r.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=LE(e),[r,a]=zE(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);this.be(c)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Mu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Sc{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Ac.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Sc(Se.min(),a,new dt(Ne),Mn(),Pe())}}class Ac{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ac(r,t,Pe(),Pe(),Pe())}}class Af{constructor(e,t,r,a){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=a}}class Zw{constructor(e,t){this.targetId=e,this.Ce=t}}class eS{constructor(e,t,r=Vt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class UE{constructor(){this.ve=0,this.Fe=jE(),this.Me=Vt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Pe(),t=Pe(),r=Pe();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:ye(38017,{changeType:l})}})),new Ac(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=jE()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ee(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class DO{constructor(e){this.Ge=e,this.ze=new Map,this.je=Mn(),this.He=af(),this.Je=af(),this.Ze=new dt(Ne)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:ye(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Hf(l))if(r===0){const c=new me(l.path);this.et(t,c,At.newNoDocument(c,Se.min()))}else Ee(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const d=this.ut(e),p=d?this.ct(d,e,c):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=Ri(r).toUint8Array()}catch(p){if(p instanceof Ew)return Ko("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new wy(c,a,l)}catch(p){return Ko(p instanceof Mu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Hf(d.target)){const p=new me(d.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,At.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let r=Pe();this.Je.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new Sc(e,t,this.Ze,this.je,r);return this.je=Mn(),this.He=af(),this.Je=af(),this.Ze=new dt(Ne),a}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new UE,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new it(Ne),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new it(Ne),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new UE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function af(){return new dt(me.comparator)}function jE(){return new dt(me.comparator)}const VO={asc:"ASCENDING",desc:"DESCENDING"},OO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MO={and:"AND",or:"OR"};class kO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Sg(s,e){return s.useProto3Json||hd(e)?e:{value:e}}function sl(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tS(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function PO(s,e){return sl(s,e.toTimestamp())}function mn(s){return Ee(!!s,49232),Se.fromTimestamp((function(t){const r=Ii(t);return new rt(r.seconds,r.nanos)})(s))}function Sy(s,e){return Ag(s,e).canonicalString()}function Ag(s,e){const t=(function(a){return new ut(["projects",a.projectId,"databases",a.database])})(s).child("documents");return e===void 0?t:t.child(e)}function nS(s){const e=ut.fromString(s);return Ee(hS(e),10190,{key:e.toString()}),e}function Kf(s,e){return Sy(s.databaseId,e.path)}function wa(s,e){const t=nS(e);if(t.get(1)!==s.databaseId.projectId)throw new pe(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new pe(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new me(sS(t))}function rS(s,e){return Sy(s.databaseId,e)}function iS(s){const e=nS(s);return e.length===4?ut.emptyPath():sS(e)}function xg(s){return new ut(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function sS(s){return Ee(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function BE(s,e,t){return{name:Kf(s,e),fields:t.value.mapValue.fields}}function LO(s,e,t){const r=wa(s,e.name),a=mn(e.updateTime),l=e.createTime?mn(e.createTime):Se.min(),c=new Tn({mapValue:{fields:e.fields}}),d=At.newFoundDocument(r,a,l,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function zO(s,e){let t;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:ye(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,v){return g.useProto3Json?(Ee(v===void 0||typeof v=="string",58123),Vt.fromBase64String(v||"")):(Ee(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Vt.fromUint8Array(v||new Uint8Array))})(s,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const v=g.code===void 0?se.UNKNOWN:Ww(g.code);return new pe(v,g.message||"")})(c);t=new eS(r,a,l,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=wa(s,r.document.name),l=mn(r.document.updateTime),c=r.document.createTime?mn(r.document.createTime):Se.min(),d=new Tn({mapValue:{fields:r.document.fields}}),p=At.newFoundDocument(a,l,c,d),g=r.targetIds||[],v=r.removedTargetIds||[];t=new Af(g,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=wa(s,r.document),l=r.readTime?mn(r.readTime):Se.min(),c=At.newNoDocument(a,l),d=r.removedTargetIds||[];t=new Af([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=wa(s,r.document),l=r.removedTargetIds||[];t=new Af([],l,a,null)}else{if(!("filter"in e))return ye(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new IO(a,l),d=r.targetId;t=new Zw(d,c)}}return t}function Qf(s,e){let t;if(e instanceof gl)t={update:BE(s,e.key,e.value)};else if(e instanceof vy)t={delete:Kf(s,e.key)};else if(e instanceof Vs)t={update:BE(s,e.key,e.data),updateMask:HO(e.fieldMask)};else{if(!(e instanceof Jw))return ye(16599,{dt:e.type});t={verify:Kf(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const d=c.transform;if(d instanceof oc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof rl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof il)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof lc)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw ye(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:PO(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ye(27497)})(s,e.precondition)),t}function Ig(s,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?kn.updateTime(mn(l.updateTime)):l.exists!==void 0?kn.exists(l.exists):kn.none()})(e.currentDocument):kn.none(),r=e.updateTransforms?e.updateTransforms.map((a=>(function(c,d){let p=null;if("setToServerValue"in d)Ee(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),p=new oc;else if("appendMissingElements"in d){const v=d.appendMissingElements.values||[];p=new rl(v)}else if("removeAllFromArray"in d){const v=d.removeAllFromArray.values||[];p=new il(v)}else"increment"in d?p=new lc(c,d.increment):ye(16584,{proto:d});const g=Et.fromServerFormat(d.fieldPath);return new TO(g,p)})(s,a))):[];if(e.update){e.update.name;const a=wa(s,e.update.name),l=new Tn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(p){const g=p.fieldPaths||[];return new Wn(g.map((v=>Et.fromServerFormat(v))))})(e.updateMask);return new Vs(a,l,c,t,r)}return new gl(a,l,t,r)}if(e.delete){const a=wa(s,e.delete);return new vy(a,t)}if(e.verify){const a=wa(s,e.verify);return new Jw(a,t)}return ye(1463,{proto:e})}function UO(s,e){return s&&s.length>0?(Ee(e!==void 0,14353),s.map((t=>(function(a,l){let c=a.updateTime?mn(a.updateTime):mn(l);return c.isEqual(Se.min())&&(c=mn(l)),new SO(c,a.transformResults||[])})(t,e)))):[]}function aS(s,e){return{documents:[rS(s,e.path)]}}function oS(s,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=rS(s,a);const l=(function(g){if(g.length!==0)return cS(ct.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((v=>(function(S){return{field:ko(S.field),direction:BO(S.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Sg(s,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function lS(s){let e=iS(s.parent);const t=s.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){Ee(r===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const S=uS(E);return S instanceof ct&&gy(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((S=>(function(Q){return new Ff(Po(Q.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Q.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,hd(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(E){const S=!!E.before,N=E.values||[];return new tl(N,S)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const S=!E.before,N=E.values||[];return new tl(N,S)})(t.endAt)),Lw(e,a,c,l,d,"F",p,g)}function jO(s,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function uS(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Po(t.unaryFilter.field);return Ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Po(t.unaryFilter.field);return Ge.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Po(t.unaryFilter.field);return Ge.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Po(t.unaryFilter.field);return Ge.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ye(61313);default:return ye(60726)}})(s):s.fieldFilter!==void 0?(function(t){return Ge.create(Po(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ye(58110);default:return ye(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return ct.create(t.compositeFilter.filters.map((r=>uS(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ye(1026)}})(t.compositeFilter.op))})(s):ye(30097,{filter:s})}function BO(s){return VO[s]}function qO(s){return OO[s]}function FO(s){return MO[s]}function ko(s){return{fieldPath:s.canonicalString()}}function Po(s){return Et.fromServerFormat(s.fieldPath)}function cS(s){return s instanceof Ge?(function(t){if(t.op==="=="){if(AE(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NAN"}};if(SE(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(AE(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NOT_NAN"}};if(SE(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ko(t.field),op:qO(t.op),value:t.value}}})(s):s instanceof ct?(function(t){const r=t.getFilters().map((a=>cS(a)));return r.length===1?r[0]:{compositeFilter:{op:FO(t.op),filters:r}}})(s):ye(54877,{filter:s})}function HO(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function hS(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function fS(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class Ei{constructor(e,t,r,a,l=Se.min(),c=Se.min(),d=Vt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Ei(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class dS{constructor(e){this.yt=e}}function GO(s,e){let t;if(e.document)t=LO(s.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=me.fromSegments(e.noDocument.path),a=Va(e.noDocument.readTime);t=At.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ye(56709);{const r=me.fromSegments(e.unknownDocument.path),a=Va(e.unknownDocument.version);t=At.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime((function(a){const l=new rt(a[0],a[1]);return Se.fromTimestamp(l)})(e.readTime)),t}function qE(s,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:$f(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(l,c){return{name:Kf(l,c.key),fields:c.data.value.mapValue.fields,updateTime:sl(l,c.version.toTimestamp()),createTime:sl(l,c.createTime.toTimestamp())}})(s.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Da(e.version)};else{if(!e.isUnknownDocument())return ye(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Da(e.version)}}return r}function $f(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function Da(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Va(s){const e=new rt(s.seconds,s.nanoseconds);return Se.fromTimestamp(e)}function pa(s,e){const t=(e.baseMutations||[]).map((l=>Ig(s.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map((l=>Ig(s.yt,l))),a=rt.fromMillis(e.localWriteTimeMs);return new by(e.batchId,a,t,r)}function ku(s){const e=Va(s.readTime),t=s.lastLimboFreeSnapshotVersion!==void 0?Va(s.lastLimboFreeSnapshotVersion):Se.min();let r;return r=(function(l){return l.documents!==void 0})(s.query)?(function(l){const c=l.documents.length;return Ee(c===1,1966,{count:c}),Pn(_d(iS(l.documents[0])))})(s.query):(function(l){return Pn(lS(l))})(s.query),new Ei(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,e,t,Vt.fromBase64String(s.resumeToken))}function mS(s,e){const t=Da(e.snapshotVersion),r=Da(e.lastLimboFreeSnapshotVersion);let a;a=Hf(e.target)?aS(s.yt,e.target):oS(s.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Na(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function pS(s){const e=lS({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?wg(e,e.limit,"L"):e}function Gp(s,e){return new Ty(e.largestBatchId,Ig(s.yt,e.overlayMutation))}function FE(s,e){const t=e.path.lastSegment();return[s,hn(e.path.popLast()),t]}function HE(s,e,t,r){return{indexId:s,uid:e,sequenceNumber:t,readTime:Da(r.readTime),documentKey:hn(r.documentKey.path),largestBatchId:r.largestBatchId}}class KO{getBundleMetadata(e,t){return GE(e).get(t).next((r=>{if(r)return(function(l){return{id:l.bundleId,createTime:Va(l.createTime),version:l.version}})(r)}))}saveBundleMetadata(e,t){return GE(e).put((function(a){return{bundleId:a.id,createTime:Da(mn(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return KE(e).get(t).next((r=>{if(r)return(function(l){return{name:l.name,query:pS(l.bundledQuery),readTime:Va(l.readTime)}})(r)}))}saveNamedQuery(e,t){return KE(e).put((function(a){return{name:a.name,readTime:Da(mn(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function GE(s){return Qt(s,fd)}function KE(s){return Qt(s,dd)}class Td{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new Td(e,r)}getOverlay(e,t){return Au(e).get(FE(this.userId,t)).next((r=>r?Gp(this.serializer,r):null))}getOverlays(e,t){const r=Kr();return B.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){const a=[];return r.forEach(((l,c)=>{const d=new Ty(t,c);a.push(this.bt(e,d))})),B.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach((c=>a.add(hn(c.getCollectionPath()))));const l=[];return a.forEach((c=>{const d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);l.push(Au(e).X(gg,d))})),B.waitFor(l)}getOverlaysForCollection(e,t,r){const a=Kr(),l=hn(t),c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Au(e).H(gg,c).next((d=>{for(const p of d){const g=Gp(this.serializer,p);a.set(g.getKey(),g)}return a}))}getOverlaysForCollectionGroup(e,t,r,a){const l=Kr();let c;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Au(e).ee({index:pw,range:d},((p,g,v)=>{const E=Gp(this.serializer,g);l.size()<a||E.largestBatchId===c?(l.set(E.getKey(),E),c=E.largestBatchId):v.done()})).next((()=>l))}bt(e,t){return Au(e).put((function(a,l,c){const[d,p,g]=FE(l,c.mutation.key);return{userId:l,collectionPath:p,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Qf(a.yt,c.mutation)}})(this.serializer,this.userId,t))}}function Au(s){return Qt(s,md)}class QO{St(e){return Qt(e,cy)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const r=t?.value;return r?Vt.fromUint8Array(r):Vt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}class ga{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(_t(e.integerValue));else if("doubleValue"in e){const r=_t(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),ec(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Ii(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Ri(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?Iw(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):gd(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):ye(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const r=e.fields||{};this.Ft(t,55);for(const a of Object.keys(r))this.Ot(a,t),this.Ct(r[a],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const a=Zo,l=r[a].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(_t(l)),this.Ot(a,t),this.Ct(r[a],t)}qt(e,t){const r=e.values||[];this.Ft(t,50);for(const a of r)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),me.fromName(e).path.forEach((r=>{this.Ft(t,60),this.$t(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}ga.Wt=new ga;const Co=255;function $O(s){if(s===0)return 8;let e=0;return s>>4||(e+=4,s<<=4),s>>6||(e+=2,s<<=2),s>>7||(e+=1),e}function QE(s){const e=64-(function(r){let a=0;for(let l=0;l<8;++l){const c=$O(255&r[l]);if(a+=c,c!==8)break}return a})(s);return Math.ceil(e/8)}class YO{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ht(r.value),r=t.next();this.Jt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const a=t.codePointAt(0);this.Ht(240|a>>>18),this.Ht(128|63&a>>>12),this.Ht(128|63&a>>>6),this.Ht(128|63&a)}}this.Jt()}Yt(e){const t=this.en(e),r=QE(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),r=QE(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(Co),this.sn(255)}_n(){this.an(Co),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Co?(this.sn(Co),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Co?(this.an(Co),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class XO{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class JO{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class xu{constructor(){this.cn=new YO,this.ascending=new XO(this.cn),this.descending=new JO(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class ya{constructor(e,t,r,a){this.hn=e,this.Pn=t,this.Tn=r,this.In=a}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.In,0),t!==e?r.set([0],this.In.length):++r[r.length-1],new ya(this.hn,this.Pn,this.Tn,r)}Rn(e,t,r){return{indexId:this.hn,uid:e,arrayValue:xf(this.Tn),directionalValue:xf(this.In),orderedDocumentKey:xf(t),documentKey:r.path.toArray()}}An(e,t,r){const a=this.Rn(e,t,r);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function fs(s,e){let t=s.hn-e.hn;return t!==0?t:(t=$E(s.Tn,e.Tn),t!==0?t:(t=$E(s.In,e.In),t!==0?t:me.comparator(s.Pn,e.Pn)))}function $E(s,e){for(let t=0;t<s.length&&t<e.length;++t){const r=s[t]-e[t];if(r!==0)return r}return s.length-e.length}function xf(s){return f1()?(function(t){let r="";for(let a=0;a<t.length;a++)r+=String.fromCharCode(t[a]);return r})(s):s}function YE(s){return typeof s!="string"?s:(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(s)}class XE{constructor(e){this.Vn=new it(((t,r)=>Et.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(Ee(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=dg(e);if(t!==void 0&&!this.pn(t))return!1;const r=fa(e);let a=new Set,l=0,c=0;for(;l<r.length&&this.pn(r[l]);++l)a=a.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.Vn.size>0){const d=this.Vn.getIterator().getNext();if(!a.has(d.field.canonicalString())){const p=r[l];if(!this.yn(d,p)||!this.wn(this.dn[c++],p))return!1}++l}for(;l<r.length;++l){const d=r[l];if(c>=this.dn.length||!this.wn(this.dn[c++],d))return!1}return!0}bn(){if(this.fn)return null;let e=new it(Et.comparator);const t=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new _f(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new _f(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new _f(r.field,r.dir==="asc"?0:1)));return new zf(zf.UNKNOWN_ID,this.collectionId,t,Zu.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function gS(s){if(Ee(s instanceof Ge||s instanceof ct,20012),s instanceof Ge){if(s instanceof Pw){const t=s.value.arrayValue?.values?.map((r=>Ge.create(s.field,"==",r)))||[];return ct.create(t,"or")}return s}const e=s.filters.map((t=>gS(t)));return ct.create(e,s.op)}function WO(s){if(s.getFilters().length===0)return[];const e=Ng(gS(s));return Ee(yS(e),7391),Rg(e)||Cg(e)?[e]:e.getFilters()}function Rg(s){return s instanceof Ge}function Cg(s){return s instanceof ct&&gy(s)}function yS(s){return Rg(s)||Cg(s)||(function(t){if(t instanceof ct&&bg(t)){for(const r of t.getFilters())if(!Rg(r)&&!Cg(r))return!1;return!0}return!1})(s)}function Ng(s){if(Ee(s instanceof Ge||s instanceof ct,34018),s instanceof Ge)return s;if(s.filters.length===1)return Ng(s.filters[0]);const e=s.filters.map((r=>Ng(r)));let t=ct.create(e,s.op);return t=Yf(t),yS(t)?t:(Ee(t instanceof ct,64498),Ee(nl(t),40251),Ee(t.filters.length>1,57927),t.filters.reduce(((r,a)=>Ay(r,a))))}function Ay(s,e){let t;return Ee(s instanceof Ge||s instanceof ct,38388),Ee(e instanceof Ge||e instanceof ct,25473),t=s instanceof Ge?e instanceof Ge?(function(a,l){return ct.create([a,l],"and")})(s,e):JE(s,e):e instanceof Ge?JE(e,s):(function(a,l){if(Ee(a.filters.length>0&&l.filters.length>0,48005),nl(a)&&nl(l))return Ow(a,l.getFilters());const c=bg(a)?a:l,d=bg(a)?l:a,p=c.filters.map((g=>Ay(g,d)));return ct.create(p,"or")})(s,e),Yf(t)}function JE(s,e){if(nl(e))return Ow(e,s.getFilters());{const t=e.filters.map((r=>Ay(s,r)));return ct.create(t,"or")}}function Yf(s){if(Ee(s instanceof Ge||s instanceof ct,11850),s instanceof Ge)return s;const e=s.getFilters();if(e.length===1)return Yf(e[0]);if(Dw(s))return s;const t=e.map((a=>Yf(a))),r=[];return t.forEach((a=>{a instanceof Ge?r.push(a):a instanceof ct&&(a.op===s.op?r.push(...a.filters):r.push(a))})),r.length===1?r[0]:ct.create(r,s.op)}class ZO{constructor(){this.Sn=new xy}addToCollectionParentIndex(e,t){return this.Sn.add(t),B.resolve()}getCollectionParents(e,t){return B.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return B.resolve()}deleteFieldIndex(e,t){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,t){return B.resolve()}getDocumentsMatchingTarget(e,t){return B.resolve(null)}getIndexType(e,t){return B.resolve(0)}getFieldIndexes(e,t){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,t){return B.resolve(Ln.min())}getMinOffsetFromCollectionGroup(e,t){return B.resolve(Ln.min())}updateCollectionGroup(e,t,r){return B.resolve()}updateIndexEntries(e,t){return B.resolve()}}class xy{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new it(ut.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new it(ut.comparator)).toArray()}}const WE="IndexedDbIndexManager",of=new Uint8Array(0);class e4{constructor(e,t){this.databaseId=t,this.Dn=new xy,this.Cn=new Di((r=>Na(r)),((r,a)=>Tc(r,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const l={collectionId:r,parent:hn(a)};return ZE(e).put(l)}return B.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[nw(t),""],!1,!0);return ZE(e).H(a).next((l=>{for(const c of l){if(c.collectionId!==t)break;r.push(Gr(c.parent))}return r}))}addFieldIndex(e,t){const r=Iu(e),a=(function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map((p=>[p.fieldPath.canonicalString(),p.kind]))}})(t);delete a.indexId;const l=r.add(a);if(t.indexState){const c=Do(e);return l.next((d=>{c.put(HE(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const r=Iu(e),a=Do(e),l=No(e);return r.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Iu(e),r=No(e),a=Do(e);return t.X().next((()=>r.X())).next((()=>a.X()))}createTargetIndexes(e,t){return B.forEach(this.vn(t),(r=>this.getIndexType(e,r).next((a=>{if(a===0||a===1){const l=new XE(r).bn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const r=No(e);let a=!0;const l=new Map;return B.forEach(this.vn(t),(c=>this.Fn(e,c).next((d=>{a&&(a=!!d),l.set(c,d)})))).next((()=>{if(a){let c=Pe();const d=[];return B.forEach(l,((p,g)=>{oe(WE,`Using index ${(function(ee){return`id=${ee.indexId}|cg=${ee.collectionGroup}|f=${ee.fields.map((le=>`${le.fieldPath}:${le.kind}`)).join(",")}`})(p)} to execute ${Na(t)}`);const v=(function(ee,le){const ce=dg(le);if(ce===void 0)return null;for(const ue of Gf(ee,ce.fieldPath))switch(ue.op){case"array-contains-any":return ue.value.arrayValue.values||[];case"array-contains":return[ue.value]}return null})(g,p),E=(function(ee,le){const ce=new Map;for(const ue of fa(le))for(const w of Gf(ee,ue.fieldPath))switch(w.op){case"==":case"in":ce.set(ue.fieldPath.canonicalString(),w.value);break;case"not-in":case"!=":return ce.set(ue.fieldPath.canonicalString(),w.value),Array.from(ce.values())}return null})(g,p),S=(function(ee,le){const ce=[];let ue=!0;for(const w of fa(le)){const A=w.kind===0?NE(ee,w.fieldPath,ee.startAt):DE(ee,w.fieldPath,ee.startAt);ce.push(A.value),ue&&(ue=A.inclusive)}return new tl(ce,ue)})(g,p),N=(function(ee,le){const ce=[];let ue=!0;for(const w of fa(le)){const A=w.kind===0?DE(ee,w.fieldPath,ee.endAt):NE(ee,w.fieldPath,ee.endAt);ce.push(A.value),ue&&(ue=A.inclusive)}return new tl(ce,ue)})(g,p),Q=this.Mn(p,g,S),q=this.Mn(p,g,N),L=this.xn(p,g,E),re=this.On(p.indexId,v,Q,S.inclusive,q,N.inclusive,L);return B.forEach(re,(J=>r.Z(J,t.limit).next((ee=>{ee.forEach((le=>{const ce=me.fromSegments(le.documentKey);c.has(ce)||(c=c.add(ce),d.push(ce))}))}))))})).next((()=>d))}return B.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=WO(ct.create(e.filters,"and")).map((r=>Tg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,r,a,l,c,d){const p=(t!=null?t.length:1)*Math.max(r.length,l.length),g=p/(t!=null?t.length:1),v=[];for(let E=0;E<p;++E){const S=t?this.Nn(t[E/g]):of,N=this.Bn(e,S,r[E%g],a),Q=this.Ln(e,S,l[E%g],c),q=d.map((L=>this.Bn(e,S,L,!0)));v.push(...this.createRange(N,Q,q))}return v}Bn(e,t,r,a){const l=new ya(e,me.empty(),t,r);return a?l:l.En()}Ln(e,t,r,a){const l=new ya(e,me.empty(),t,r);return a?l.En():l}Fn(e,t){const r=new XE(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let c=null;for(const d of l)r.gn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c}))}getIndexType(e,t){let r=2;const a=this.vn(t);return B.forEach(a,(l=>this.Fn(e,l).next((c=>{c?r!==0&&c.fields.length<(function(p){let g=new it(Et.comparator),v=!1;for(const E of p.filters)for(const S of E.getFlattenedFilters())S.field.isKeyField()||(S.op==="array-contains"||S.op==="array-contains-any"?v=!0:g=g.add(S.field));for(const E of p.orderBy)E.field.isKeyField()||(g=g.add(E.field));return g.size+(v?1:0)})(l)&&(r=1):r=0})))).next((()=>(function(c){return c.limit!==null})(t)&&a.length>1&&r===2?1:r))}kn(e,t){const r=new xu;for(const a of fa(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=r.ln(a.kind);ga.Wt.Dt(l,c)}return r.un()}Nn(e){const t=new xu;return ga.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const r=new xu;return ga.Wt.Dt(py(this.databaseId,t),r.ln((function(l){const c=fa(l);return c.length===0?0:c[c.length-1].kind})(e))),r.un()}xn(e,t,r){if(r===null)return[];let a=[];a.push(new xu);let l=0;for(const c of fa(e)){const d=r[l++];for(const p of a)if(this.qn(t,c.fieldPath)&&ac(d))a=this.Un(a,c,d);else{const g=p.ln(c.kind);ga.Wt.Dt(d,g)}}return this.$n(a)}Mn(e,t,r){return this.xn(e,t,r.position)}$n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Un(e,t,r){const a=[...e],l=[];for(const c of r.arrayValue.values||[])for(const d of a){const p=new xu;p.seed(d.un()),ga.Wt.Dt(c,p.ln(t.kind)),l.push(p)}return l}qn(e,t){return!!e.filters.find((r=>r instanceof Ge&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Iu(e),a=Do(e);return(t?r.H(pg,IDBKeyRange.bound(t,t)):r.H()).next((l=>{const c=[];return B.forEach(l,(d=>a.get([d.indexId,this.uid]).next((p=>{c.push((function(v,E){const S=E?new Zu(E.sequenceNumber,new Ln(Va(E.readTime),new me(Gr(E.documentKey)),E.largestBatchId)):Zu.empty(),N=v.fields.map((([Q,q])=>new _f(Et.fromServerFormat(Q),q)));return new zf(v.indexId,v.collectionGroup,N,S)})(d,p))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Ne(r.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const a=Iu(e),l=Do(e);return this.Wn(e).next((c=>a.H(pg,IDBKeyRange.bound(t,t)).next((d=>B.forEach(d,(p=>l.put(HE(p.indexId,this.uid,c,r))))))))}updateIndexEntries(e,t){const r=new Map;return B.forEach(t,((a,l)=>{const c=r.get(a.collectionGroup);return(c?B.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next((d=>(r.set(a.collectionGroup,d),B.forEach(d,(p=>this.Qn(e,a,p).next((g=>{const v=this.Gn(l,p);return g.isEqual(v)?B.resolve():this.zn(e,l,p,g,v)})))))))}))}jn(e,t,r,a){return No(e).put(a.Rn(this.uid,this.Kn(r,t.key),t.key))}Hn(e,t,r,a){return No(e).delete(a.An(this.uid,this.Kn(r,t.key),t.key))}Qn(e,t,r){const a=No(e);let l=new it(fs);return a.ee({index:mw,range:IDBKeyRange.only([r.indexId,this.uid,xf(this.Kn(r,t))])},((c,d)=>{l=l.add(new ya(r.indexId,t,YE(d.arrayValue),YE(d.directionalValue)))})).next((()=>l))}Gn(e,t){let r=new it(fs);const a=this.kn(t,e);if(a==null)return r;const l=dg(t);if(l!=null){const c=e.data.field(l.fieldPath);if(ac(c))for(const d of c.arrayValue.values||[])r=r.add(new ya(t.indexId,e.key,this.Nn(d),a))}else r=r.add(new ya(t.indexId,e.key,of,a));return r}zn(e,t,r,a,l){oe(WE,"Updating index entries for document '%s'",t.key);const c=[];return(function(p,g,v,E,S){const N=p.getIterator(),Q=g.getIterator();let q=Ro(N),L=Ro(Q);for(;q||L;){let re=!1,J=!1;if(q&&L){const ee=v(q,L);ee<0?J=!0:ee>0&&(re=!0)}else q!=null?J=!0:re=!0;re?(E(L),L=Ro(Q)):J?(S(q),q=Ro(N)):(q=Ro(N),L=Ro(Q))}})(a,l,fs,(d=>{c.push(this.jn(e,t,r,d))}),(d=>{c.push(this.Hn(e,t,r,d))})),B.waitFor(c)}Wn(e){let t=1;return Do(e).ee({index:dw,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((c,d)=>fs(c,d))).filter(((c,d,p)=>!d||fs(c,p[d-1])!==0));const a=[];a.push(e);for(const c of r){const d=fs(c,e),p=fs(c,t);if(d===0)a[0]=e.En();else if(d>0&&p<0)a.push(c),a.push(c.En());else if(p>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Jn(a[c],a[c+1]))return[];const d=a[c].An(this.uid,of,me.empty()),p=a[c+1].An(this.uid,of,me.empty());l.push(IDBKeyRange.bound(d,p))}return l}Jn(e,t){return fs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(eT)}getMinOffset(e,t){return B.mapArray(this.vn(t),(r=>this.Fn(e,r).next((a=>a||ye(44426))))).next(eT)}}function ZE(s){return Qt(s,rc)}function No(s){return Qt(s,Fu)}function Iu(s){return Qt(s,uy)}function Do(s){return Qt(s,qu)}function eT(s){Ee(s.length!==0,28825);let e=s[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<s.length;r++){const a=s[r].indexState.offset;ay(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Ln(e.readTime,e.documentKey,t)}const tT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_S=41943040;class cn{static withCacheSize(e){return new cn(e,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function vS(s,e,t){const r=s.store(mr),a=s.store(Yo),l=[],c=IDBKeyRange.only(t.batchId);let d=0;const p=r.ee({range:c},((v,E,S)=>(d++,S.delete())));l.push(p.next((()=>{Ee(d===1,47070,{batchId:t.batchId})})));const g=[];for(const v of t.mutations){const E=cw(e,v.key.path,t.batchId);l.push(a.delete(E)),g.push(v.key)}return B.waitFor(l).next((()=>g))}function Xf(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw ye(14731);e=s.noDocument}return JSON.stringify(e).length}cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(_S,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);class wd{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Zn={}}static wt(e,t,r,a){Ee(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new wd(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ds(e).ee({index:va,range:r},((a,l,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,r,a){const l=Lo(e),c=ds(e);return c.add({}).next((d=>{Ee(typeof d=="number",49019);const p=new by(d,t,r,a),g=(function(N,Q,q){const L=q.baseMutations.map((J=>Qf(N.yt,J))),re=q.mutations.map((J=>Qf(N.yt,J)));return{userId:Q,batchId:q.batchId,localWriteTimeMs:q.localWriteTime.toMillis(),baseMutations:L,mutations:re}})(this.serializer,this.userId,p),v=[];let E=new it(((S,N)=>Ne(S.canonicalString(),N.canonicalString())));for(const S of a){const N=cw(this.userId,S.key.path,d);E=E.add(S.key.path.popLast()),v.push(c.put(g)),v.push(l.put(N,RV))}return E.forEach((S=>{v.push(this.indexManager.addToCollectionParentIndex(e,S))})),e.addOnCommittedListener((()=>{this.Zn[d]=p.keys()})),B.waitFor(v).next((()=>p))}))}lookupMutationBatch(e,t){return ds(e).get(t).next((r=>r?(Ee(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),pa(this.serializer,r)):null))}Xn(e,t){return this.Zn[t]?B.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const a=r.keys();return this.Zn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return ds(e).ee({index:va,range:a},((c,d,p)=>{d.userId===this.userId&&(Ee(d.batchId>=r,47524,{Yn:r}),l=pa(this.serializer,d)),p.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Ea;return ds(e).ee({index:va,range:t,reverse:!0},((a,l,c)=>{r=l.batchId,c.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Ea],[this.userId,Number.POSITIVE_INFINITY]);return ds(e).H(va,t).next((r=>r.map((a=>pa(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=vf(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return Lo(e).ee({range:a},((c,d,p)=>{const[g,v,E]=c,S=Gr(v);if(g===this.userId&&t.path.isEqual(S))return ds(e).get(E).next((N=>{if(!N)throw ye(61480,{er:c,batchId:E});Ee(N.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:N.userId,batchId:E}),l.push(pa(this.serializer,N))}));p.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new it(Ne);const a=[];return t.forEach((l=>{const c=vf(this.userId,l.path),d=IDBKeyRange.lowerBound(c),p=Lo(e).ee({range:d},((g,v,E)=>{const[S,N,Q]=g,q=Gr(N);S===this.userId&&l.path.isEqual(q)?r=r.add(Q):E.done()}));a.push(p)})),B.waitFor(a).next((()=>this.tr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=vf(this.userId,r),c=IDBKeyRange.lowerBound(l);let d=new it(Ne);return Lo(e).ee({range:c},((p,g,v)=>{const[E,S,N]=p,Q=Gr(S);E===this.userId&&r.isPrefixOf(Q)?Q.length===a&&(d=d.add(N)):v.done()})).next((()=>this.tr(e,d)))}tr(e,t){const r=[],a=[];return t.forEach((l=>{a.push(ds(e).get(l).next((c=>{if(c===null)throw ye(35274,{batchId:l});Ee(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),r.push(pa(this.serializer,c))})))})),B.waitFor(a).next((()=>r))}removeMutationBatch(e,t){return vS(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),B.forEach(r,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return B.resolve();const r=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),a=[];return Lo(e).ee({range:r},((l,c,d)=>{if(l[0]===this.userId){const p=Gr(l[1]);a.push(p)}else d.done()})).next((()=>{Ee(a.length===0,56720,{rr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return bS(e,this.userId,t)}ir(e){return ES(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Ea,lastStreamToken:""}))}}function bS(s,e,t){const r=vf(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let c=!1;return Lo(s).ee({range:l,Y:!0},((d,p,g)=>{const[v,E,S]=d;v===e&&E===a&&(c=!0),g.done()})).next((()=>c))}function ds(s){return Qt(s,mr)}function Lo(s){return Qt(s,Yo)}function ES(s){return Qt(s,tc)}class Oa{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Oa(0)}static ar(){return new Oa(-1)}}class t4{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const r=new Oa(t.highestTargetId);return t.highestTargetId=r.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>Se.fromTimestamp(new rt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.ur(e).next((a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.cr(e,a))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((r=>(r.targetCount+=1,this.hr(t,r),this.cr(e,r))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Vo(e).delete(t.targetId))).next((()=>this.ur(e))).next((r=>(Ee(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r))))}removeTargets(e,t,r){let a=0;const l=[];return Vo(e).ee(((c,d)=>{const p=ku(d);p.sequenceNumber<=t&&r.get(p.targetId)===null&&(a++,l.push(this.removeTargetData(e,p)))})).next((()=>B.waitFor(l))).next((()=>a))}forEachTarget(e,t){return Vo(e).ee(((r,a)=>{const l=ku(a);t(l)}))}ur(e){return nT(e).get(Bf).next((t=>(Ee(t!==null,2888),t)))}cr(e,t){return nT(e).put(Bf,t)}lr(e,t){return Vo(e).put(mS(this.serializer,t))}hr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Na(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Vo(e).ee({range:a,index:fw},((c,d,p)=>{const g=ku(d);Tc(t,g.target)&&(l=g,p.done())})).next((()=>l))}addMatchingKeys(e,t,r){const a=[],l=_s(e);return t.forEach((c=>{const d=hn(c.path);a.push(l.put({targetId:r,path:d})),a.push(this.referenceDelegate.addReference(e,r,c))})),B.waitFor(a)}removeMatchingKeys(e,t,r){const a=_s(e);return B.forEach(t,(l=>{const c=hn(l.path);return B.waitFor([a.delete([r,c]),this.referenceDelegate.removeReference(e,r,l)])}))}removeMatchingKeysForTargetId(e,t){const r=_s(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=_s(e);let l=Pe();return a.ee({range:r,Y:!0},((c,d,p)=>{const g=Gr(c[1]),v=new me(g);l=l.add(v)})).next((()=>l))}containsKey(e,t){const r=hn(t.path),a=IDBKeyRange.bound([r],[nw(r)],!1,!0);let l=0;return _s(e).ee({index:ly,Y:!0,range:a},(([c,d],p,g)=>{c!==0&&(l++,g.done())})).next((()=>l>0))}At(e,t){return Vo(e).get(t).next((r=>r?ku(r):null))}}function Vo(s){return Qt(s,Xo)}function nT(s){return Qt(s,Ta)}function _s(s){return Qt(s,Jo)}const rT="LruGarbageCollector",TS=1048576;function iT([s,e],[t,r]){const a=Ne(s,t);return a===0?Ne(e,r):a}class n4{constructor(e){this.Pr=e,this.buffer=new it(iT),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();iT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class wS{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){oe(rT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ds(t)?oe(rT,"Ignoring IndexedDB error during garbage collection: ",t):await Ns(t)}await this.Ar(3e5)}))}}class r4{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return B.resolve(wn.ce);const r=new n4(t);return this.Vr.forEachTarget(e,(a=>r.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>r.Er(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(tT)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tT):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,a,l,c,d,p,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,c=Date.now(),this.nthSequenceNumber(e,a)))).next((E=>(r=E,d=Date.now(),this.removeTargets(e,r,t)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(g=Date.now(),Oo()<=Fe.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(g-p)+`ms
Total Duration: ${g-v}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:E}))))}}function SS(s,e){return new r4(s,e)}class i4{constructor(e,t){this.db=e,this.garbageCollector=SS(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((r,a)=>t(a)))}addReference(e,t,r){return lf(e,r)}removeReference(e,t,r){return lf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return lf(e,t)}wr(e,t){return(function(a,l){let c=!1;return ES(a).te((d=>bS(a,d,l).next((p=>(p&&(c=!0),B.resolve(!p)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.yr(e,((c,d)=>{if(d<=t){const p=this.wr(e,c).next((g=>{if(!g)return l++,r.getEntry(e,c).next((()=>(r.removeEntry(c,Se.min()),_s(e).delete((function(E){return[0,hn(E.path)]})(c)))))}));a.push(p)}})).next((()=>B.waitFor(a))).next((()=>r.apply(e))).next((()=>l))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return lf(e,t)}yr(e,t){const r=_s(e);let a,l=wn.ce;return r.ee({index:ly},(([c,d],{path:p,sequenceNumber:g})=>{c===0?(l!==wn.ce&&t(new me(Gr(a)),l),l=g,a=p):l=wn.ce})).next((()=>{l!==wn.ce&&t(new me(Gr(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function lf(s,e){return _s(s).put((function(r,a){return{targetId:0,path:hn(r.path),sequenceNumber:a}})(e,s.currentSequenceNumber))}class AS{constructor(){this.changes=new Di((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,At.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?B.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class s4{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ua(e).put(r)}removeEntry(e,t,r){return ua(e).delete((function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],$f(c),d[d.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.br(e,r))))}getEntry(e,t){let r=At.newInvalidDocument(t);return ua(e).ee({index:bf,range:IDBKeyRange.only(Ru(t))},((a,l)=>{r=this.Sr(t,l)})).next((()=>r))}Dr(e,t){let r={size:0,document:At.newInvalidDocument(t)};return ua(e).ee({index:bf,range:IDBKeyRange.only(Ru(t))},((a,l)=>{r={document:this.Sr(t,l),size:Xf(l)}})).next((()=>r))}getEntries(e,t){let r=Mn();return this.Cr(e,t,((a,l)=>{const c=this.Sr(a,l);r=r.insert(a,c)})).next((()=>r))}vr(e,t){let r=Mn(),a=new dt(me.comparator);return this.Cr(e,t,((l,c)=>{const d=this.Sr(l,c);r=r.insert(l,d),a=a.insert(l,Xf(c))})).next((()=>({documents:r,Fr:a})))}Cr(e,t,r){if(t.isEmpty())return B.resolve();let a=new it(oT);t.forEach((p=>a=a.add(p)));const l=IDBKeyRange.bound(Ru(a.first()),Ru(a.last())),c=a.getIterator();let d=c.getNext();return ua(e).ee({index:bf,range:l},((p,g,v)=>{const E=me.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;d&&oT(d,E)<0;)r(d,null),d=c.getNext();d&&d.isEqual(E)&&(r(d,g),d=c.hasNext()?c.getNext():null),d?v.j(Ru(d)):v.done()})).next((()=>{for(;d;)r(d,null),d=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,r,a,l){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),$f(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],p=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ua(e).H(IDBKeyRange.bound(d,p,!0)).next((g=>{l?.incrementDocumentReadCount(g.length);let v=Mn();for(const E of g){const S=this.Sr(me.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);S.isFoundDocument()&&(wc(t,S)||a.has(S.key))&&(v=v.insert(S.key,S))}return v}))}getAllFromCollectionGroup(e,t,r,a){let l=Mn();const c=aT(t,r),d=aT(t,Ln.max());return ua(e).ee({index:hw,range:IDBKeyRange.bound(c,d,!0)},((p,g,v)=>{const E=this.Sr(me.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);l=l.insert(E.key,E),l.size===a&&v.done()})).next((()=>l))}newChangeBuffer(e){return new a4(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return sT(e).get(mg).next((t=>(Ee(!!t,20021),t)))}br(e,t){return sT(e).put(mg,t)}Sr(e,t){if(t){const r=GO(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Se.min())))return r}return At.newInvalidDocument(e)}}function xS(s){return new s4(s)}class a4 extends AS{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new Di((r=>r.toString()),((r,a)=>r.isEqual(a)))}applyChanges(e){const t=[];let r=0,a=new it(((l,c)=>Ne(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const d=this.Or.get(l);if(t.push(this.Mr.removeEntry(e,l,d.readTime)),c.isValidDocument()){const p=qE(this.Mr.serializer,c);a=a.add(l.path.popLast());const g=Xf(p);r+=g-d.size,t.push(this.Mr.addEntry(e,l,p))}else if(r-=d.size,this.trackRemovals){const p=qE(this.Mr.serializer,c.convertToNoDocument(Se.min()));t.push(this.Mr.addEntry(e,l,p))}})),a.forEach((l=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Mr.updateMetadata(e,r)),B.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((r=>(this.Or.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:r,Fr:a})=>(a.forEach(((l,c)=>{this.Or.set(l,{size:c,readTime:r.get(l).readTime})})),r)))}}function sT(s){return Qt(s,nc)}function ua(s){return Qt(s,jf)}function Ru(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function aT(s,e){const t=e.documentKey.path.toArray();return[s,$f(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function oT(s,e){const t=s.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=Ne(t[l],r[l]),a)return a;return a=Ne(t.length,r.length),a||(a=Ne(t[t.length-2],r[r.length-2]),a||Ne(t[t.length-1],r[r.length-1]))}class o4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class IS{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&Qu(r.mutation,a,Wn.empty(),rt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Pe()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Pe()){const a=Kr();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let c=Ou();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=Kr();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Pe())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,r,a){let l=Mn();const c=Ku(),d=(function(){return Ku()})();return t.forEach(((p,g)=>{const v=r.get(g.key);a.has(g.key)&&(v===void 0||v.mutation instanceof Vs)?l=l.insert(g.key,g):v!==void 0?(c.set(g.key,v.mutation.getFieldMask()),Qu(v.mutation,g,v.mutation.getFieldMask(),rt.now())):c.set(g.key,Wn.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,v)=>c.set(g,v))),t.forEach(((g,v)=>d.set(g,new o4(v,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const r=Ku();let a=new dt(((c,d)=>c-d)),l=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let v=r.get(p)||Wn.empty();v=d.applyToLocalView(g,v),r.set(p,v);const E=(a.get(d.batchId)||Pe()).add(p);a=a.insert(d.batchId,E)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,v=p.value,E=Fw();v.forEach((S=>{if(!l.has(S)){const N=Yw(t.get(S),r.get(S));N!==null&&E.set(S,N),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return B.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return hO(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):fO(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):B.resolve(Kr());let d=$o,p=l;return c.next((g=>B.forEach(g,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(v)?B.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{p=p.insert(v,S)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,Pe()))).next((v=>({batchId:d,changes:qw(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new me(t)).next((r=>{let a=Ou();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let c=Ou();return this.indexManager.getCollectionParents(e,l).next((d=>B.forEach(d,(p=>{const g=(function(E,S){return new yd(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,r,a).next((v=>{v.forEach(((E,S)=>{c=c.insert(E,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((c=>{l.forEach(((p,g)=>{const v=g.getKey();c.get(v)===null&&(c=c.insert(v,At.newInvalidDocument(v)))}));let d=Ou();return c.forEach(((p,g)=>{const v=l.get(p);v!==void 0&&Qu(v.mutation,g,Wn.empty(),rt.now()),wc(t,g)&&(d=d.insert(p,g))})),d}))}}class l4{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return B.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:mn(a.createTime)}})(t)),B.resolve()}getNamedQuery(e,t){return B.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:pS(a.bundledQuery),readTime:mn(a.readTime)}})(t)),B.resolve()}}class u4{constructor(){this.overlays=new dt(me.comparator),this.Lr=new Map}getOverlay(e,t){return B.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Kr();return B.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.bt(e,t,l)})),B.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Lr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(r)),B.resolve()}getOverlaysForCollection(e,t,r){const a=Kr(),l=t.length+1,c=new me(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>r&&a.set(p.getKey(),p)}return B.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new dt(((g,v)=>g-v));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let v=l.get(g.largestBatchId);v===null&&(v=Kr(),l=l.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const d=Kr(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,v)=>d.set(g,v))),!(d.size()>=a)););return B.resolve(d)}bt(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.Lr.get(a.largestBatchId).delete(r.key);this.Lr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Ty(t,r));let l=this.Lr.get(t);l===void 0&&(l=Pe(),this.Lr.set(t,l)),this.Lr.set(t,l.add(r.key))}}class c4{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,B.resolve()}}class Iy{constructor(){this.kr=new it(Jt.Kr),this.qr=new it(Jt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new Jt(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Jt(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new me(new ut([])),r=new Jt(t,e),a=new Jt(t,e+1),l=[];return this.qr.forEachInRange([r,a],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new me(new ut([])),r=new Jt(t,e),a=new Jt(t,e+1);let l=Pe();return this.qr.forEachInRange([r,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Jt(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Jt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return me.comparator(e.key,t.key)||Ne(e.Hr,t.Hr)}static Ur(e,t){return Ne(e.Hr,t.Hr)||me.comparator(e.key,t.key)}}class h4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new it(Jt.Kr)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new by(l,t,r,a);this.mutationQueue.push(c);for(const d of a)this.Jr=this.Jr.add(new Jt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return B.resolve(c)}lookupMutationBatch(e,t){return B.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Xr(r),l=a<0?0:a;return B.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?Ea:this.Yn-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Jt(t,0),a=new Jt(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([r,a],(c=>{const d=this.Zr(c.Hr);l.push(d)})),B.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new it(Ne);return t.forEach((a=>{const l=new Jt(a,0),c=new Jt(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(d=>{r=r.add(d.Hr)}))})),B.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;me.isDocumentKey(l)||(l=l.child(""));const c=new Jt(new me(l),0);let d=new it(Ne);return this.Jr.forEachWhile((p=>{const g=p.key.path;return!!r.isPrefixOf(g)&&(g.length===a&&(d=d.add(p.Hr)),!0)}),c),B.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((r=>{const a=this.Zr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Ee(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return B.forEach(t.mutations,(a=>{const l=new Jt(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new Jt(t,0),a=this.Jr.firstAfterOrEqual(r);return B.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class f4{constructor(e){this.ti=e,this.docs=(function(){return new dt(me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,c=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return B.resolve(r?r.document.mutableCopy():At.newInvalidDocument(t))}getEntries(e,t){let r=Mn();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():At.newInvalidDocument(a))})),B.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=Mn();const c=t.path,d=new me(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||ay(sw(v),r)<=0||(a.has(v.key)||wc(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return B.resolve(l)}getAllFromCollectionGroup(e,t,r,a){ye(9500)}ni(e,t){return B.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new d4(this)}getSize(e){return B.resolve(this.size)}}class d4 extends AS{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(r)})),B.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class m4{constructor(e){this.persistence=e,this.ri=new Di((t=>Na(t)),Tc),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.ii=0,this.si=new Iy,this.targetCount=0,this.oi=Oa._r()}forEachTarget(e,t){return this.ri.forEach(((r,a)=>t(a))),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),B.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Oa(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,B.resolve()}updateTargetData(e,t){return this.lr(t),B.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.ri.forEach(((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),B.waitFor(l).next((()=>a))}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return B.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),B.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),B.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),B.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return B.resolve(r)}containsKey(e,t){return B.resolve(this.si.containsKey(t))}}class Ry{constructor(e,t){this._i={},this.overlays={},this.ai=new wn(0),this.ui=!1,this.ui=!0,this.ci=new c4,this.referenceDelegate=e(this),this.li=new m4(this),this.indexManager=new ZO,this.remoteDocumentCache=(function(a){return new f4(a)})((r=>this.referenceDelegate.hi(r))),this.serializer=new dS(t),this.Pi=new l4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new u4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new h4(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){oe("MemoryPersistence","Starting transaction:",e);const a=new p4(this.ai.next());return this.referenceDelegate.Ti(),r(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return B.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class p4 extends ow{constructor(e){super(),this.currentSequenceNumber=e}}class Sd{constructor(e){this.persistence=e,this.Ri=new Iy,this.Ai=null}static Vi(e){return new Sd(e)}get di(){if(this.Ai)return this.Ai;throw ye(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),B.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),B.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.di,(r=>{const a=me.fromPath(r);return this.mi(e,a).next((l=>{l||t.removeEntry(a,Se.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return B.or([()=>B.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Jf{constructor(e,t){this.persistence=e,this.fi=new Di((r=>hn(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=SS(this,t)}static Vi(e,t){return new Jf(e,t)}Ti(){}Ii(e){return B.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return B.forEach(this.fi,((r,a)=>this.wr(e,r,a).next((l=>l?B.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(c=>this.wr(e,c,t).next((d=>{d||(r++,l.removeEntry(c,Se.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),B.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),B.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Tf(e.data.value)),t}wr(e,t,r){return B.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return B.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class g4{constructor(e){this.serializer=e}k(e,t,r,a){const l=new cd("createOrUpgrade",t);r<1&&a>=1&&((function(p){p.createObjectStore(Ec)})(e),(function(p){p.createObjectStore(tc,{keyPath:IV}),p.createObjectStore(mr,{keyPath:_E,autoIncrement:!0}).createIndex(va,vE,{unique:!0}),p.createObjectStore(Yo)})(e),lT(e),(function(p){p.createObjectStore(da)})(e));let c=B.resolve();return r<3&&a>=3&&(r!==0&&((function(p){p.deleteObjectStore(Jo),p.deleteObjectStore(Xo),p.deleteObjectStore(Ta)})(e),lT(e)),c=c.next((()=>(function(p){const g=p.store(Ta),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Se.min().toTimestamp(),targetCount:0};return g.put(Bf,v)})(l)))),r<4&&a>=4&&(r!==0&&(c=c.next((()=>(function(p,g){return g.store(mr).H().next((E=>{p.deleteObjectStore(mr),p.createObjectStore(mr,{keyPath:_E,autoIncrement:!0}).createIndex(va,vE,{unique:!0});const S=g.store(mr),N=E.map((Q=>S.put(Q)));return B.waitFor(N)}))})(e,l)))),c=c.next((()=>{(function(p){p.createObjectStore(Wo,{keyPath:PV})})(e)}))),r<5&&a>=5&&(c=c.next((()=>this.gi(l)))),r<6&&a>=6&&(c=c.next((()=>((function(p){p.createObjectStore(nc)})(e),this.pi(l))))),r<7&&a>=7&&(c=c.next((()=>this.yi(l)))),r<8&&a>=8&&(c=c.next((()=>this.wi(e,l)))),r<9&&a>=9&&(c=c.next((()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&a>=10&&(c=c.next((()=>this.bi(l)))),r<11&&a>=11&&(c=c.next((()=>{(function(p){p.createObjectStore(fd,{keyPath:LV})})(e),(function(p){p.createObjectStore(dd,{keyPath:zV})})(e)}))),r<12&&a>=12&&(c=c.next((()=>{(function(p){const g=p.createObjectStore(md,{keyPath:GV});g.createIndex(gg,KV,{unique:!1}),g.createIndex(pw,QV,{unique:!1})})(e)}))),r<13&&a>=13&&(c=c.next((()=>(function(p){const g=p.createObjectStore(jf,{keyPath:CV});g.createIndex(bf,NV),g.createIndex(hw,DV)})(e))).next((()=>this.Si(e,l))).next((()=>e.deleteObjectStore(da)))),r<14&&a>=14&&(c=c.next((()=>this.Di(e,l)))),r<15&&a>=15&&(c=c.next((()=>(function(p){p.createObjectStore(uy,{keyPath:UV,autoIncrement:!0}).createIndex(pg,jV,{unique:!1}),p.createObjectStore(qu,{keyPath:BV}).createIndex(dw,qV,{unique:!1}),p.createObjectStore(Fu,{keyPath:FV}).createIndex(mw,HV,{unique:!1})})(e)))),r<16&&a>=16&&(c=c.next((()=>{t.objectStore(qu).clear()})).next((()=>{t.objectStore(Fu).clear()}))),r<17&&a>=17&&(c=c.next((()=>{(function(p){p.createObjectStore(cy,{keyPath:$V})})(e)}))),r<18&&a>=18&&f1()&&(c=c.next((()=>{t.objectStore(qu).clear()})).next((()=>{t.objectStore(Fu).clear()}))),c}pi(e){let t=0;return e.store(da).ee(((r,a)=>{t+=Xf(a)})).next((()=>{const r={byteSize:t};return e.store(nc).put(mg,r)}))}gi(e){const t=e.store(tc),r=e.store(mr);return t.H().next((a=>B.forEach(a,(l=>{const c=IDBKeyRange.bound([l.userId,Ea],[l.userId,l.lastAcknowledgedBatchId]);return r.H(va,c).next((d=>B.forEach(d,(p=>{Ee(p.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const g=pa(this.serializer,p);return vS(e,l.userId,g).next((()=>{}))}))))}))))}yi(e){const t=e.store(Jo),r=e.store(da);return e.store(Ta).get(Bf).next((a=>{const l=[];return r.ee(((c,d)=>{const p=new ut(c),g=(function(E){return[0,hn(E)]})(p);l.push(t.get(g).next((v=>v?B.resolve():(E=>t.put({targetId:0,path:hn(E),sequenceNumber:a.highestListenSequenceNumber}))(p))))})).next((()=>B.waitFor(l)))}))}wi(e,t){e.createObjectStore(rc,{keyPath:kV});const r=t.store(rc),a=new xy,l=c=>{if(a.add(c)){const d=c.lastSegment(),p=c.popLast();return r.put({collectionId:d,parent:hn(p)})}};return t.store(da).ee({Y:!0},((c,d)=>{const p=new ut(c);return l(p.popLast())})).next((()=>t.store(Yo).ee({Y:!0},(([c,d,p],g)=>{const v=Gr(d);return l(v.popLast())}))))}bi(e){const t=e.store(Xo);return t.ee(((r,a)=>{const l=ku(a),c=mS(this.serializer,l);return t.put(c)}))}Si(e,t){const r=t.store(da),a=[];return r.ee(((l,c)=>{const d=t.store(jf),p=(function(E){return E.document?new me(ut.fromString(E.document.name).popFirst(5)):E.noDocument?me.fromSegments(E.noDocument.path):E.unknownDocument?me.fromSegments(E.unknownDocument.path):ye(36783)})(c).path.toArray(),g={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(g))})).next((()=>B.waitFor(a)))}Di(e,t){const r=t.store(mr),a=xS(this.serializer),l=new Ry(Sd.Vi,this.serializer.yt);return r.H().next((c=>{const d=new Map;return c.forEach((p=>{let g=d.get(p.userId)??Pe();pa(this.serializer,p).keys().forEach((v=>g=g.add(v))),d.set(p.userId,g)})),B.forEach(d,((p,g)=>{const v=new un(g),E=Td.wt(this.serializer,v),S=l.getIndexManager(v),N=wd.wt(v,this.serializer,S,l.referenceDelegate);return new IS(a,N,E,S).recalculateAndSaveOverlaysForDocumentKeys(new yg(t,wn.ce),p).next()}))}))}}function lT(s){s.createObjectStore(Jo,{keyPath:OV}).createIndex(ly,MV,{unique:!0}),s.createObjectStore(Xo,{keyPath:"targetId"}).createIndex(fw,VV,{unique:!0}),s.createObjectStore(Ta)}const ms="IndexedDbPersistence",Kp=18e5,Qp=5e3,$p="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",y4="main";class Cy{constructor(e,t,r,a,l,c,d,p,g,v,E=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ci=l,this.window=c,this.document=d,this.Fi=g,this.Mi=v,this.xi=E,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=S=>Promise.resolve(),!Cy.v())throw new pe(se.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new i4(this,a),this.Ki=t+y4,this.serializer=new dS(p),this.qi=new As(this.Ki,this.xi,new g4(this.serializer)),this.ci=new QO,this.li=new t4(this.referenceDelegate,this.serializer),this.remoteDocumentCache=xS(this.serializer),this.Pi=new KO,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,v===!1&&Dt(ms,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new pe(se.FAILED_PRECONDITION,$p);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new wn(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>uf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(Ds(e))return oe(ms,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return oe(ms,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return Cu(e).get(Io).next((t=>B.resolve(this.Xi(t))))}Yi(e){return uf(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,Kp)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=Qt(t,Wo);return r.H().next((a=>{const l=this.ns(a,Kp),c=a.filter((d=>l.indexOf(d)===-1));return B.forEach(c,(d=>r.delete(d.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?B.resolve(!0):Cu(e).get(Io).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Qp)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new pe(se.FAILED_PRECONDITION,$p);return!1}}return!(!this.networkEnabled||!this.inForeground)||uf(e).H().next((r=>this.ns(r,Qp).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||c&&d)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&oe(ms,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[Ec,Wo],(e=>{const t=new yg(e,wn.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((r=>this.ts(r.updateTimeMs,t)&&!this.ss(r.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>uf(e).H().next((t=>this.ns(t,Kp).map((r=>r.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return wd.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new e4(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Td.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,r){oe(ms,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(p){return p===18?JV:p===17?vw:p===16?XV:p===15?hy:p===14?_w:p===13?yw:p===12?YV:p===11?gw:void ye(60245)})(this.xi);let c;return this.qi.runTransaction(e,a,l,(d=>(c=new yg(d,this.ai?this.ai.next():wn.ce),t==="readwrite-primary"?this.ji(c).next((p=>!!p||this.Hi(c))).next((p=>{if(!p)throw Dt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new pe(se.FAILED_PRECONDITION,aw);return r(c)})).next((p=>this.Zi(c).next((()=>p)))):this.Ps(c).next((()=>r(c)))))).then((d=>(c.raiseOnCommittedEvent(),d)))}Ps(e){return Cu(e).get(Io).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Qp)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new pe(se.FAILED_PRECONDITION,$p)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Cu(e).put(Io,t)}static v(){return As.v()}Ji(e){const t=Cu(e);return t.get(Io).next((r=>this.Xi(r)?(oe(ms,"Releasing primary lease."),t.delete(Io)):B.resolve()))}ts(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Dt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;h1()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{const t=this.Ui?.getItem(this.rs(e))!==null;return oe(ms,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Dt(ms,"Failed to get zombied client id.",t),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){Dt("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Cu(s){return Qt(s,Ec)}function uf(s){return Qt(s,Wo)}function RS(s,e){let t=s.projectId;return s.isDefaultDatabase||(t+="."+s.database),"firestore/"+e+"/"+t+"/"}class Ny{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=a}static Es(e,t){let r=Pe(),a=Pe();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Ny(e,t.fromCache,r,a)}}class _4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class CS{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return h1()?8:lw(Kt())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,a,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new _4;return this.ys(e,t,c).next((d=>{if(l.result=d,this.As)return this.ws(e,t,c,d.size)}))})).next((()=>l.result))}ws(e,t,r,a){return r.documentReadCount<this.Vs?(Oo()<=Fe.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",Mo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),B.resolve()):(Oo()<=Fe.DEBUG&&oe("QueryEngine","Query:",Mo(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ds*a?(Oo()<=Fe.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",Mo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pn(t))):B.resolve())}gs(e,t){if(VE(t))return B.resolve(null);let r=Pn(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=wg(t,null,"F"),r=Pn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=Pe(...l);return this.fs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,r).next((p=>{const g=this.bs(t,d);return this.Ss(t,g,c,p.readTime)?this.gs(e,wg(t,null,"F")):this.Ds(e,g,t,p)}))))})))))}ps(e,t,r,a){return VE(t)||a.isEqual(Se.min())?B.resolve(null):this.fs.getDocuments(e,r).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,r,a)?B.resolve(null):(Oo()<=Fe.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Mo(t)),this.Ds(e,c,t,iw(a,$o)).next((d=>d)))}))}bs(e,t){let r=new it(jw(e));return t.forEach(((a,l)=>{wc(e,l)&&(r=r.add(l))})),r}Ss(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,t,r){return Oo()<=Fe.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",Mo(t)),this.fs.getDocumentsMatchingQuery(e,t,Ln.min(),r)}Ds(e,t,r,a){return this.fs.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const Dy="LocalStore",v4=3e8;class b4{constructor(e,t,r,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new dt(Ne),this.Fs=new Di((l=>Na(l)),Tc),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new IS(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function NS(s,e,t,r){return new b4(s,e,t,r)}async function DS(s,e){const t=ve(s);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],d=[];let p=Pe();for(const g of a){c.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of l){d.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(r,p).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function E4(s,e){const t=ve(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,p,g,v){const E=g.batch,S=E.keys();let N=B.resolve();return S.forEach((Q=>{N=N.next((()=>v.getEntry(p,Q))).next((q=>{const L=g.docVersions.get(Q);Ee(L!==null,48541),q.version.compareTo(L)<0&&(E.applyToRemoteDocument(q,g),q.isValidDocument()&&(q.setReadTime(g.commitVersion),v.addEntry(q)))}))})),N.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let p=Pe();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function VS(s){const e=ve(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function T4(s,e){const t=ve(s),r=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const d=[];e.targetChanges.forEach(((v,E)=>{const S=a.get(E);if(!S)return;d.push(t.li.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.li.addMatchingKeys(l,v.addedDocuments,E))));let N=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?N=N.withResumeToken(Vt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):v.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(v.resumeToken,r)),a=a.insert(E,N),(function(q,L,re){return q.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=v4?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0})(S,N,v)&&d.push(t.li.updateTargetData(l,N))}));let p=Mn(),g=Pe();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(w4(l,c,e.documentUpdates).next((v=>{p=v.Bs,g=v.Ls}))),!r.isEqual(Se.min())){const v=t.li.getLastRemoteSnapshotVersion(l).next((E=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,r)));d.push(v)}return B.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.vs=a,l)))}function w4(s,e,t){let r=Pe(),a=Pe();return t.forEach((l=>r=r.add(l))),e.getEntries(s,r).next((l=>{let c=Mn();return t.forEach(((d,p)=>{const g=l.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),p.isNoDocument()&&p.version.isEqual(Se.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):oe(Dy,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)})),{Bs:c,Ls:a}}))}function S4(s,e){const t=ve(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Ea),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Wf(s,e){const t=ve(s);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.li.getTargetData(r,e).next((l=>l?(a=l,B.resolve(a)):t.li.allocateTargetId(r).next((c=>(a=new Ei(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.vs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function al(s,e,t){const r=ve(s),a=r.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!Ds(c))throw c;oe(Dy,`Failed to update sequence numbers for target ${e}: ${c}`)}r.vs=r.vs.remove(e),r.Fs.delete(a.target)}function Dg(s,e,t){const r=ve(s);let a=Se.min(),l=Pe();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,v){const E=ve(p),S=E.Fs.get(v);return S!==void 0?B.resolve(E.vs.get(S)):E.li.getTargetData(g,v)})(r,c,Pn(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>r.Cs.getDocumentsMatchingQuery(c,e,t?a:Se.min(),t?l:Pe()))).next((d=>(kS(r,Uw(e),d),{documents:d,ks:l})))))}function OS(s,e){const t=ve(s),r=ve(t.li),a=t.vs.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(l=>r.At(l,e).next((c=>c?c.target:null))))}function MS(s,e){const t=ve(s),r=t.Ms.get(e)||Se.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.xs.getAllFromCollectionGroup(a,e,iw(r,$o),Number.MAX_SAFE_INTEGER))).then((a=>(kS(t,e,a),a)))}function kS(s,e,t){let r=s.Ms.get(e)||Se.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),s.Ms.set(e,r)}const PS="firestore_clients";function uT(s,e){return`${PS}_${s}_${e}`}const LS="firestore_mutations";function cT(s,e,t){let r=`${LS}_${s}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const zS="firestore_targets";function Yp(s,e){return`${zS}_${s}_${e}`}const Fr="SharedClientState";class Zf{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static $s(e,t,r){const a=JSON.parse(r);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new pe(a.error.code,a.error.message))),c?new Zf(e,t,a.state,l):(Dt(Fr,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $u{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static $s(e,t){const r=JSON.parse(t);let a,l=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(a=new pe(r.error.code,r.error.message))),l?new $u(e,r.state,a):(Dt(Fr,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ed{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,l=yy();for(let c=0;a&&c<r.activeTargetIds.length;++c)a=uw(r.activeTargetIds[c]),l=l.add(r.activeTargetIds[c]);return a?new ed(e,l):(Dt(Fr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class Vy{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new Vy(t.clientId,t.onlineState):(Dt(Fr,`Failed to parse online state: ${e}`),null)}}class Vg{constructor(){this.activeTargetIds=yy()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Xp{constructor(e,t,r,a,l){this.window=e,this.Ci=t,this.persistenceKey=r,this.zs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new dt(Ne),this.started=!1,this.Zs=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Xs=uT(this.persistenceKey,this.zs),this.Ys=(function(p){return`firestore_sequence_number_${p}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new Vg),this.eo=new RegExp(`^${PS}_${c}_([^_]*)$`),this.no=new RegExp(`^${LS}_${c}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${zS}_${c}_(\\d+)$`),this.io=(function(p){return`firestore_online_state_${p}`})(this.persistenceKey),this.so=(function(p){return`firestore_bundle_loaded_v2_${p}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const r of e){if(r===this.zs)continue;const a=this.getItem(uT(this.persistenceKey,r));if(a){const l=ed.$s(r,a);l&&(this.Js=this.Js.insert(l.clientId,l))}}this.oo();const t=this.storage.getItem(this.io);if(t){const r=this._o(t);r&&this.ao(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let t=!1;return this.Js.forEach(((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,t,r){this.co(e,t,r),this.lo(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Yp(this.persistenceKey,e));if(a){const l=$u.$s(e,a);l&&(r=l.state)}}return t&&this.ho.Qs(e),this.oo(),r}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Yp(this.persistenceKey,e))}updateQueryState(e,t,r){this.Po(e,t,r)}handleUserChange(e,t,r){t.forEach((a=>{this.lo(a)})),this.currentUser=e,r.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return oe(Fr,"READ",e,t),t}setItem(e,t){oe(Fr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){oe(Fr,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(oe(Fr,"EVENT",t.key,t.newValue),t.key===this.Xs)return void Dt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.eo.test(t.key)){if(t.newValue==null){const r=this.Eo(t.key);return this.Ro(r,null)}{const r=this.Ao(t.key,t.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.no.test(t.key)){if(t.newValue!==null){const r=this.Vo(t.key,t.newValue);if(r)return this.mo(r)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(t.key===this.io){if(t.newValue!==null){const r=this._o(t.newValue);if(r)return this.ao(r)}}else if(t.key===this.Ys){const r=(function(l){let c=wn.ce;if(l!=null)try{const d=JSON.parse(l);Ee(typeof d=="number",30636,{yo:l}),c=d}catch(d){Dt(Fr,"Failed to read sequence number from WebStorage",d)}return c})(t.newValue);r!==wn.ce&&this.sequenceNumberHandler(r)}else if(t.key===this.so){const r=this.wo(t.newValue);await Promise.all(r.map((a=>this.syncEngine.bo(a))))}}}else this.Zs.push(t)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,t,r){const a=new Zf(this.currentUser,e,t,r),l=cT(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Ws())}lo(e){const t=cT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}To(e){const t={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(t))}Po(e,t,r){const a=Yp(this.persistenceKey,e),l=new $u(e,t,r);this.setItem(a,l.Ws())}Io(e){const t=JSON.stringify(Array.from(e));this.setItem(this.so,t)}Eo(e){const t=this.eo.exec(e);return t?t[1]:null}Ao(e,t){const r=this.Eo(e);return ed.$s(r,t)}Vo(e,t){const r=this.no.exec(e),a=Number(r[1]),l=r[2]!==void 0?r[2]:null;return Zf.$s(new un(l),a,t)}fo(e,t){const r=this.ro.exec(e),a=Number(r[1]);return $u.$s(a,t)}_o(e){return Vy.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);oe(Fr,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,t){const r=t?this.Js.insert(e,t):this.Js.remove(e),a=this.uo(this.Js),l=this.uo(r),c=[],d=[];return l.forEach((p=>{a.has(p)||c.push(p)})),a.forEach((p=>{l.has(p)||d.push(p)})),this.syncEngine.Co(c,d).then((()=>{this.Js=r}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let t=yy();return e.forEach(((r,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class US{constructor(){this.vo=new Vg,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Vg,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class A4{Mo(e){}shutdown(){}}const hT="ConnectivityMonitor";class fT{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){oe(hT,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){oe(hT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let cf=null;function Og(){return cf===null?cf=(function(){return 268435456+Math.round(2147483648*Math.random())})():cf++,"0x"+cf.toString(16)}const Jp="RestConnection",x4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class I4{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${a}`,this.$o=this.databaseId.database===qf?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Wo(e,t,r,a,l){const c=Og(),d=this.Qo(e,t.toUriEncodedString());oe(Jp,`Sending RPC '${e}' ${c}:`,d,r);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,a,l);const{host:g}=new URL(d),v=fl(g);return this.zo(e,d,p,r,v).then((E=>(oe(Jp,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw Ko(Jp,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",r),E}))}jo(e,t,r,a,l,c){return this.Wo(e,t,r,a,l)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+pl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}Qo(e,t){const r=x4[e];let a=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}class R4{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const ln="WebChannelConnection",Nu=(s,e,t)=>{s.listen(e,(r=>{try{t(r)}catch(a){setTimeout((()=>{throw a}),0)}}))};class qo extends I4{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!qo.c_){const e=Z1();Nu(e,W1.STAT_EVENT,(t=>{t.stat===hg.PROXY?oe(ln,"STAT_EVENT: detected buffering proxy"):t.stat===hg.NOPROXY&&oe(ln,"STAT_EVENT: detected no buffering proxy")})),qo.c_=!0}}zo(e,t,r,a,l){const c=Og();return new Promise(((d,p)=>{const g=new X1;g.setWithCredentials(!0),g.listenOnce(J1.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case yf.NO_ERROR:const E=g.getResponseJson();oe(ln,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case yf.TIMEOUT:oe(ln,`RPC '${e}' ${c} timed out`),p(new pe(se.DEADLINE_EXCEEDED,"Request time out"));break;case yf.HTTP_ERROR:const S=g.getStatus();if(oe(ln,`RPC '${e}' ${c} failed with status:`,S,"response text:",g.getResponseText()),S>0){let N=g.getResponseJson();Array.isArray(N)&&(N=N[0]);const Q=N?.error;if(Q&&Q.status&&Q.message){const q=(function(re){const J=re.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(J)>=0?J:se.UNKNOWN})(Q.status);p(new pe(q,Q.message))}else p(new pe(se.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new pe(se.UNAVAILABLE,"Connection failed."));break;default:ye(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{oe(ln,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(a);oe(ln,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",v,r,15)}))}T_(e,t,r){const a=Og(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const g=l.join("");oe(ln,`Creating RPC '${e}' stream ${a}: ${g}`,d);const v=c.createWebChannel(g,d);this.I_(v);let E=!1,S=!1;const N=new R4({Ho:Q=>{S?oe(ln,`Not sending because RPC '${e}' stream ${a} is closed:`,Q):(E||(oe(ln,`Opening RPC '${e}' stream ${a} transport.`),v.open(),E=!0),oe(ln,`RPC '${e}' stream ${a} sending:`,Q),v.send(Q))},Jo:()=>v.close()});return Nu(v,Vu.EventType.OPEN,(()=>{S||(oe(ln,`RPC '${e}' stream ${a} transport opened.`),N.i_())})),Nu(v,Vu.EventType.CLOSE,(()=>{S||(S=!0,oe(ln,`RPC '${e}' stream ${a} transport closed`),N.o_(),this.E_(v))})),Nu(v,Vu.EventType.ERROR,(Q=>{S||(S=!0,Ko(ln,`RPC '${e}' stream ${a} transport errored. Name:`,Q.name,"Message:",Q.message),N.o_(new pe(se.UNAVAILABLE,"The operation could not be completed")))})),Nu(v,Vu.EventType.MESSAGE,(Q=>{if(!S){const q=Q.data[0];Ee(!!q,16349);const L=q,re=L?.error||L[0]?.error;if(re){oe(ln,`RPC '${e}' stream ${a} received error:`,re);const J=re.status;let ee=(function(ue){const w=Ft[ue];if(w!==void 0)return Ww(w)})(J),le=re.message;J==="NOT_FOUND"&&le.includes("database")&&le.includes("does not exist")&&le.includes(this.databaseId.database)&&Ko(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),ee===void 0&&(ee=se.INTERNAL,le="Unknown error status: "+J+" with message "+re.message),S=!0,N.o_(new pe(ee,le)),v.close()}else oe(ln,`RPC '${e}' stream ${a} received:`,q),N.__(q)}})),qo.u_(),setTimeout((()=>{N.s_()}),0),N}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return ew()}}function C4(s){return new qo(s)}function jS(){return typeof window<"u"?window:null}function If(){return typeof document<"u"?document:null}function Ad(s){return new kO(s,!0)}qo.c_=!1;class BS{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&oe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const dT="PersistentStream";class qS{constructor(e,t,r,a,l,c,d,p){this.Ci=e,this.b_=r,this.S_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new BS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(Dt(t.toString()),Dt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new pe(se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return oe(dT,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(oe(dT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class N4 extends qS{constructor(e,t,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=zO(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Se.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Se.min():c.readTime?mn(c.readTime):Se.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=xg(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=Hf(p)?{documents:aS(l,p)}:{query:oS(l,p).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=tS(l,c.resumeToken);const g=Sg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Se.min())>0){d.readTime=sl(l,c.snapshotVersion.toTimestamp());const g=Sg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const r=jO(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=xg(this.serializer),t.removeTarget=e,this.K_(t)}}class D4 extends qS{constructor(e,t,r,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Ee(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ee(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=UO(e.writeResults,e.commitTime),r=mn(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=xg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Qf(this.serializer,r)))};this.K_(t)}}class V4{}class O4 extends V4{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new pe(se.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,Ag(t,r),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new pe(se.UNKNOWN,l.toString())}))}jo(e,t,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.jo(e,Ag(t,r),a,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pe(se.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function M4(s,e,t,r){return new O4(s,e,t,r)}class k4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Dt(t),this.aa=!1):oe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ma="RemoteStore";class P4{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{r.enqueueAndForget((async()=>{La(this)&&(oe(Ma,"Restarting streams for network reachability change."),await(async function(p){const g=ve(p);g.Ea.add(4),await xc(g),g.Va.set("Unknown"),g.Ea.delete(4),await xd(g)})(this))}))})),this.Va=new k4(r,a)}}async function xd(s){if(La(s))for(const e of s.Ra)await e(!0)}async function xc(s){for(const e of s.Ra)await e(!1)}function Id(s,e){const t=ve(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ky(t)?My(t):_l(t).O_()&&Oy(t,e))}function ol(s,e){const t=ve(s),r=_l(t);t.Ia.delete(e),r.O_()&&FS(t,e),t.Ia.size===0&&(r.O_()?r.L_():La(t)&&t.Va.set("Unknown"))}function Oy(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_l(s).Z_(e)}function FS(s,e){s.da.$e(e),_l(s).X_(e)}function My(s){s.da=new DO({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),_l(s).start(),s.Va.ua()}function ky(s){return La(s)&&!_l(s).x_()&&s.Ia.size>0}function La(s){return ve(s).Ea.size===0}function HS(s){s.da=void 0}async function L4(s){s.Va.set("Online")}async function z4(s){s.Ia.forEach(((e,t)=>{Oy(s,e)}))}async function U4(s,e){HS(s),ky(s)?(s.Va.ha(e),My(s)):s.Va.set("Unknown")}async function j4(s,e,t){if(s.Va.set("Online"),e instanceof eS&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.da.removeTarget(d))})(s,e)}catch(r){oe(Ma,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await td(s,r)}else if(e instanceof Af?s.da.Xe(e):e instanceof Zw?s.da.st(e):s.da.tt(e),!t.isEqual(Se.min()))try{const r=await VS(s.localStore);t.compareTo(r)>=0&&await(function(l,c){const d=l.da.Tt(c);return d.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ia.get(g);v&&l.Ia.set(g,v.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,g)=>{const v=l.Ia.get(p);if(!v)return;l.Ia.set(p,v.withResumeToken(Vt.EMPTY_BYTE_STRING,v.snapshotVersion)),FS(l,p);const E=new Ei(v.target,p,g,v.sequenceNumber);Oy(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(s,t)}catch(r){oe(Ma,"Failed to raise snapshot:",r),await td(s,r)}}async function td(s,e,t){if(!Ds(e))throw e;s.Ea.add(1),await xc(s),s.Va.set("Offline"),t||(t=()=>VS(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{oe(Ma,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await xd(s)}))}function GS(s,e){return e().catch((t=>td(s,t,e)))}async function yl(s){const e=ve(s),t=Rs(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ea;for(;B4(e);)try{const a=await S4(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,q4(e,a)}catch(a){await td(e,a)}KS(e)&&QS(e)}function B4(s){return La(s)&&s.Ta.length<10}function q4(s,e){s.Ta.push(e);const t=Rs(s);t.O_()&&t.Y_&&t.ea(e.mutations)}function KS(s){return La(s)&&!Rs(s).x_()&&s.Ta.length>0}function QS(s){Rs(s).start()}async function F4(s){Rs(s).ra()}async function H4(s){const e=Rs(s);for(const t of s.Ta)e.ea(t.mutations)}async function G4(s,e,t){const r=s.Ta.shift(),a=Ey.from(r,e,t);await GS(s,(()=>s.remoteSyncer.applySuccessfulWrite(a))),await yl(s)}async function K4(s,e){e&&Rs(s).Y_&&await(async function(r,a){if((function(c){return RO(c)&&c!==se.ABORTED})(a.code)){const l=r.Ta.shift();Rs(r).B_(),await GS(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await yl(r)}})(s,e),KS(s)&&QS(s)}async function mT(s,e){const t=ve(s);t.asyncQueue.verifyOperationInProgress(),oe(Ma,"RemoteStore received new credentials");const r=La(t);t.Ea.add(3),await xc(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await xd(t)}async function Mg(s,e){const t=ve(s);e?(t.Ea.delete(2),await xd(t)):e||(t.Ea.add(2),await xc(t),t.Va.set("Unknown"))}function _l(s){return s.ma||(s.ma=(function(t,r,a){const l=ve(t);return l.sa(),new N4(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(s.datastore,s.asyncQueue,{Zo:L4.bind(null,s),Yo:z4.bind(null,s),t_:U4.bind(null,s),J_:j4.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),ky(s)?My(s):s.Va.set("Unknown")):(await s.ma.stop(),HS(s))}))),s.ma}function Rs(s){return s.fa||(s.fa=(function(t,r,a){const l=ve(t);return l.sa(),new D4(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:F4.bind(null,s),t_:K4.bind(null,s),ta:H4.bind(null,s),na:G4.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await yl(s)):(await s.fa.stop(),s.Ta.length>0&&(oe(Ma,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class Py{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new wi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const c=Date.now()+r,d=new Py(e,t,c,a,l);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ly(s,e){if(Dt("AsyncQueue",`${e}: ${s}`),Ds(s))return new pe(se.UNAVAILABLE,`${e}: ${s}`);throw s}class Fo{static emptySet(e){return new Fo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||me.comparator(t.key,r.key):(t,r)=>me.comparator(t.key,r.key),this.keyedMap=Ou(),this.sortedSet=new dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Fo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class pT{constructor(){this.ga=new dt(me.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ye(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class ll{constructor(e,t,r,a,l,c,d,p,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,a,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new ll(e,t,Fo.emptySet(t),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class Q4{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class $4{constructor(){this.queries=gT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=ve(t),l=a.queries;a.queries=gT(),l.forEach(((c,d)=>{for(const p of d.ba)p.onError(r)}))})(this,new pe(se.ABORTED,"Firestore shutting down"))}}function gT(){return new Di((s=>zw(s)),vd)}async function Y4(s,e){const t=ve(s);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.Da()&&(r=2):(l=new Q4,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=Ly(c,`Initialization of query '${Mo(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&zy(t)}async function X4(s,e){const t=ve(s),r=e.query;let a=3;const l=t.queries.get(r);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function J4(s,e){const t=ve(s);let r=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.ba)d.Fa(a)&&(r=!0);c.wa=a}}r&&zy(t)}function W4(s,e,t){const r=ve(s),a=r.queries.get(e);if(a)for(const l of a.ba)l.onError(t);r.queries.delete(e)}function zy(s){s.Ca.forEach((e=>{e.next()}))}var kg,yT;(yT=kg||(kg={})).Ma="default",yT.Cache="cache";class Z4{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new ll(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ll.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==kg.Cache}}class $S{constructor(e){this.key=e}}class YS{constructor(e){this.key=e}}class eM{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Pe(),this.mutatedKeys=Pe(),this.eu=jw(e),this.tu=new Fo(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new pT,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,E)=>{const S=a.get(v),N=wc(this.query,E)?E:null,Q=!!S&&this.mutatedKeys.has(S.key),q=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let L=!1;S&&N?S.data.isEqual(N.data)?Q!==q&&(r.track({type:3,doc:N}),L=!0):this.su(S,N)||(r.track({type:2,doc:N}),L=!0,(p&&this.eu(N,p)>0||g&&this.eu(N,g)<0)&&(d=!0)):!S&&N?(r.track({type:0,doc:N}),L=!0):S&&!N&&(r.track({type:1,doc:S}),L=!0,(p||g)&&(d=!0)),L&&(N?(c=c.add(N),l=q?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),r.track({type:1,doc:v})}return{tu:c,iu:r,Ss:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,E)=>(function(N,Q){const q=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye(20277,{Vt:L})}};return q(N)-q(Q)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(r),a=a??!1;const d=t&&!a?this._u():[],p=this.Ya.size===0&&this.current&&!a?1:0,g=p!==this.Xa;return this.Xa=p,c.length!==0||g?{snapshot:new ll(this.query,e.tu,l,c,e.mutatedKeys,p===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new pT,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Pe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new YS(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new $S(r))})),t}cu(e){this.Za=e.ks,this.Ya=Pe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ll.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const vl="SyncEngine";class tM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class nM{constructor(e){this.key=e,this.hu=!1}}class rM{constructor(e,t,r,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Di((d=>zw(d)),vd),this.Iu=new Map,this.Eu=new Set,this.Ru=new dt(me.comparator),this.Au=new Map,this.Vu=new Iy,this.du={},this.mu=new Map,this.fu=Oa.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function iM(s,e,t=!0){const r=Rd(s);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await XS(r,e,t,!0),a}async function sM(s,e){const t=Rd(s);await XS(t,e,!0,!1)}async function XS(s,e,t,r){const a=await Wf(s.localStore,Pn(e)),l=a.targetId,c=s.sharedClientState.addLocalQueryTarget(l,t);let d;return r&&(d=await Uy(s,e,l,c==="current",a.resumeToken)),s.isPrimaryClient&&t&&Id(s.remoteStore,a),d}async function Uy(s,e,t,r,a){s.pu=(E,S,N)=>(async function(q,L,re,J){let ee=L.view.ru(re);ee.Ss&&(ee=await Dg(q.localStore,L.query,!1).then((({documents:w})=>L.view.ru(w,ee))));const le=J&&J.targetChanges.get(L.targetId),ce=J&&J.targetMismatches.get(L.targetId)!=null,ue=L.view.applyChanges(ee,q.isPrimaryClient,le,ce);return Pg(q,L.targetId,ue.au),ue.snapshot})(s,E,S,N);const l=await Dg(s.localStore,e,!0),c=new eM(e,l.ks),d=c.ru(l.documents),p=Ac.createSynthesizedTargetChangeForCurrentChange(t,r&&s.onlineState!=="Offline",a),g=c.applyChanges(d,s.isPrimaryClient,p);Pg(s,t,g.au);const v=new tM(e,t,c);return s.Tu.set(e,v),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),g.snapshot}async function aM(s,e,t){const r=ve(s),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter((c=>!vd(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await al(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&ol(r.remoteStore,a.targetId),ul(r,a.targetId)})).catch(Ns)):(ul(r,a.targetId),await al(r.localStore,a.targetId,!0))}async function oM(s,e){const t=ve(s),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ol(t.remoteStore,r.targetId))}async function lM(s,e,t){const r=Fy(s);try{const a=await(function(c,d){const p=ve(c),g=rt.now(),v=d.reduce(((N,Q)=>N.add(Q.key)),Pe());let E,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let Q=Mn(),q=Pe();return p.xs.getEntries(N,v).next((L=>{Q=L,Q.forEach(((re,J)=>{J.isValidDocument()||(q=q.add(re))}))})).next((()=>p.localDocuments.getOverlayedDocuments(N,Q))).next((L=>{E=L;const re=[];for(const J of d){const ee=xO(J,E.get(J.key).overlayedDocument);ee!=null&&re.push(new Vs(J.key,ee,Cw(ee.value.mapValue),kn.exists(!0)))}return p.mutationQueue.addMutationBatch(N,g,re,d)})).next((L=>{S=L;const re=L.applyToLocalDocumentSet(E,q);return p.documentOverlayCache.saveOverlays(N,L.batchId,re)}))})).then((()=>({batchId:S.batchId,changes:qw(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(c,d,p){let g=c.du[c.currentUser.toKey()];g||(g=new dt(Ne)),g=g.insert(d,p),c.du[c.currentUser.toKey()]=g})(r,a.batchId,t),await Os(r,a.changes),await yl(r.remoteStore)}catch(a){const l=Ly(a,"Failed to persist write");t.reject(l)}}async function JS(s,e){const t=ve(s);try{const r=await T4(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(Ee(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?Ee(c.hu,14607):a.removedDocuments.size>0&&(Ee(c.hu,42227),c.hu=!1))})),await Os(t,r,e)}catch(r){await Ns(r)}}function _T(s,e,t){const r=ve(s);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const p=ve(c);p.onlineState=d;let g=!1;p.queries.forEach(((v,E)=>{for(const S of E.ba)S.va(d)&&(g=!0)})),g&&zy(p)})(r.eventManager,e),a.length&&r.Pu.J_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function uM(s,e,t){const r=ve(s);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),l=a&&a.key;if(l){let c=new dt(me.comparator);c=c.insert(l,At.newNoDocument(l,Se.min()));const d=Pe().add(l),p=new Sc(Se.min(),new Map,new dt(Ne),c,d);await JS(r,p),r.Ru=r.Ru.remove(l),r.Au.delete(e),qy(r)}else await al(r.localStore,e,!1).then((()=>ul(r,e,t))).catch(Ns)}async function cM(s,e){const t=ve(s),r=e.batch.batchId;try{const a=await E4(t.localStore,e);By(t,r,null),jy(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Os(t,a)}catch(a){await Ns(a)}}async function hM(s,e,t){const r=ve(s);try{const a=await(function(c,d){const p=ve(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return p.mutationQueue.lookupMutationBatch(g,d).next((E=>(Ee(E!==null,37113),v=E.keys(),p.mutationQueue.removeMutationBatch(g,E)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,v,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>p.localDocuments.getDocuments(g,v)))}))})(r.localStore,e);By(r,e,t),jy(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Os(r,a)}catch(a){await Ns(a)}}function jy(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function By(s,e,t){const r=ve(s);let a=r.du[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.du[r.currentUser.toKey()]=a}}function ul(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),t&&s.Pu.yu(r,t);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((r=>{s.Vu.containsKey(r)||WS(s,r)}))}function WS(s,e){s.Eu.delete(e.path.canonicalString());const t=s.Ru.get(e);t!==null&&(ol(s.remoteStore,t),s.Ru=s.Ru.remove(e),s.Au.delete(t),qy(s))}function Pg(s,e,t){for(const r of t)r instanceof $S?(s.Vu.addReference(r.key,e),fM(s,r)):r instanceof YS?(oe(vl,"Document no longer in limbo: "+r.key),s.Vu.removeReference(r.key,e),s.Vu.containsKey(r.key)||WS(s,r.key)):ye(19791,{wu:r})}function fM(s,e){const t=e.key,r=t.path.canonicalString();s.Ru.get(t)||s.Eu.has(r)||(oe(vl,"New document in limbo: "+t),s.Eu.add(r),qy(s))}function qy(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new me(ut.fromString(e)),r=s.fu.next();s.Au.set(r,new nM(t)),s.Ru=s.Ru.insert(t,r),Id(s.remoteStore,new Ei(Pn(_d(t.path)),r,"TargetPurposeLimboResolution",wn.ce))}}async function Os(s,e,t){const r=ve(s),a=[],l=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((d,p)=>{c.push(r.pu(p,e,t).then((g=>{if((g||t)&&r.isPrimaryClient){const v=g?!g.fromCache:t?.targetChanges.get(p.targetId)?.current;r.sharedClientState.updateQueryState(p.targetId,v?"current":"not-current")}if(g){a.push(g);const v=Ny.Es(p.targetId,g);l.push(v)}})))})),await Promise.all(c),r.Pu.J_(a),await(async function(p,g){const v=ve(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>B.forEach(g,(S=>B.forEach(S.Ts,(N=>v.persistence.referenceDelegate.addReference(E,S.targetId,N))).next((()=>B.forEach(S.Is,(N=>v.persistence.referenceDelegate.removeReference(E,S.targetId,N)))))))))}catch(E){if(!Ds(E))throw E;oe(Dy,"Failed to update sequence numbers: "+E)}for(const E of g){const S=E.targetId;if(!E.fromCache){const N=v.vs.get(S),Q=N.snapshotVersion,q=N.withLastLimboFreeSnapshotVersion(Q);v.vs=v.vs.insert(S,q)}}})(r.localStore,l))}async function dM(s,e){const t=ve(s);if(!t.currentUser.isEqual(e)){oe(vl,"User change. New user:",e.toKey());const r=await DS(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((p=>{p.reject(new pe(se.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Os(t,r.Ns)}}function mM(s,e){const t=ve(s),r=t.Au.get(e);if(r&&r.hu)return Pe().add(r.key);{let a=Pe();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const d=t.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}async function pM(s,e){const t=ve(s),r=await Dg(t.localStore,e.query,!0),a=e.view.cu(r);return t.isPrimaryClient&&Pg(t,e.targetId,a.au),a}async function gM(s,e){const t=ve(s);return MS(t.localStore,e).then((r=>Os(t,r)))}async function yM(s,e,t,r){const a=ve(s),l=await(function(d,p){const g=ve(d),v=ve(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",(E=>v.Xn(E,p).next((S=>S?g.localDocuments.getDocuments(E,S):B.resolve(null)))))})(a.localStore,e);l!==null?(t==="pending"?await yl(a.remoteStore):t==="acknowledged"||t==="rejected"?(By(a,e,r||null),jy(a,e),(function(d,p){ve(ve(d).mutationQueue).nr(p)})(a.localStore,e)):ye(6720,"Unknown batchState",{bu:t}),await Os(a,l)):oe(vl,"Cannot apply mutation batch with id: "+e)}async function _M(s,e){const t=ve(s);if(Rd(t),Fy(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await vT(t,r.toArray());t.gu=!0,await Mg(t.remoteStore,!0);for(const l of a)Id(t.remoteStore,l)}else if(e===!1&&t.gu!==!1){const r=[];let a=Promise.resolve();t.Iu.forEach(((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):a=a.then((()=>(ul(t,c),al(t.localStore,c,!0)))),ol(t.remoteStore,c)})),await a,await vT(t,r),(function(c){const d=ve(c);d.Au.forEach(((p,g)=>{ol(d.remoteStore,g)})),d.Vu.zr(),d.Au=new Map,d.Ru=new dt(me.comparator)})(t),t.gu=!1,await Mg(t.remoteStore,!1)}}async function vT(s,e,t){const r=ve(s),a=[],l=[];for(const c of e){let d;const p=r.Iu.get(c);if(p&&p.length!==0){d=await Wf(r.localStore,Pn(p[0]));for(const g of p){const v=r.Tu.get(g),E=await pM(r,v);E.snapshot&&l.push(E.snapshot)}}else{const g=await OS(r.localStore,c);d=await Wf(r.localStore,g),await Uy(r,ZS(g),c,!1,d.resumeToken)}a.push(d)}return r.Pu.J_(l),a}function ZS(s){return Lw(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function vM(s){return(function(t){return ve(ve(t).persistence).hs()})(ve(s).localStore)}async function bM(s,e,t,r){const a=ve(s);if(a.gu)return void oe(vl,"Ignoring unexpected query state notification.");const l=a.Iu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=await MS(a.localStore,Uw(l[0])),d=Sc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Vt.EMPTY_BYTE_STRING);await Os(a,c,d);break}case"rejected":await al(a.localStore,e,!0),ul(a,e,r);break;default:ye(64155,t)}}async function EM(s,e,t){const r=Rd(s);if(r.gu){for(const a of e){if(r.Iu.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){oe(vl,"Adding an already active target "+a);continue}const l=await OS(r.localStore,a),c=await Wf(r.localStore,l);await Uy(r,ZS(l),c.targetId,!1,c.resumeToken),Id(r.remoteStore,c)}for(const a of t)r.Iu.has(a)&&await al(r.localStore,a,!1).then((()=>{ol(r.remoteStore,a),ul(r,a)})).catch(Ns)}}function Rd(s){const e=ve(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=JS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uM.bind(null,e),e.Pu.J_=J4.bind(null,e.eventManager),e.Pu.yu=W4.bind(null,e.eventManager),e}function Fy(s){const e=ve(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hM.bind(null,e),e}class uc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ad(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return NS(this.persistence,new CS,e.initialUser,this.serializer)}Cu(e){return new Ry(Sd.Vi,this.serializer)}Du(e){return new US}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uc.provider={build:()=>new uc};class TM extends uc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ee(this.persistence.referenceDelegate instanceof Jf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new wS(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new Ry((r=>Jf.Vi(r,t)),this.serializer)}}class eA extends uc{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Fy(this.xu.syncEngine),await yl(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return NS(this.persistence,new CS,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new wS(r,e.asyncQueue,t)}Mu(e,t){const r=new AV(t,this.persistence);return new SV(e.asyncQueue,r)}Cu(e){const t=RS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new Cy(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,jS(),If(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new US}}class wM extends eA{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof Xp&&(this.sharedClientState.syncEngine={So:yM.bind(null,t),Do:bM.bind(null,t),Co:EM.bind(null,t),hs:vM.bind(null,t),bo:gM.bind(null,t)},await this.sharedClientState.start()),await this.persistence.zi((async r=>{await _M(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=jS();if(!Xp.v(t))throw new pe(se.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=RS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Xp(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class cc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_T(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=dM.bind(null,this.syncEngine),await Mg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new $4})()}createDatastore(e){const t=Ad(e.databaseInfo.databaseId),r=C4(e.databaseInfo);return M4(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,c,d){return new P4(r,a,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>_T(this.syncEngine,t,0)),(function(){return fT.v()?new fT:new A4})())}createSyncEngine(e,t){return(function(a,l,c,d,p,g,v){const E=new rM(a,l,c,d,p,g);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=ve(t);oe(Ma,"RemoteStore shutting down."),r.Ea.add(5),await xc(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}cc.provider={build:()=>new cc};class SM{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Dt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Cs="FirestoreClient";class AM{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=a,this.user=un.UNAUTHENTICATED,this.clientId=iy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{oe(Cs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(oe(Cs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Ly(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Wp(s,e){s.asyncQueue.verifyOperationInProgress(),oe(Cs,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let r=t.initialUser;s.setCredentialChangeListener((async a=>{r.isEqual(a)||(await DS(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function bT(s,e){s.asyncQueue.verifyOperationInProgress();const t=await xM(s);oe(Cs,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((r=>mT(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,a)=>mT(e.remoteStore,a))),s._onlineComponents=e}async function xM(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){oe(Cs,"Using user provided OfflineComponentProvider");try{await Wp(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===se.FAILED_PRECONDITION||a.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Ko("Error using user provided cache. Falling back to memory cache: "+t),await Wp(s,new uc)}}else oe(Cs,"Using default OfflineComponentProvider"),await Wp(s,new TM(void 0));return s._offlineComponents}async function tA(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(oe(Cs,"Using user provided OnlineComponentProvider"),await bT(s,s._uninitializedComponentsProvider._online)):(oe(Cs,"Using default OnlineComponentProvider"),await bT(s,new cc))),s._onlineComponents}function IM(s){return tA(s).then((e=>e.syncEngine))}async function RM(s){const e=await tA(s),t=e.eventManager;return t.onListen=iM.bind(null,e.syncEngine),t.onUnlisten=aM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=sM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=oM.bind(null,e.syncEngine),t}function CM(s,e,t={}){const r=new wi;return s.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const v=new SM({next:S=>{v.Nu(),c.enqueueAndForget((()=>X4(l,E)));const N=S.docs.has(d);!N&&S.fromCache?g.reject(new pe(se.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&S.fromCache&&p&&p.source==="server"?g.reject(new pe(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),E=new Z4(_d(d.path),v,{includeMetadataChanges:!0,Ka:!0});return Y4(l,E)})(await RM(s),s.asyncQueue,e,t,r))),r.promise}function NM(s,e){const t=new wi;return s.asyncQueue.enqueueAndForget((async()=>lM(await IM(s),e,t))),t.promise}function nA(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const DM="ComponentProvider",ET=new Map;function VM(s,e,t,r,a){return new ZV(s,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,nA(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,r)}const OM="firestore.googleapis.com",TT=!0;class wT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=OM,this.ssl=TT}else this.host=e.host,this.ssl=e.ssl??TT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_S;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<TS)throw new pe(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}EV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nA(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new pe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new pe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new pe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rA{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new hV;switch(r.type){case"firstParty":return new mV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=ET.get(t);r&&(oe(DM,"Removing Datastore"),ET.delete(t),r.terminate())})(this),Promise.resolve()}}class Hy{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Hy(this.firestore,e,this._query)}}class Wt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wt(this.firestore,e,this._key)}toJSON(){return{type:Wt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(bc(t,Wt._jsonSchema))return new Wt(e,r||null,new me(ut.fromString(t.referencePath)))}}Wt._jsonSchemaVersion="firestore/documentReference/1.0",Wt._jsonSchema={type:Ht("string",Wt._jsonSchemaVersion),referencePath:Ht("string")};class hc extends Hy{constructor(e,t,r){super(e,t,_d(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wt(this.firestore,null,new me(e))}withConverter(e){return new hc(this.firestore,e,this._path)}}function ST(s,e,...t){if(s=vr(s),arguments.length===1&&(e=iy.newId()),bV("doc","path",e),s instanceof rA){const r=ut.fromString(e,...t);return dE(r),new Wt(s,null,new me(r))}{if(!(s instanceof Wt||s instanceof hc))throw new pe(se.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(ut.fromString(e,...t));return dE(r),new Wt(s.firestore,s instanceof hc?s.converter:null,new me(r))}}const AT="AsyncQueue";class xT{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new BS(this,"async_queue_retry"),this._c=()=>{const r=If();r&&oe(AT,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=If();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=If();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new wi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ds(e))throw e;oe(AT,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Dt("INTERNAL UNHANDLED ERROR: ",IT(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Py.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&ye(47125,{Pc:IT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function IT(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Gy extends rA{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new xT,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xT(e),this._firestoreClient=void 0,await e}}}function MM(s,e,t){t||(t=qf);const r=Kg(s,"firestore");if(r.isInitialized(t)){const a=r.getImmediate({identifier:t}),l=r.getOptions(t);if(Aa(l,e))return a;throw new pe(se.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new pe(se.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<TS)throw new pe(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&fl(e.host)&&u1(e.host),r.initialize({options:e,instanceIdentifier:t})}function iA(s){if(s._terminated)throw new pe(se.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||kM(s),s._firestoreClient}function kM(s){const e=s._freezeSettings(),t=VM(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new AM(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(s._componentsProvider))}class Jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jn(Vt.fromBase64String(e))}catch(t){throw new pe(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Jn(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bc(e,Jn._jsonSchema))return Jn.fromBase64String(e.bytes)}}Jn._jsonSchemaVersion="firestore/bytes/1.0",Jn._jsonSchema={type:Ht("string",Jn._jsonSchemaVersion),bytes:Ht("string")};class sA{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class aA{constructor(e){this._methodName=e}}class $r{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:$r._jsonSchemaVersion}}static fromJSON(e){if(bc(e,$r._jsonSchema))return new $r(e.latitude,e.longitude)}}$r._jsonSchemaVersion="firestore/geoPoint/1.0",$r._jsonSchema={type:Ht("string",$r._jsonSchemaVersion),latitude:Ht("number"),longitude:Ht("number")};class _r{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:_r._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bc(e,_r._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new _r(e.vectorValues);throw new pe(se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_r._jsonSchemaVersion="firestore/vectorValue/1.0",_r._jsonSchema={type:Ht("string",_r._jsonSchemaVersion),vectorValues:Ht("object")};const PM=/^__.*__$/;class LM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Vs(e,this.data,this.fieldMask,t,this.fieldTransforms):new gl(e,this.data,t,this.fieldTransforms)}}function oA(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye(40011,{dataSource:s})}}class Ky{constructor(e,t,r,a,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Ky({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return nd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(oA(this.dataSource)&&PM.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class zM{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ad(e)}createContext(e,t,r,a=!1){return new Ky({dataSource:e,methodName:t,targetDoc:r,path:Et.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function UM(s){const e=s._freezeSettings(),t=Ad(s._databaseId);return new zM(s._databaseId,!!e.ignoreUndefinedProperties,t)}function jM(s,e,t,r,a,l={}){const c=s.createContext(l.merge||l.mergeFields?2:0,e,t,a);hA("Data must be an object, but it was:",c,r);const d=uA(r,c);let p,g;if(l.merge)p=new Wn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const S=Qy(e,E,t);if(!c.contains(S))throw new pe(se.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);FM(v,S)||v.push(S)}p=new Wn(v),g=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,g=c.fieldTransforms;return new LM(new Tn(d),p,g)}function lA(s,e){if(cA(s=vr(s)))return hA("Unsupported field value:",e,s),uA(s,e);if(s instanceof aA)return(function(r,a){if(!oA(a.dataSource))throw a.createError(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,a){const l=[];let c=0;for(const d of r){let p=lA(d,a.childContextForArray(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(s,e)}return(function(r,a){if((r=vr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return vO(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=rt.fromDate(r);return{timestampValue:sl(a.serializer,l)}}if(r instanceof rt){const l=new rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:sl(a.serializer,l)}}if(r instanceof $r)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Jn)return{bytesValue:tS(a.serializer,r._byteString)};if(r instanceof Wt){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Sy(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof _r)return(function(c,d){const p=c instanceof _r?c.toArray():c;return{mapValue:{fields:{[dy]:{stringValue:my},[Zo]:{arrayValue:{values:p.map((v=>{if(typeof v!="number")throw d.createError("VectorValues must only contain numeric values.");return _y(d.serializer,v)}))}}}}}})(r,a);if(fS(r))return r._toProto(a.serializer);throw a.createError(`Unsupported field value: ${sy(r)}`)})(s,e)}function uA(s,e){const t={};return bw(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pa(s,((r,a)=>{const l=lA(a,e.childContextForField(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function cA(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof rt||s instanceof $r||s instanceof Jn||s instanceof Wt||s instanceof aA||s instanceof _r||fS(s))}function hA(s,e,t){if(!cA(t)||!rw(t)){const r=sy(t);throw r==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+r)}}function Qy(s,e,t){if((e=vr(e))instanceof sA)return e._internalPath;if(typeof e=="string")return qM(s,e);throw nd("Field path arguments must be of type string or ",s,!1,void 0,t)}const BM=new RegExp("[~\\*/\\[\\]]");function qM(s,e,t){if(e.search(BM)>=0)throw nd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new sA(...e.split("."))._internalPath}catch{throw nd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function nd(s,e,t,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${r}`),c&&(p+=` in document ${a}`),p+=")"),new pe(se.INVALID_ARGUMENT,d+s+p)}function FM(s,e){return s.some((t=>t.isEqual(e)))}class HM{convertValue(e,t="none"){switch(xs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ri(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ye(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Pa(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){const t=e.fields?.[Zo].arrayValue?.values?.map((r=>_t(r.doubleValue)));return new _r(t)}convertGeoPoint(e){return new $r(_t(e.latitude),_t(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=pd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ic(e));default:return null}}convertTimestamp(e){const t=Ii(e);return new rt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ut.fromString(e);Ee(hS(r),9688,{name:e});const a=new Ca(r.get(1),r.get(3)),l=new me(r.popFirst(5));return a.isEqual(t)||Dt(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}class GM extends HM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,t)}}const RT="@firebase/firestore",CT="4.11.0";class fA{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new KM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(Qy("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class KM extends fA{data(){return super.data()}}function QM(s,e,t){let r;return r=s?s.toFirestore(e):e,r}class $M{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=WM(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function YM(s){return new $M(s)}class XM{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=cc.provider,this._offlineComponentProvider={build:t=>new eA(t,e?.cacheSizeBytes,this.forceOwnership)}}}class JM{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=cc.provider,this._offlineComponentProvider={build:t=>new wM(t,e?.cacheSizeBytes)}}}function WM(s){return new XM(s?.forceOwnership)}function ZM(){return new JM}class Pu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Sa extends fA{constructor(e,t,r,a,l,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Rf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Qy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Sa._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Sa._jsonSchemaVersion="firestore/documentSnapshot/1.0",Sa._jsonSchema={type:Ht("string",Sa._jsonSchemaVersion),bundleSource:Ht("string","DocumentSnapshot"),bundleName:Ht("string"),bundle:Ht("string")};class Rf extends Sa{data(e={}){return super.data(e)}}class Yu{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Pu(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Rf(this._firestore,this._userDataWriter,r.key,r,new Pu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const p=new Rf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Pu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new Rf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Pu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,v=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:ek(d.type),doc:p,oldIndex:g,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Yu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=iy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ek(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye(61501,{type:s})}}Yu._jsonSchemaVersion="firestore/querySnapshot/1.0",Yu._jsonSchema={type:Ht("string",Yu._jsonSchemaVersion),bundleSource:Ht("string","QuerySnapshot"),bundleName:Ht("string"),bundle:Ht("string")};function tk(s){s=Lf(s,Wt);const e=Lf(s.firestore,Gy),t=iA(e);return CM(t,s._key).then((r=>ik(e,s,r)))}function nk(s,e,t){s=Lf(s,Wt);const r=Lf(s.firestore,Gy),a=QM(s.converter,e),l=UM(r);return rk(r,[jM(l,"setDoc",s._key,a,s.converter!==null,t).toMutation(s._key,kn.none())])}function rk(s,e){const t=iA(s);return NM(t,e)}function ik(s,e,t){const r=t.docs.get(e._key),a=new GM(s);return new Sa(s,a,e._key,r,new Pu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){uV(dl),Ho(new xa("firestore",((r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new Gy(new fV(r.getProvider("auth-internal")),new pV(c,r.getProvider("app-check-internal")),eO(c,a),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),ws(RT,CT,e),ws(RT,CT,"esm2020")})();const sk={apiKey:"AIzaSyBZncs5t7a9dDcSFBWDI2q3SDlf2E5j8V0",authDomain:"permis-online-sync.firebaseapp.com",projectId:"permis-online-sync",storageBucket:"permis-online-sync.firebasestorage.app",messagingSenderId:"653028638132",appId:"1:653028638132:web:028b727230365733a846e1"},dA=g1(sk),bs=oV(dA),NT=MM(dA,{localCache:YM({tabManager:ZM()})}),mA=new Hr;mA.addScope("repo");const ak=()=>gD(bs,mA),ok=()=>XN(bs),lk=({progress:s,themesData:e,onBack:t,onReset:r,instantFeedback:a,onToggleInstantFeedback:l,autoPlayAudio:c,onToggleAutoPlayAudio:d})=>{const p=ka(),[g,v]=U.useState(!1),[E,S]=U.useState(!1),N=te=>{const ge=te.bestScore!==void 0?te.bestScore:te.score||0,Ae=te.totalQuestions!==void 0?te.totalQuestions:te.total||0;return{score:ge,total:Ae}},Q=Object.entries(s).filter(([te])=>te!=="metadata").map(([,te])=>te),q=Q.length,L=Q.reduce((te,ge)=>{const{score:Ae,total:V}=N(ge);return{bestScore:te.bestScore+Ae,totalQuestions:te.totalQuestions+V}},{bestScore:0,totalQuestions:0}),re=L.bestScore,J=L.totalQuestions,ee=J>0?Math.round(re/J*100):0,le=J-re,ce=(e.sections||[]).flatMap(te=>te.items||te.themes||[]).filter(te=>te&&te.id&&te.id!=="metadata"&&s[te.id]),ue=g?ce.filter(te=>{const{score:ge,total:Ae}=N(s[te.id]);return ge<Ae}):ce,[w,A]=U.useState(()=>localStorage.getItem("groq_api_key")||""),[R,M]=U.useState(bs.currentUser),[O,k]=U.useState(!1);U.useEffect(()=>{const te=bs.onAuthStateChanged(ge=>{M(ge)});return()=>te()},[]);const C=async()=>{try{S(!0);const te=await ak(),Ae=Hr.credentialFromResult(te).accessToken;Ae&&localStorage.setItem("github_token",Ae)}catch(te){console.error("Login failed:",te),alert("Erreur de connexion : "+te.message)}finally{S(!1)}},Ie=async()=>{try{await ok(),localStorage.removeItem("github_token")}catch(te){console.error("Logout failed:",te)}},Le=()=>{w?localStorage.setItem("groq_api_key",w):localStorage.removeItem("groq_api_key"),alert("Cl IA sauvegarde !")},j=async te=>{S(!0);try{let ge=[];try{ge=(await ng(te.file)).questions||[]}catch{ge=(await(await fetch(`data/${te.file}`)).json()).questions||[]}if(ge.length===0){alert("Impossible de charger les questions pour la rvision.");return}const V=s[te.id].answers||[],H=[];if(V.length>0&&V.forEach(W=>{if(W&&W.isCorrect===!1){const de=ge.find(Te=>Te.id==W.questionId);de&&H.push({...de,originalThemeId:te.id,sourceFile:te.file})}}),H.length===0){alert("Erreur: Impossible de retrouver les questions.");return}p("/quiz/review",{state:{questions:H,title:`Rvision: ${te.name}`,isReview:!0}})}catch(ge){console.error("Erreur rvision:",ge),alert("Erreur lors du chargement de la rvision.")}finally{S(!1)}},ae=async()=>{S(!0);try{const te=[],ge=ce.filter(V=>{const{score:H,total:W}=N(s[V.id]);return H<W});if(ge.length===0){alert("Aucune faute  rviser !"),S(!1);return}for(const V of ge){let H=[];try{H=(await ng(V.file)).questions||[]}catch{H=(await(await fetch(`data/${V.file}`)).json()).questions||[]}const de=s[V.id].answers||[];de.length>0&&de.forEach(Te=>{if(Te&&Te.isCorrect===!1){const Re=H.find(ke=>ke.id==Te.questionId);Re&&te.push({q:Re,a:Te,idx:te.length,themeId:V.id,sourceFile:V.file})}})}if(te.length===0){alert("Aucune erreur trouve dans les sauvegardes.");return}const Ae=te.map(V=>({...V.q,originalThemeId:V.themeId,sourceFile:V.sourceFile}));p("/quiz/review",{state:{questions:Ae,title:"Rvision des fautes (Global)",isReview:!0}})}catch(te){console.error(te),alert("Erreur lors de la prparation de la rvision globale.")}finally{S(!1)}};return E?x.jsx("div",{className:"page container flex items-center justify-center h-screen",children:"Chargement de la rvision..."}):x.jsxs("div",{className:"page container animate-fade-in",style:{maxWidth:"1200px"},children:[x.jsx("div",{className:"mb-6",children:x.jsxs("button",{onClick:t,className:"btn-ghost flex items-center gap-2",children:[x.jsx(sd,{size:20})," Retour"]})}),x.jsxs("div",{className:"profile-stats-grid",children:[x.jsxs("div",{className:"stat-card",children:[x.jsx("div",{className:"stat-icon primary",children:x.jsx(tg,{size:24})}),x.jsxs("div",{className:"stat-content",children:[x.jsx("div",{className:"stat-label",children:"Moyenne Globale"}),x.jsxs("div",{className:"stat-value",children:[ee,"%"]})]})]}),x.jsxs("div",{className:"stat-card",children:[x.jsx("div",{className:"stat-icon info",children:x.jsx(Du,{size:24})}),x.jsxs("div",{className:"stat-content",children:[x.jsx("div",{className:"stat-label",children:"Quiz Termins"}),x.jsx("div",{className:"stat-value",children:q})]})]}),x.jsxs("div",{className:"stat-card relative overflow-hidden",children:[x.jsx("div",{className:"stat-icon danger",children:x.jsx(d2,{size:24})}),x.jsxs("div",{className:"stat-content z-10 relative w-full",children:[x.jsx("div",{className:"stat-label",children:"Fautes  revoir"}),x.jsx("div",{className:"stat-value",children:le}),x.jsxs("div",{className:"flex flex-row items-center justify-between w-full mt-1",children:[x.jsxs("div",{className:"stat-sub",children:[le," erreurs au total"]}),le>0&&x.jsxs("button",{onClick:ae,className:"btn-primary btn-sm flex items-center gap-1 px-3 py-2",children:[x.jsx(kp,{size:16})," Rviser"]})]})]})]})]}),x.jsxs("div",{className:"profile-content-grid",children:[x.jsxs("div",{className:"card p-6 bg-surface-1 border border-border",children:[x.jsxs("div",{className:"flex items-center justify-between mb-6",children:[x.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[x.jsx(qR,{size:20})," Historique"]}),x.jsxs("button",{onClick:()=>v(!g),className:`btn-sm flex items-center gap-2 ${g?"btn-danger":"btn-ghost"}`,children:[x.jsx(HR,{size:16})," ",g?"Tout voir":"Voir les fautes"]})]}),x.jsx("div",{className:"theme-history-list",children:ue.length===0?x.jsx("div",{className:"text-center text-muted py-8",children:g?"Aucune faute trouve ! Bravo ! ":"Aucun historique disponible. Commencez un quiz !"}):ue.map(te=>{const ge=s[te.id],{score:Ae,total:V}=N(ge),H=V>0?Math.round(Ae/V*100):0;let W;return H===100?W="text-success":H>=50?W="text-warning":W="text-danger",x.jsxs("div",{className:"theme-history-item flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("div",{className:"font-medium",children:te.name}),x.jsxs("div",{className:`font-mono font-bold ${W}`,children:[Ae," / ",V," (",H,"%)"]})]}),Ae<V&&x.jsxs("button",{onClick:()=>j(te),className:"btn-ghost text-primary btn-sm flex items-center gap-1 hover:bg-primary/10",children:[x.jsx(kp,{size:14})," Rviser"]})]},te.id)})}),Object.keys(s).length>0&&x.jsx("div",{className:"mt-8 pt-6 border-t border-border",children:O?x.jsxs("div",{className:"p-4 border border-danger rounded bg-danger/10 animate-fade-in",children:[x.jsx("p",{className:"text-center mb-3 text-danger font-medium",children:"tes-vous sr ?"}),x.jsxs("div",{className:"flex gap-3",children:[x.jsx("button",{onClick:()=>k(!1),className:"btn-ghost flex-1 text-sm",children:"Annuler"}),x.jsx("button",{onClick:()=>{r(),k(!1)},className:"btn-primary bg-danger border-danger hover:bg-danger/90 flex-1 text-white text-sm",children:"Confirmer"})]})]}):x.jsxs("button",{onClick:()=>k(!0),className:"btn-ghost text-danger w-full flex items-center justify-center gap-2",children:[x.jsx(Vb,{size:16})," Rinitialiser la progression"]})})]}),x.jsxs("div",{className:"settings-list",children:[x.jsxs("div",{className:"card p-6 bg-surface-1 border border-border",children:[x.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[x.jsx(a2,{size:20})," Prfrences"]}),x.jsxs("div",{className:"flex items-center justify-between mb-6",children:[x.jsxs("div",{children:[x.jsx("div",{className:"font-semibold",children:"Correction Instantane"}),x.jsx("div",{className:"text-sm text-muted",children:"Voir la rponse juste aprs le clic."})]}),x.jsxs("label",{className:"switch",children:[x.jsx("input",{type:"checkbox",checked:a,onChange:l}),x.jsx("span",{className:"slider round"})]})]}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("div",{className:"font-semibold",children:"Lecture Audio Auto"}),x.jsx("div",{className:"text-sm text-muted",children:"Lire la question automatiquement."})]}),x.jsxs("label",{className:"switch",children:[x.jsx("input",{type:"checkbox",checked:c,onChange:d}),x.jsx("span",{className:"slider round"})]})]})]}),x.jsxs("div",{className:"card p-6 border-2 border-primary/20 bg-surface-1",children:[x.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2 text-primary",children:[x.jsx($R,{size:20})," Mode Contributeur"]}),x.jsxs("div",{className:"mb-5",children:[x.jsx("label",{className:"block mb-1.5 font-semibold text-sm",children:"Groq API Key"}),x.jsxs("p",{className:"text-xs text-muted mb-2",children:["Requise pour corrections IA (Llama 3). ",x.jsx("a",{href:"https://console.groq.com/keys",target:"_blank",rel:"noreferrer",className:"text-primary underline",children:"Obtenir une cl"})]}),x.jsx("input",{type:"password",className:"input w-full",value:w,onChange:te=>A(te.target.value),placeholder:"gsk_..."})]}),x.jsxs("div",{className:"mb-6",children:[x.jsxs("label",{className:"block mb-1.5 font-semibold text-sm flex items-center gap-2",children:[x.jsx(kp,{size:16})," Synchronisation Cloud"]}),x.jsx("p",{className:"text-xs text-muted mb-4",children:"Sauvegardez votre progression automatiquement dans le cloud pour la retrouver sur tous vos appareils."}),R?x.jsx("div",{className:"space-y-3",children:x.jsxs("div",{className:"flex items-center justify-between p-3 bg-success/10 rounded-lg text-success text-sm border border-success/20",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[R.photoURL?x.jsx("img",{src:R.photoURL,alt:"",style:{width:"32px",height:"32px",borderRadius:"50%"}}):x.jsx(e1,{size:24}),x.jsxs("div",{className:"flex flex-col",children:[x.jsx("span",{className:"font-bold",children:R.displayName||R.email}),x.jsx("span",{className:"text-[10px] opacity-70",children:"Connect via Firebase"})]})]}),x.jsx("button",{onClick:Ie,className:"p-1 hover:bg-danger/20 rounded-full text-danger transition-colors",title:"Se dconnecter",children:x.jsx(Vb,{size:18})})]})}):x.jsxs("button",{onClick:C,className:"btn-secondary w-full flex items-center justify-center gap-2 py-3 border-2 border-primary/20 hover:border-primary/50 transition-all",children:[x.jsx(KR,{size:20})," Se connecter avec GitHub"]})]}),x.jsxs("button",{onClick:Le,className:"btn-primary w-full flex items-center justify-center gap-2",children:[x.jsx(n2,{size:18})," Enregistrer les cls"]})]})]})]}),x.jsx("div",{className:"h-10"})]})},uk=({progress:s,themesData:e,onReset:t,instantFeedback:r,onToggleInstantFeedback:a,autoPlayAudio:l,onToggleAutoPlayAudio:c,toggleTheme:d,isDarkMode:p})=>{const g=ka();return x.jsxs(x.Fragment,{children:[x.jsx(Fg,{showProfileButton:!1,toggleTheme:d,isDarkMode:p}),x.jsx(lk,{progress:s,themesData:e,onBack:()=>g("/"),onReset:t,instantFeedback:r,onToggleInstantFeedback:a,autoPlayAudio:l,onToggleAutoPlayAudio:c})]})},ck='.quiz-next-row{display:grid;grid-template-columns:1fr 1.2fr;gap:18px;margin-top:18px}@media(max-width:880px){.quiz-next-row{grid-template-columns:1fr}}*,*:before,*:after{box-sizing:border-box}html:focus-within{scroll-behavior:smooth}body,#root{height:100%;overflow-x:hidden}body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,Arial,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,sans-serif;line-height:1.5;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}img,picture,video,canvas,svg{display:block;max-width:100%}input,button,textarea,select{font:inherit}:root{--bg: #0b1020;--bg-elev: #121832;--surface: #151b3a;--surface-2: #1a2248;--text: #e6e9f5;--muted: #aab0c0;--primary: #0ea5e9;--primary-700: #0284c7;--success: #22c55e;--warning: #f59e0b;--danger: #ef4444;--border: #273056;--radius: 12px;--space-1: 6px;--space-2: 10px;--space-3: 14px;--space-4: 18px;--space-5: 24px;--space-6: 32px}[data-theme=light]{--bg: #f7f8fb;--bg-elev: #ffffff;--surface: #ffffff;--surface-2: #f2f4f8;--text: #0f172a;--muted: #475569;--border: #e2e8f0}@media(prefers-color-scheme:light){:root:not([data-theme]){color-scheme:light}}@media(prefers-color-scheme:dark){:root:not([data-theme]){color-scheme:dark}}body{color:var(--text);background:var(--bg);background-attachment:fixed;transition:background-color .3s ease,color .3s ease}#root{display:grid;grid-template-rows:auto 1fr}.container{width:min(1250px,calc(100% - 32px));margin-inline:auto;padding:var(--space-5) 0 var(--space-6)}@media(max-width:600px){.container{padding:var(--space-3) 0 var(--space-4);width:min(1250px,calc(100% - 16px))}}h1,h2,h3{margin:0 0 var(--space-3);letter-spacing:-.01em}h1{font-size:clamp(26px,2.4vw,36px);font-weight:700}h2{font-size:clamp(20px,2vw,28px);font-weight:600}p{margin:0 0 var(--space-3);color:var(--muted)}.card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)}button{--bpad-x: 14px;--bpad-y: 10px;appearance:none;border:1px solid var(--border);background:var(--surface);color:var(--text);padding:var(--bpad-y) var(--bpad-x);border-radius:8px;cursor:pointer;transition:background .15s ease,border-color .15s ease}button:hover{background:var(--bg-elev);border-color:var(--muted)}button:active{background:var(--surface-2)}.btn-primary{background:var(--primary);border-color:var(--primary);color:#fff}.btn-primary:hover{background:var(--primary-700);border-color:var(--primary-700)}.btn-ghost{background:transparent;border-color:transparent;color:var(--muted)}.btn-ghost:hover{color:var(--text);background:var(--surface-2)}.btn-danger{border-color:var(--danger);color:#fff;background:var(--danger)}.btn-danger:hover{background:color-mix(in oklab,var(--danger) 80%,black)}.input,input[type=text],input[type=search]{width:100%;padding:12px 14px;border-radius:8px;border:1px solid var(--border);background:var(--bg-elev);color:var(--text);outline:none}.input::placeholder,input::placeholder{color:var(--muted)}input:focus{border-color:var(--primary)}input[type=checkbox]{accent-color:var(--primary)}.page{padding-top:var(--space-6)}.page .page-title{margin-bottom:var(--space-2)}.search{margin:var(--space-3) 0 var(--space-4)}.search .input{max-width:520px}.actions{display:flex;gap:10px;align-items:center;margin-bottom:var(--space-3)}.theme-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px}.theme-btn{width:100%;display:flex;flex-direction:column;align-items:flex-start;padding:14px 16px;text-align:left;gap:4px}.theme-btn .theme-name{font-weight:600}.theme-btn .theme-meta{color:var(--muted);font-size:13px}.quiz{width:min(1250px,calc(100% - 32px));margin:24px auto}@media(max-width:600px){.quiz{width:min(1250px,calc(100% - 16px));margin:16px auto}}.quiz-topbar{display:flex;align-items:center;gap:12px;margin-bottom:var(--space-3)}.quiz-topbar .exit-btn{padding-left:10px;padding-right:10px}.toggle{display:inline-flex;align-items:center;gap:8px;padding:8px 10px;border-radius:8px;color:var(--muted);border:1px solid transparent}.toggle:hover{border-color:var(--border);background:var(--surface);color:var(--text)}.toggle span{font-size:14px}.question-card{padding:var(--space-5);display:flex;flex-direction:column}@media(max-width:600px){.question-card{padding:var(--space-3)}}.question-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:var(--space-3);order:1}.question-title{font-weight:700;color:var(--text)}.question-progress{color:var(--muted);font-weight:600}.question-main{display:grid;grid-template-columns:1fr 1.5fr;gap:18px;order:2}@media(max-width:880px){.question-main{grid-template-columns:1fr;order:3}}.question-image{border-radius:var(--radius);overflow:hidden;border:1px solid var(--border);background:var(--surface);min-height:180px;display:grid;place-items:center}@media(max-width:600px){.question-image{min-height:140px}}.question-image img{width:100%;height:100%;object-fit:cover;transform:scale(1.08)}.question-image.placeholder{background:var(--surface-2)}.question-text{margin-bottom:var(--space-3);padding:0}.question-text-inner{font-size:1.35rem;font-weight:700;line-height:1.4}@media(max-width:600px){.question-text-inner{font-size:1.1rem}}.answers{display:grid;gap:10px}.answer-btn{display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:16px;text-align:left;padding:12px 16px;border-radius:12px;background:var(--surface);border:2px solid var(--border);color:var(--text);transition:all .2s ease}@media(max-width:600px){.answer-btn{padding:10px 14px;gap:12px;border-radius:10px}}.answer-btn:hover{background:var(--bg-elev);border-color:var(--muted)}.answer-key{display:grid;place-items:center;width:32px;height:32px;border-radius:8px;background:var(--surface-2);color:var(--muted);font-weight:700;font-size:16px;transition:all .2s ease}.answer-text{font-size:1.05rem;font-weight:500}.answer-check{color:var(--success)}@keyframes pop{0%{transform:scale(1)}50%{transform:scale(1.02)}to{transform:scale(1)}}.answer-btn:active{transform:scale(.97)}.answer-btn.correct,.answer-btn.correct.selected{border-color:var(--success);background:#22c55e26;animation:pop .2s cubic-bezier(.175,.885,.32,1.275)}.answer-btn.correct .answer-key,.answer-btn.correct.selected .answer-key{background:var(--success);color:#fff}.answer-btn.correct .answer-text{color:var(--success);font-weight:600}.answer-btn.incorrect{border-color:var(--danger);background:#ef444426;animation:pop .2s cubic-bezier(.175,.885,.32,1.275)}.answer-btn.incorrect .answer-key{background:var(--danger);color:#fff}.answer-btn.selected{border-color:var(--primary);background:#0ea5e926;animation:pop .2s cubic-bezier(.175,.885,.32,1.275)}.answer-btn.selected .answer-key{background:var(--primary);color:#fff}.answer-btn.selected{border-color:var(--primary);background:color-mix(in oklab,var(--primary) 10%,var(--surface))}.answer-btn.dimmed{opacity:.5}.number-wrap{display:grid;gap:8px}.number-field{display:flex;gap:8px;align-items:center}.number-input{flex:1}.number-submit{min-width:64px}.number-field.selected .number-input{border-color:var(--primary)}.number-field.correct .number-input{border-color:var(--success);background:color-mix(in oklab,var(--success) 10%,var(--bg-elev))}.number-field.incorrect .number-input{border-color:var(--danger);background:color-mix(in oklab,var(--danger) 10%,var(--bg-elev))}.number-feedback{color:var(--muted);font-size:14px}.dots-bar{display:grid;place-items:center;margin-top:var(--space-3);color:var(--muted)}.dots{letter-spacing:6px}.explanation{margin-top:var(--space-4);background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:var(--space-4)}.explanation-title{font-weight:600;margin-bottom:6px}.explanation-text{color:var(--muted)}.results{width:min(900px,calc(100% - 32px));margin:24px auto}.results .results-actions{display:flex;gap:10px;margin:12px 0 var(--space-3)}.review .review-item{padding:12px 0}.review hr{border:none;height:1px;background:var(--border);margin:12px 0}.mt-1{margin-top:var(--space-1)}.mt-2{margin-top:var(--space-2)}.mt-3{margin-top:var(--space-3)}.mt-4{margin-top:var(--space-4)}.mt-5{margin-top:var(--space-5)}.muted{color:var(--muted)}.countdown{margin-top:var(--space-3)}.countdown-track{position:relative;height:6px;border-radius:999px;background:var(--surface-2);overflow:hidden}.countdown-fill{position:absolute;inset:0 auto 0 0;width:100%;background:var(--primary);transition:width .1s linear}.question-card.timed-out .answers .answer-btn{opacity:.5;filter:grayscale(1)}.question-card.timed-out .answers .answer-btn:hover{background:var(--surface);border-color:var(--border)}.question-card.timed-out .number-field{opacity:.6}::-webkit-scrollbar{width:10px;height:10px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:var(--border);border-radius:5px;border:2px solid var(--bg)}::-webkit-scrollbar-thumb:hover{background:var(--muted)}@keyframes fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in{animation:fadeIn .3s ease-out forwards}.quiz-nav-buttons{display:flex;justify-content:flex-end;gap:16px;align-items:center;margin-top:20px;order:3}@media(max-width:880px){.quiz-nav-buttons{justify-content:space-between;flex-wrap:wrap;order:2;margin-top:0;margin-bottom:20px}}@media(max-width:600px){.quiz-nav-buttons{margin-top:12px;gap:10px}}.btn-explanation{display:flex;align-items:center;gap:8px;padding:10px 20px;border-radius:8px;font-size:1rem;font-weight:500;cursor:pointer;background:var(--surface-2);color:var(--primary);border:1px solid var(--border)}.btn-explanation:hover{background:var(--bg-elev);border-color:var(--primary)}.btn-next{padding:10px 24px;font-size:1rem;font-weight:600;background:var(--surface);color:var(--text);border:1px solid var(--border)}.btn-next:hover{background:var(--bg-elev);border-color:var(--muted)}.profile-stats-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;grid-auto-flow:dense;margin-bottom:40px}@media(max-width:768px){.profile-stats-grid{grid-template-columns:1fr}}.stat-card{background:var(--surface-2);border-radius:var(--radius);padding:24px;display:flex;align-items:center;gap:20px}.stat-icon{width:56px;height:56px;border-radius:16px;display:grid;place-items:center;flex-shrink:0}.stat-icon.primary{background:#0ea5e926;color:var(--primary)}.stat-icon.info{background:#3b82f626;color:#60a5fa}.stat-icon.danger{background:#ef444426;color:var(--danger)}.stat-content{flex:1}.stat-label{font-size:.9rem;color:var(--muted);margin-bottom:4px;font-weight:500}.stat-value{font-size:2.2rem;font-weight:700;line-height:1;color:var(--text)}.stat-sub{font-size:.85rem;color:var(--muted);margin-top:4px}.profile-content-grid{display:grid;grid-template-columns:1fr 380px;gap:40px;align-items:start}@media(max-width:1024px){.profile-content-grid{grid-template-columns:1fr}}.theme-history-list{display:flex;flex-direction:column;gap:12px}.theme-history-item{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;background:var(--surface-2);border-radius:var(--radius);transition:transform .2s ease}.theme-history-item:hover{transform:translate(4px);background:var(--bg-elev)}.settings-list{display:flex;flex-direction:column;gap:24px}.switch{position:relative;display:inline-block;width:44px;height:24px}.switch input{opacity:0;width:0;height:0}.slider{position:absolute;cursor:pointer;inset:0;background-color:var(--surface-2);border:1px solid var(--border);transition:.4s;border-radius:34px}.slider:before{position:absolute;content:"";height:18px;width:18px;left:2px;bottom:2px;background-color:var(--muted);transition:.4s;border-radius:50%}input:checked+.slider{background-color:var(--primary);border-color:var(--primary)}input:checked+.slider:before{transform:translate(20px);background-color:#fff}.flex{display:flex}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-between{justify-content:space-between}.justify-center{justify-content:center}.gap-2{gap:8px}.gap-3{gap:12px}.gap-4{gap:16px}.gap-6{gap:24px}.gap-8{gap:32px}.p-4{padding:16px}.p-5{padding:20px}.p-6{padding:24px}.p-8{padding:32px}.pt-6{padding-top:24px}.m-0{margin:0}.mb-1{margin-bottom:4px}.mb-2{margin-bottom:8px}.mb-3{margin-bottom:12px}.mb-4{margin-bottom:16px}.mb-5{margin-bottom:20px}.mb-6{margin-bottom:24px}.mt-8{margin-top:32px}.ml-2{margin-left:8px}.w-full{width:100%}.h-10{height:40px}.text-center{text-align:center}.text-sm{font-size:.875rem}.text-xs{font-size:.75rem}.text-xl{font-size:1.25rem}.text-2xl{font-size:1.5rem}.text-3xl{font-size:1.875rem}.font-bold{font-weight:700}.font-semibold{font-weight:600}.font-medium{font-weight:500}.border-none{border:none}.border-t{border-top:1px solid var(--border)}.text-primary{color:var(--primary)}.text-danger{color:var(--danger)}.text-success{color:var(--success)}.text-warning{color:var(--warning)}.text-muted{color:var(--muted)}.text-white{color:#fff}.underline{text-decoration:underline}.block{display:block}.toast-notification{position:fixed;top:24px;left:50%;transform:translate(-50%);background:var(--surface-1);border:1px solid var(--border);border-left:4px solid var(--success);padding:16px 20px;border-radius:8px;box-shadow:0 4px 12px #00000026;display:flex;align-items:center;gap:12px;z-index:9999;animation:slideDown .3s ease-out forwards;max-width:90%;width:max-content}.toast-notification a{color:var(--primary);text-decoration:underline;font-weight:500}@keyframes slideDown{0%{transform:translate(-50%,-100%);opacity:0}to{transform:translate(-50%);opacity:1}}.correction-toolbar{position:absolute;top:16px;right:16px;z-index:50;display:flex;align-items:center;gap:8px;animation:fadeIn .3s ease-out}.correction-badge{padding:6px 12px;border-radius:9999px;background:color-mix(in sRGB,var(--warning) 10%,transparent);border:1px solid color-mix(in sRGB,var(--warning) 20%,transparent);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);display:flex;align-items:center;gap:8px;box-shadow:0 4px 6px -1px #0000001a}.correction-badge span{font-size:10px;font-weight:700;color:var(--warning);text-transform:uppercase;letter-spacing:.1em}.correction-badge-dot{width:6px;height:6px;border-radius:50%;background-color:var(--warning);animation:pulse 2s cubic-bezier(.4,0,.6,1) infinite}@keyframes pulse{0%,to{opacity:1}50%{opacity:.5}}.correction-actions{display:flex;align-items:center;gap:4px;padding:4px;border-radius:9999px;background:#18181be6;border:1px solid rgba(255,255,255,.1);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);box-shadow:0 10px 15px -3px #0000001a}.btn-cancel{padding:6px 12px;border-radius:9999px;font-size:12px;font-weight:500;color:#a1a1aa;background:transparent;border:none;transition:all .2s;cursor:pointer}.btn-cancel:hover{color:#fff;background:#ffffff1a}.btn-save{padding:6px 12px;border-radius:9999px;font-size:12px;font-weight:700;color:#000;background:var(--warning);border:none;transition:all .2s;cursor:pointer}.btn-save:hover{filter:brightness(1.1);box-shadow:0 0 15px color-mix(in sRGB,var(--warning),transparent 60%)}.btn-save:disabled{opacity:.5;cursor:not-allowed}.correction-floating-bar{position:absolute;bottom:16px;left:0;right:0;margin:0 auto;width:fit-content;max-width:90%;z-index:40;animation:slideUp .5s ease-out}@keyframes slideUp{0%{transform:translateY(10px);opacity:0}to{transform:translateY(0);opacity:1}}.correction-input-wrapper{position:relative;background:#18181be6;border:1px solid rgba(255,255,255,.1);border-radius:12px;backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);box-shadow:0 20px 25px -5px #0000001a;display:flex;flex-direction:column}.correction-explanation-input{width:400px;max-width:100%;background:transparent;border:none;color:#ffffffe6;font-size:12px;padding:12px;outline:none;resize:none;border-radius:12px;transition:all .2s;min-height:44px;font-family:inherit}.correction-explanation-input:focus{box-shadow:0 0 0 1px color-mix(in sRGB,var(--warning) 20%,transparent)}.correction-question-input{width:100%;background:transparent;border:none;outline:none;padding:0;color:#fff;font-weight:500;font-size:1.35rem;line-height:1.4;resize:none;overflow:hidden;text-shadow:0 0 20px rgba(0,0,0,.5);font-family:inherit}.correction-question-container{position:relative}.correction-underline{height:2px;width:0;background:linear-gradient(90deg,transparent,var(--warning),transparent);margin:4px auto 0;transition:width .5s ease}.correction-question-container:hover .correction-underline{width:100%}.correction-answer-wrapper{flex:1;margin-left:4px;position:relative;display:flex;flex-direction:column}.correction-answer-input{width:100%;background:transparent;border:none;outline:none;color:#ffffffe6;font-weight:500;padding:4px 0;font-size:1.05rem;font-family:inherit}.correction-answer-input::placeholder{color:#fff3}.correction-answer-underline{height:1px;width:0;background:linear-gradient(90deg,transparent,var(--warning),transparent);transition:width .5s ease}.correction-answer-wrapper:hover .correction-answer-underline{width:100%}.correction-error-msg{position:absolute;top:-30px;left:0;right:0;text-align:center;color:var(--danger);font-size:10px;background:color-mix(in sRGB,var(--danger) 10%,transparent);border:1px solid color-mix(in sRGB,var(--danger) 20%,transparent);padding:2px 8px;border-radius:99px;width:fit-content;margin:0 auto;backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);display:flex;align-items:center;gap:4px}',hk=({lessonFile:s,quizId:e,onBack:t,onStartQuiz:r,theme:a})=>{const[l,c]=Lu.useState(""),[d,p]=Lu.useState(!0);return Lu.useEffect(()=>{const g=async()=>{p(!0);try{const N=await(await fetch(`/permis-online-free/lecon/${s}`)).text(),q=new DOMParser().parseFromString(N,"text/html");q.documentElement.setAttribute("data-theme",a);const L=q.createElement("style");L.textContent=ck+`
                    /* Ensure text color is inherited everywhere */
                    body, p, h1, h2, h3, h4, h5, h6, li, td, span, div {
                        color: inherit;
                    }
                    /* Custom classes from lessons */
                    .box-yellow {
                        background-color: color-mix(in oklab, var(--warning) 10%, transparent);
                        border: 1px solid var(--warning);
                        padding: 15px;
                        border-radius: 8px;
                        margin: 15px 0;
                    }
                    .red, .text-red {
                        color: var(--danger) !important;
                    }
                    .subtitle {
                        color: var(--primary);
                        font-weight: 600;
                        margin-bottom: 5px;
                    }

                    .lesson-video {
                        width: 100%;
                        aspect-ratio: 16 / 9;
                        height: auto;
                        border-radius: 8px;
                        display: block;
                        margin: 20px 0;
                        border: none;
                    }

                    /* Scrollbar styling */
                    ::-webkit-scrollbar {
                        width: 10px;
                        height: 10px;
                    }
                    ::-webkit-scrollbar-track {
                        background: transparent;
                    }
                    ::-webkit-scrollbar-thumb {
                        background: var(--border);
                        border-radius: 5px;
                        border: 2px solid var(--bg);
                    }
                    ::-webkit-scrollbar-thumb:hover {
                        background: var(--muted);
                    }

                    img {
                        max-width: 100%;
                        height: auto;
                        display: inline-block;
                        border-radius: 8px;
                        margin-right: 4px;
                        vertical-align: middle;
                    }
                    /* Use specific styling for the layout tables */
                    .lesson-detail-table {
                        width: 100%;
                        border-collapse: separate;
                        border-spacing: 0 10px;
                    }
                    .lesson-detail-table td {
                        vertical-align: top;
                        padding: 10px;
                        background: color-mix(in oklab, var(--surface) 50%, transparent);
                        border-radius: 8px;
                    }
                    /* Force the image column (first column) to a fixed width container */
                    .lesson-detail-table td:first-child {
                        width: 280px;
                        min-width: 280px;
                        vertical-align: top;
                    }
                    /* Use flexbox on P tags to handle multiple images side-by-side in the first column */
                    .lesson-detail-table td:first-child p {
                        display: flex;
                        flex-wrap: wrap;
                        justify-content: center;
                        gap: 8px;
                        margin: 0 0 8px 0;
                    }
                    /* Images are flex items in first col, but inline-block elsewhere */
                    .lesson-detail-table img {
                        flex: 1 1 120px; 
                        max-width: 100%;
                        width: auto;
                        height: auto;
                        max-height: 180px; 
                        object-fit: contain;
                        background-color: transparent;
                        display: inline-block;
                        margin-right: 4px;
                    }
                    /* Clean up paragraphs with no images if needed, or links */
                    .lesson-detail-table td:first-child a {
                        display: contents; 
                    }
                    /* Sign tables (usually 3 columns) should not be forced */
                    .lesson-signs-3-columns td {
                        text-align: center;
                        padding: 10px;
                    }
                    .lesson-signs-3-columns img {
                        max-height: 150px;
                        width: auto;
                        margin: 0 auto;
                    }
                    
                    /* Body styling */
                    body {
                        max-width: 1100px;
                        margin: 0 auto;
                        padding: 20px;
                        background-color: var(--bg);
                        color: var(--text);
                        overflow-y: auto; /* Allow scrolling inside iframe body */
                    }

                    /* Mobile Responsive for Lesson Content */
                    @media (max-width: 600px) {
                        body {
                            padding: 12px;
                        }
                        .lesson-detail-table, .lesson-detail-table tbody, .lesson-detail-table tr, .lesson-detail-table td {
                            display: block;
                            width: 100% !important;
                            min-width: 0 !important;
                            box-sizing: border-box;
                        }
                        .lesson-detail-table td:first-child {
                            width: 100%;
                            min-width: 0;
                            margin-bottom: 15px;
                            border-bottom: 1px solid var(--border);
                            padding-bottom: 15px;
                        }
                        .lesson-detail-table img {
                            max-height: 200px;
                            width: auto;
                            margin: 0 auto;
                            display: block;
                        }
                        .lesson-detail-table td:first-child p {
                            justify-content: center;
                        }
                    }
                `,q.head.appendChild(L);const re=q.body.getElementsByTagName("img");for(let w of re){const A=w.getAttribute("src");A&&A.startsWith("uploads/")&&(w.src=`https://www.permisdeconduire-online.be/${A}`)}const J=q.body.getElementsByTagName("iframe");for(let w of J)w.setAttribute("allowfullscreen","true"),w.setAttribute("mozallowfullscreen","true"),w.setAttribute("webkitallowfullscreen","true"),w.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"),w.classList.contains("lesson-video")||w.classList.add("lesson-video");const le=Array.from(q.body.getElementsByTagName("h2")).find(w=>w.textContent.trim()==="Exercices"||w.textContent.trim()==="Les examens");if(le){const w=le.previousElementSibling;w&&w.tagName==="HR"&&w.remove();let A=le;for(;A;){const R=A.nextElementSibling;A.remove(),A=R}}const ue=Array.from(q.body.getElementsByTagName("a")).find(w=>w.textContent.includes("Retour  la page prcdente"));if(ue&&(ue.closest("div.align-center")||ue).remove(),e){const w=q.createElement("div");w.style.marginTop="40px",w.style.paddingTop="20px",w.style.borderTop="1px solid var(--border)",w.style.textAlign="center",w.style.marginBottom="60px";const A=q.createElement("button");A.textContent="Dmarrer le Quiz sur ce thme",A.style.backgroundColor="var(--primary)",A.style.color="white",A.style.border="none",A.style.padding="14px 28px",A.style.borderRadius="8px",A.style.fontSize="1.1rem",A.style.fontWeight="600",A.style.cursor="pointer",A.style.boxShadow="0 4px 12px rgba(var(--primary-rgb), 0.3)",A.setAttribute("onclick",`window.parent.postMessage({ type: 'START_QUIZ', quizId: '${e}' }, '*')`),w.appendChild(A),q.body.appendChild(w)}c(q.documentElement.outerHTML),p(!1)}catch(E){console.error("Failed to load lesson:",E),c("<p>Erreur lors du chargement de la leon.</p>"),p(!1)}},v=E=>{E.data&&E.data.type==="START_QUIZ"&&E.data.quizId===e&&r(e)};return window.addEventListener("message",v),g(),document.body.style.overflow="hidden",()=>{document.body.style.overflow="",window.removeEventListener("message",v)}},[s,a,e,r]),x.jsxs("div",{className:"lesson-viewer",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:100,backgroundColor:"var(--bg)",display:"flex",flexDirection:"column"},children:[x.jsxs("div",{className:"actions",style:{padding:"12px 20px",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",backgroundColor:"var(--surface)",gap:"16px"},children:[x.jsxs("button",{className:"btn-ghost",onClick:t,style:{border:"1px solid var(--border)",display:"flex",alignItems:"center",gap:"6px"},children:[x.jsx(sd,{size:16})," Retour"]}),x.jsx("span",{style:{fontWeight:600,fontSize:"1.1rem",flex:1},children:"Leon"})]}),x.jsxs("div",{style:{flex:1,display:"flex",overflow:"hidden",position:"relative"},children:[x.jsx("div",{style:{opacity:d?1:0,position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",transition:"opacity 0.2s"},children:"Chargement..."}),x.jsx("iframe",{srcDoc:l,title:"Leon",style:{width:"100%",height:"100%",border:"none",opacity:d?0:1,transition:"opacity 0.3s ease-in-out"}})]})]})},fk=({themeMode:s,sections:e})=>{const{lessonId:t}=FT(),r=ka(),a=decodeURIComponent(t),l=Lu.useMemo(()=>{if(!e)return null;for(const c of e){const d=c.items.find(p=>p.lessonFile===a||p.file&&p.file.replace(".json",".html")===a);if(d)return d}return null},[e,a]);return x.jsx(hk,{lessonFile:a,quizId:l?.file?l.id:null,onBack:()=>r("/"),onStartQuiz:c=>r(`/quiz/${c}`),theme:s})};function dk(){U.useEffect(()=>{console.log(" Permis Online Free - Version 1.5 (Score Fix + Interaction Lock)")},[]);const[s,e]=U.useState([]),[t,r]=U.useState({}),[a,l]=U.useState("light"),[c,d]=U.useState(!1),[p,g]=U.useState(!1),[v,E]=U.useState(null),S=U.useRef(!1),N=U.useRef(null);U.useEffect(()=>{const w=localStorage.getItem("theme");if(w){l(w),document.documentElement.setAttribute("data-theme",w);return}const A=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";l(A),document.documentElement.setAttribute("data-theme",A)},[]),U.useEffect(()=>{const w=window.location.hash.replace("#","")||"/";let A="Permis Online Free";w.startsWith("/quiz")?A="Quiz - Permis Online Free":w.startsWith("/resultats")?A="Rsultats - Permis Online Free":w==="/profil"?A="Mon Profil - Permis Online Free":w.startsWith("/lecon")&&(A="Leon - Permis Online Free"),document.title=A},[]);const Q=()=>{const w=a==="light"?"dark":"light";l(w),document.documentElement.setAttribute("data-theme",w),localStorage.setItem("theme",w)},q=()=>{const w=!c;d(w),localStorage.setItem("instantFeedback",JSON.stringify(w))},L=()=>{const w=!p;g(w),localStorage.setItem("autoPlayAudio",JSON.stringify(w))};U.useEffect(()=>{(async()=>{try{const k=await S2();k&&k.sections&&e(k.sections)}catch(k){console.error("Failed to load themes index",k)}})();const A=localStorage.getItem("quizProgress");A&&r(JSON.parse(A));const R=localStorage.getItem("instantFeedback");R&&d(JSON.parse(R));const M=localStorage.getItem("autoPlayAudio");M&&g(JSON.parse(M));const O=bs.onAuthStateChanged(async k=>{k&&(console.log(" User logged in:",k.displayName||k.email),le())});return()=>O()},[]),U.useEffect(()=>{if(localStorage.setItem("quizProgress",JSON.stringify(t)),S.current){S.current=!1;const w=bs.onAuthStateChanged(A=>{A&&(N.current&&clearTimeout(N.current),E("pending"),N.current=setTimeout(()=>{ee(t)},2500)),w()})}},[t]);const re=(w,A,R,M)=>{S.current=!0,r(O=>{const{metadata:k,...C}=O;return{...C,metadata:k||{},[w]:{score:A,total:R,date:new Date().toISOString(),answers:M}}})},J=(w,A)=>{S.current=!0,r(R=>{if(!R[w])return R;const M=R[w],k=(M.answers||[]).map(j=>{const ae=A.find(te=>te.questionId==j.questionId);return ae||j});A.forEach(j=>{k.find(ae=>ae.questionId==j.questionId)||k.push(j)});const C=k.filter(j=>j.isCorrect).length,{metadata:Ie,...Le}=R;return{...Le,metadata:Ie||{},[w]:{...M,answers:k,score:C,date:new Date().toISOString()}}})},ee=async w=>{try{const A=bs.currentUser;if(!A)return;E("syncing"),console.log(` Firestore Sync: Saving to users/${A.uid}...`),await nk(ST(NT,"users",A.uid),w),console.log(" Firestore Sync: Success!"),E("success"),setTimeout(()=>E(null),3e3)}catch(A){console.error(" Firestore Sync Error:",A.code,A.message),A.code==="permission-denied"?console.warn(" ACTION REQUIRED: Check Firestore Rules in Firebase Console!"):A.code==="not-found"&&console.warn(" ACTION REQUIRED: Create 'Cloud Firestore' database in Firebase Console!"),E("error"),setTimeout(()=>E(null),5e3)}},le=async()=>{try{const w=bs.currentUser;if(!w)return;E("syncing"),console.log(` Firestore Pull: Fetching users/${w.uid}...`);const A=await tk(ST(NT,"users",w.uid));if(!A.exists()){console.log(" Firestore Pull: No remote data found."),E(null);return}const R=A.data(),M=JSON.parse(localStorage.getItem("quizProgress")||"{}"),O=R.metadata?.lastResetAll,k=M.metadata?.lastResetAll;if(O){const j=new Date(O).getTime(),ae=k?new Date(k).getTime():0,te=Object.entries(M).reduce((ge,[Ae,V])=>{if(Ae==="metadata"||!V||!V.date)return ge;const H=new Date(V.date).getTime();return Math.max(ge,H)},0);if(j>ae&&j>te){console.log(" Remote Reset detected. Clearing local progress."),r(R),localStorage.setItem("quizProgress",JSON.stringify(R)),E("success"),setTimeout(()=>E(null),3e3);return}}const{metadata:C,...Ie}=R,Le={...M};if(O){const j=new Date(O).getTime(),ae=k?new Date(k).getTime():0;j>ae&&(Le.metadata={...Le.metadata,lastResetAll:O})}Object.keys(Ie).forEach(j=>{const ae=Ie[j],te=Le[j];if(!ae)return;const ge=ae.date?new Date(ae.date).getTime():0,Ae=te&&te.date?new Date(te.date).getTime():0;(!te||ge>Ae||ge===Ae&&ae.score>(te.score||0))&&(Le[j]=ae)}),r(Le),localStorage.setItem("quizProgress",JSON.stringify(Le)),E("success"),console.log(" Auto-pull complete!"),setTimeout(()=>E(null),3e3)}catch(w){console.error(" Auto-pull failed:",w),E("error"),setTimeout(()=>E(null),5e3)}},ce=()=>{if(window.confirm("tes-vous sr de vouloir rinitialiser toute votre progression sur TOUS vos appareils ?")){const w={metadata:{lastResetAll:new Date().toISOString()}};S.current=!0,r(w),localStorage.setItem("quizProgress",JSON.stringify(w))}};window.debugApp={sections:s,progress:t,resetProgress:()=>{r({}),localStorage.removeItem("quizProgress"),console.log("Progress reset")}};const ue=a==="dark";return x.jsxs(TR,{basename:"/permis-online-free/",children:[v&&x.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",background:v==="error"?"var(--danger)":"var(--surface-1)",color:v==="error"?"white":"var(--foreground)",padding:"12px 20px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",zIndex:1e4,display:"flex",alignItems:"center",gap:"10px",border:"1px solid var(--border)",fontWeight:"500",animation:"slideUp 0.3s ease-out"},children:[v==="syncing"&&x.jsx("span",{children:" Synchronisation..."}),v==="pending"&&x.jsx("span",{style:{opacity:.7},children:" En attente..."}),v==="success"&&x.jsx("span",{style:{color:"var(--success)"},children:" Synchronis !"}),v==="error"&&x.jsx("span",{children:" Erreur de synchronisation"})]}),x.jsxs(WI,{children:[x.jsx(ca,{path:"/",element:x.jsx(_2,{sections:s,progress:t,toggleTheme:Q,isDarkMode:ue})}),x.jsx(ca,{path:"/profil",element:x.jsx(uk,{progress:t,themesData:{sections:s},onReset:ce,instantFeedback:c,onToggleInstantFeedback:q,autoPlayAudio:p,onToggleAutoPlayAudio:L,toggleTheme:Q,isDarkMode:ue})}),x.jsx(ca,{path:"/lecon/:lessonId",element:x.jsx(fk,{themeMode:a,sections:s})}),x.jsx(ca,{path:"/quiz/:themeId",element:x.jsx(A2,{sections:s,onFinishQuiz:re,onPatchProgress:J,instantFeedback:c,autoPlayAudio:p,toggleTheme:Q,isDarkMode:ue})}),x.jsx(ca,{path:"/revision",element:x.jsx(kb,{toggleTheme:Q,isDarkMode:ue})}),x.jsx(ca,{path:"/resultats",element:x.jsx(kb,{toggleTheme:Q,isDarkMode:ue})})]})]})}console.log("APP VERSION: 2026-02-10 14:30 - Fixed single_choice & Logic");tI.createRoot(document.getElementById("root")).render(x.jsx(U.StrictMode,{children:x.jsx(dk,{})}));export{mk as c,Gx as g};
