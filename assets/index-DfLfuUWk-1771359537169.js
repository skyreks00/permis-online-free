(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var gk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gx(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var xp={exports:{}},Tu={};var pb;function Kx(){if(pb)return Tu;pb=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:s,type:r,key:c,ref:a!==void 0?a:null,props:l}}return Tu.Fragment=e,Tu.jsx=t,Tu.jsxs=t,Tu}var gb;function Qx(){return gb||(gb=1,xp.exports=Kx()),xp.exports}var x=Qx(),Ip={exports:{}},Me={};var yb;function $x(){if(yb)return Me;yb=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function N(V){return V===null||typeof V!="object"?null:(V=S&&V[S]||V["@@iterator"],typeof V=="function"?V:null)}var K={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,L={};function ne(V,X,he){this.props=V,this.context=X,this.refs=L,this.updater=he||K}ne.prototype.isReactComponent={},ne.prototype.setState=function(V,X){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,X,"setState")},ne.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function J(){}J.prototype=ne.prototype;function Z(V,X,he){this.props=V,this.context=X,this.refs=L,this.updater=he||K}var le=Z.prototype=new J;le.constructor=Z,q(le,ne.prototype),le.isPureReactComponent=!0;var fe=Array.isArray;function ce(){}var w={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function R(V,X,he){var se=he.ref;return{$$typeof:s,type:V,key:X,ref:se!==void 0?se:null,props:he}}function M(V,X){return R(V.type,X,V.props)}function O(V){return typeof V=="object"&&V!==null&&V.$$typeof===s}function k(V){var X={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(he){return X[he]})}var C=/\/+/g;function Ae(V,X){return typeof V=="object"&&V!==null&&V.key!=null?k(""+V.key):X.toString(36)}function je(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(ce,ce):(V.status="pending",V.then(function(X){V.status==="pending"&&(V.status="fulfilled",V.value=X)},function(X){V.status==="pending"&&(V.status="rejected",V.reason=X)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function j(V,X,he,se,ue){var Ce=typeof V;(Ce==="undefined"||Ce==="boolean")&&(V=null);var ze=!1;if(V===null)ze=!0;else switch(Ce){case"bigint":case"string":case"number":ze=!0;break;case"object":switch(V.$$typeof){case s:case e:ze=!0;break;case v:return ze=V._init,j(ze(V._payload),X,he,se,ue)}}if(ze)return ue=ue(V),ze=se===""?"."+Ae(V,0):se,fe(ue)?(he="",ze!=null&&(he=ze.replace(C,"$&/")+"/"),j(ue,X,he,"",function(tr){return tr})):ue!=null&&(O(ue)&&(ue=M(ue,he+(ue.key==null||V&&V.key===ue.key?"":(""+ue.key).replace(C,"$&/")+"/")+ze)),X.push(ue)),1;ze=0;var _t=se===""?".":se+":";if(fe(V))for(var ct=0;ct<V.length;ct++)se=V[ct],Ce=_t+Ae(se,ct),ze+=j(se,X,he,Ce,ue);else if(ct=N(V),typeof ct=="function")for(V=ct.call(V),ct=0;!(se=V.next()).done;)se=se.value,Ce=_t+Ae(se,ct++),ze+=j(se,X,he,Ce,ue);else if(Ce==="object"){if(typeof V.then=="function")return j(je(V),X,he,se,ue);throw X=String(V),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return ze}function ae(V,X,he){if(V==null)return V;var se=[],ue=0;return j(V,se,"","",function(Ce){return X.call(he,Ce,ue++)}),se}function ee(V){if(V._status===-1){var X=V._result;X=X(),X.then(function(he){(V._status===0||V._status===-1)&&(V._status=1,V._result=he)},function(he){(V._status===0||V._status===-1)&&(V._status=2,V._result=he)}),V._status===-1&&(V._status=0,V._result=X)}if(V._status===1)return V._result.default;throw V._result}var ye=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},xe={map:ae,forEach:function(V,X,he){ae(V,function(){X.apply(this,arguments)},he)},count:function(V){var X=0;return ae(V,function(){X++}),X},toArray:function(V){return ae(V,function(X){return X})||[]},only:function(V){if(!O(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Me.Activity=E,Me.Children=xe,Me.Component=ne,Me.Fragment=t,Me.Profiler=a,Me.PureComponent=Z,Me.StrictMode=r,Me.Suspense=p,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,Me.__COMPILER_RUNTIME={__proto__:null,c:function(V){return w.H.useMemoCache(V)}},Me.cache=function(V){return function(){return V.apply(null,arguments)}},Me.cacheSignal=function(){return null},Me.cloneElement=function(V,X,he){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var se=q({},V.props),ue=V.key;if(X!=null)for(Ce in X.key!==void 0&&(ue=""+X.key),X)!A.call(X,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&X.ref===void 0||(se[Ce]=X[Ce]);var Ce=arguments.length-2;if(Ce===1)se.children=he;else if(1<Ce){for(var ze=Array(Ce),_t=0;_t<Ce;_t++)ze[_t]=arguments[_t+2];se.children=ze}return R(V.type,ue,se)},Me.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:l,_context:V},V},Me.createElement=function(V,X,he){var se,ue={},Ce=null;if(X!=null)for(se in X.key!==void 0&&(Ce=""+X.key),X)A.call(X,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(ue[se]=X[se]);var ze=arguments.length-2;if(ze===1)ue.children=he;else if(1<ze){for(var _t=Array(ze),ct=0;ct<ze;ct++)_t[ct]=arguments[ct+2];ue.children=_t}if(V&&V.defaultProps)for(se in ze=V.defaultProps,ze)ue[se]===void 0&&(ue[se]=ze[se]);return R(V,Ce,ue)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(V){return{$$typeof:d,render:V}},Me.isValidElement=O,Me.lazy=function(V){return{$$typeof:v,_payload:{_status:-1,_result:V},_init:ee}},Me.memo=function(V,X){return{$$typeof:g,type:V,compare:X===void 0?null:X}},Me.startTransition=function(V){var X=w.T,he={};w.T=he;try{var se=V(),ue=w.S;ue!==null&&ue(he,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(ce,ye)}catch(Ce){ye(Ce)}finally{X!==null&&he.types!==null&&(X.types=he.types),w.T=X}},Me.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},Me.use=function(V){return w.H.use(V)},Me.useActionState=function(V,X,he){return w.H.useActionState(V,X,he)},Me.useCallback=function(V,X){return w.H.useCallback(V,X)},Me.useContext=function(V){return w.H.useContext(V)},Me.useDebugValue=function(){},Me.useDeferredValue=function(V,X){return w.H.useDeferredValue(V,X)},Me.useEffect=function(V,X){return w.H.useEffect(V,X)},Me.useEffectEvent=function(V){return w.H.useEffectEvent(V)},Me.useId=function(){return w.H.useId()},Me.useImperativeHandle=function(V,X,he){return w.H.useImperativeHandle(V,X,he)},Me.useInsertionEffect=function(V,X){return w.H.useInsertionEffect(V,X)},Me.useLayoutEffect=function(V,X){return w.H.useLayoutEffect(V,X)},Me.useMemo=function(V,X){return w.H.useMemo(V,X)},Me.useOptimistic=function(V,X){return w.H.useOptimistic(V,X)},Me.useReducer=function(V,X,he){return w.H.useReducer(V,X,he)},Me.useRef=function(V){return w.H.useRef(V)},Me.useState=function(V){return w.H.useState(V)},Me.useSyncExternalStore=function(V,X,he){return w.H.useSyncExternalStore(V,X,he)},Me.useTransition=function(){return w.H.useTransition()},Me.version="19.2.4",Me}var _b;function zg(){return _b||(_b=1,Ip.exports=$x()),Ip.exports}var U=zg();const Lu=Gx(U);var Rp={exports:{}},wu={},Cp={exports:{}},Np={};var vb;function Yx(){return vb||(vb=1,(function(s){function e(j,ae){var ee=j.length;j.push(ae);e:for(;0<ee;){var ye=ee-1>>>1,xe=j[ye];if(0<a(xe,ae))j[ye]=ae,j[ee]=xe,ee=ye;else break e}}function t(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var ae=j[0],ee=j.pop();if(ee!==ae){j[0]=ee;e:for(var ye=0,xe=j.length,V=xe>>>1;ye<V;){var X=2*(ye+1)-1,he=j[X],se=X+1,ue=j[se];if(0>a(he,ee))se<xe&&0>a(ue,he)?(j[ye]=ue,j[se]=ee,ye=se):(j[ye]=he,j[X]=ee,ye=X);else if(se<xe&&0>a(ue,ee))j[ye]=ue,j[se]=ee,ye=se;else break e}}return ae}function a(j,ae){var ee=j.sortIndex-ae.sortIndex;return ee!==0?ee:j.id-ae.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();s.unstable_now=function(){return c.now()-d}}var p=[],g=[],v=1,E=null,S=3,N=!1,K=!1,q=!1,L=!1,ne=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function le(j){for(var ae=t(g);ae!==null;){if(ae.callback===null)r(g);else if(ae.startTime<=j)r(g),ae.sortIndex=ae.expirationTime,e(p,ae);else break;ae=t(g)}}function fe(j){if(q=!1,le(j),!K)if(t(p)!==null)K=!0,ce||(ce=!0,k());else{var ae=t(g);ae!==null&&je(fe,ae.startTime-j)}}var ce=!1,w=-1,A=5,R=-1;function M(){return L?!0:!(s.unstable_now()-R<A)}function O(){if(L=!1,ce){var j=s.unstable_now();R=j;var ae=!0;try{e:{K=!1,q&&(q=!1,J(w),w=-1),N=!0;var ee=S;try{t:{for(le(j),E=t(p);E!==null&&!(E.expirationTime>j&&M());){var ye=E.callback;if(typeof ye=="function"){E.callback=null,S=E.priorityLevel;var xe=ye(E.expirationTime<=j);if(j=s.unstable_now(),typeof xe=="function"){E.callback=xe,le(j),ae=!0;break t}E===t(p)&&r(p),le(j)}else r(p);E=t(p)}if(E!==null)ae=!0;else{var V=t(g);V!==null&&je(fe,V.startTime-j),ae=!1}}break e}finally{E=null,S=ee,N=!1}ae=void 0}}finally{ae?k():ce=!1}}}var k;if(typeof Z=="function")k=function(){Z(O)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Ae=C.port2;C.port1.onmessage=O,k=function(){Ae.postMessage(null)}}else k=function(){ne(O,0)};function je(j,ae){w=ne(function(){j(s.unstable_now())},ae)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(j){j.callback=null},s.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<j?Math.floor(1e3/j):5},s.unstable_getCurrentPriorityLevel=function(){return S},s.unstable_next=function(j){switch(S){case 1:case 2:case 3:var ae=3;break;default:ae=S}var ee=S;S=ae;try{return j()}finally{S=ee}},s.unstable_requestPaint=function(){L=!0},s.unstable_runWithPriority=function(j,ae){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var ee=S;S=j;try{return ae()}finally{S=ee}},s.unstable_scheduleCallback=function(j,ae,ee){var ye=s.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ye+ee:ye):ee=ye,j){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=ee+xe,j={id:v++,callback:ae,priorityLevel:j,startTime:ee,expirationTime:xe,sortIndex:-1},ee>ye?(j.sortIndex=ee,e(g,j),t(p)===null&&j===t(g)&&(q?(J(w),w=-1):q=!0,je(fe,ee-ye))):(j.sortIndex=xe,e(p,j),K||N||(K=!0,ce||(ce=!0,k()))),j},s.unstable_shouldYield=M,s.unstable_wrapCallback=function(j){var ae=S;return function(){var ee=S;S=ae;try{return j.apply(this,arguments)}finally{S=ee}}}})(Np)),Np}var bb;function Xx(){return bb||(bb=1,Cp.exports=Yx()),Cp.exports}var Dp={exports:{}},sn={};var Eb;function Jx(){if(Eb)return sn;Eb=1;var s=zg();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,g,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:E==null?null:""+E,children:p,containerInfo:g,implementation:v}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,sn.createPortal=function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,v)},sn.flushSync=function(p){var g=c.T,v=r.p;try{if(c.T=null,r.p=2,p)return p()}finally{c.T=g,r.p=v,r.d.f()}},sn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(p,g))},sn.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},sn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var v=g.as,E=d(v,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,N=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?r.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:N}):v==="script"&&r.d.X(p,{crossOrigin:E,integrity:S,fetchPriority:N,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},sn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=d(g.as,g.crossOrigin);r.d.M(p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(p)},sn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,E=d(v,g.crossOrigin);r.d.L(p,v,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},sn.preloadModule=function(p,g){if(typeof p=="string")if(g){var v=d(g.as,g.crossOrigin);r.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(p)},sn.requestFormReset=function(p){r.d.r(p)},sn.unstable_batchedUpdates=function(p,g){return p(g)},sn.useFormState=function(p,g,v){return c.H.useFormState(p,g,v)},sn.useFormStatus=function(){return c.H.useHostTransitionStatus()},sn.version="19.2.4",sn}var Tb;function Wx(){if(Tb)return Dp.exports;Tb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Dp.exports=Jx(),Dp.exports}var wb;function Zx(){if(wb)return wu;wb=1;var s=Xx(),e=zg(),t=Wx();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function d(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function p(n){if(l(n)!==n)throw Error(r(188))}function g(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(r(188));return i!==n?null:n}for(var o=n,u=i;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return p(f),n;if(m===u)return p(f),i;m=m.sibling}throw Error(r(188))}if(o.return!==u.return)o=f,u=m;else{for(var _=!1,T=f.child;T;){if(T===o){_=!0,o=f,u=m;break}if(T===u){_=!0,u=f,o=m;break}T=T.sibling}if(!_){for(T=m.child;T;){if(T===o){_=!0,o=m,u=f;break}if(T===u){_=!0,u=m,o=f;break}T=T.sibling}if(!_)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:i}function v(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=v(n),i!==null)return i;n=n.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),K=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),J=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function k(n){return n===null||typeof n!="object"?null:(n=O&&n[O]||n["@@iterator"],typeof n=="function"?n:null)}var C=Symbol.for("react.client.reference");function Ae(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===C?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case q:return"Fragment";case ne:return"Profiler";case L:return"StrictMode";case fe:return"Suspense";case ce:return"SuspenseList";case R:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case K:return"Portal";case Z:return n.displayName||"Context";case J:return(n._context.displayName||"Context")+".Consumer";case le:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case w:return i=n.displayName||null,i!==null?i:Ae(n.type)||"Memo";case A:i=n._payload,n=n._init;try{return Ae(n(i))}catch{}}return null}var je=Array.isArray,j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},ye=[],xe=-1;function V(n){return{current:n}}function X(n){0>xe||(n.current=ye[xe],ye[xe]=null,xe--)}function he(n,i){xe++,ye[xe]=n.current,n.current=i}var se=V(null),ue=V(null),Ce=V(null),ze=V(null);function _t(n,i){switch(he(Ce,i),he(ue,n),he(se,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?z0(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=z0(i),n=U0(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}X(se),he(se,n)}function ct(){X(se),X(ue),X(Ce)}function tr(n){n.memoizedState!==null&&he(ze,n);var i=se.current,o=U0(i,n.type);i!==o&&(he(ue,n),he(se,o))}function Vi(n){ue.current===n&&(X(se),X(ue)),ze.current===n&&(X(ze),_u._currentValue=ee)}var Oi,Mi;function cn(n){if(Oi===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Oi=i&&i[1]||"",Mi=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Oi+n+Mi}var Ls=!1;function Ln(n,i){if(!n||Ls)return"";Ls=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(Y){var Q=Y}Reflect.construct(n,[],re)}else{try{re.call()}catch(Y){Q=Y}n.call(re.prototype)}}else{try{throw Error()}catch(Y){Q=Y}(re=n())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(Y){if(Y&&Q&&typeof Y.stack=="string")return[Y.stack,Q.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),_=m[0],T=m[1];if(_&&T){var D=_.split(`
`),G=T.split(`
`);for(f=u=0;u<D.length&&!D[u].includes("DetermineComponentFrameRoot");)u++;for(;f<G.length&&!G[f].includes("DetermineComponentFrameRoot");)f++;if(u===D.length||f===G.length)for(u=D.length-1,f=G.length-1;1<=u&&0<=f&&D[u]!==G[f];)f--;for(;1<=u&&0<=f;u--,f--)if(D[u]!==G[f]){if(u!==1||f!==1)do if(u--,f--,0>f||D[u]!==G[f]){var W=`
`+D[u].replace(" at new "," at ");return n.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",n.displayName)),W}while(1<=u&&0<=f);break}}}finally{Ls=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?cn(o):""}function me(n,i){switch(n.tag){case 26:case 27:case 5:return cn(n.type);case 16:return cn("Lazy");case 13:return n.child!==i&&i!==null?cn("Suspense Fallback"):cn("Suspense");case 19:return cn("SuspenseList");case 0:case 15:return Ln(n.type,!1);case 11:return Ln(n.type.render,!1);case 1:return Ln(n.type,!0);case 31:return cn("Activity");default:return""}}function Oe(n){try{var i="",o=null;do i+=me(n,o),o=n,n=n.return;while(n);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var De=Object.prototype.hasOwnProperty,Ie=s.unstable_scheduleCallback,vt=s.unstable_cancelCallback,zn=s.unstable_shouldYield,ki=s.unstable_requestPaint,Xt=s.unstable_now,Zr=s.unstable_getCurrentPriorityLevel,zs=s.unstable_ImmediatePriority,br=s.unstable_UserBlockingPriority,Pi=s.unstable_NormalPriority,Cd=s.unstable_LowPriority,Ic=s.unstable_IdlePriority,Rc=s.log,Cc=s.unstable_setDisableYieldValue,nr=null,Jt=null;function Un(n){if(typeof Rc=="function"&&Cc(n),Jt&&typeof Jt.setStrictMode=="function")try{Jt.setStrictMode(nr,n)}catch{}}var xt=Math.clz32?Math.clz32:Dc,Nc=Math.log,qa=Math.LN2;function Dc(n){return n>>>=0,n===0?32:31-(Nc(n)/qa|0)|0}var Er=256,Us=262144,Vt=4194304;function Tr(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function wr(n,i,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,m=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var T=u&134217727;return T!==0?(u=T&~m,u!==0?f=Tr(u):(_&=T,_!==0?f=Tr(_):o||(o=T&~n,o!==0&&(f=Tr(o))))):(T=u&~m,T!==0?f=Tr(T):_!==0?f=Tr(_):o||(o=u&~n,o!==0&&(f=Tr(o)))),f===0?0:i!==0&&i!==f&&(i&m)===0&&(m=f&-f,o=i&-i,m>=o||m===32&&(o&4194048)!==0)?i:f}function rr(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function Nd(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vc(){var n=Vt;return Vt<<=1,(Vt&62914560)===0&&(Vt=4194304),n}function Sr(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function js(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Dd(n,i,o,u,f,m){var _=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var T=n.entanglements,D=n.expirationTimes,G=n.hiddenUpdates;for(o=_&~o;0<o;){var W=31-xt(o),re=1<<W;T[W]=0,D[W]=-1;var Q=G[W];if(Q!==null)for(G[W]=null,W=0;W<Q.length;W++){var Y=Q[W];Y!==null&&(Y.lane&=-536870913)}o&=~re}u!==0&&Bs(n,u,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(_&~i))}function Bs(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var u=31-xt(i);n.entangledLanes|=i,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function wl(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var u=31-xt(o),f=1<<u;f&i|n[u]&i&&(n[u]|=i),o&=~f}}function Sl(n,i){var o=i&-i;return o=(o&42)!==0?1:qs(o),(o&(n.suspendedLanes|i))!==0?0:o}function qs(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function ei(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Oc(){var n=ae.p;return n!==0?n:(n=window.event,n===void 0?32:lb(n.type))}function ir(n,i){var o=ae.p;try{return ae.p=n,i()}finally{ae.p=o}}var sr=Math.random().toString(36).slice(2),Ot="__reactFiber$"+sr,Gt="__reactProps$"+sr,Ar="__reactContainer$"+sr,Fa="__reactEvents$"+sr,Vd="__reactListeners$"+sr,Mc="__reactHandles$"+sr,kc="__reactResources$"+sr,xr="__reactMarker$"+sr;function Ha(n){delete n[Ot],delete n[Gt],delete n[Fa],delete n[Vd],delete n[Mc]}function Ir(n){var i=n[Ot];if(i)return i;for(var o=n.parentNode;o;){if(i=o[Ar]||o[Ot]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=K0(n);n!==null;){if(o=n[Ot])return o;n=K0(n)}return i}n=o,o=n.parentNode}return null}function jn(n){if(n=n[Ot]||n[Ar]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function wn(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function Rr(n){var i=n[kc];return i||(i=n[kc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Mt(n){n[xr]=!0}var Al=new Set,xl={};function Cr(n,i){Nr(n,i),Nr(n+"Capture",i)}function Nr(n,i){for(xl[n]=i,n=0;n<i.length;n++)Al.add(i[n])}var Il=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Rl={},Cl={};function Pc(n){return De.call(Cl,n)?!0:De.call(Rl,n)?!1:Il.test(n)?Cl[n]=!0:(Rl[n]=!0,!1)}function Ga(n,i,o){if(Pc(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function Sn(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function kt(n,i,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+u)}}function Kt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Li(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Nl(n,i,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,m=u.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){o=""+_,m.call(this,_)}}),Object.defineProperty(n,i,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Ze(n){if(!n._valueTracker){var i=Li(n)?"checked":"value";n._valueTracker=Nl(n,i,""+n[i])}}function Fs(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return n&&(u=Li(n)?n.checked?"true":"false":n.value),n=u,n!==o?(i.setValue(n),!0):!1}function Dr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Hs=/[\n"\\]/g;function mn(n){return n.replace(Hs,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ka(n,i,o,u,f,m,_,T){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),i!=null?_==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Kt(i)):n.value!==""+Kt(i)&&(n.value=""+Kt(i)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),i!=null?Dl(n,_,Kt(i)):o!=null?Dl(n,_,Kt(o)):u!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+Kt(T):n.removeAttribute("name")}function Lc(n,i,o,u,f,m,_,T){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),i!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||i!=null)){Ze(n);return}o=o!=null?""+Kt(o):"",i=i!=null?""+Kt(i):o,T||i===n.value||(n.value=i),n.defaultValue=i}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=T?n.checked:!!u,n.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),Ze(n)}function Dl(n,i,o){i==="number"&&Dr(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function zi(n,i,o,u){if(n=n.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=i.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+Kt(o),i=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function zc(n,i,o){if(i!=null&&(i=""+Kt(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+Kt(o):""}function Ui(n,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(r(92));if(je(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=Kt(i),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),Ze(n)}function pn(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var Uc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vl(n,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":u?n.setProperty(i,o):typeof o!="number"||o===0||Uc.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function Ol(n,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in i)u=i[f],i.hasOwnProperty(f)&&o[f]!==u&&Vl(n,f,u)}else for(var m in i)i.hasOwnProperty(m)&&Vl(n,m,i[m])}function Qa(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ji=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $a(n){return ji.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function ar(){}var Ml=null;function Bn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Bi=null,Vr=null;function Gs(n){var i=jn(n);if(i&&(n=i.stateNode)){var o=n[Gt]||null;e:switch(n=i.stateNode,i.type){case"input":if(Ka(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+mn(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==n&&u.form===n.form){var f=u[Gt]||null;if(!f)throw Error(r(90));Ka(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===n.form&&Fs(u)}break e;case"textarea":zc(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&zi(n,!!o.multiple,i,!1)}}}var Ya=!1;function qi(n,i,o){if(Ya)return n(i,o);Ya=!0;try{var u=n(i);return u}finally{if(Ya=!1,(Bi!==null||Vr!==null)&&(Oh(),Bi&&(i=Bi,n=Vr,Vr=Bi=null,Gs(i),n)))for(i=0;i<n.length;i++)Gs(n[i])}}function or(n,i){var o=n.stateNode;if(o===null)return null;var u=o[Gt]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ks=!1;if(qn)try{var it={};Object.defineProperty(it,"passive",{get:function(){Ks=!0}}),window.addEventListener("test",it,it),window.removeEventListener("test",it,it)}catch{Ks=!1}var Or=null,kl=null,Qs=null;function Pl(){if(Qs)return Qs;var n,i=kl,o=i.length,u,f="value"in Or?Or.value:Or.textContent,m=f.length;for(n=0;n<o&&i[n]===f[n];n++);var _=o-n;for(u=1;u<=_&&i[o-u]===f[m-u];u++);return Qs=f.slice(n,1<u?1-u:void 0)}function $s(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function ti(){return!0}function lr(){return!1}function Wt(n){function i(o,u,f,m,_){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(o=n[T],this[T]=o?o(m):m[T]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ti:lr,this.isPropagationStopped=lr,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ti)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ti)},persist:function(){},isPersistent:ti}),i}var ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mr=Wt(ni),Fi=E({},ni,{view:0,detail:0}),Ll=Wt(Fi),Hi,Xa,kr,Ja=E({},Fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gi,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==kr&&(kr&&n.type==="mousemove"?(Hi=n.screenX-kr.screenX,Xa=n.screenY-kr.screenY):Xa=Hi=0,kr=n),Hi)},movementY:function(n){return"movementY"in n?n.movementY:Xa}}),zl=Wt(Ja),Ys=E({},Ja,{dataTransfer:0}),Bc=Wt(Ys),qc=E({},Fi,{relatedTarget:0}),Xs=Wt(qc),Ul=E({},ni,{animationName:0,elapsedTime:0,pseudoElement:0}),Fc=Wt(Ul),Wa=E({},ni,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Hc=Wt(Wa),Gc=E({},ni,{data:0}),Pr=Wt(Gc),Kc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$c={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yc(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=$c[n])?!!i[n]:!1}function Gi(){return Yc}var hn=E({},Fi,{key:function(n){if(n.key){var i=Kc[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=$s(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Qc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gi,charCode:function(n){return n.type==="keypress"?$s(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?$s(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Xc=Wt(hn),Jc=E({},Ja,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ri=Wt(Jc),h=E({},Fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gi}),y=Wt(h),b=E({},ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=Wt(b),F=E({},Ja,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),$=Wt(F),de=E({},ni,{newState:0,oldState:0}),ke=Wt(de),It=[9,13,27,32],Je=qn&&"CompositionEvent"in window,pt=null;qn&&"documentMode"in document&&(pt=document.documentMode);var Fn=qn&&"TextEvent"in window&&!pt,Lr=qn&&(!Je||pt&&8<pt&&11>=pt),ur=" ",cr=!1;function Js(n,i){switch(n){case"keyup":return It.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Za(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var eo=!1;function pA(n,i){switch(n){case"compositionend":return Za(i);case"keypress":return i.which!==32?null:(cr=!0,ur);case"textInput":return n=i.data,n===ur&&cr?null:n;default:return null}}function gA(n,i){if(eo)return n==="compositionend"||!Je&&Js(n,i)?(n=Pl(),Qs=kl=Or=null,eo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Lr&&i.locale!=="ko"?null:i.data;default:return null}}var yA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yy(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!yA[n.type]:i==="textarea"}function Xy(n,i,o,u){Bi?Vr?Vr.push(u):Vr=[u]:Bi=u,i=jh(i,"onChange"),0<i.length&&(o=new Mr("onChange","change",null,o,u),n.push({event:o,listeners:i}))}var jl=null,Bl=null;function _A(n){V0(n,0)}function Wc(n){var i=wn(n);if(Fs(i))return n}function Jy(n,i){if(n==="change")return i}var Wy=!1;if(qn){var Od;if(qn){var Md="oninput"in document;if(!Md){var Zy=document.createElement("div");Zy.setAttribute("oninput","return;"),Md=typeof Zy.oninput=="function"}Od=Md}else Od=!1;Wy=Od&&(!document.documentMode||9<document.documentMode)}function e_(){jl&&(jl.detachEvent("onpropertychange",t_),Bl=jl=null)}function t_(n){if(n.propertyName==="value"&&Wc(Bl)){var i=[];Xy(i,Bl,n,Bn(n)),qi(_A,i)}}function vA(n,i,o){n==="focusin"?(e_(),jl=i,Bl=o,jl.attachEvent("onpropertychange",t_)):n==="focusout"&&e_()}function bA(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Wc(Bl)}function EA(n,i){if(n==="click")return Wc(i)}function TA(n,i){if(n==="input"||n==="change")return Wc(i)}function wA(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var An=typeof Object.is=="function"?Object.is:wA;function ql(n,i){if(An(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!De.call(i,f)||!An(n[f],i[f]))return!1}return!0}function n_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function r_(n,i){var o=n_(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=i&&u>=i)return{node:o,offset:i-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=n_(o)}}function i_(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?i_(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function s_(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Dr(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=Dr(n.document)}return i}function kd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var SA=qn&&"documentMode"in document&&11>=document.documentMode,to=null,Pd=null,Fl=null,Ld=!1;function a_(n,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Ld||to==null||to!==Dr(u)||(u=to,"selectionStart"in u&&kd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Fl&&ql(Fl,u)||(Fl=u,u=jh(Pd,"onSelect"),0<u.length&&(i=new Mr("onSelect","select",null,i,o),n.push({event:i,listeners:u}),i.target=to)))}function Ws(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var no={animationend:Ws("Animation","AnimationEnd"),animationiteration:Ws("Animation","AnimationIteration"),animationstart:Ws("Animation","AnimationStart"),transitionrun:Ws("Transition","TransitionRun"),transitionstart:Ws("Transition","TransitionStart"),transitioncancel:Ws("Transition","TransitionCancel"),transitionend:Ws("Transition","TransitionEnd")},zd={},o_={};qn&&(o_=document.createElement("div").style,"AnimationEvent"in window||(delete no.animationend.animation,delete no.animationiteration.animation,delete no.animationstart.animation),"TransitionEvent"in window||delete no.transitionend.transition);function Zs(n){if(zd[n])return zd[n];if(!no[n])return n;var i=no[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in o_)return zd[n]=i[o];return n}var l_=Zs("animationend"),u_=Zs("animationiteration"),c_=Zs("animationstart"),AA=Zs("transitionrun"),xA=Zs("transitionstart"),IA=Zs("transitioncancel"),h_=Zs("transitionend"),f_=new Map,Ud="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ud.push("scrollEnd");function hr(n,i){f_.set(n,i),Cr(i,[n])}var Zc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Hn=[],ro=0,jd=0;function eh(){for(var n=ro,i=jd=ro=0;i<n;){var o=Hn[i];Hn[i++]=null;var u=Hn[i];Hn[i++]=null;var f=Hn[i];Hn[i++]=null;var m=Hn[i];if(Hn[i++]=null,u!==null&&f!==null){var _=u.pending;_===null?f.next=f:(f.next=_.next,_.next=f),u.pending=f}m!==0&&d_(o,f,m)}}function th(n,i,o,u){Hn[ro++]=n,Hn[ro++]=i,Hn[ro++]=o,Hn[ro++]=u,jd|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Bd(n,i,o,u){return th(n,i,o,u),nh(n)}function ea(n,i){return th(n,null,null,i),nh(n)}function d_(n,i,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=n.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&i!==null&&(f=31-xt(o),n=m.hiddenUpdates,u=n[f],u===null?n[f]=[i]:u.push(i),i.lane=o|536870912),m):null}function nh(n){if(50<hu)throw hu=0,Xm=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var io={};function RA(n,i,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(n,i,o,u){return new RA(n,i,o,u)}function qd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ii(n,i){var o=n.alternate;return o===null?(o=xn(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function m_(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function rh(n,i,o,u,f,m){var _=0;if(u=n,typeof n=="function")qd(n)&&(_=1);else if(typeof n=="string")_=Ox(n,o,se.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case R:return n=xn(31,o,i,f),n.elementType=R,n.lanes=m,n;case q:return ta(o.children,f,m,i);case L:_=8,f|=24;break;case ne:return n=xn(12,o,i,f|2),n.elementType=ne,n.lanes=m,n;case fe:return n=xn(13,o,i,f),n.elementType=fe,n.lanes=m,n;case ce:return n=xn(19,o,i,f),n.elementType=ce,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Z:_=10;break e;case J:_=9;break e;case le:_=11;break e;case w:_=14;break e;case A:_=16,u=null;break e}_=29,o=Error(r(130,n===null?"null":typeof n,"")),u=null}return i=xn(_,o,i,f),i.elementType=n,i.type=u,i.lanes=m,i}function ta(n,i,o,u){return n=xn(7,n,u,i),n.lanes=o,n}function Fd(n,i,o){return n=xn(6,n,null,i),n.lanes=o,n}function p_(n){var i=xn(18,null,null,0);return i.stateNode=n,i}function Hd(n,i,o){return i=xn(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var g_=new WeakMap;function Gn(n,i){if(typeof n=="object"&&n!==null){var o=g_.get(n);return o!==void 0?o:(i={value:n,source:i,stack:Oe(i)},g_.set(n,i),i)}return{value:n,source:i,stack:Oe(i)}}var so=[],ao=0,ih=null,Hl=0,Kn=[],Qn=0,Ki=null,zr=1,Ur="";function si(n,i){so[ao++]=Hl,so[ao++]=ih,ih=n,Hl=i}function y_(n,i,o){Kn[Qn++]=zr,Kn[Qn++]=Ur,Kn[Qn++]=Ki,Ki=n;var u=zr;n=Ur;var f=32-xt(u)-1;u&=~(1<<f),o+=1;var m=32-xt(i)+f;if(30<m){var _=f-f%5;m=(u&(1<<_)-1).toString(32),u>>=_,f-=_,zr=1<<32-xt(i)+f|o<<f|u,Ur=m+n}else zr=1<<m|o<<f|u,Ur=n}function Gd(n){n.return!==null&&(si(n,1),y_(n,1,0))}function Kd(n){for(;n===ih;)ih=so[--ao],so[ao]=null,Hl=so[--ao],so[ao]=null;for(;n===Ki;)Ki=Kn[--Qn],Kn[Qn]=null,Ur=Kn[--Qn],Kn[Qn]=null,zr=Kn[--Qn],Kn[Qn]=null}function __(n,i){Kn[Qn++]=zr,Kn[Qn++]=Ur,Kn[Qn++]=Ki,zr=i.id,Ur=i.overflow,Ki=n}var Zt=null,dt=null,Ke=!1,Qi=null,$n=!1,Qd=Error(r(519));function $i(n){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Gl(Gn(i,n)),Qd}function v_(n){var i=n.stateNode,o=n.type,u=n.memoizedProps;switch(i[Ot]=n,i[Gt]=u,o){case"dialog":qe("cancel",i),qe("close",i);break;case"iframe":case"object":case"embed":qe("load",i);break;case"video":case"audio":for(o=0;o<du.length;o++)qe(du[o],i);break;case"source":qe("error",i);break;case"img":case"image":case"link":qe("error",i),qe("load",i);break;case"details":qe("toggle",i);break;case"input":qe("invalid",i),Lc(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":qe("invalid",i);break;case"textarea":qe("invalid",i),Ui(i,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||P0(i.textContent,o)?(u.popover!=null&&(qe("beforetoggle",i),qe("toggle",i)),u.onScroll!=null&&qe("scroll",i),u.onScrollEnd!=null&&qe("scrollend",i),u.onClick!=null&&(i.onclick=ar),i=!0):i=!1,i||$i(n,!0)}function b_(n){for(Zt=n.return;Zt;)switch(Zt.tag){case 5:case 31:case 13:$n=!1;return;case 27:case 3:$n=!0;return;default:Zt=Zt.return}}function oo(n){if(n!==Zt)return!1;if(!Ke)return b_(n),Ke=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||hp(n.type,n.memoizedProps)),o=!o),o&&dt&&$i(n),b_(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));dt=G0(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));dt=G0(n)}else i===27?(i=dt,ls(n.type)?(n=gp,gp=null,dt=n):dt=i):dt=Zt?Xn(n.stateNode.nextSibling):null;return!0}function na(){dt=Zt=null,Ke=!1}function $d(){var n=Qi;return n!==null&&(vn===null?vn=n:vn.push.apply(vn,n),Qi=null),n}function Gl(n){Qi===null?Qi=[n]:Qi.push(n)}var Yd=V(null),ra=null,ai=null;function Yi(n,i,o){he(Yd,i._currentValue),i._currentValue=o}function oi(n){n._currentValue=Yd.current,X(Yd)}function Xd(n,i,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===o)break;n=n.return}}function Jd(n,i,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var _=f.child;m=m.firstContext;e:for(;m!==null;){var T=m;m=f;for(var D=0;D<i.length;D++)if(T.context===i[D]){m.lanes|=o,T=m.alternate,T!==null&&(T.lanes|=o),Xd(m.return,o,n),u||(_=null);break e}m=T.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(r(341));_.lanes|=o,m=_.alternate,m!==null&&(m.lanes|=o),Xd(_,o,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function lo(n,i,o,u){n=null;for(var f=i,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var T=f.type;An(f.pendingProps.value,_.value)||(n!==null?n.push(T):n=[T])}}else if(f===ze.current){if(_=f.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(_u):n=[_u])}f=f.return}n!==null&&Jd(i,n,o,u),i.flags|=262144}function sh(n){for(n=n.firstContext;n!==null;){if(!An(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ia(n){ra=n,ai=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function en(n){return E_(ra,n)}function ah(n,i){return ra===null&&ia(n),E_(n,i)}function E_(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},ai===null){if(n===null)throw Error(r(308));ai=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else ai=ai.next=i;return o}var CA=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},NA=s.unstable_scheduleCallback,DA=s.unstable_NormalPriority,Pt={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wd(){return{controller:new CA,data:new Map,refCount:0}}function Kl(n){n.refCount--,n.refCount===0&&NA(DA,function(){n.controller.abort()})}var Ql=null,Zd=0,uo=0,co=null;function VA(n,i){if(Ql===null){var o=Ql=[];Zd=0,uo=np(),co={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Zd++,i.then(T_,T_),i}function T_(){if(--Zd===0&&Ql!==null){co!==null&&(co.status="fulfilled");var n=Ql;Ql=null,uo=0,co=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function OA(n,i){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var w_=j.S;j.S=function(n,i){a0=Xt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&VA(n,i),w_!==null&&w_(n,i)};var sa=V(null);function em(){var n=sa.current;return n!==null?n:ht.pooledCache}function oh(n,i){i===null?he(sa,sa.current):he(sa,i.pool)}function S_(){var n=em();return n===null?null:{parent:Pt._currentValue,pool:n}}var ho=Error(r(460)),tm=Error(r(474)),lh=Error(r(542)),uh={then:function(){}};function A_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function x_(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(ar,ar),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,R_(n),n;default:if(typeof i.status=="string")i.then(ar,ar);else{if(n=ht,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(u){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=u}},function(u){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,R_(n),n}throw oa=i,ho}}function aa(n){try{var i=n._init;return i(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(oa=o,ho):o}}var oa=null;function I_(){if(oa===null)throw Error(r(459));var n=oa;return oa=null,n}function R_(n){if(n===ho||n===lh)throw Error(r(483))}var fo=null,$l=0;function ch(n){var i=$l;return $l+=1,fo===null&&(fo=[]),x_(fo,n,i)}function Yl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function hh(n,i){throw i.$$typeof===S?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function C_(n){function i(z,P){if(n){var H=z.deletions;H===null?(z.deletions=[P],z.flags|=16):H.push(P)}}function o(z,P){if(!n)return null;for(;P!==null;)i(z,P),P=P.sibling;return null}function u(z){for(var P=new Map;z!==null;)z.key!==null?P.set(z.key,z):P.set(z.index,z),z=z.sibling;return P}function f(z,P){return z=ii(z,P),z.index=0,z.sibling=null,z}function m(z,P,H){return z.index=H,n?(H=z.alternate,H!==null?(H=H.index,H<P?(z.flags|=67108866,P):H):(z.flags|=67108866,P)):(z.flags|=1048576,P)}function _(z){return n&&z.alternate===null&&(z.flags|=67108866),z}function T(z,P,H,te){return P===null||P.tag!==6?(P=Fd(H,z.mode,te),P.return=z,P):(P=f(P,H),P.return=z,P)}function D(z,P,H,te){var we=H.type;return we===q?W(z,P,H.props.children,te,H.key):P!==null&&(P.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===A&&aa(we)===P.type)?(P=f(P,H.props),Yl(P,H),P.return=z,P):(P=rh(H.type,H.key,H.props,null,z.mode,te),Yl(P,H),P.return=z,P)}function G(z,P,H,te){return P===null||P.tag!==4||P.stateNode.containerInfo!==H.containerInfo||P.stateNode.implementation!==H.implementation?(P=Hd(H,z.mode,te),P.return=z,P):(P=f(P,H.children||[]),P.return=z,P)}function W(z,P,H,te,we){return P===null||P.tag!==7?(P=ta(H,z.mode,te,we),P.return=z,P):(P=f(P,H),P.return=z,P)}function re(z,P,H){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=Fd(""+P,z.mode,H),P.return=z,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case N:return H=rh(P.type,P.key,P.props,null,z.mode,H),Yl(H,P),H.return=z,H;case K:return P=Hd(P,z.mode,H),P.return=z,P;case A:return P=aa(P),re(z,P,H)}if(je(P)||k(P))return P=ta(P,z.mode,H,null),P.return=z,P;if(typeof P.then=="function")return re(z,ch(P),H);if(P.$$typeof===Z)return re(z,ah(z,P),H);hh(z,P)}return null}function Q(z,P,H,te){var we=P!==null?P.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return we!==null?null:T(z,P,""+H,te);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case N:return H.key===we?D(z,P,H,te):null;case K:return H.key===we?G(z,P,H,te):null;case A:return H=aa(H),Q(z,P,H,te)}if(je(H)||k(H))return we!==null?null:W(z,P,H,te,null);if(typeof H.then=="function")return Q(z,P,ch(H),te);if(H.$$typeof===Z)return Q(z,P,ah(z,H),te);hh(z,H)}return null}function Y(z,P,H,te,we){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return z=z.get(H)||null,T(P,z,""+te,we);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case N:return z=z.get(te.key===null?H:te.key)||null,D(P,z,te,we);case K:return z=z.get(te.key===null?H:te.key)||null,G(P,z,te,we);case A:return te=aa(te),Y(z,P,H,te,we)}if(je(te)||k(te))return z=z.get(H)||null,W(P,z,te,we,null);if(typeof te.then=="function")return Y(z,P,H,ch(te),we);if(te.$$typeof===Z)return Y(z,P,H,ah(P,te),we);hh(P,te)}return null}function ve(z,P,H,te){for(var we=null,Ye=null,Ee=P,Le=P=0,He=null;Ee!==null&&Le<H.length;Le++){Ee.index>Le?(He=Ee,Ee=null):He=Ee.sibling;var Xe=Q(z,Ee,H[Le],te);if(Xe===null){Ee===null&&(Ee=He);break}n&&Ee&&Xe.alternate===null&&i(z,Ee),P=m(Xe,P,Le),Ye===null?we=Xe:Ye.sibling=Xe,Ye=Xe,Ee=He}if(Le===H.length)return o(z,Ee),Ke&&si(z,Le),we;if(Ee===null){for(;Le<H.length;Le++)Ee=re(z,H[Le],te),Ee!==null&&(P=m(Ee,P,Le),Ye===null?we=Ee:Ye.sibling=Ee,Ye=Ee);return Ke&&si(z,Le),we}for(Ee=u(Ee);Le<H.length;Le++)He=Y(Ee,z,Le,H[Le],te),He!==null&&(n&&He.alternate!==null&&Ee.delete(He.key===null?Le:He.key),P=m(He,P,Le),Ye===null?we=He:Ye.sibling=He,Ye=He);return n&&Ee.forEach(function(ds){return i(z,ds)}),Ke&&si(z,Le),we}function Re(z,P,H,te){if(H==null)throw Error(r(151));for(var we=null,Ye=null,Ee=P,Le=P=0,He=null,Xe=H.next();Ee!==null&&!Xe.done;Le++,Xe=H.next()){Ee.index>Le?(He=Ee,Ee=null):He=Ee.sibling;var ds=Q(z,Ee,Xe.value,te);if(ds===null){Ee===null&&(Ee=He);break}n&&Ee&&ds.alternate===null&&i(z,Ee),P=m(ds,P,Le),Ye===null?we=ds:Ye.sibling=ds,Ye=ds,Ee=He}if(Xe.done)return o(z,Ee),Ke&&si(z,Le),we;if(Ee===null){for(;!Xe.done;Le++,Xe=H.next())Xe=re(z,Xe.value,te),Xe!==null&&(P=m(Xe,P,Le),Ye===null?we=Xe:Ye.sibling=Xe,Ye=Xe);return Ke&&si(z,Le),we}for(Ee=u(Ee);!Xe.done;Le++,Xe=H.next())Xe=Y(Ee,z,Le,Xe.value,te),Xe!==null&&(n&&Xe.alternate!==null&&Ee.delete(Xe.key===null?Le:Xe.key),P=m(Xe,P,Le),Ye===null?we=Xe:Ye.sibling=Xe,Ye=Xe);return n&&Ee.forEach(function(Hx){return i(z,Hx)}),Ke&&si(z,Le),we}function ot(z,P,H,te){if(typeof H=="object"&&H!==null&&H.type===q&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case N:e:{for(var we=H.key;P!==null;){if(P.key===we){if(we=H.type,we===q){if(P.tag===7){o(z,P.sibling),te=f(P,H.props.children),te.return=z,z=te;break e}}else if(P.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===A&&aa(we)===P.type){o(z,P.sibling),te=f(P,H.props),Yl(te,H),te.return=z,z=te;break e}o(z,P);break}else i(z,P);P=P.sibling}H.type===q?(te=ta(H.props.children,z.mode,te,H.key),te.return=z,z=te):(te=rh(H.type,H.key,H.props,null,z.mode,te),Yl(te,H),te.return=z,z=te)}return _(z);case K:e:{for(we=H.key;P!==null;){if(P.key===we)if(P.tag===4&&P.stateNode.containerInfo===H.containerInfo&&P.stateNode.implementation===H.implementation){o(z,P.sibling),te=f(P,H.children||[]),te.return=z,z=te;break e}else{o(z,P);break}else i(z,P);P=P.sibling}te=Hd(H,z.mode,te),te.return=z,z=te}return _(z);case A:return H=aa(H),ot(z,P,H,te)}if(je(H))return ve(z,P,H,te);if(k(H)){if(we=k(H),typeof we!="function")throw Error(r(150));return H=we.call(H),Re(z,P,H,te)}if(typeof H.then=="function")return ot(z,P,ch(H),te);if(H.$$typeof===Z)return ot(z,P,ah(z,H),te);hh(z,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,P!==null&&P.tag===6?(o(z,P.sibling),te=f(P,H),te.return=z,z=te):(o(z,P),te=Fd(H,z.mode,te),te.return=z,z=te),_(z)):o(z,P)}return function(z,P,H,te){try{$l=0;var we=ot(z,P,H,te);return fo=null,we}catch(Ee){if(Ee===ho||Ee===lh)throw Ee;var Ye=xn(29,Ee,null,z.mode);return Ye.lanes=te,Ye.return=z,Ye}}}var la=C_(!0),N_=C_(!1),Xi=!1;function nm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rm(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ji(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Wi(n,i,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(We&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,i=nh(n),d_(n,null,o),i}return th(n,u,i,o),nh(n)}function Xl(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,wl(n,o)}}function im(n,i){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=_:m=m.next=_,o=o.next}while(o!==null);m===null?f=m=i:m=m.next=i}else f=m=i;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var sm=!1;function Jl(){if(sm){var n=co;if(n!==null)throw n}}function Wl(n,i,o,u){sm=!1;var f=n.updateQueue;Xi=!1;var m=f.firstBaseUpdate,_=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var D=T,G=D.next;D.next=null,_===null?m=G:_.next=G,_=D;var W=n.alternate;W!==null&&(W=W.updateQueue,T=W.lastBaseUpdate,T!==_&&(T===null?W.firstBaseUpdate=G:T.next=G,W.lastBaseUpdate=D))}if(m!==null){var re=f.baseState;_=0,W=G=D=null,T=m;do{var Q=T.lane&-536870913,Y=Q!==T.lane;if(Y?(Fe&Q)===Q:(u&Q)===Q){Q!==0&&Q===uo&&(sm=!0),W!==null&&(W=W.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var ve=n,Re=T;Q=i;var ot=o;switch(Re.tag){case 1:if(ve=Re.payload,typeof ve=="function"){re=ve.call(ot,re,Q);break e}re=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Re.payload,Q=typeof ve=="function"?ve.call(ot,re,Q):ve,Q==null)break e;re=E({},re,Q);break e;case 2:Xi=!0}}Q=T.callback,Q!==null&&(n.flags|=64,Y&&(n.flags|=8192),Y=f.callbacks,Y===null?f.callbacks=[Q]:Y.push(Q))}else Y={lane:Q,tag:T.tag,payload:T.payload,callback:T.callback,next:null},W===null?(G=W=Y,D=re):W=W.next=Y,_|=Q;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;Y=T,T=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);W===null&&(D=re),f.baseState=D,f.firstBaseUpdate=G,f.lastBaseUpdate=W,m===null&&(f.shared.lanes=0),rs|=_,n.lanes=_,n.memoizedState=re}}function D_(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function V_(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)D_(o[n],i)}var mo=V(null),fh=V(0);function O_(n,i){n=gi,he(fh,n),he(mo,i),gi=n|i.baseLanes}function am(){he(fh,gi),he(mo,mo.current)}function om(){gi=fh.current,X(mo),X(fh)}var In=V(null),Yn=null;function Zi(n){var i=n.alternate;he(Rt,Rt.current&1),he(In,n),Yn===null&&(i===null||mo.current!==null||i.memoizedState!==null)&&(Yn=n)}function lm(n){he(Rt,Rt.current),he(In,n),Yn===null&&(Yn=n)}function M_(n){n.tag===22?(he(Rt,Rt.current),he(In,n),Yn===null&&(Yn=n)):es()}function es(){he(Rt,Rt.current),he(In,In.current)}function Rn(n){X(In),Yn===n&&(Yn=null),X(Rt)}var Rt=V(0);function dh(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||mp(o)||pp(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var li=0,Pe=null,st=null,Lt=null,mh=!1,po=!1,ua=!1,ph=0,Zl=0,go=null,MA=0;function wt(){throw Error(r(321))}function um(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!An(n[o],i[o]))return!1;return!0}function cm(n,i,o,u,f,m){return li=m,Pe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,j.H=n===null||n.memoizedState===null?yv:Am,ua=!1,m=o(u,f),ua=!1,po&&(m=P_(i,o,u,f)),k_(n),m}function k_(n){j.H=nu;var i=st!==null&&st.next!==null;if(li=0,Lt=st=Pe=null,mh=!1,Zl=0,go=null,i)throw Error(r(300));n===null||zt||(n=n.dependencies,n!==null&&sh(n)&&(zt=!0))}function P_(n,i,o,u){Pe=n;var f=0;do{if(po&&(go=null),Zl=0,po=!1,25<=f)throw Error(r(301));if(f+=1,Lt=st=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}j.H=_v,m=i(o,u)}while(po);return m}function kA(){var n=j.H,i=n.useState()[0];return i=typeof i.then=="function"?eu(i):i,n=n.useState()[0],(st!==null?st.memoizedState:null)!==n&&(Pe.flags|=1024),i}function hm(){var n=ph!==0;return ph=0,n}function fm(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function dm(n){if(mh){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}mh=!1}li=0,Lt=st=Pe=null,po=!1,Zl=ph=0,go=null}function fn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?Pe.memoizedState=Lt=n:Lt=Lt.next=n,Lt}function Ct(){if(st===null){var n=Pe.alternate;n=n!==null?n.memoizedState:null}else n=st.next;var i=Lt===null?Pe.memoizedState:Lt.next;if(i!==null)Lt=i,st=n;else{if(n===null)throw Pe.alternate===null?Error(r(467)):Error(r(310));st=n,n={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},Lt===null?Pe.memoizedState=Lt=n:Lt=Lt.next=n}return Lt}function gh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function eu(n){var i=Zl;return Zl+=1,go===null&&(go=[]),n=x_(go,n,i),i=Pe,(Lt===null?i.memoizedState:Lt.next)===null&&(i=i.alternate,j.H=i===null||i.memoizedState===null?yv:Am),n}function yh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return eu(n);if(n.$$typeof===Z)return en(n)}throw Error(r(438,String(n)))}function mm(n){var i=null,o=Pe.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=Pe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=gh(),Pe.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),u=0;u<n;u++)o[u]=M;return i.index++,o}function ui(n,i){return typeof i=="function"?i(n):i}function _h(n){var i=Ct();return pm(i,st,n)}function pm(n,i,o){var u=n.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var f=n.baseQueue,m=u.pending;if(m!==null){if(f!==null){var _=f.next;f.next=m.next,m.next=_}i.baseQueue=f=m,u.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{i=f.next;var T=_=null,D=null,G=i,W=!1;do{var re=G.lane&-536870913;if(re!==G.lane?(Fe&re)===re:(li&re)===re){var Q=G.revertLane;if(Q===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),re===uo&&(W=!0);else if((li&Q)===Q){G=G.next,Q===uo&&(W=!0);continue}else re={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},D===null?(T=D=re,_=m):D=D.next=re,Pe.lanes|=Q,rs|=Q;re=G.action,ua&&o(m,re),m=G.hasEagerState?G.eagerState:o(m,re)}else Q={lane:re,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},D===null?(T=D=Q,_=m):D=D.next=Q,Pe.lanes|=re,rs|=re;G=G.next}while(G!==null&&G!==i);if(D===null?_=m:D.next=T,!An(m,n.memoizedState)&&(zt=!0,W&&(o=co,o!==null)))throw o;n.memoizedState=m,n.baseState=_,n.baseQueue=D,u.lastRenderedState=m}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function gm(n){var i=Ct(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,m=i.memoizedState;if(f!==null){o.pending=null;var _=f=f.next;do m=n(m,_.action),_=_.next;while(_!==f);An(m,i.memoizedState)||(zt=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),o.lastRenderedState=m}return[m,u]}function L_(n,i,o){var u=Pe,f=Ct(),m=Ke;if(m){if(o===void 0)throw Error(r(407));o=o()}else o=i();var _=!An((st||f).memoizedState,o);if(_&&(f.memoizedState=o,zt=!0),f=f.queue,vm(j_.bind(null,u,f,n),[n]),f.getSnapshot!==i||_||Lt!==null&&Lt.memoizedState.tag&1){if(u.flags|=2048,yo(9,{destroy:void 0},U_.bind(null,u,f,o,i),null),ht===null)throw Error(r(349));m||(li&127)!==0||z_(u,i,o)}return o}function z_(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=Pe.updateQueue,i===null?(i=gh(),Pe.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function U_(n,i,o,u){i.value=o,i.getSnapshot=u,B_(i)&&q_(n)}function j_(n,i,o){return o(function(){B_(i)&&q_(n)})}function B_(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!An(n,o)}catch{return!0}}function q_(n){var i=ea(n,2);i!==null&&bn(i,n,2)}function ym(n){var i=fn();if(typeof n=="function"){var o=n;if(n=o(),ua){Un(!0);try{o()}finally{Un(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:n},i}function F_(n,i,o,u){return n.baseState=o,pm(n,st,typeof u=="function"?u:ui)}function PA(n,i,o,u,f){if(Eh(n))throw Error(r(485));if(n=i.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};j.T!==null?o(!0):m.isTransition=!1,u(m),o=i.pending,o===null?(m.next=i.pending=m,H_(i,m)):(m.next=o.next,i.pending=o.next=m)}}function H_(n,i){var o=i.action,u=i.payload,f=n.state;if(i.isTransition){var m=j.T,_={};j.T=_;try{var T=o(f,u),D=j.S;D!==null&&D(_,T),G_(n,i,T)}catch(G){_m(n,i,G)}finally{m!==null&&_.types!==null&&(m.types=_.types),j.T=m}}else try{m=o(f,u),G_(n,i,m)}catch(G){_m(n,i,G)}}function G_(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){K_(n,i,u)},function(u){return _m(n,i,u)}):K_(n,i,o)}function K_(n,i,o){i.status="fulfilled",i.value=o,Q_(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,H_(n,o)))}function _m(n,i,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,Q_(i),i=i.next;while(i!==u)}n.action=null}function Q_(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function $_(n,i){return i}function Y_(n,i){if(Ke){var o=ht.formState;if(o!==null){e:{var u=Pe;if(Ke){if(dt){t:{for(var f=dt,m=$n;f.nodeType!==8;){if(!m){f=null;break t}if(f=Xn(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){dt=Xn(f.nextSibling),u=f.data==="F!";break e}}$i(u)}u=!1}u&&(i=o[0])}}return o=fn(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$_,lastRenderedState:i},o.queue=u,o=mv.bind(null,Pe,u),u.dispatch=o,u=ym(!1),m=Sm.bind(null,Pe,!1,u.queue),u=fn(),f={state:i,dispatch:null,action:n,pending:null},u.queue=f,o=PA.bind(null,Pe,f,m,o),f.dispatch=o,u.memoizedState=n,[i,o,!1]}function X_(n){var i=Ct();return J_(i,st,n)}function J_(n,i,o){if(i=pm(n,i,$_)[0],n=_h(ui)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=eu(i)}catch(_){throw _===ho?lh:_}else u=i;i=Ct();var f=i.queue,m=f.dispatch;return o!==i.memoizedState&&(Pe.flags|=2048,yo(9,{destroy:void 0},LA.bind(null,f,o),null)),[u,m,n]}function LA(n,i){n.action=i}function W_(n){var i=Ct(),o=st;if(o!==null)return J_(i,o,n);Ct(),i=i.memoizedState,o=Ct();var u=o.queue.dispatch;return o.memoizedState=n,[i,u,!1]}function yo(n,i,o,u){return n={tag:n,create:o,deps:u,inst:i,next:null},i=Pe.updateQueue,i===null&&(i=gh(),Pe.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,i.lastEffect=n),n}function Z_(){return Ct().memoizedState}function vh(n,i,o,u){var f=fn();Pe.flags|=n,f.memoizedState=yo(1|i,{destroy:void 0},o,u===void 0?null:u)}function bh(n,i,o,u){var f=Ct();u=u===void 0?null:u;var m=f.memoizedState.inst;st!==null&&u!==null&&um(u,st.memoizedState.deps)?f.memoizedState=yo(i,m,o,u):(Pe.flags|=n,f.memoizedState=yo(1|i,m,o,u))}function ev(n,i){vh(8390656,8,n,i)}function vm(n,i){bh(2048,8,n,i)}function zA(n){Pe.flags|=4;var i=Pe.updateQueue;if(i===null)i=gh(),Pe.updateQueue=i,i.events=[n];else{var o=i.events;o===null?i.events=[n]:o.push(n)}}function tv(n){var i=Ct().memoizedState;return zA({ref:i,nextImpl:n}),function(){if((We&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function nv(n,i){return bh(4,2,n,i)}function rv(n,i){return bh(4,4,n,i)}function iv(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function sv(n,i,o){o=o!=null?o.concat([n]):null,bh(4,4,iv.bind(null,i,n),o)}function bm(){}function av(n,i){var o=Ct();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&um(i,u[1])?u[0]:(o.memoizedState=[n,i],n)}function ov(n,i){var o=Ct();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&um(i,u[1]))return u[0];if(u=n(),ua){Un(!0);try{n()}finally{Un(!1)}}return o.memoizedState=[u,i],u}function Em(n,i,o){return o===void 0||(li&1073741824)!==0&&(Fe&261930)===0?n.memoizedState=i:(n.memoizedState=o,n=l0(),Pe.lanes|=n,rs|=n,o)}function lv(n,i,o,u){return An(o,i)?o:mo.current!==null?(n=Em(n,o,u),An(n,i)||(zt=!0),n):(li&42)===0||(li&1073741824)!==0&&(Fe&261930)===0?(zt=!0,n.memoizedState=o):(n=l0(),Pe.lanes|=n,rs|=n,i)}function uv(n,i,o,u,f){var m=ae.p;ae.p=m!==0&&8>m?m:8;var _=j.T,T={};j.T=T,Sm(n,!1,i,o);try{var D=f(),G=j.S;if(G!==null&&G(T,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var W=OA(D,u);tu(n,i,W,Dn(n))}else tu(n,i,u,Dn(n))}catch(re){tu(n,i,{then:function(){},status:"rejected",reason:re},Dn())}finally{ae.p=m,_!==null&&T.types!==null&&(_.types=T.types),j.T=_}}function UA(){}function Tm(n,i,o,u){if(n.tag!==5)throw Error(r(476));var f=cv(n).queue;uv(n,f,i,ee,o===null?UA:function(){return hv(n),o(u)})}function cv(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:ee},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function hv(n){var i=cv(n);i.next===null&&(i=n.alternate.memoizedState),tu(n,i.next.queue,{},Dn())}function wm(){return en(_u)}function fv(){return Ct().memoizedState}function dv(){return Ct().memoizedState}function jA(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=Dn();n=Ji(o);var u=Wi(i,n,o);u!==null&&(bn(u,i,o),Xl(u,i,o)),i={cache:Wd()},n.payload=i;return}i=i.return}}function BA(n,i,o){var u=Dn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Eh(n)?pv(i,o):(o=Bd(n,i,o,u),o!==null&&(bn(o,n,u),gv(o,i,u)))}function mv(n,i,o){var u=Dn();tu(n,i,o,u)}function tu(n,i,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Eh(n))pv(i,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var _=i.lastRenderedState,T=m(_,o);if(f.hasEagerState=!0,f.eagerState=T,An(T,_))return th(n,i,f,0),ht===null&&eh(),!1}catch{}if(o=Bd(n,i,f,u),o!==null)return bn(o,n,u),gv(o,i,u),!0}return!1}function Sm(n,i,o,u){if(u={lane:2,revertLane:np(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Eh(n)){if(i)throw Error(r(479))}else i=Bd(n,o,u,2),i!==null&&bn(i,n,2)}function Eh(n){var i=n.alternate;return n===Pe||i!==null&&i===Pe}function pv(n,i){po=mh=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function gv(n,i,o){if((o&4194048)!==0){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,wl(n,o)}}var nu={readContext:en,use:yh,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useLayoutEffect:wt,useInsertionEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useSyncExternalStore:wt,useId:wt,useHostTransitionStatus:wt,useFormState:wt,useActionState:wt,useOptimistic:wt,useMemoCache:wt,useCacheRefresh:wt};nu.useEffectEvent=wt;var yv={readContext:en,use:yh,useCallback:function(n,i){return fn().memoizedState=[n,i===void 0?null:i],n},useContext:en,useEffect:ev,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,vh(4194308,4,iv.bind(null,i,n),o)},useLayoutEffect:function(n,i){return vh(4194308,4,n,i)},useInsertionEffect:function(n,i){vh(4,2,n,i)},useMemo:function(n,i){var o=fn();i=i===void 0?null:i;var u=n();if(ua){Un(!0);try{n()}finally{Un(!1)}}return o.memoizedState=[u,i],u},useReducer:function(n,i,o){var u=fn();if(o!==void 0){var f=o(i);if(ua){Un(!0);try{o(i)}finally{Un(!1)}}}else f=i;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=BA.bind(null,Pe,n),[u.memoizedState,n]},useRef:function(n){var i=fn();return n={current:n},i.memoizedState=n},useState:function(n){n=ym(n);var i=n.queue,o=mv.bind(null,Pe,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:bm,useDeferredValue:function(n,i){var o=fn();return Em(o,n,i)},useTransition:function(){var n=ym(!1);return n=uv.bind(null,Pe,n.queue,!0,!1),fn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var u=Pe,f=fn();if(Ke){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),ht===null)throw Error(r(349));(Fe&127)!==0||z_(u,i,o)}f.memoizedState=o;var m={value:o,getSnapshot:i};return f.queue=m,ev(j_.bind(null,u,m,n),[n]),u.flags|=2048,yo(9,{destroy:void 0},U_.bind(null,u,m,o,i),null),o},useId:function(){var n=fn(),i=ht.identifierPrefix;if(Ke){var o=Ur,u=zr;o=(u&~(1<<32-xt(u)-1)).toString(32)+o,i="_"+i+"R_"+o,o=ph++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=MA++,i="_"+i+"r_"+o.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:wm,useFormState:Y_,useActionState:Y_,useOptimistic:function(n){var i=fn();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Sm.bind(null,Pe,!0,o),o.dispatch=i,[n,i]},useMemoCache:mm,useCacheRefresh:function(){return fn().memoizedState=jA.bind(null,Pe)},useEffectEvent:function(n){var i=fn(),o={impl:n};return i.memoizedState=o,function(){if((We&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},Am={readContext:en,use:yh,useCallback:av,useContext:en,useEffect:vm,useImperativeHandle:sv,useInsertionEffect:nv,useLayoutEffect:rv,useMemo:ov,useReducer:_h,useRef:Z_,useState:function(){return _h(ui)},useDebugValue:bm,useDeferredValue:function(n,i){var o=Ct();return lv(o,st.memoizedState,n,i)},useTransition:function(){var n=_h(ui)[0],i=Ct().memoizedState;return[typeof n=="boolean"?n:eu(n),i]},useSyncExternalStore:L_,useId:fv,useHostTransitionStatus:wm,useFormState:X_,useActionState:X_,useOptimistic:function(n,i){var o=Ct();return F_(o,st,n,i)},useMemoCache:mm,useCacheRefresh:dv};Am.useEffectEvent=tv;var _v={readContext:en,use:yh,useCallback:av,useContext:en,useEffect:vm,useImperativeHandle:sv,useInsertionEffect:nv,useLayoutEffect:rv,useMemo:ov,useReducer:gm,useRef:Z_,useState:function(){return gm(ui)},useDebugValue:bm,useDeferredValue:function(n,i){var o=Ct();return st===null?Em(o,n,i):lv(o,st.memoizedState,n,i)},useTransition:function(){var n=gm(ui)[0],i=Ct().memoizedState;return[typeof n=="boolean"?n:eu(n),i]},useSyncExternalStore:L_,useId:fv,useHostTransitionStatus:wm,useFormState:W_,useActionState:W_,useOptimistic:function(n,i){var o=Ct();return st!==null?F_(o,st,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:mm,useCacheRefresh:dv};_v.useEffectEvent=tv;function xm(n,i,o,u){i=n.memoizedState,o=o(u,i),o=o==null?i:E({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Im={enqueueSetState:function(n,i,o){n=n._reactInternals;var u=Dn(),f=Ji(u);f.payload=i,o!=null&&(f.callback=o),i=Wi(n,f,u),i!==null&&(bn(i,n,u),Xl(i,n,u))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var u=Dn(),f=Ji(u);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=Wi(n,f,u),i!==null&&(bn(i,n,u),Xl(i,n,u))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=Dn(),u=Ji(o);u.tag=2,i!=null&&(u.callback=i),i=Wi(n,u,o),i!==null&&(bn(i,n,o),Xl(i,n,o))}};function vv(n,i,o,u,f,m,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,_):i.prototype&&i.prototype.isPureReactComponent?!ql(o,u)||!ql(f,m):!0}function bv(n,i,o,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==n&&Im.enqueueReplaceState(i,i.state,null)}function ca(n,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(n=n.defaultProps){o===i&&(o=E({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}function Ev(n){Zc(n)}function Tv(n){console.error(n)}function wv(n){Zc(n)}function Th(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function Sv(n,i,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Rm(n,i,o){return o=Ji(o),o.tag=3,o.payload={element:null},o.callback=function(){Th(n,i)},o}function Av(n){return n=Ji(n),n.tag=3,n}function xv(n,i,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;n.payload=function(){return f(m)},n.callback=function(){Sv(i,o,u)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){Sv(i,o,u),typeof f!="function"&&(is===null?is=new Set([this]):is.add(this));var T=u.stack;this.componentDidCatch(u.value,{componentStack:T!==null?T:""})})}function qA(n,i,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&lo(i,o,f,!0),o=In.current,o!==null){switch(o.tag){case 31:case 13:return Yn===null?Mh():o.alternate===null&&St===0&&(St=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===uh?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),Zm(n,u,f)),!1;case 22:return o.flags|=65536,u===uh?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),Zm(n,u,f)),!1}throw Error(r(435,o.tag))}return Zm(n,u,f),Mh(),!1}if(Ke)return i=In.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,u!==Qd&&(n=Error(r(422),{cause:u}),Gl(Gn(n,o)))):(u!==Qd&&(i=Error(r(423),{cause:u}),Gl(Gn(i,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=Gn(u,o),f=Rm(n.stateNode,u,f),im(n,f),St!==4&&(St=2)),!1;var m=Error(r(520),{cause:u});if(m=Gn(m,o),cu===null?cu=[m]:cu.push(m),St!==4&&(St=2),i===null)return!0;u=Gn(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=Rm(o.stateNode,u,n),im(o,n),!1;case 1:if(i=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(is===null||!is.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Av(f),xv(f,n,o,u),im(o,f),!1}o=o.return}while(o!==null);return!1}var Cm=Error(r(461)),zt=!1;function tn(n,i,o,u){i.child=n===null?N_(i,null,o,u):la(i,n.child,o,u)}function Iv(n,i,o,u,f){o=o.render;var m=i.ref;if("ref"in u){var _={};for(var T in u)T!=="ref"&&(_[T]=u[T])}else _=u;return ia(i),u=cm(n,i,o,_,m,f),T=hm(),n!==null&&!zt?(fm(n,i,f),ci(n,i,f)):(Ke&&T&&Gd(i),i.flags|=1,tn(n,i,u,f),i.child)}function Rv(n,i,o,u,f){if(n===null){var m=o.type;return typeof m=="function"&&!qd(m)&&m.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=m,Cv(n,i,m,u,f)):(n=rh(o.type,null,u,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(m=n.child,!Lm(n,f)){var _=m.memoizedProps;if(o=o.compare,o=o!==null?o:ql,o(_,u)&&n.ref===i.ref)return ci(n,i,f)}return i.flags|=1,n=ii(m,u),n.ref=i.ref,n.return=i,i.child=n}function Cv(n,i,o,u,f){if(n!==null){var m=n.memoizedProps;if(ql(m,u)&&n.ref===i.ref)if(zt=!1,i.pendingProps=u=m,Lm(n,f))(n.flags&131072)!==0&&(zt=!0);else return i.lanes=n.lanes,ci(n,i,f)}return Nm(n,i,o,u,f)}function Nv(n,i,o,u){var f=u.children,m=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,n!==null){for(u=i.child=n.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~m}else u=0,i.child=null;return Dv(n,i,m,o,u)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&oh(i,m!==null?m.cachePool:null),m!==null?O_(i,m):am(),M_(i);else return u=i.lanes=536870912,Dv(n,i,m!==null?m.baseLanes|o:o,o,u)}else m!==null?(oh(i,m.cachePool),O_(i,m),es(),i.memoizedState=null):(n!==null&&oh(i,null),am(),es());return tn(n,i,f,o),i.child}function ru(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Dv(n,i,o,u,f){var m=em();return m=m===null?null:{parent:Pt._currentValue,pool:m},i.memoizedState={baseLanes:o,cachePool:m},n!==null&&oh(i,null),am(),M_(i),n!==null&&lo(n,i,u,!0),i.childLanes=f,null}function wh(n,i){return i=Ah({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function Vv(n,i,o){return la(i,n.child,null,o),n=wh(i,i.pendingProps),n.flags|=2,Rn(i),i.memoizedState=null,n}function FA(n,i,o){var u=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(Ke){if(u.mode==="hidden")return n=wh(i,u),i.lanes=536870912,ru(null,n);if(lm(i),(n=dt)?(n=H0(n,$n),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Ki!==null?{id:zr,overflow:Ur}:null,retryLane:536870912,hydrationErrors:null},o=p_(n),o.return=i,i.child=o,Zt=i,dt=null)):n=null,n===null)throw $i(i);return i.lanes=536870912,null}return wh(i,u)}var m=n.memoizedState;if(m!==null){var _=m.dehydrated;if(lm(i),f)if(i.flags&256)i.flags&=-257,i=Vv(n,i,o);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(r(558));else if(zt||lo(n,i,o,!1),f=(o&n.childLanes)!==0,zt||f){if(u=ht,u!==null&&(_=Sl(u,o),_!==0&&_!==m.retryLane))throw m.retryLane=_,ea(n,_),bn(u,n,_),Cm;Mh(),i=Vv(n,i,o)}else n=m.treeContext,dt=Xn(_.nextSibling),Zt=i,Ke=!0,Qi=null,$n=!1,n!==null&&__(i,n),i=wh(i,u),i.flags|=4096;return i}return n=ii(n.child,{mode:u.mode,children:u.children}),n.ref=i.ref,i.child=n,n.return=i,n}function Sh(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function Nm(n,i,o,u,f){return ia(i),o=cm(n,i,o,u,void 0,f),u=hm(),n!==null&&!zt?(fm(n,i,f),ci(n,i,f)):(Ke&&u&&Gd(i),i.flags|=1,tn(n,i,o,f),i.child)}function Ov(n,i,o,u,f,m){return ia(i),i.updateQueue=null,o=P_(i,u,o,f),k_(n),u=hm(),n!==null&&!zt?(fm(n,i,m),ci(n,i,m)):(Ke&&u&&Gd(i),i.flags|=1,tn(n,i,o,m),i.child)}function Mv(n,i,o,u,f){if(ia(i),i.stateNode===null){var m=io,_=o.contextType;typeof _=="object"&&_!==null&&(m=en(_)),m=new o(u,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Im,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=u,m.state=i.memoizedState,m.refs={},nm(i),_=o.contextType,m.context=typeof _=="object"&&_!==null?en(_):io,m.state=i.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(xm(i,o,_,u),m.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&Im.enqueueReplaceState(m,m.state,null),Wl(i,u,m,f),Jl(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(n===null){m=i.stateNode;var T=i.memoizedProps,D=ca(o,T);m.props=D;var G=m.context,W=o.contextType;_=io,typeof W=="object"&&W!==null&&(_=en(W));var re=o.getDerivedStateFromProps;W=typeof re=="function"||typeof m.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,W||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T||G!==_)&&bv(i,m,u,_),Xi=!1;var Q=i.memoizedState;m.state=Q,Wl(i,u,m,f),Jl(),G=i.memoizedState,T||Q!==G||Xi?(typeof re=="function"&&(xm(i,o,re,u),G=i.memoizedState),(D=Xi||vv(i,o,D,u,Q,G,_))?(W||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=G),m.props=u,m.state=G,m.context=_,u=D):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{m=i.stateNode,rm(n,i),_=i.memoizedProps,W=ca(o,_),m.props=W,re=i.pendingProps,Q=m.context,G=o.contextType,D=io,typeof G=="object"&&G!==null&&(D=en(G)),T=o.getDerivedStateFromProps,(G=typeof T=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==re||Q!==D)&&bv(i,m,u,D),Xi=!1,Q=i.memoizedState,m.state=Q,Wl(i,u,m,f),Jl();var Y=i.memoizedState;_!==re||Q!==Y||Xi||n!==null&&n.dependencies!==null&&sh(n.dependencies)?(typeof T=="function"&&(xm(i,o,T,u),Y=i.memoizedState),(W=Xi||vv(i,o,W,u,Q,Y,D)||n!==null&&n.dependencies!==null&&sh(n.dependencies))?(G||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,Y,D),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,Y,D)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&Q===n.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&Q===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=Y),m.props=u,m.state=Y,m.context=D,u=W):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&Q===n.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&Q===n.memoizedState||(i.flags|=1024),u=!1)}return m=u,Sh(n,i),u=(i.flags&128)!==0,m||u?(m=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,n!==null&&u?(i.child=la(i,n.child,null,f),i.child=la(i,null,o,f)):tn(n,i,o,f),i.memoizedState=m.state,n=i.child):n=ci(n,i,f),n}function kv(n,i,o,u){return na(),i.flags|=256,tn(n,i,o,u),i.child}var Dm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vm(n){return{baseLanes:n,cachePool:S_()}}function Om(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=Nn),n}function Pv(n,i,o){var u=i.pendingProps,f=!1,m=(i.flags&128)!==0,_;if((_=m)||(_=n!==null&&n.memoizedState===null?!1:(Rt.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,n===null){if(Ke){if(f?Zi(i):es(),(n=dt)?(n=H0(n,$n),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Ki!==null?{id:zr,overflow:Ur}:null,retryLane:536870912,hydrationErrors:null},o=p_(n),o.return=i,i.child=o,Zt=i,dt=null)):n=null,n===null)throw $i(i);return pp(n)?i.lanes=32:i.lanes=536870912,null}var T=u.children;return u=u.fallback,f?(es(),f=i.mode,T=Ah({mode:"hidden",children:T},f),u=ta(u,f,o,null),T.return=i,u.return=i,T.sibling=u,i.child=T,u=i.child,u.memoizedState=Vm(o),u.childLanes=Om(n,_,o),i.memoizedState=Dm,ru(null,u)):(Zi(i),Mm(i,T))}var D=n.memoizedState;if(D!==null&&(T=D.dehydrated,T!==null)){if(m)i.flags&256?(Zi(i),i.flags&=-257,i=km(n,i,o)):i.memoizedState!==null?(es(),i.child=n.child,i.flags|=128,i=null):(es(),T=u.fallback,f=i.mode,u=Ah({mode:"visible",children:u.children},f),T=ta(T,f,o,null),T.flags|=2,u.return=i,T.return=i,u.sibling=T,i.child=u,la(i,n.child,null,o),u=i.child,u.memoizedState=Vm(o),u.childLanes=Om(n,_,o),i.memoizedState=Dm,i=ru(null,u));else if(Zi(i),pp(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var G=_.dgst;_=G,u=Error(r(419)),u.stack="",u.digest=_,Gl({value:u,source:null,stack:null}),i=km(n,i,o)}else if(zt||lo(n,i,o,!1),_=(o&n.childLanes)!==0,zt||_){if(_=ht,_!==null&&(u=Sl(_,o),u!==0&&u!==D.retryLane))throw D.retryLane=u,ea(n,u),bn(_,n,u),Cm;mp(T)||Mh(),i=km(n,i,o)}else mp(T)?(i.flags|=192,i.child=n.child,i=null):(n=D.treeContext,dt=Xn(T.nextSibling),Zt=i,Ke=!0,Qi=null,$n=!1,n!==null&&__(i,n),i=Mm(i,u.children),i.flags|=4096);return i}return f?(es(),T=u.fallback,f=i.mode,D=n.child,G=D.sibling,u=ii(D,{mode:"hidden",children:u.children}),u.subtreeFlags=D.subtreeFlags&65011712,G!==null?T=ii(G,T):(T=ta(T,f,o,null),T.flags|=2),T.return=i,u.return=i,u.sibling=T,i.child=u,ru(null,u),u=i.child,T=n.child.memoizedState,T===null?T=Vm(o):(f=T.cachePool,f!==null?(D=Pt._currentValue,f=f.parent!==D?{parent:D,pool:D}:f):f=S_(),T={baseLanes:T.baseLanes|o,cachePool:f}),u.memoizedState=T,u.childLanes=Om(n,_,o),i.memoizedState=Dm,ru(n.child,u)):(Zi(i),o=n.child,n=o.sibling,o=ii(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,n!==null&&(_=i.deletions,_===null?(i.deletions=[n],i.flags|=16):_.push(n)),i.child=o,i.memoizedState=null,o)}function Mm(n,i){return i=Ah({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Ah(n,i){return n=xn(22,n,null,i),n.lanes=0,n}function km(n,i,o){return la(i,n.child,null,o),n=Mm(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Lv(n,i,o){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),Xd(n.return,i,o)}function Pm(n,i,o,u,f,m){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:m}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=o,_.tailMode=f,_.treeForkCount=m)}function zv(n,i,o){var u=i.pendingProps,f=u.revealOrder,m=u.tail;u=u.children;var _=Rt.current,T=(_&2)!==0;if(T?(_=_&1|2,i.flags|=128):_&=1,he(Rt,_),tn(n,i,u,o),u=Ke?Hl:0,!T&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Lv(n,o,i);else if(n.tag===19)Lv(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(o=i.child,f=null;o!==null;)n=o.alternate,n!==null&&dh(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),Pm(i,!1,f,o,m,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&dh(n)===null){i.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}Pm(i,!0,o,null,m,u);break;case"together":Pm(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function ci(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),rs|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(lo(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,o=ii(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=ii(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function Lm(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&sh(n)))}function HA(n,i,o){switch(i.tag){case 3:_t(i,i.stateNode.containerInfo),Yi(i,Pt,n.memoizedState.cache),na();break;case 27:case 5:tr(i);break;case 4:_t(i,i.stateNode.containerInfo);break;case 10:Yi(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,lm(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Zi(i),i.flags|=128,null):(o&i.child.childLanes)!==0?Pv(n,i,o):(Zi(i),n=ci(n,i,o),n!==null?n.sibling:null);Zi(i);break;case 19:var f=(n.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(lo(n,i,o,!1),u=(o&i.childLanes)!==0),f){if(u)return zv(n,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),he(Rt,Rt.current),u)break;return null;case 22:return i.lanes=0,Nv(n,i,o,i.pendingProps);case 24:Yi(i,Pt,n.memoizedState.cache)}return ci(n,i,o)}function Uv(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)zt=!0;else{if(!Lm(n,o)&&(i.flags&128)===0)return zt=!1,HA(n,i,o);zt=(n.flags&131072)!==0}else zt=!1,Ke&&(i.flags&1048576)!==0&&y_(i,Hl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(n=aa(i.elementType),i.type=n,typeof n=="function")qd(n)?(u=ca(n,u),i.tag=1,i=Mv(null,i,n,u,o)):(i.tag=0,i=Nm(null,i,n,u,o));else{if(n!=null){var f=n.$$typeof;if(f===le){i.tag=11,i=Iv(null,i,n,u,o);break e}else if(f===w){i.tag=14,i=Rv(null,i,n,u,o);break e}}throw i=Ae(n)||n,Error(r(306,i,""))}}return i;case 0:return Nm(n,i,i.type,i.pendingProps,o);case 1:return u=i.type,f=ca(u,i.pendingProps),Mv(n,i,u,f,o);case 3:e:{if(_t(i,i.stateNode.containerInfo),n===null)throw Error(r(387));u=i.pendingProps;var m=i.memoizedState;f=m.element,rm(n,i),Wl(i,u,null,o);var _=i.memoizedState;if(u=_.cache,Yi(i,Pt,u),u!==m.cache&&Jd(i,[Pt],o,!0),Jl(),u=_.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=kv(n,i,u,o);break e}else if(u!==f){f=Gn(Error(r(424)),i),Gl(f),i=kv(n,i,u,o);break e}else for(n=i.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,dt=Xn(n.firstChild),Zt=i,Ke=!0,Qi=null,$n=!0,o=N_(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(na(),u===f){i=ci(n,i,o);break e}tn(n,i,u,o)}i=i.child}return i;case 26:return Sh(n,i),n===null?(o=X0(i.type,null,i.pendingProps,null))?i.memoizedState=o:Ke||(o=i.type,n=i.pendingProps,u=Bh(Ce.current).createElement(o),u[Ot]=i,u[Gt]=n,nn(u,o,n),Mt(u),i.stateNode=u):i.memoizedState=X0(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return tr(i),n===null&&Ke&&(u=i.stateNode=Q0(i.type,i.pendingProps,Ce.current),Zt=i,$n=!0,f=dt,ls(i.type)?(gp=f,dt=Xn(u.firstChild)):dt=f),tn(n,i,i.pendingProps.children,o),Sh(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Ke&&((f=u=dt)&&(u=bx(u,i.type,i.pendingProps,$n),u!==null?(i.stateNode=u,Zt=i,dt=Xn(u.firstChild),$n=!1,f=!0):f=!1),f||$i(i)),tr(i),f=i.type,m=i.pendingProps,_=n!==null?n.memoizedProps:null,u=m.children,hp(f,m)?u=null:_!==null&&hp(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=cm(n,i,kA,null,null,o),_u._currentValue=f),Sh(n,i),tn(n,i,u,o),i.child;case 6:return n===null&&Ke&&((n=o=dt)&&(o=Ex(o,i.pendingProps,$n),o!==null?(i.stateNode=o,Zt=i,dt=null,n=!0):n=!1),n||$i(i)),null;case 13:return Pv(n,i,o);case 4:return _t(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=la(i,null,u,o):tn(n,i,u,o),i.child;case 11:return Iv(n,i,i.type,i.pendingProps,o);case 7:return tn(n,i,i.pendingProps,o),i.child;case 8:return tn(n,i,i.pendingProps.children,o),i.child;case 12:return tn(n,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,Yi(i,i.type,u.value),tn(n,i,u.children,o),i.child;case 9:return f=i.type._context,u=i.pendingProps.children,ia(i),f=en(f),u=u(f),i.flags|=1,tn(n,i,u,o),i.child;case 14:return Rv(n,i,i.type,i.pendingProps,o);case 15:return Cv(n,i,i.type,i.pendingProps,o);case 19:return zv(n,i,o);case 31:return FA(n,i,o);case 22:return Nv(n,i,o,i.pendingProps);case 24:return ia(i),u=en(Pt),n===null?(f=em(),f===null&&(f=ht,m=Wd(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),i.memoizedState={parent:u,cache:f},nm(i),Yi(i,Pt,f)):((n.lanes&o)!==0&&(rm(n,i),Wl(i,null,null,o),Jl()),f=n.memoizedState,m=i.memoizedState,f.parent!==u?(f={parent:u,cache:u},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Yi(i,Pt,u)):(u=m.cache,Yi(i,Pt,u),u!==f.cache&&Jd(i,[Pt],o,!0))),tn(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function hi(n){n.flags|=4}function zm(n,i,o,u,f){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(f0())n.flags|=8192;else throw oa=uh,tm}else n.flags&=-16777217}function jv(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!tb(i))if(f0())n.flags|=8192;else throw oa=uh,tm}function xh(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Vc():536870912,n.lanes|=i,Eo|=i)}function iu(n,i){if(!Ke)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function mt(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(i)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,i}function GA(n,i,o){var u=i.pendingProps;switch(Kd(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(i),null;case 1:return mt(i),null;case 3:return o=i.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),oi(Pt),ct(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(oo(i)?hi(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,$d())),mt(i),null;case 26:var f=i.type,m=i.memoizedState;return n===null?(hi(i),m!==null?(mt(i),jv(i,m)):(mt(i),zm(i,f,null,u,o))):m?m!==n.memoizedState?(hi(i),mt(i),jv(i,m)):(mt(i),i.flags&=-16777217):(n=n.memoizedProps,n!==u&&hi(i),mt(i),zm(i,f,n,u,o)),null;case 27:if(Vi(i),o=Ce.current,f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&hi(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return mt(i),null}n=se.current,oo(i)?v_(i):(n=Q0(f,u,o),i.stateNode=n,hi(i))}return mt(i),null;case 5:if(Vi(i),f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&hi(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return mt(i),null}if(m=se.current,oo(i))v_(i);else{var _=Bh(Ce.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?_.createElement(f,{is:u.is}):_.createElement(f)}}m[Ot]=i,m[Gt]=u;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=m;e:switch(nn(m,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&hi(i)}}return mt(i),zm(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,o),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==u&&hi(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(r(166));if(n=Ce.current,oo(i)){if(n=i.stateNode,o=i.memoizedProps,u=null,f=Zt,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[Ot]=i,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||P0(n.nodeValue,o)),n||$i(i,!0)}else n=Bh(n).createTextNode(u),n[Ot]=i,i.stateNode=n}return mt(i),null;case 31:if(o=i.memoizedState,n===null||n.memoizedState!==null){if(u=oo(i),o!==null){if(n===null){if(!u)throw Error(r(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[Ot]=i}else na(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;mt(i),n=!1}else o=$d(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return i.flags&256?(Rn(i),i):(Rn(i),null);if((i.flags&128)!==0)throw Error(r(558))}return mt(i),null;case 13:if(u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=oo(i),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Ot]=i}else na(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;mt(i),f=!1}else f=$d(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Rn(i),i):(Rn(i),null)}return Rn(i),(i.flags&128)!==0?(i.lanes=o,i):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=i.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)),o!==n&&o&&(i.child.flags|=8192),xh(i,i.updateQueue),mt(i),null);case 4:return ct(),n===null&&ap(i.stateNode.containerInfo),mt(i),null;case 10:return oi(i.type),mt(i),null;case 19:if(X(Rt),u=i.memoizedState,u===null)return mt(i),null;if(f=(i.flags&128)!==0,m=u.rendering,m===null)if(f)iu(u,!1);else{if(St!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(m=dh(n),m!==null){for(i.flags|=128,iu(u,!1),n=m.updateQueue,i.updateQueue=n,xh(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)m_(o,n),o=o.sibling;return he(Rt,Rt.current&1|2),Ke&&si(i,u.treeForkCount),i.child}n=n.sibling}u.tail!==null&&Xt()>Dh&&(i.flags|=128,f=!0,iu(u,!1),i.lanes=4194304)}else{if(!f)if(n=dh(m),n!==null){if(i.flags|=128,f=!0,n=n.updateQueue,i.updateQueue=n,xh(i,n),iu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!Ke)return mt(i),null}else 2*Xt()-u.renderingStartTime>Dh&&o!==536870912&&(i.flags|=128,f=!0,iu(u,!1),i.lanes=4194304);u.isBackwards?(m.sibling=i.child,i.child=m):(n=u.last,n!==null?n.sibling=m:i.child=m,u.last=m)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Xt(),n.sibling=null,o=Rt.current,he(Rt,f?o&1|2:o&1),Ke&&si(i,u.treeForkCount),n):(mt(i),null);case 22:case 23:return Rn(i),om(),u=i.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(mt(i),i.subtreeFlags&6&&(i.flags|=8192)):mt(i),o=i.updateQueue,o!==null&&xh(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),n!==null&&X(sa),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),oi(Pt),mt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function KA(n,i){switch(Kd(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return oi(Pt),ct(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Vi(i),null;case 31:if(i.memoizedState!==null){if(Rn(i),i.alternate===null)throw Error(r(340));na()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(Rn(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));na()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return X(Rt),null;case 4:return ct(),null;case 10:return oi(i.type),null;case 22:case 23:return Rn(i),om(),n!==null&&X(sa),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return oi(Pt),null;case 25:return null;default:return null}}function Bv(n,i){switch(Kd(i),i.tag){case 3:oi(Pt),ct();break;case 26:case 27:case 5:Vi(i);break;case 4:ct();break;case 31:i.memoizedState!==null&&Rn(i);break;case 13:Rn(i);break;case 19:X(Rt);break;case 10:oi(i.type);break;case 22:case 23:Rn(i),om(),n!==null&&X(sa);break;case 24:oi(Pt)}}function su(n,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var m=o.create,_=o.inst;u=m(),_.destroy=u}o=o.next}while(o!==f)}}catch(T){tt(i,i.return,T)}}function ts(n,i,o){try{var u=i.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&n)===n){var _=u.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,f=i;var D=o,G=T;try{G()}catch(W){tt(f,D,W)}}}u=u.next}while(u!==m)}}catch(W){tt(i,i.return,W)}}function qv(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{V_(i,o)}catch(u){tt(n,n.return,u)}}}function Fv(n,i,o){o.props=ca(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){tt(n,i,u)}}function au(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){tt(n,i,f)}}function jr(n,i){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){tt(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){tt(n,i,f)}else o.current=null}function Hv(n){var i=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){tt(n,n.return,f)}}function Um(n,i,o){try{var u=n.stateNode;mx(u,n.type,o,i),u[Gt]=i}catch(f){tt(n,n.return,f)}}function Gv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ls(n.type)||n.tag===4}function jm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Gv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ls(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Bm(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=ar));else if(u!==4&&(u===27&&ls(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(Bm(n,i,o),n=n.sibling;n!==null;)Bm(n,i,o),n=n.sibling}function Ih(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(u!==4&&(u===27&&ls(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Ih(n,i,o),n=n.sibling;n!==null;)Ih(n,i,o),n=n.sibling}function Kv(n){var i=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);nn(i,u,o),i[Ot]=n,i[Gt]=o}catch(m){tt(n,n.return,m)}}var fi=!1,Ut=!1,qm=!1,Qv=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function QA(n,i){if(n=n.containerInfo,up=$h,n=s_(n),kd(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var _=0,T=-1,D=-1,G=0,W=0,re=n,Q=null;t:for(;;){for(var Y;re!==o||f!==0&&re.nodeType!==3||(T=_+f),re!==m||u!==0&&re.nodeType!==3||(D=_+u),re.nodeType===3&&(_+=re.nodeValue.length),(Y=re.firstChild)!==null;)Q=re,re=Y;for(;;){if(re===n)break t;if(Q===o&&++G===f&&(T=_),Q===m&&++W===u&&(D=_),(Y=re.nextSibling)!==null)break;re=Q,Q=re.parentNode}re=Y}o=T===-1||D===-1?null:{start:T,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(cp={focusedElem:n,selectionRange:o},$h=!1,Qt=i;Qt!==null;)if(i=Qt,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Qt=n;else for(;Qt!==null;){switch(i=Qt,m=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)f=n[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=i,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var ve=ca(o.type,f);n=u.getSnapshotBeforeUpdate(ve,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(Re){tt(o,o.return,Re)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)dp(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":dp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,Qt=n;break}Qt=i.return}}function $v(n,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:mi(n,o),u&4&&su(5,o);break;case 1:if(mi(n,o),u&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(_){tt(o,o.return,_)}else{var f=ca(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(_){tt(o,o.return,_)}}u&64&&qv(o),u&512&&au(o,o.return);break;case 3:if(mi(n,o),u&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{V_(n,i)}catch(_){tt(o,o.return,_)}}break;case 27:i===null&&u&4&&Kv(o);case 26:case 5:mi(n,o),i===null&&u&4&&Hv(o),u&512&&au(o,o.return);break;case 12:mi(n,o);break;case 31:mi(n,o),u&4&&Jv(n,o);break;case 13:mi(n,o),u&4&&Wv(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=nx.bind(null,o),Tx(n,o))));break;case 22:if(u=o.memoizedState!==null||fi,!u){i=i!==null&&i.memoizedState!==null||Ut,f=fi;var m=Ut;fi=u,(Ut=i)&&!m?pi(n,o,(o.subtreeFlags&8772)!==0):mi(n,o),fi=f,Ut=m}break;case 30:break;default:mi(n,o)}}function Yv(n){var i=n.alternate;i!==null&&(n.alternate=null,Yv(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Ha(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var gt=null,gn=!1;function di(n,i,o){for(o=o.child;o!==null;)Xv(n,i,o),o=o.sibling}function Xv(n,i,o){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(nr,o)}catch{}switch(o.tag){case 26:Ut||jr(o,i),di(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Ut||jr(o,i);var u=gt,f=gn;ls(o.type)&&(gt=o.stateNode,gn=!1),di(n,i,o),pu(o.stateNode),gt=u,gn=f;break;case 5:Ut||jr(o,i);case 6:if(u=gt,f=gn,gt=null,di(n,i,o),gt=u,gn=f,gt!==null)if(gn)try{(gt.nodeType===9?gt.body:gt.nodeName==="HTML"?gt.ownerDocument.body:gt).removeChild(o.stateNode)}catch(m){tt(o,i,m)}else try{gt.removeChild(o.stateNode)}catch(m){tt(o,i,m)}break;case 18:gt!==null&&(gn?(n=gt,q0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Co(n)):q0(gt,o.stateNode));break;case 4:u=gt,f=gn,gt=o.stateNode.containerInfo,gn=!0,di(n,i,o),gt=u,gn=f;break;case 0:case 11:case 14:case 15:ts(2,o,i),Ut||ts(4,o,i),di(n,i,o);break;case 1:Ut||(jr(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Fv(o,i,u)),di(n,i,o);break;case 21:di(n,i,o);break;case 22:Ut=(u=Ut)||o.memoizedState!==null,di(n,i,o),Ut=u;break;default:di(n,i,o)}}function Jv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Co(n)}catch(o){tt(i,i.return,o)}}}function Wv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Co(n)}catch(o){tt(i,i.return,o)}}function $A(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Qv),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Qv),i;default:throw Error(r(435,n.tag))}}function Rh(n,i){var o=$A(n);i.forEach(function(u){if(!o.has(u)){o.add(u);var f=rx.bind(null,n,u);u.then(f,f)}})}function yn(n,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=n,_=i,T=_;e:for(;T!==null;){switch(T.tag){case 27:if(ls(T.type)){gt=T.stateNode,gn=!1;break e}break;case 5:gt=T.stateNode,gn=!1;break e;case 3:case 4:gt=T.stateNode.containerInfo,gn=!0;break e}T=T.return}if(gt===null)throw Error(r(160));Xv(m,_,f),gt=null,gn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Zv(i,n),i=i.sibling}var fr=null;function Zv(n,i){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:yn(i,n),_n(n),u&4&&(ts(3,n,n.return),su(3,n),ts(5,n,n.return));break;case 1:yn(i,n),_n(n),u&512&&(Ut||o===null||jr(o,o.return)),u&64&&fi&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=fr;if(yn(i,n),_n(n),u&512&&(Ut||o===null||jr(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[xr]||m[Ot]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),nn(m,u,o),m[Ot]=n,Mt(m),u=m;break e;case"link":var _=Z0("link","href",f).get(u+(o.href||""));if(_){for(var T=0;T<_.length;T++)if(m=_[T],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(T,1);break t}}m=f.createElement(u),nn(m,u,o),f.head.appendChild(m);break;case"meta":if(_=Z0("meta","content",f).get(u+(o.content||""))){for(T=0;T<_.length;T++)if(m=_[T],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(T,1);break t}}m=f.createElement(u),nn(m,u,o),f.head.appendChild(m);break;default:throw Error(r(468,u))}m[Ot]=n,Mt(m),u=m}n.stateNode=u}else eb(f,n.type,n.stateNode);else n.stateNode=W0(f,u,n.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?eb(f,n.type,n.stateNode):W0(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Um(n,n.memoizedProps,o.memoizedProps)}break;case 27:yn(i,n),_n(n),u&512&&(Ut||o===null||jr(o,o.return)),o!==null&&u&4&&Um(n,n.memoizedProps,o.memoizedProps);break;case 5:if(yn(i,n),_n(n),u&512&&(Ut||o===null||jr(o,o.return)),n.flags&32){f=n.stateNode;try{pn(f,"")}catch(ve){tt(n,n.return,ve)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,Um(n,f,o!==null?o.memoizedProps:f)),u&1024&&(qm=!0);break;case 6:if(yn(i,n),_n(n),u&4){if(n.stateNode===null)throw Error(r(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(ve){tt(n,n.return,ve)}}break;case 3:if(Hh=null,f=fr,fr=qh(i.containerInfo),yn(i,n),fr=f,_n(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Co(i.containerInfo)}catch(ve){tt(n,n.return,ve)}qm&&(qm=!1,e0(n));break;case 4:u=fr,fr=qh(n.stateNode.containerInfo),yn(i,n),_n(n),fr=u;break;case 12:yn(i,n),_n(n);break;case 31:yn(i,n),_n(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Rh(n,u)));break;case 13:yn(i,n),_n(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Nh=Xt()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Rh(n,u)));break;case 22:f=n.memoizedState!==null;var D=o!==null&&o.memoizedState!==null,G=fi,W=Ut;if(fi=G||f,Ut=W||D,yn(i,n),Ut=W,fi=G,_n(n),u&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||D||fi||Ut||ha(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){D=o=i;try{if(m=D.stateNode,f)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=D.stateNode;var re=D.memoizedProps.style,Q=re!=null&&re.hasOwnProperty("display")?re.display:null;T.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(ve){tt(D,D.return,ve)}}}else if(i.tag===6){if(o===null){D=i;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(ve){tt(D,D.return,ve)}}}else if(i.tag===18){if(o===null){D=i;try{var Y=D.stateNode;f?F0(Y,!0):F0(D.stateNode,!1)}catch(ve){tt(D,D.return,ve)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Rh(n,o))));break;case 19:yn(i,n),_n(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Rh(n,u)));break;case 30:break;case 21:break;default:yn(i,n),_n(n)}}function _n(n){var i=n.flags;if(i&2){try{for(var o,u=n.return;u!==null;){if(Gv(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,m=jm(n);Ih(n,m,f);break;case 5:var _=o.stateNode;o.flags&32&&(pn(_,""),o.flags&=-33);var T=jm(n);Ih(n,T,_);break;case 3:case 4:var D=o.stateNode.containerInfo,G=jm(n);Bm(n,G,D);break;default:throw Error(r(161))}}catch(W){tt(n,n.return,W)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function e0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;e0(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function mi(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)$v(n,i.alternate,i),i=i.sibling}function ha(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:ts(4,i,i.return),ha(i);break;case 1:jr(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&Fv(i,i.return,o),ha(i);break;case 27:pu(i.stateNode);case 26:case 5:jr(i,i.return),ha(i);break;case 22:i.memoizedState===null&&ha(i);break;case 30:ha(i);break;default:ha(i)}n=n.sibling}}function pi(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,f=n,m=i,_=m.flags;switch(m.tag){case 0:case 11:case 15:pi(f,m,o),su(4,m);break;case 1:if(pi(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(G){tt(u,u.return,G)}if(u=m,f=u.updateQueue,f!==null){var T=u.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)D_(D[f],T)}catch(G){tt(u,u.return,G)}}o&&_&64&&qv(m),au(m,m.return);break;case 27:Kv(m);case 26:case 5:pi(f,m,o),o&&u===null&&_&4&&Hv(m),au(m,m.return);break;case 12:pi(f,m,o);break;case 31:pi(f,m,o),o&&_&4&&Jv(f,m);break;case 13:pi(f,m,o),o&&_&4&&Wv(f,m);break;case 22:m.memoizedState===null&&pi(f,m,o),au(m,m.return);break;case 30:break;default:pi(f,m,o)}i=i.sibling}}function Fm(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Kl(o))}function Hm(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Kl(n))}function dr(n,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)t0(n,i,o,u),i=i.sibling}function t0(n,i,o,u){var f=i.flags;switch(i.tag){case 0:case 11:case 15:dr(n,i,o,u),f&2048&&su(9,i);break;case 1:dr(n,i,o,u);break;case 3:dr(n,i,o,u),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Kl(n)));break;case 12:if(f&2048){dr(n,i,o,u),n=i.stateNode;try{var m=i.memoizedProps,_=m.id,T=m.onPostCommit;typeof T=="function"&&T(_,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(D){tt(i,i.return,D)}}else dr(n,i,o,u);break;case 31:dr(n,i,o,u);break;case 13:dr(n,i,o,u);break;case 23:break;case 22:m=i.stateNode,_=i.alternate,i.memoizedState!==null?m._visibility&2?dr(n,i,o,u):ou(n,i):m._visibility&2?dr(n,i,o,u):(m._visibility|=2,_o(n,i,o,u,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Fm(_,i);break;case 24:dr(n,i,o,u),f&2048&&Hm(i.alternate,i);break;default:dr(n,i,o,u)}}function _o(n,i,o,u,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var m=n,_=i,T=o,D=u,G=_.flags;switch(_.tag){case 0:case 11:case 15:_o(m,_,T,D,f),su(8,_);break;case 23:break;case 22:var W=_.stateNode;_.memoizedState!==null?W._visibility&2?_o(m,_,T,D,f):ou(m,_):(W._visibility|=2,_o(m,_,T,D,f)),f&&G&2048&&Fm(_.alternate,_);break;case 24:_o(m,_,T,D,f),f&&G&2048&&Hm(_.alternate,_);break;default:_o(m,_,T,D,f)}i=i.sibling}}function ou(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,u=i,f=u.flags;switch(u.tag){case 22:ou(o,u),f&2048&&Fm(u.alternate,u);break;case 24:ou(o,u),f&2048&&Hm(u.alternate,u);break;default:ou(o,u)}i=i.sibling}}var lu=8192;function vo(n,i,o){if(n.subtreeFlags&lu)for(n=n.child;n!==null;)n0(n,i,o),n=n.sibling}function n0(n,i,o){switch(n.tag){case 26:vo(n,i,o),n.flags&lu&&n.memoizedState!==null&&Mx(o,fr,n.memoizedState,n.memoizedProps);break;case 5:vo(n,i,o);break;case 3:case 4:var u=fr;fr=qh(n.stateNode.containerInfo),vo(n,i,o),fr=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=lu,lu=16777216,vo(n,i,o),lu=u):vo(n,i,o));break;default:vo(n,i,o)}}function r0(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function uu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Qt=u,s0(u,n)}r0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)i0(n),n=n.sibling}function i0(n){switch(n.tag){case 0:case 11:case 15:uu(n),n.flags&2048&&ts(9,n,n.return);break;case 3:uu(n);break;case 12:uu(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Ch(n)):uu(n);break;default:uu(n)}}function Ch(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Qt=u,s0(u,n)}r0(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:ts(8,i,i.return),Ch(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Ch(i));break;default:Ch(i)}n=n.sibling}}function s0(n,i){for(;Qt!==null;){var o=Qt;switch(o.tag){case 0:case 11:case 15:ts(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Kl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Qt=u;else e:for(o=n;Qt!==null;){u=Qt;var f=u.sibling,m=u.return;if(Yv(u),u===o){Qt=null;break e}if(f!==null){f.return=m,Qt=f;break e}Qt=m}}}var YA={getCacheForType:function(n){var i=en(Pt),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o},cacheSignal:function(){return en(Pt).controller.signal}},XA=typeof WeakMap=="function"?WeakMap:Map,We=0,ht=null,Be=null,Fe=0,et=0,Cn=null,ns=!1,bo=!1,Gm=!1,gi=0,St=0,rs=0,fa=0,Km=0,Nn=0,Eo=0,cu=null,vn=null,Qm=!1,Nh=0,a0=0,Dh=1/0,Vh=null,is=null,qt=0,ss=null,To=null,yi=0,$m=0,Ym=null,o0=null,hu=0,Xm=null;function Dn(){return(We&2)!==0&&Fe!==0?Fe&-Fe:j.T!==null?np():Oc()}function l0(){if(Nn===0)if((Fe&536870912)===0||Ke){var n=Us;Us<<=1,(Us&3932160)===0&&(Us=262144),Nn=n}else Nn=536870912;return n=In.current,n!==null&&(n.flags|=32),Nn}function bn(n,i,o){(n===ht&&(et===2||et===9)||n.cancelPendingCommit!==null)&&(wo(n,0),as(n,Fe,Nn,!1)),js(n,o),((We&2)===0||n!==ht)&&(n===ht&&((We&2)===0&&(fa|=o),St===4&&as(n,Fe,Nn,!1)),Br(n))}function u0(n,i,o){if((We&6)!==0)throw Error(r(327));var u=!o&&(i&127)===0&&(i&n.expiredLanes)===0||rr(n,i),f=u?ZA(n,i):Wm(n,i,!0),m=u;do{if(f===0){bo&&!u&&as(n,i,0,!1);break}else{if(o=n.current.alternate,m&&!JA(o)){f=Wm(n,i,!1),m=!1;continue}if(f===2){if(m=i,n.errorRecoveryDisabledLanes&m)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var T=n;f=cu;var D=T.current.memoizedState.isDehydrated;if(D&&(wo(T,_).flags|=256),_=Wm(T,_,!1),_!==2){if(Gm&&!D){T.errorRecoveryDisabledLanes|=m,fa|=m,f=4;break e}m=vn,vn=f,m!==null&&(vn===null?vn=m:vn.push.apply(vn,m))}f=_}if(m=!1,f!==2)continue}}if(f===1){wo(n,0),as(n,i,0,!0);break}e:{switch(u=n,m=f,m){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:as(u,i,Nn,!ns);break e;case 2:vn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=Nh+300-Xt(),10<f)){if(as(u,i,Nn,!ns),wr(u,0,!0)!==0)break e;yi=i,u.timeoutHandle=j0(c0.bind(null,u,o,vn,Vh,Qm,i,Nn,fa,Eo,ns,m,"Throttled",-0,0),f);break e}c0(u,o,vn,Vh,Qm,i,Nn,fa,Eo,ns,m,null,-0,0)}}break}while(!0);Br(n)}function c0(n,i,o,u,f,m,_,T,D,G,W,re,Q,Y){if(n.timeoutHandle=-1,re=i.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ar},n0(i,m,re);var ve=(m&62914560)===m?Nh-Xt():(m&4194048)===m?a0-Xt():0;if(ve=kx(re,ve),ve!==null){yi=m,n.cancelPendingCommit=ve(_0.bind(null,n,i,m,o,u,f,_,T,D,W,re,null,Q,Y)),as(n,m,_,!G);return}}_0(n,i,m,o,u,f,_,T,D)}function JA(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!An(m(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function as(n,i,o,u){i&=~Km,i&=~fa,n.suspendedLanes|=i,n.pingedLanes&=~i,u&&(n.warmLanes|=i),u=n.expirationTimes;for(var f=i;0<f;){var m=31-xt(f),_=1<<m;u[m]=-1,f&=~_}o!==0&&Bs(n,o,i)}function Oh(){return(We&6)===0?(fu(0),!1):!0}function Jm(){if(Be!==null){if(et===0)var n=Be.return;else n=Be,ai=ra=null,dm(n),fo=null,$l=0,n=Be;for(;n!==null;)Bv(n.alternate,n),n=n.return;Be=null}}function wo(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,yx(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),yi=0,Jm(),ht=n,Be=o=ii(n.current,null),Fe=i,et=0,Cn=null,ns=!1,bo=rr(n,i),Gm=!1,Eo=Nn=Km=fa=rs=St=0,vn=cu=null,Qm=!1,(i&8)!==0&&(i|=i&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=i;0<u;){var f=31-xt(u),m=1<<f;i|=n[f],u&=~m}return gi=i,eh(),o}function h0(n,i){Pe=null,j.H=nu,i===ho||i===lh?(i=I_(),et=3):i===tm?(i=I_(),et=4):et=i===Cm?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Cn=i,Be===null&&(St=1,Th(n,Gn(i,n.current)))}function f0(){var n=In.current;return n===null?!0:(Fe&4194048)===Fe?Yn===null:(Fe&62914560)===Fe||(Fe&536870912)!==0?n===Yn:!1}function d0(){var n=j.H;return j.H=nu,n===null?nu:n}function m0(){var n=j.A;return j.A=YA,n}function Mh(){St=4,ns||(Fe&4194048)!==Fe&&In.current!==null||(bo=!0),(rs&134217727)===0&&(fa&134217727)===0||ht===null||as(ht,Fe,Nn,!1)}function Wm(n,i,o){var u=We;We|=2;var f=d0(),m=m0();(ht!==n||Fe!==i)&&(Vh=null,wo(n,i)),i=!1;var _=St;e:do try{if(et!==0&&Be!==null){var T=Be,D=Cn;switch(et){case 8:Jm(),_=6;break e;case 3:case 2:case 9:case 6:In.current===null&&(i=!0);var G=et;if(et=0,Cn=null,So(n,T,D,G),o&&bo){_=0;break e}break;default:G=et,et=0,Cn=null,So(n,T,D,G)}}WA(),_=St;break}catch(W){h0(n,W)}while(!0);return i&&n.shellSuspendCounter++,ai=ra=null,We=u,j.H=f,j.A=m,Be===null&&(ht=null,Fe=0,eh()),_}function WA(){for(;Be!==null;)p0(Be)}function ZA(n,i){var o=We;We|=2;var u=d0(),f=m0();ht!==n||Fe!==i?(Vh=null,Dh=Xt()+500,wo(n,i)):bo=rr(n,i);e:do try{if(et!==0&&Be!==null){i=Be;var m=Cn;t:switch(et){case 1:et=0,Cn=null,So(n,i,m,1);break;case 2:case 9:if(A_(m)){et=0,Cn=null,g0(i);break}i=function(){et!==2&&et!==9||ht!==n||(et=7),Br(n)},m.then(i,i);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:A_(m)?(et=0,Cn=null,g0(i)):(et=0,Cn=null,So(n,i,m,7));break;case 5:var _=null;switch(Be.tag){case 26:_=Be.memoizedState;case 5:case 27:var T=Be;if(_?tb(_):T.stateNode.complete){et=0,Cn=null;var D=T.sibling;if(D!==null)Be=D;else{var G=T.return;G!==null?(Be=G,kh(G)):Be=null}break t}}et=0,Cn=null,So(n,i,m,5);break;case 6:et=0,Cn=null,So(n,i,m,6);break;case 8:Jm(),St=6;break e;default:throw Error(r(462))}}ex();break}catch(W){h0(n,W)}while(!0);return ai=ra=null,j.H=u,j.A=f,We=o,Be!==null?0:(ht=null,Fe=0,eh(),St)}function ex(){for(;Be!==null&&!zn();)p0(Be)}function p0(n){var i=Uv(n.alternate,n,gi);n.memoizedProps=n.pendingProps,i===null?kh(n):Be=i}function g0(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=Ov(o,i,i.pendingProps,i.type,void 0,Fe);break;case 11:i=Ov(o,i,i.pendingProps,i.type.render,i.ref,Fe);break;case 5:dm(i);default:Bv(o,i),i=Be=m_(i,gi),i=Uv(o,i,gi)}n.memoizedProps=n.pendingProps,i===null?kh(n):Be=i}function So(n,i,o,u){ai=ra=null,dm(i),fo=null,$l=0;var f=i.return;try{if(qA(n,f,i,o,Fe)){St=1,Th(n,Gn(o,n.current)),Be=null;return}}catch(m){if(f!==null)throw Be=f,m;St=1,Th(n,Gn(o,n.current)),Be=null;return}i.flags&32768?(Ke||u===1?n=!0:bo||(Fe&536870912)!==0?n=!1:(ns=n=!0,(u===2||u===9||u===3||u===6)&&(u=In.current,u!==null&&u.tag===13&&(u.flags|=16384))),y0(i,n)):kh(i)}function kh(n){var i=n;do{if((i.flags&32768)!==0){y0(i,ns);return}n=i.return;var o=GA(i.alternate,i,gi);if(o!==null){Be=o;return}if(i=i.sibling,i!==null){Be=i;return}Be=i=n}while(i!==null);St===0&&(St=5)}function y0(n,i){do{var o=KA(n.alternate,n);if(o!==null){o.flags&=32767,Be=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){Be=n;return}Be=n=o}while(n!==null);St=6,Be=null}function _0(n,i,o,u,f,m,_,T,D){n.cancelPendingCommit=null;do Ph();while(qt!==0);if((We&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(m=i.lanes|i.childLanes,m|=jd,Dd(n,o,m,_,T,D),n===ht&&(Be=ht=null,Fe=0),To=i,ss=n,yi=o,$m=m,Ym=f,o0=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,ix(Pi,function(){return w0(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=j.T,j.T=null,f=ae.p,ae.p=2,_=We,We|=4;try{QA(n,i,o)}finally{We=_,ae.p=f,j.T=u}}qt=1,v0(),b0(),E0()}}function v0(){if(qt===1){qt=0;var n=ss,i=To,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=j.T,j.T=null;var u=ae.p;ae.p=2;var f=We;We|=4;try{Zv(i,n);var m=cp,_=s_(n.containerInfo),T=m.focusedElem,D=m.selectionRange;if(_!==T&&T&&T.ownerDocument&&i_(T.ownerDocument.documentElement,T)){if(D!==null&&kd(T)){var G=D.start,W=D.end;if(W===void 0&&(W=G),"selectionStart"in T)T.selectionStart=G,T.selectionEnd=Math.min(W,T.value.length);else{var re=T.ownerDocument||document,Q=re&&re.defaultView||window;if(Q.getSelection){var Y=Q.getSelection(),ve=T.textContent.length,Re=Math.min(D.start,ve),ot=D.end===void 0?Re:Math.min(D.end,ve);!Y.extend&&Re>ot&&(_=ot,ot=Re,Re=_);var z=r_(T,Re),P=r_(T,ot);if(z&&P&&(Y.rangeCount!==1||Y.anchorNode!==z.node||Y.anchorOffset!==z.offset||Y.focusNode!==P.node||Y.focusOffset!==P.offset)){var H=re.createRange();H.setStart(z.node,z.offset),Y.removeAllRanges(),Re>ot?(Y.addRange(H),Y.extend(P.node,P.offset)):(H.setEnd(P.node,P.offset),Y.addRange(H))}}}}for(re=[],Y=T;Y=Y.parentNode;)Y.nodeType===1&&re.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<re.length;T++){var te=re[T];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}$h=!!up,cp=up=null}finally{We=f,ae.p=u,j.T=o}}n.current=i,qt=2}}function b0(){if(qt===2){qt=0;var n=ss,i=To,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=j.T,j.T=null;var u=ae.p;ae.p=2;var f=We;We|=4;try{$v(n,i.alternate,i)}finally{We=f,ae.p=u,j.T=o}}qt=3}}function E0(){if(qt===4||qt===3){qt=0,ki();var n=ss,i=To,o=yi,u=o0;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?qt=5:(qt=0,To=ss=null,T0(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(is=null),ei(o),i=i.stateNode,Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(nr,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=j.T,f=ae.p,ae.p=2,j.T=null;try{for(var m=n.onRecoverableError,_=0;_<u.length;_++){var T=u[_];m(T.value,{componentStack:T.stack})}}finally{j.T=i,ae.p=f}}(yi&3)!==0&&Ph(),Br(n),f=n.pendingLanes,(o&261930)!==0&&(f&42)!==0?n===Xm?hu++:(hu=0,Xm=n):hu=0,fu(0)}}function T0(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Kl(i)))}function Ph(){return v0(),b0(),E0(),w0()}function w0(){if(qt!==5)return!1;var n=ss,i=$m;$m=0;var o=ei(yi),u=j.T,f=ae.p;try{ae.p=32>o?32:o,j.T=null,o=Ym,Ym=null;var m=ss,_=yi;if(qt=0,To=ss=null,yi=0,(We&6)!==0)throw Error(r(331));var T=We;if(We|=4,i0(m.current),t0(m,m.current,_,o),We=T,fu(0,!1),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(nr,m)}catch{}return!0}finally{ae.p=f,j.T=u,T0(n,i)}}function S0(n,i,o){i=Gn(o,i),i=Rm(n.stateNode,i,2),n=Wi(n,i,2),n!==null&&(js(n,2),Br(n))}function tt(n,i,o){if(n.tag===3)S0(n,n,o);else for(;i!==null;){if(i.tag===3){S0(i,n,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(is===null||!is.has(u))){n=Gn(o,n),o=Av(2),u=Wi(i,o,2),u!==null&&(xv(o,u,i,n),js(u,2),Br(u));break}}i=i.return}}function Zm(n,i,o){var u=n.pingCache;if(u===null){u=n.pingCache=new XA;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(o)||(Gm=!0,f.add(o),n=tx.bind(null,n,i,o),i.then(n,n))}function tx(n,i,o){var u=n.pingCache;u!==null&&u.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,ht===n&&(Fe&o)===o&&(St===4||St===3&&(Fe&62914560)===Fe&&300>Xt()-Nh?(We&2)===0&&wo(n,0):Km|=o,Eo===Fe&&(Eo=0)),Br(n)}function A0(n,i){i===0&&(i=Vc()),n=ea(n,i),n!==null&&(js(n,i),Br(n))}function nx(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),A0(n,o)}function rx(n,i){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(i),A0(n,o)}function ix(n,i){return Ie(n,i)}var Lh=null,Ao=null,ep=!1,zh=!1,tp=!1,os=0;function Br(n){n!==Ao&&n.next===null&&(Ao===null?Lh=Ao=n:Ao=Ao.next=n),zh=!0,ep||(ep=!0,ax())}function fu(n,i){if(!tp&&zh){tp=!0;do for(var o=!1,u=Lh;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var _=u.suspendedLanes,T=u.pingedLanes;m=(1<<31-xt(42|n)+1)-1,m&=f&~(_&~T),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,C0(u,m))}else m=Fe,m=wr(u,u===ht?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||rr(u,m)||(o=!0,C0(u,m));u=u.next}while(o);tp=!1}}function sx(){x0()}function x0(){zh=ep=!1;var n=0;os!==0&&gx()&&(n=os);for(var i=Xt(),o=null,u=Lh;u!==null;){var f=u.next,m=I0(u,i);m===0?(u.next=null,o===null?Lh=f:o.next=f,f===null&&(Ao=o)):(o=u,(n!==0||(m&3)!==0)&&(zh=!0)),u=f}qt!==0&&qt!==5||fu(n),os!==0&&(os=0)}function I0(n,i){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var _=31-xt(m),T=1<<_,D=f[_];D===-1?((T&o)===0||(T&u)!==0)&&(f[_]=Nd(T,i)):D<=i&&(n.expiredLanes|=T),m&=~T}if(i=ht,o=Fe,o=wr(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===i&&(et===2||et===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&vt(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||rr(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(u!==null&&vt(u),ei(o)){case 2:case 8:o=br;break;case 32:o=Pi;break;case 268435456:o=Ic;break;default:o=Pi}return u=R0.bind(null,n),o=Ie(o,u),n.callbackPriority=i,n.callbackNode=o,i}return u!==null&&u!==null&&vt(u),n.callbackPriority=2,n.callbackNode=null,2}function R0(n,i){if(qt!==0&&qt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Ph()&&n.callbackNode!==o)return null;var u=Fe;return u=wr(n,n===ht?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(u0(n,u,i),I0(n,Xt()),n.callbackNode!=null&&n.callbackNode===o?R0.bind(null,n):null)}function C0(n,i){if(Ph())return null;u0(n,i,!0)}function ax(){_x(function(){(We&6)!==0?Ie(zs,sx):x0()})}function np(){if(os===0){var n=uo;n===0&&(n=Er,Er<<=1,(Er&261888)===0&&(Er=256)),os=n}return os}function N0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:$a(""+n)}function D0(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function ox(n,i,o,u,f){if(i==="submit"&&o&&o.stateNode===f){var m=N0((f[Gt]||null).action),_=u.submitter;_&&(i=(i=_[Gt]||null)?N0(i.formAction):_.getAttribute("formAction"),i!==null&&(m=i,_=null));var T=new Mr("action","action",null,u,f);n.push({event:T,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(os!==0){var D=_?D0(f,_):new FormData(f);Tm(o,{pending:!0,data:D,method:f.method,action:m},null,D)}}else typeof m=="function"&&(T.preventDefault(),D=_?D0(f,_):new FormData(f),Tm(o,{pending:!0,data:D,method:f.method,action:m},m,D))},currentTarget:f}]})}}for(var rp=0;rp<Ud.length;rp++){var ip=Ud[rp],lx=ip.toLowerCase(),ux=ip[0].toUpperCase()+ip.slice(1);hr(lx,"on"+ux)}hr(l_,"onAnimationEnd"),hr(u_,"onAnimationIteration"),hr(c_,"onAnimationStart"),hr("dblclick","onDoubleClick"),hr("focusin","onFocus"),hr("focusout","onBlur"),hr(AA,"onTransitionRun"),hr(xA,"onTransitionStart"),hr(IA,"onTransitionCancel"),hr(h_,"onTransitionEnd"),Nr("onMouseEnter",["mouseout","mouseover"]),Nr("onMouseLeave",["mouseout","mouseover"]),Nr("onPointerEnter",["pointerout","pointerover"]),Nr("onPointerLeave",["pointerout","pointerover"]),Cr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Cr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Cr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Cr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Cr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Cr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var du="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(du));function V0(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;e:{var m=void 0;if(i)for(var _=u.length-1;0<=_;_--){var T=u[_],D=T.instance,G=T.currentTarget;if(T=T.listener,D!==m&&f.isPropagationStopped())break e;m=T,f.currentTarget=G;try{m(f)}catch(W){Zc(W)}f.currentTarget=null,m=D}else for(_=0;_<u.length;_++){if(T=u[_],D=T.instance,G=T.currentTarget,T=T.listener,D!==m&&f.isPropagationStopped())break e;m=T,f.currentTarget=G;try{m(f)}catch(W){Zc(W)}f.currentTarget=null,m=D}}}}function qe(n,i){var o=i[Fa];o===void 0&&(o=i[Fa]=new Set);var u=n+"__bubble";o.has(u)||(O0(i,n,2,!1),o.add(u))}function sp(n,i,o){var u=0;i&&(u|=4),O0(o,n,u,i)}var Uh="_reactListening"+Math.random().toString(36).slice(2);function ap(n){if(!n[Uh]){n[Uh]=!0,Al.forEach(function(o){o!=="selectionchange"&&(cx.has(o)||sp(o,!1,n),sp(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Uh]||(i[Uh]=!0,sp("selectionchange",!1,i))}}function O0(n,i,o,u){switch(lb(i)){case 2:var f=zx;break;case 8:f=Ux;break;default:f=Ep}o=f.bind(null,i,o,n),f=void 0,!Ks||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(i,o,{capture:!0,passive:f}):n.addEventListener(i,o,!0):f!==void 0?n.addEventListener(i,o,{passive:f}):n.addEventListener(i,o,!1)}function op(n,i,o,u,f){var m=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var T=u.stateNode.containerInfo;if(T===f)break;if(_===4)for(_=u.return;_!==null;){var D=_.tag;if((D===3||D===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;T!==null;){if(_=Ir(T),_===null)return;if(D=_.tag,D===5||D===6||D===26||D===27){u=m=_;continue e}T=T.parentNode}}u=u.return}qi(function(){var G=m,W=Bn(o),re=[];e:{var Q=f_.get(n);if(Q!==void 0){var Y=Mr,ve=n;switch(n){case"keypress":if($s(o)===0)break e;case"keydown":case"keyup":Y=Xc;break;case"focusin":ve="focus",Y=Xs;break;case"focusout":ve="blur",Y=Xs;break;case"beforeblur":case"afterblur":Y=Xs;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=zl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Bc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=y;break;case l_:case u_:case c_:Y=Fc;break;case h_:Y=I;break;case"scroll":case"scrollend":Y=Ll;break;case"wheel":Y=$;break;case"copy":case"cut":case"paste":Y=Hc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=ri;break;case"toggle":case"beforetoggle":Y=ke}var Re=(i&4)!==0,ot=!Re&&(n==="scroll"||n==="scrollend"),z=Re?Q!==null?Q+"Capture":null:Q;Re=[];for(var P=G,H;P!==null;){var te=P;if(H=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||H===null||z===null||(te=or(P,z),te!=null&&Re.push(mu(P,te,H))),ot)break;P=P.return}0<Re.length&&(Q=new Y(Q,ve,null,o,W),re.push({event:Q,listeners:Re}))}}if((i&7)===0){e:{if(Q=n==="mouseover"||n==="pointerover",Y=n==="mouseout"||n==="pointerout",Q&&o!==Ml&&(ve=o.relatedTarget||o.fromElement)&&(Ir(ve)||ve[Ar]))break e;if((Y||Q)&&(Q=W.window===W?W:(Q=W.ownerDocument)?Q.defaultView||Q.parentWindow:window,Y?(ve=o.relatedTarget||o.toElement,Y=G,ve=ve?Ir(ve):null,ve!==null&&(ot=l(ve),Re=ve.tag,ve!==ot||Re!==5&&Re!==27&&Re!==6)&&(ve=null)):(Y=null,ve=G),Y!==ve)){if(Re=zl,te="onMouseLeave",z="onMouseEnter",P="mouse",(n==="pointerout"||n==="pointerover")&&(Re=ri,te="onPointerLeave",z="onPointerEnter",P="pointer"),ot=Y==null?Q:wn(Y),H=ve==null?Q:wn(ve),Q=new Re(te,P+"leave",Y,o,W),Q.target=ot,Q.relatedTarget=H,te=null,Ir(W)===G&&(Re=new Re(z,P+"enter",ve,o,W),Re.target=H,Re.relatedTarget=ot,te=Re),ot=te,Y&&ve)t:{for(Re=hx,z=Y,P=ve,H=0,te=z;te;te=Re(te))H++;te=0;for(var we=P;we;we=Re(we))te++;for(;0<H-te;)z=Re(z),H--;for(;0<te-H;)P=Re(P),te--;for(;H--;){if(z===P||P!==null&&z===P.alternate){Re=z;break t}z=Re(z),P=Re(P)}Re=null}else Re=null;Y!==null&&M0(re,Q,Y,Re,!1),ve!==null&&ot!==null&&M0(re,ot,ve,Re,!0)}}e:{if(Q=G?wn(G):window,Y=Q.nodeName&&Q.nodeName.toLowerCase(),Y==="select"||Y==="input"&&Q.type==="file")var Ye=Jy;else if(Yy(Q))if(Wy)Ye=TA;else{Ye=bA;var Ee=vA}else Y=Q.nodeName,!Y||Y.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?G&&Qa(G.elementType)&&(Ye=Jy):Ye=EA;if(Ye&&(Ye=Ye(n,G))){Xy(re,Ye,o,W);break e}Ee&&Ee(n,Q,G),n==="focusout"&&G&&Q.type==="number"&&G.memoizedProps.value!=null&&Dl(Q,"number",Q.value)}switch(Ee=G?wn(G):window,n){case"focusin":(Yy(Ee)||Ee.contentEditable==="true")&&(to=Ee,Pd=G,Fl=null);break;case"focusout":Fl=Pd=to=null;break;case"mousedown":Ld=!0;break;case"contextmenu":case"mouseup":case"dragend":Ld=!1,a_(re,o,W);break;case"selectionchange":if(SA)break;case"keydown":case"keyup":a_(re,o,W)}var Le;if(Je)e:{switch(n){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else eo?Js(n,o)&&(He="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(He="onCompositionStart");He&&(Lr&&o.locale!=="ko"&&(eo||He!=="onCompositionStart"?He==="onCompositionEnd"&&eo&&(Le=Pl()):(Or=W,kl="value"in Or?Or.value:Or.textContent,eo=!0)),Ee=jh(G,He),0<Ee.length&&(He=new Pr(He,n,null,o,W),re.push({event:He,listeners:Ee}),Le?He.data=Le:(Le=Za(o),Le!==null&&(He.data=Le)))),(Le=Fn?pA(n,o):gA(n,o))&&(He=jh(G,"onBeforeInput"),0<He.length&&(Ee=new Pr("onBeforeInput","beforeinput",null,o,W),re.push({event:Ee,listeners:He}),Ee.data=Le)),ox(re,n,G,o,W)}V0(re,i)})}function mu(n,i,o){return{instance:n,listener:i,currentTarget:o}}function jh(n,i){for(var o=i+"Capture",u=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=or(n,o),f!=null&&u.unshift(mu(n,f,m)),f=or(n,i),f!=null&&u.push(mu(n,f,m))),n.tag===3)return u;n=n.return}return[]}function hx(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function M0(n,i,o,u,f){for(var m=i._reactName,_=[];o!==null&&o!==u;){var T=o,D=T.alternate,G=T.stateNode;if(T=T.tag,D!==null&&D===u)break;T!==5&&T!==26&&T!==27||G===null||(D=G,f?(G=or(o,m),G!=null&&_.unshift(mu(o,G,D))):f||(G=or(o,m),G!=null&&_.push(mu(o,G,D)))),o=o.return}_.length!==0&&n.push({event:i,listeners:_})}var fx=/\r\n?/g,dx=/\u0000|\uFFFD/g;function k0(n){return(typeof n=="string"?n:""+n).replace(fx,`
`).replace(dx,"")}function P0(n,i){return i=k0(i),k0(n)===i}function at(n,i,o,u,f,m){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||pn(n,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&pn(n,""+u);break;case"className":Sn(n,"class",u);break;case"tabIndex":Sn(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Sn(n,o,u);break;case"style":Ol(n,u,m);break;case"data":if(i!=="object"){Sn(n,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=$a(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(i!=="input"&&at(n,i,"name",f.name,f,null),at(n,i,"formEncType",f.formEncType,f,null),at(n,i,"formMethod",f.formMethod,f,null),at(n,i,"formTarget",f.formTarget,f,null)):(at(n,i,"encType",f.encType,f,null),at(n,i,"method",f.method,f,null),at(n,i,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=$a(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=ar);break;case"onScroll":u!=null&&qe("scroll",n);break;case"onScrollEnd":u!=null&&qe("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=$a(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":qe("beforetoggle",n),qe("toggle",n),Ga(n,"popover",u);break;case"xlinkActuate":kt(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":kt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":kt(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":kt(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":kt(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":kt(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":kt(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":kt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":kt(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ga(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=jc.get(o)||o,Ga(n,o,u))}}function lp(n,i,o,u,f,m){switch(o){case"style":Ol(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof u=="string"?pn(n,u):(typeof u=="number"||typeof u=="bigint")&&pn(n,""+u);break;case"onScroll":u!=null&&qe("scroll",n);break;case"onScrollEnd":u!=null&&qe("scrollend",n);break;case"onClick":u!=null&&(n.onclick=ar);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xl.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),m=n[Gt]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(i,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,u,f);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Ga(n,o,u)}}}function nn(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",n),qe("load",n);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var _=o[m];if(_!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:at(n,i,m,_,o,null)}}f&&at(n,i,"srcSet",o.srcSet,o,null),u&&at(n,i,"src",o.src,o,null);return;case"input":qe("invalid",n);var T=m=_=f=null,D=null,G=null;for(u in o)if(o.hasOwnProperty(u)){var W=o[u];if(W!=null)switch(u){case"name":f=W;break;case"type":_=W;break;case"checked":D=W;break;case"defaultChecked":G=W;break;case"value":m=W;break;case"defaultValue":T=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,i));break;default:at(n,i,u,W,o,null)}}Lc(n,m,T,D,G,_,f,!1);return;case"select":qe("invalid",n),u=_=m=null;for(f in o)if(o.hasOwnProperty(f)&&(T=o[f],T!=null))switch(f){case"value":m=T;break;case"defaultValue":_=T;break;case"multiple":u=T;default:at(n,i,f,T,o,null)}i=m,o=_,n.multiple=!!u,i!=null?zi(n,!!u,i,!1):o!=null&&zi(n,!!u,o,!0);return;case"textarea":qe("invalid",n),m=f=u=null;for(_ in o)if(o.hasOwnProperty(_)&&(T=o[_],T!=null))switch(_){case"value":u=T;break;case"defaultValue":f=T;break;case"children":m=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:at(n,i,_,T,o,null)}Ui(n,u,f,m);return;case"option":for(D in o)o.hasOwnProperty(D)&&(u=o[D],u!=null)&&(D==="selected"?n.selected=u&&typeof u!="function"&&typeof u!="symbol":at(n,i,D,u,o,null));return;case"dialog":qe("beforetoggle",n),qe("toggle",n),qe("cancel",n),qe("close",n);break;case"iframe":case"object":qe("load",n);break;case"video":case"audio":for(u=0;u<du.length;u++)qe(du[u],n);break;case"image":qe("error",n),qe("load",n);break;case"details":qe("toggle",n);break;case"embed":case"source":case"link":qe("error",n),qe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in o)if(o.hasOwnProperty(G)&&(u=o[G],u!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:at(n,i,G,u,o,null)}return;default:if(Qa(i)){for(W in o)o.hasOwnProperty(W)&&(u=o[W],u!==void 0&&lp(n,i,W,u,o,void 0));return}}for(T in o)o.hasOwnProperty(T)&&(u=o[T],u!=null&&at(n,i,T,u,o,null))}function mx(n,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,_=null,T=null,D=null,G=null,W=null;for(Y in o){var re=o[Y];if(o.hasOwnProperty(Y)&&re!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":D=re;default:u.hasOwnProperty(Y)||at(n,i,Y,null,u,re)}}for(var Q in u){var Y=u[Q];if(re=o[Q],u.hasOwnProperty(Q)&&(Y!=null||re!=null))switch(Q){case"type":m=Y;break;case"name":f=Y;break;case"checked":G=Y;break;case"defaultChecked":W=Y;break;case"value":_=Y;break;case"defaultValue":T=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,i));break;default:Y!==re&&at(n,i,Q,Y,u,re)}}Ka(n,_,T,D,G,W,m,f);return;case"select":Y=_=T=Q=null;for(m in o)if(D=o[m],o.hasOwnProperty(m)&&D!=null)switch(m){case"value":break;case"multiple":Y=D;default:u.hasOwnProperty(m)||at(n,i,m,null,u,D)}for(f in u)if(m=u[f],D=o[f],u.hasOwnProperty(f)&&(m!=null||D!=null))switch(f){case"value":Q=m;break;case"defaultValue":T=m;break;case"multiple":_=m;default:m!==D&&at(n,i,f,m,u,D)}i=T,o=_,u=Y,Q!=null?zi(n,!!o,Q,!1):!!u!=!!o&&(i!=null?zi(n,!!o,i,!0):zi(n,!!o,o?[]:"",!1));return;case"textarea":Y=Q=null;for(T in o)if(f=o[T],o.hasOwnProperty(T)&&f!=null&&!u.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:at(n,i,T,null,u,f)}for(_ in u)if(f=u[_],m=o[_],u.hasOwnProperty(_)&&(f!=null||m!=null))switch(_){case"value":Q=f;break;case"defaultValue":Y=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==m&&at(n,i,_,f,u,m)}zc(n,Q,Y);return;case"option":for(var ve in o)Q=o[ve],o.hasOwnProperty(ve)&&Q!=null&&!u.hasOwnProperty(ve)&&(ve==="selected"?n.selected=!1:at(n,i,ve,null,u,Q));for(D in u)Q=u[D],Y=o[D],u.hasOwnProperty(D)&&Q!==Y&&(Q!=null||Y!=null)&&(D==="selected"?n.selected=Q&&typeof Q!="function"&&typeof Q!="symbol":at(n,i,D,Q,u,Y));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in o)Q=o[Re],o.hasOwnProperty(Re)&&Q!=null&&!u.hasOwnProperty(Re)&&at(n,i,Re,null,u,Q);for(G in u)if(Q=u[G],Y=o[G],u.hasOwnProperty(G)&&Q!==Y&&(Q!=null||Y!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,i));break;default:at(n,i,G,Q,u,Y)}return;default:if(Qa(i)){for(var ot in o)Q=o[ot],o.hasOwnProperty(ot)&&Q!==void 0&&!u.hasOwnProperty(ot)&&lp(n,i,ot,void 0,u,Q);for(W in u)Q=u[W],Y=o[W],!u.hasOwnProperty(W)||Q===Y||Q===void 0&&Y===void 0||lp(n,i,W,Q,u,Y);return}}for(var z in o)Q=o[z],o.hasOwnProperty(z)&&Q!=null&&!u.hasOwnProperty(z)&&at(n,i,z,null,u,Q);for(re in u)Q=u[re],Y=o[re],!u.hasOwnProperty(re)||Q===Y||Q==null&&Y==null||at(n,i,re,Q,u,Y)}function L0(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function px(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],m=f.transferSize,_=f.initiatorType,T=f.duration;if(m&&T&&L0(_)){for(_=0,T=f.responseEnd,u+=1;u<o.length;u++){var D=o[u],G=D.startTime;if(G>T)break;var W=D.transferSize,re=D.initiatorType;W&&L0(re)&&(D=D.responseEnd,_+=W*(D<T?1:(T-G)/(D-G)))}if(--u,i+=8*(m+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var up=null,cp=null;function Bh(n){return n.nodeType===9?n:n.ownerDocument}function z0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function U0(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function hp(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var fp=null;function gx(){var n=window.event;return n&&n.type==="popstate"?n===fp?!1:(fp=n,!0):(fp=null,!1)}var j0=typeof setTimeout=="function"?setTimeout:void 0,yx=typeof clearTimeout=="function"?clearTimeout:void 0,B0=typeof Promise=="function"?Promise:void 0,_x=typeof queueMicrotask=="function"?queueMicrotask:typeof B0<"u"?function(n){return B0.resolve(null).then(n).catch(vx)}:j0;function vx(n){setTimeout(function(){throw n})}function ls(n){return n==="head"}function q0(n,i){var o=i,u=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(f),Co(i);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")pu(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,pu(o);for(var m=o.firstChild;m;){var _=m.nextSibling,T=m.nodeName;m[xr]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=_}}else o==="body"&&pu(n.ownerDocument.body);o=f}while(o);Co(i)}function F0(n,i){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function dp(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":dp(o),Ha(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function bx(n,i,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[xr])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Xn(n.nextSibling),n===null)break}return null}function Ex(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Xn(n.nextSibling),n===null))return null;return n}function H0(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Xn(n.nextSibling),n===null))return null;return n}function mp(n){return n.data==="$?"||n.data==="$~"}function pp(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function Tx(n,i){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||o.readyState!=="loading")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Xn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var gp=null;function G0(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(i===0)return Xn(n.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}n=n.nextSibling}return null}function K0(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return n;i--}else o!=="/$"&&o!=="/&"||i++}n=n.previousSibling}return null}function Q0(n,i,o){switch(i=Bh(o),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function pu(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Ha(n)}var Jn=new Map,$0=new Set;function qh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var _i=ae.d;ae.d={f:wx,r:Sx,D:Ax,C:xx,L:Ix,m:Rx,X:Nx,S:Cx,M:Dx};function wx(){var n=_i.f(),i=Oh();return n||i}function Sx(n){var i=jn(n);i!==null&&i.tag===5&&i.type==="form"?hv(i):_i.r(n)}var xo=typeof document>"u"?null:document;function Y0(n,i,o){var u=xo;if(u&&typeof i=="string"&&i){var f=mn(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),$0.has(f)||($0.add(f),n={rel:n,crossOrigin:o,href:i},u.querySelector(f)===null&&(i=u.createElement("link"),nn(i,"link",n),Mt(i),u.head.appendChild(i)))}}function Ax(n){_i.D(n),Y0("dns-prefetch",n,null)}function xx(n,i){_i.C(n,i),Y0("preconnect",n,i)}function Ix(n,i,o){_i.L(n,i,o);var u=xo;if(u&&n&&i){var f='link[rel="preload"][as="'+mn(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+mn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+mn(o.imageSizes)+'"]')):f+='[href="'+mn(n)+'"]';var m=f;switch(i){case"style":m=Io(n);break;case"script":m=Ro(n)}Jn.has(m)||(n=E({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),Jn.set(m,n),u.querySelector(f)!==null||i==="style"&&u.querySelector(gu(m))||i==="script"&&u.querySelector(yu(m))||(i=u.createElement("link"),nn(i,"link",n),Mt(i),u.head.appendChild(i)))}}function Rx(n,i){_i.m(n,i);var o=xo;if(o&&n){var u=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+mn(u)+'"][href="'+mn(n)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Ro(n)}if(!Jn.has(m)&&(n=E({rel:"modulepreload",href:n},i),Jn.set(m,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(yu(m)))return}u=o.createElement("link"),nn(u,"link",n),Mt(u),o.head.appendChild(u)}}}function Cx(n,i,o){_i.S(n,i,o);var u=xo;if(u&&n){var f=Rr(u).hoistableStyles,m=Io(n);i=i||"default";var _=f.get(m);if(!_){var T={loading:0,preload:null};if(_=u.querySelector(gu(m)))T.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":i},o),(o=Jn.get(m))&&yp(n,o);var D=_=u.createElement("link");Mt(D),nn(D,"link",n),D._p=new Promise(function(G,W){D.onload=G,D.onerror=W}),D.addEventListener("load",function(){T.loading|=1}),D.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Fh(_,i,u)}_={type:"stylesheet",instance:_,count:1,state:T},f.set(m,_)}}}function Nx(n,i){_i.X(n,i);var o=xo;if(o&&n){var u=Rr(o).hoistableScripts,f=Ro(n),m=u.get(f);m||(m=o.querySelector(yu(f)),m||(n=E({src:n,async:!0},i),(i=Jn.get(f))&&_p(n,i),m=o.createElement("script"),Mt(m),nn(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function Dx(n,i){_i.M(n,i);var o=xo;if(o&&n){var u=Rr(o).hoistableScripts,f=Ro(n),m=u.get(f);m||(m=o.querySelector(yu(f)),m||(n=E({src:n,async:!0,type:"module"},i),(i=Jn.get(f))&&_p(n,i),m=o.createElement("script"),Mt(m),nn(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function X0(n,i,o,u){var f=(f=Ce.current)?qh(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Io(o.href),o=Rr(f).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Io(o.href);var m=Rr(f).hoistableStyles,_=m.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,_),(m=f.querySelector(gu(n)))&&!m._p&&(_.instance=m,_.state.loading=5),Jn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Jn.set(n,o),m||Vx(f,n,o,_.state))),i&&u===null)throw Error(r(528,""));return _}if(i&&u!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ro(o),o=Rr(f).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function Io(n){return'href="'+mn(n)+'"'}function gu(n){return'link[rel="stylesheet"]['+n+"]"}function J0(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function Vx(n,i,o,u){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=n.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),nn(i,"link",o),Mt(i),n.head.appendChild(i))}function Ro(n){return'[src="'+mn(n)+'"]'}function yu(n){return"script[async]"+n}function W0(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=n.querySelector('style[data-href~="'+mn(o.href)+'"]');if(u)return i.instance=u,Mt(u),u;var f=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Mt(u),nn(u,"style",f),Fh(u,o.precedence,n),i.instance=u;case"stylesheet":f=Io(o.href);var m=n.querySelector(gu(f));if(m)return i.state.loading|=4,i.instance=m,Mt(m),m;u=J0(o),(f=Jn.get(f))&&yp(u,f),m=(n.ownerDocument||n).createElement("link"),Mt(m);var _=m;return _._p=new Promise(function(T,D){_.onload=T,_.onerror=D}),nn(m,"link",u),i.state.loading|=4,Fh(m,o.precedence,n),i.instance=m;case"script":return m=Ro(o.src),(f=n.querySelector(yu(m)))?(i.instance=f,Mt(f),f):(u=o,(f=Jn.get(m))&&(u=E({},o),_p(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),Mt(f),nn(f,"link",u),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Fh(u,o.precedence,n));return i.instance}function Fh(n,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,_=0;_<u.length;_++){var T=u[_];if(T.dataset.precedence===i)m=T;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function yp(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function _p(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Hh=null;function Z0(n,i,o){if(Hh===null){var u=new Map,f=Hh=new Map;f.set(o,u)}else f=Hh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var m=o[f];if(!(m[xr]||m[Ot]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(i)||"";_=n+_;var T=u.get(_);T?T.push(m):u.set(_,[m])}}return u}function eb(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function Ox(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(n=i.disabled,typeof i.precedence=="string"&&n==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function tb(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Mx(n,i,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=Io(u.href),m=i.querySelector(gu(f));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=Gh.bind(n),i.then(n,n)),o.state.loading|=4,o.instance=m,Mt(m);return}m=i.ownerDocument||i,u=J0(u),(f=Jn.get(f))&&yp(u,f),m=m.createElement("link"),Mt(m);var _=m;_._p=new Promise(function(T,D){_.onload=T,_.onerror=D}),nn(m,"link",u),o.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Gh.bind(n),i.addEventListener("load",o),i.addEventListener("error",o))}}var vp=0;function kx(n,i){return n.stylesheets&&n.count===0&&Qh(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&Qh(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+i);0<n.imgBytes&&vp===0&&(vp=62500*px());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Qh(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>vp?50:800)+i);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function Gh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Kh=null;function Qh(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Kh=new Map,i.forEach(Px,n),Kh=null,Gh.call(n))}function Px(n,i){if(!(i.state.loading&4)){var o=Kh.get(n);if(o)var u=o.get(null);else{o=new Map,Kh.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var _=f[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),u=_)}u&&o.set(null,u)}f=i.instance,_=f.getAttribute("data-precedence"),m=o.get(_)||u,m===u&&o.set(null,f),o.set(_,f),this.count++,u=Gh.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var _u={$$typeof:Z,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function Lx(n,i,o,u,f,m,_,T,D){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Sr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sr(0),this.hiddenUpdates=Sr(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function nb(n,i,o,u,f,m,_,T,D,G,W,re){return n=new Lx(n,i,o,_,D,G,W,re,T),i=1,m===!0&&(i|=24),m=xn(3,null,null,i),n.current=m,m.stateNode=n,i=Wd(),i.refCount++,n.pooledCache=i,i.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:i},nm(m),n}function rb(n){return n?(n=io,n):io}function ib(n,i,o,u,f,m){f=rb(f),u.context===null?u.context=f:u.pendingContext=f,u=Ji(i),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=Wi(n,u,i),o!==null&&(bn(o,n,i),Xl(o,n,i))}function sb(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function bp(n,i){sb(n,i),(n=n.alternate)&&sb(n,i)}function ab(n){if(n.tag===13||n.tag===31){var i=ea(n,67108864);i!==null&&bn(i,n,67108864),bp(n,67108864)}}function ob(n){if(n.tag===13||n.tag===31){var i=Dn();i=qs(i);var o=ea(n,i);o!==null&&bn(o,n,i),bp(n,i)}}var $h=!0;function zx(n,i,o,u){var f=j.T;j.T=null;var m=ae.p;try{ae.p=2,Ep(n,i,o,u)}finally{ae.p=m,j.T=f}}function Ux(n,i,o,u){var f=j.T;j.T=null;var m=ae.p;try{ae.p=8,Ep(n,i,o,u)}finally{ae.p=m,j.T=f}}function Ep(n,i,o,u){if($h){var f=Tp(u);if(f===null)op(n,i,u,Yh,o),ub(n,u);else if(Bx(f,n,i,o,u))u.stopPropagation();else if(ub(n,u),i&4&&-1<jx.indexOf(n)){for(;f!==null;){var m=jn(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=Tr(m.pendingLanes);if(_!==0){var T=m;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var D=1<<31-xt(_);T.entanglements[1]|=D,_&=~D}Br(m),(We&6)===0&&(Dh=Xt()+500,fu(0))}}break;case 31:case 13:T=ea(m,2),T!==null&&bn(T,m,2),Oh(),bp(m,2)}if(m=Tp(u),m===null&&op(n,i,u,Yh,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else op(n,i,u,null,o)}}function Tp(n){return n=Bn(n),wp(n)}var Yh=null;function wp(n){if(Yh=null,n=Ir(n),n!==null){var i=l(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=c(i),n!==null)return n;n=null}else if(o===31){if(n=d(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Yh=n,null}function lb(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Zr()){case zs:return 2;case br:return 8;case Pi:case Cd:return 32;case Ic:return 268435456;default:return 32}default:return 32}}var Sp=!1,us=null,cs=null,hs=null,vu=new Map,bu=new Map,fs=[],jx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ub(n,i){switch(n){case"focusin":case"focusout":us=null;break;case"dragenter":case"dragleave":cs=null;break;case"mouseover":case"mouseout":hs=null;break;case"pointerover":case"pointerout":vu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":bu.delete(i.pointerId)}}function Eu(n,i,o,u,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},i!==null&&(i=jn(i),i!==null&&ab(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function Bx(n,i,o,u,f){switch(i){case"focusin":return us=Eu(us,n,i,o,u,f),!0;case"dragenter":return cs=Eu(cs,n,i,o,u,f),!0;case"mouseover":return hs=Eu(hs,n,i,o,u,f),!0;case"pointerover":var m=f.pointerId;return vu.set(m,Eu(vu.get(m)||null,n,i,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,bu.set(m,Eu(bu.get(m)||null,n,i,o,u,f)),!0}return!1}function cb(n){var i=Ir(n.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){n.blockedOn=i,ir(n.priority,function(){ob(o)});return}}else if(i===31){if(i=d(o),i!==null){n.blockedOn=i,ir(n.priority,function(){ob(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Xh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=Tp(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Ml=u,o.target.dispatchEvent(u),Ml=null}else return i=jn(o),i!==null&&ab(i),n.blockedOn=o,!1;i.shift()}return!0}function hb(n,i,o){Xh(n)&&o.delete(i)}function qx(){Sp=!1,us!==null&&Xh(us)&&(us=null),cs!==null&&Xh(cs)&&(cs=null),hs!==null&&Xh(hs)&&(hs=null),vu.forEach(hb),bu.forEach(hb)}function Jh(n,i){n.blockedOn===i&&(n.blockedOn=null,Sp||(Sp=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,qx)))}var Wh=null;function fb(n){Wh!==n&&(Wh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Wh===n&&(Wh=null);for(var i=0;i<n.length;i+=3){var o=n[i],u=n[i+1],f=n[i+2];if(typeof u!="function"){if(wp(u||o)===null)continue;break}var m=jn(o);m!==null&&(n.splice(i,3),i-=3,Tm(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Co(n){function i(D){return Jh(D,n)}us!==null&&Jh(us,n),cs!==null&&Jh(cs,n),hs!==null&&Jh(hs,n),vu.forEach(i),bu.forEach(i);for(var o=0;o<fs.length;o++){var u=fs[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<fs.length&&(o=fs[0],o.blockedOn===null);)cb(o),o.blockedOn===null&&fs.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],_=f[Gt]||null;if(typeof m=="function")_||fb(o);else if(_){var T=null;if(m&&m.hasAttribute("formAction")){if(f=m,_=m[Gt]||null)T=_.formAction;else if(wp(f)!==null)continue}else T=_.action;typeof T=="function"?o[u+1]=T:(o.splice(u,3),u-=3),fb(o)}}}function db(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function Ap(n){this._internalRoot=n}Zh.prototype.render=Ap.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,u=Dn();ib(o,u,n,i,null,null)},Zh.prototype.unmount=Ap.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;ib(n.current,2,null,n,null,null),Oh(),i[Ar]=null}};function Zh(n){this._internalRoot=n}Zh.prototype.unstable_scheduleHydration=function(n){if(n){var i=Oc();n={blockedOn:null,target:n,priority:i};for(var o=0;o<fs.length&&i!==0&&i<fs[o].priority;o++);fs.splice(o,0,n),o===0&&cb(n)}};var mb=e.version;if(mb!=="19.2.4")throw Error(r(527,mb,"19.2.4"));ae.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=g(i),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var Fx={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ef=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ef.isDisabled&&ef.supportsFiber)try{nr=ef.inject(Fx),Jt=ef}catch{}}return wu.createRoot=function(n,i){if(!a(n))throw Error(r(299));var o=!1,u="",f=Ev,m=Tv,_=wv;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=nb(n,1,!1,null,null,o,u,null,f,m,_,db),n[Ar]=i.current,ap(n),new Ap(i)},wu.hydrateRoot=function(n,i,o){if(!a(n))throw Error(r(299));var u=!1,f="",m=Ev,_=Tv,T=wv,D=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError),o.formState!==void 0&&(D=o.formState)),i=nb(n,1,!0,i,o??null,u,f,D,m,_,T,db),i.context=rb(null),o=i.current,u=Dn(),u=qs(u),f=Ji(u),f.callback=null,Wi(o,f,u),o=u,i.current.lanes=o,js(i,o),Br(i),n[Ar]=i.current,ap(n),new Zh(i)},wu.version="19.2.4",wu}var Sb;function eI(){if(Sb)return Rp.exports;Sb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Rp.exports=Zx(),Rp.exports}var tI=eI();var Ab="popstate";function nI(s={}){function e(r,a){let{pathname:l,search:c,hash:d}=r.location;return eg("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){return typeof a=="string"?a:Xu(a)}return iI(e,t,null,s)}function Et(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Yr(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rI(){return Math.random().toString(36).substring(2,10)}function xb(s,e){return{usr:s.state,key:s.key,idx:e}}function eg(s,e,t=null,r){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?dl(e):e,state:t,key:e&&e.key||r||rI()}}function Xu({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function dl(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let r=s.indexOf("?");r>=0&&(e.search=s.substring(r),s=s.substring(0,r)),s&&(e.pathname=s)}return e}function iI(s,e,t,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,c=a.history,d="POP",p=null,g=v();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function v(){return(c.state||{idx:null}).idx}function E(){d="POP";let L=v(),ne=L==null?null:L-g;g=L,p&&p({action:d,location:q.location,delta:ne})}function S(L,ne){d="PUSH";let J=eg(q.location,L,ne);g=v()+1;let Z=xb(J,g),le=q.createHref(J);try{c.pushState(Z,"",le)}catch(fe){if(fe instanceof DOMException&&fe.name==="DataCloneError")throw fe;a.location.assign(le)}l&&p&&p({action:d,location:q.location,delta:1})}function N(L,ne){d="REPLACE";let J=eg(q.location,L,ne);g=v();let Z=xb(J,g),le=q.createHref(J);c.replaceState(Z,"",le),l&&p&&p({action:d,location:q.location,delta:0})}function K(L){return sI(L)}let q={get action(){return d},get location(){return s(a,c)},listen(L){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(Ab,E),p=L,()=>{a.removeEventListener(Ab,E),p=null}},createHref(L){return e(a,L)},createURL:K,encodeLocation(L){let ne=K(L);return{pathname:ne.pathname,search:ne.search,hash:ne.hash}},push:S,replace:N,go(L){return c.go(L)}};return q}function sI(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Et(t,"No window.location.(origin|href) available to create URL");let r=typeof s=="string"?s:Xu(s);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function DT(s,e,t="/"){return aI(s,e,t,!1)}function aI(s,e,t,r){let a=typeof e=="string"?dl(e):e,l=Si(a.pathname||"/",t);if(l==null)return null;let c=VT(s);oI(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let g=_I(l);d=gI(c[p],g,r)}return d}function VT(s,e=[],t=[],r="",a=!1){let l=(c,d,p=a,g)=>{let v={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(r)&&p)return;Et(v.relativePath.startsWith(r),`Absolute route path "${v.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(r.length)}let E=Ti([r,v.relativePath]),S=t.concat(v);c.children&&c.children.length>0&&(Et(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),VT(c.children,e,S,E,p)),!(c.path==null&&!c.index)&&e.push({path:E,score:mI(E,c.index),routesMeta:S})};return s.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))l(c,d);else for(let p of OT(c.path))l(c,d,!0,p)}),e}function OT(s){let e=s.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let c=OT(r.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),a&&d.push(...c),d.map(p=>s.startsWith("/")&&p===""?"/":p)}function oI(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:pI(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var lI=/^:[\w-]+$/,uI=3,cI=2,hI=1,fI=10,dI=-2,Ib=s=>s==="*";function mI(s,e){let t=s.split("/"),r=t.length;return t.some(Ib)&&(r+=dI),e&&(r+=cI),t.filter(a=>!Ib(a)).reduce((a,l)=>a+(lI.test(l)?uI:l===""?hI:fI),r)}function pI(s,e){return s.length===e.length&&s.slice(0,-1).every((r,a)=>r===e[a])?s[s.length-1]-e[e.length-1]:0}function gI(s,e,t=!1){let{routesMeta:r}=s,a={},l="/",c=[];for(let d=0;d<r.length;++d){let p=r[d],g=d===r.length-1,v=l==="/"?e:e.slice(l.length)||"/",E=Cf({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},v),S=p.route;if(!E&&g&&t&&!r[r.length-1].route.index&&(E=Cf({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!E)return null;Object.assign(a,E.params),c.push({params:a,pathname:Ti([l,E.pathname]),pathnameBase:TI(Ti([l,E.pathnameBase])),route:S}),E.pathnameBase!=="/"&&(l=Ti([l,E.pathnameBase]))}return c}function Cf(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,r]=yI(s.path,s.caseSensitive,s.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:r.reduce((g,{paramName:v,isOptional:E},S)=>{if(v==="*"){let K=d[S]||"";c=l.slice(0,l.length-K.length).replace(/(.)\/+$/,"$1")}const N=d[S];return E&&!N?g[v]=void 0:g[v]=(N||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:s}}function yI(s,e=!1,t=!0){Yr(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let r=[],a="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(r.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(r.push({paramName:"*"}),a+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":s!==""&&s!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function _I(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yr(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function Si(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=s.charAt(t);return r&&r!=="/"?null:s.slice(t)||"/"}var vI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function bI(s,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof s=="string"?dl(s):s,l;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?l=Rb(t.substring(1),"/"):l=Rb(t,e)):l=e,{pathname:l,search:wI(r),hash:SI(a)}}function Rb(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Vp(s,e,t,r){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function EI(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function MT(s){let e=EI(s);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function kT(s,e,t,r=!1){let a;typeof s=="string"?a=dl(s):(a={...s},Et(!a.pathname||!a.pathname.includes("?"),Vp("?","pathname","search",a)),Et(!a.pathname||!a.pathname.includes("#"),Vp("#","pathname","hash",a)),Et(!a.search||!a.search.includes("#"),Vp("#","search","hash",a)));let l=s===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let E=e.length-1;if(!r&&c.startsWith("..")){let S=c.split("/");for(;S[0]==="..";)S.shift(),E-=1;a.pathname=S.join("/")}d=E>=0?e[E]:"/"}let p=bI(a,d),g=c&&c!=="/"&&c.endsWith("/"),v=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||v)&&(p.pathname+="/"),p}var Ti=s=>s.join("/").replace(/\/\/+/g,"/"),TI=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),wI=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,SI=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,AI=class{constructor(s,e,t,r=!1){this.status=s,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function xI(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function II(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var PT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function LT(s,e){let t=s;if(typeof t!="string"||!vI.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,a=!1;if(PT)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),d=Si(c.pathname,e);c.origin===l.origin&&d!=null?t=d+c.search+c.hash:a=!0}catch{Yr(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:a,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var zT=["POST","PUT","PATCH","DELETE"];new Set(zT);var RI=["GET",...zT];new Set(RI);var ml=U.createContext(null);ml.displayName="DataRouter";var rd=U.createContext(null);rd.displayName="DataRouterState";var CI=U.createContext(!1),UT=U.createContext({isTransitioning:!1});UT.displayName="ViewTransition";var NI=U.createContext(new Map);NI.displayName="Fetchers";var DI=U.createContext(null);DI.displayName="Await";var er=U.createContext(null);er.displayName="Navigation";var fc=U.createContext(null);fc.displayName="Location";var Wr=U.createContext({outlet:null,matches:[],isDataRoute:!1});Wr.displayName="Route";var Ug=U.createContext(null);Ug.displayName="RouteError";var jT="REACT_ROUTER_ERROR",VI="REDIRECT",OI="ROUTE_ERROR_RESPONSE";function MI(s){if(s.startsWith(`${jT}:${VI}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function kI(s){if(s.startsWith(`${jT}:${OI}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new AI(e.status,e.statusText,e.data)}catch{}}function PI(s,{relative:e}={}){Et(dc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=U.useContext(er),{hash:a,pathname:l,search:c}=mc(s,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Ti([t,l])),r.createHref({pathname:d,search:c,hash:a})}function dc(){return U.useContext(fc)!=null}function Ci(){return Et(dc(),"useLocation() may be used only in the context of a <Router> component."),U.useContext(fc).location}var BT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function qT(s){U.useContext(er).static||U.useLayoutEffect(s)}function Ua(){let{isDataRoute:s}=U.useContext(Wr);return s?YI():LI()}function LI(){Et(dc(),"useNavigate() may be used only in the context of a <Router> component.");let s=U.useContext(ml),{basename:e,navigator:t}=U.useContext(er),{matches:r}=U.useContext(Wr),{pathname:a}=Ci(),l=JSON.stringify(MT(r)),c=U.useRef(!1);return qT(()=>{c.current=!0}),U.useCallback((p,g={})=>{if(Yr(c.current,BT),!c.current)return;if(typeof p=="number"){t.go(p);return}let v=kT(p,JSON.parse(l),a,g.relative==="path");s==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Ti([e,v.pathname])),(g.replace?t.replace:t.push)(v,g.state,g)},[e,t,l,a,s])}U.createContext(null);function FT(){let{matches:s}=U.useContext(Wr),e=s[s.length-1];return e?e.params:{}}function mc(s,{relative:e}={}){let{matches:t}=U.useContext(Wr),{pathname:r}=Ci(),a=JSON.stringify(MT(t));return U.useMemo(()=>kT(s,JSON.parse(a),r,e==="path"),[s,a,r,e])}function zI(s,e){return HT(s,e)}function HT(s,e,t,r,a){Et(dc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=U.useContext(er),{matches:c}=U.useContext(Wr),d=c[c.length-1],p=d?d.params:{},g=d?d.pathname:"/",v=d?d.pathnameBase:"/",E=d&&d.route;{let J=E&&E.path||"";KT(g,!E||J.endsWith("*")||J.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${J}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${J}"> to <Route path="${J==="/"?"*":`${J}/*`}">.`)}let S=Ci(),N;if(e){let J=typeof e=="string"?dl(e):e;Et(v==="/"||J.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${J.pathname}" was given in the \`location\` prop.`),N=J}else N=S;let K=N.pathname||"/",q=K;if(v!=="/"){let J=v.replace(/^\//,"").split("/");q="/"+K.replace(/^\//,"").split("/").slice(J.length).join("/")}let L=DT(s,{pathname:q});Yr(E||L!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),Yr(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ne=FI(L&&L.map(J=>Object.assign({},J,{params:Object.assign({},p,J.params),pathname:Ti([v,l.encodeLocation?l.encodeLocation(J.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:J.pathname]),pathnameBase:J.pathnameBase==="/"?v:Ti([v,l.encodeLocation?l.encodeLocation(J.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:J.pathnameBase])})),c,t,r,a);return e&&ne?U.createElement(fc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},ne):ne}function UI(){let s=$I(),e=xI(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",s),c=U.createElement(U.Fragment,null,U.createElement("p",null," Hey developer "),U.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",U.createElement("code",{style:l},"ErrorBoundary")," or"," ",U.createElement("code",{style:l},"errorElement")," prop on your route.")),U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),t?U.createElement("pre",{style:a},t):null,c)}var jI=U.createElement(UI,null),GT=class extends U.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const t=kI(s.digest);t&&(s=t)}let e=s!==void 0?U.createElement(Wr.Provider,{value:this.props.routeContext},U.createElement(Ug.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?U.createElement(BI,{error:s},e):e}};GT.contextType=CI;var Op=new WeakMap;function BI({children:s,error:e}){let{basename:t}=U.useContext(er);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=MI(e.digest);if(r){let a=Op.get(e);if(a)throw a;let l=LT(r.location,t);if(PT&&!Op.get(e))if(l.isExternal||r.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:r.replace}));throw Op.set(e,c),c}return U.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return s}function qI({routeContext:s,match:e,children:t}){let r=U.useContext(ml);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),U.createElement(Wr.Provider,{value:s},t)}function FI(s,e=[],t=null,r=null,a=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let l=s,c=t?.errors;if(c!=null){let v=l.findIndex(E=>E.route.id&&c?.[E.route.id]!==void 0);Et(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,v+1))}let d=!1,p=-1;if(t)for(let v=0;v<l.length;v++){let E=l[v];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(p=v),E.route.id){let{loaderData:S,errors:N}=t,K=E.route.loader&&!S.hasOwnProperty(E.route.id)&&(!N||N[E.route.id]===void 0);if(E.route.lazy||K){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let g=t&&r?(v,E)=>{r(v,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:II(t.matches),errorInfo:E})}:void 0;return l.reduceRight((v,E,S)=>{let N,K=!1,q=null,L=null;t&&(N=c&&E.route.id?c[E.route.id]:void 0,q=E.route.errorElement||jI,d&&(p<0&&S===0?(KT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),K=!0,L=null):p===S&&(K=!0,L=E.route.hydrateFallbackElement||null)));let ne=e.concat(l.slice(0,S+1)),J=()=>{let Z;return N?Z=q:K?Z=L:E.route.Component?Z=U.createElement(E.route.Component,null):E.route.element?Z=E.route.element:Z=v,U.createElement(qI,{match:E,routeContext:{outlet:v,matches:ne,isDataRoute:t!=null},children:Z})};return t&&(E.route.ErrorBoundary||E.route.errorElement||S===0)?U.createElement(GT,{location:t.location,revalidation:t.revalidation,component:q,error:N,children:J(),routeContext:{outlet:null,matches:ne,isDataRoute:!0},onError:g}):J()},null)}function jg(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function HI(s){let e=U.useContext(ml);return Et(e,jg(s)),e}function GI(s){let e=U.useContext(rd);return Et(e,jg(s)),e}function KI(s){let e=U.useContext(Wr);return Et(e,jg(s)),e}function Bg(s){let e=KI(s),t=e.matches[e.matches.length-1];return Et(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function QI(){return Bg("useRouteId")}function $I(){let s=U.useContext(Ug),e=GI("useRouteError"),t=Bg("useRouteError");return s!==void 0?s:e.errors?.[t]}function YI(){let{router:s}=HI("useNavigate"),e=Bg("useNavigate"),t=U.useRef(!1);return qT(()=>{t.current=!0}),U.useCallback(async(a,l={})=>{Yr(t.current,BT),t.current&&(typeof a=="number"?await s.navigate(a):await s.navigate(a,{fromRouteId:e,...l}))},[s,e])}var Cb={};function KT(s,e,t){!e&&!Cb[s]&&(Cb[s]=!0,Yr(!1,t))}U.memo(XI);function XI({routes:s,future:e,state:t,onError:r}){return HT(s,void 0,t,r,e)}function ma(s){Et(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function JI({basename:s="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:l=!1,unstable_useTransitions:c}){Et(!dc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=s.replace(/^\/*/,"/"),p=U.useMemo(()=>({basename:d,navigator:a,static:l,unstable_useTransitions:c,future:{}}),[d,a,l,c]);typeof t=="string"&&(t=dl(t));let{pathname:g="/",search:v="",hash:E="",state:S=null,key:N="default"}=t,K=U.useMemo(()=>{let q=Si(g,d);return q==null?null:{location:{pathname:q,search:v,hash:E,state:S,key:N},navigationType:r}},[d,g,v,E,S,N,r]);return Yr(K!=null,`<Router basename="${d}"> is not able to match the URL "${g}${v}${E}" because it does not start with the basename, so the <Router> won't render anything.`),K==null?null:U.createElement(er.Provider,{value:p},U.createElement(fc.Provider,{children:e,value:K}))}function WI({children:s,location:e}){return zI(tg(s),e)}function tg(s,e=[]){let t=[];return U.Children.forEach(s,(r,a)=>{if(!U.isValidElement(r))return;let l=[...e,a];if(r.type===U.Fragment){t.push.apply(t,tg(r.props.children,l));return}Et(r.type===ma,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Et(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=tg(r.props.children,l)),t.push(c)}),t}var hf="get",ff="application/x-www-form-urlencoded";function id(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function ZI(s){return id(s)&&s.tagName.toLowerCase()==="button"}function eR(s){return id(s)&&s.tagName.toLowerCase()==="form"}function tR(s){return id(s)&&s.tagName.toLowerCase()==="input"}function nR(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function rR(s,e){return s.button===0&&(!e||e==="_self")&&!nR(s)}var tf=null;function iR(){if(tf===null)try{new FormData(document.createElement("form"),0),tf=!1}catch{tf=!0}return tf}var sR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Mp(s){return s!=null&&!sR.has(s)?(Yr(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ff}"`),null):s}function aR(s,e){let t,r,a,l,c;if(eR(s)){let d=s.getAttribute("action");r=d?Si(d,e):null,t=s.getAttribute("method")||hf,a=Mp(s.getAttribute("enctype"))||ff,l=new FormData(s)}else if(ZI(s)||tR(s)&&(s.type==="submit"||s.type==="image")){let d=s.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=s.getAttribute("formaction")||d.getAttribute("action");if(r=p?Si(p,e):null,t=s.getAttribute("formmethod")||d.getAttribute("method")||hf,a=Mp(s.getAttribute("formenctype"))||Mp(d.getAttribute("enctype"))||ff,l=new FormData(d,s),!iR()){let{name:g,type:v,value:E}=s;if(v==="image"){let S=g?`${g}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else g&&l.append(g,E)}}else{if(id(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=hf,r=null,a=ff,c=s}return l&&a==="text/plain"&&(c=l,l=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function qg(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function oR(s,e,t,r){let a=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${r}`:a.pathname=`${a.pathname}.${r}`:a.pathname==="/"?a.pathname=`_root.${r}`:e&&Si(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${r}`,a}async function lR(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function uR(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function cR(s,e,t){let r=await Promise.all(s.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await lR(l,t);return c.links?c.links():[]}return[]}));return mR(r.flat(1).filter(uR).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Nb(s,e,t,r,a,l){let c=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,d=(p,g)=>t[g].pathname!==p.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==p.params["*"];return l==="assets"?e.filter((p,g)=>c(p,g)||d(p,g)):l==="data"?e.filter((p,g)=>{let v=r.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(c(p,g)||d(p,g))return!0;if(p.route.shouldRevalidate){let E=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function hR(s,e,{includeHydrateFallback:t}={}){return fR(s.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function fR(s){return[...new Set(s)]}function dR(s){let e={},t=Object.keys(s).sort();for(let r of t)e[r]=s[r];return e}function mR(s,e){let t=new Set;return new Set(e),s.reduce((r,a)=>{let l=JSON.stringify(dR(a));return t.has(l)||(t.add(l),r.push({key:l,link:a})),r},[])}function QT(){let s=U.useContext(ml);return qg(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function pR(){let s=U.useContext(rd);return qg(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Fg=U.createContext(void 0);Fg.displayName="FrameworkContext";function $T(){let s=U.useContext(Fg);return qg(s,"You must render this element inside a <HydratedRouter> element"),s}function gR(s,e){let t=U.useContext(Fg),[r,a]=U.useState(!1),[l,c]=U.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:g,onMouseLeave:v,onTouchStart:E}=e,S=U.useRef(null);U.useEffect(()=>{if(s==="render"&&c(!0),s==="viewport"){let q=ne=>{ne.forEach(J=>{c(J.isIntersecting)})},L=new IntersectionObserver(q,{threshold:.5});return S.current&&L.observe(S.current),()=>{L.disconnect()}}},[s]),U.useEffect(()=>{if(r){let q=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(q)}}},[r]);let N=()=>{a(!0)},K=()=>{a(!1),c(!1)};return t?s!=="intent"?[l,S,{}]:[l,S,{onFocus:Su(d,N),onBlur:Su(p,K),onMouseEnter:Su(g,N),onMouseLeave:Su(v,K),onTouchStart:Su(E,N)}]:[!1,S,{}]}function Su(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function yR({page:s,...e}){let{router:t}=QT(),r=U.useMemo(()=>DT(t.routes,s,t.basename),[t.routes,s,t.basename]);return r?U.createElement(vR,{page:s,matches:r,...e}):null}function _R(s){let{manifest:e,routeModules:t}=$T(),[r,a]=U.useState([]);return U.useEffect(()=>{let l=!1;return cR(s,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[s,e,t]),r}function vR({page:s,matches:e,...t}){let r=Ci(),{future:a,manifest:l,routeModules:c}=$T(),{basename:d}=QT(),{loaderData:p,matches:g}=pR(),v=U.useMemo(()=>Nb(s,e,g,l,r,"data"),[s,e,g,l,r]),E=U.useMemo(()=>Nb(s,e,g,l,r,"assets"),[s,e,g,l,r]),S=U.useMemo(()=>{if(s===r.pathname+r.search+r.hash)return[];let q=new Set,L=!1;if(e.forEach(J=>{let Z=l.routes[J.route.id];!Z||!Z.hasLoader||(!v.some(le=>le.route.id===J.route.id)&&J.route.id in p&&c[J.route.id]?.shouldRevalidate||Z.hasClientLoader?L=!0:q.add(J.route.id))}),q.size===0)return[];let ne=oR(s,d,a.unstable_trailingSlashAwareDataRequests,"data");return L&&q.size>0&&ne.searchParams.set("_routes",e.filter(J=>q.has(J.route.id)).map(J=>J.route.id).join(",")),[ne.pathname+ne.search]},[d,a.unstable_trailingSlashAwareDataRequests,p,r,l,v,e,s,c]),N=U.useMemo(()=>hR(E,l),[E,l]),K=_R(E);return U.createElement(U.Fragment,null,S.map(q=>U.createElement("link",{key:q,rel:"prefetch",as:"fetch",href:q,...t})),N.map(q=>U.createElement("link",{key:q,rel:"modulepreload",href:q,...t})),K.map(({key:q,link:L})=>U.createElement("link",{key:q,nonce:t.nonce,...L,crossOrigin:L.crossOrigin??t.crossOrigin})))}function bR(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var ER=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ER&&(window.__reactRouterVersion="7.13.0")}catch{}function TR({basename:s,children:e,unstable_useTransitions:t,window:r}){let a=U.useRef();a.current==null&&(a.current=nI({window:r,v5Compat:!0}));let l=a.current,[c,d]=U.useState({action:l.action,location:l.location}),p=U.useCallback(g=>{t===!1?d(g):U.startTransition(()=>d(g))},[t]);return U.useLayoutEffect(()=>l.listen(p),[l,p]),U.createElement(JI,{basename:s,children:e,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:t})}var YT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,XT=U.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:l,replace:c,state:d,target:p,to:g,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:S,...N},K){let{basename:q,unstable_useTransitions:L}=U.useContext(er),ne=typeof g=="string"&&YT.test(g),J=LT(g,q);g=J.to;let Z=PI(g,{relative:a}),[le,fe,ce]=gR(r,N),w=xR(g,{replace:c,state:d,target:p,preventScrollReset:v,relative:a,viewTransition:E,unstable_defaultShouldRevalidate:S,unstable_useTransitions:L});function A(M){e&&e(M),M.defaultPrevented||w(M)}let R=U.createElement("a",{...N,...ce,href:J.absoluteURL||Z,onClick:J.isExternal||l?e:A,ref:bR(K,fe),target:p,"data-discover":!ne&&t==="render"?"true":void 0});return le&&!ne?U.createElement(U.Fragment,null,R,U.createElement(yR,{page:Z})):R});XT.displayName="Link";var wR=U.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:l,to:c,viewTransition:d,children:p,...g},v){let E=mc(c,{relative:g.relative}),S=Ci(),N=U.useContext(rd),{navigator:K,basename:q}=U.useContext(er),L=N!=null&&DR(E)&&d===!0,ne=K.encodeLocation?K.encodeLocation(E).pathname:E.pathname,J=S.pathname,Z=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;t||(J=J.toLowerCase(),Z=Z?Z.toLowerCase():null,ne=ne.toLowerCase()),Z&&q&&(Z=Si(Z,q)||Z);const le=ne!=="/"&&ne.endsWith("/")?ne.length-1:ne.length;let fe=J===ne||!a&&J.startsWith(ne)&&J.charAt(le)==="/",ce=Z!=null&&(Z===ne||!a&&Z.startsWith(ne)&&Z.charAt(ne.length)==="/"),w={isActive:fe,isPending:ce,isTransitioning:L},A=fe?e:void 0,R;typeof r=="function"?R=r(w):R=[r,fe?"active":null,ce?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let M=typeof l=="function"?l(w):l;return U.createElement(XT,{...g,"aria-current":A,className:R,ref:v,style:M,to:c,viewTransition:d},typeof p=="function"?p(w):p)});wR.displayName="NavLink";var SR=U.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:l,method:c=hf,action:d,onSubmit:p,relative:g,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:S,...N},K)=>{let{unstable_useTransitions:q}=U.useContext(er),L=CR(),ne=NR(d,{relative:g}),J=c.toLowerCase()==="get"?"get":"post",Z=typeof d=="string"&&YT.test(d),le=fe=>{if(p&&p(fe),fe.defaultPrevented)return;fe.preventDefault();let ce=fe.nativeEvent.submitter,w=ce?.getAttribute("formmethod")||c,A=()=>L(ce||fe.currentTarget,{fetcherKey:e,method:w,navigate:t,replace:a,state:l,relative:g,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:S});q&&t!==!1?U.startTransition(()=>A()):A()};return U.createElement("form",{ref:K,method:J,action:ne,onSubmit:r?p:le,...N,"data-discover":!Z&&s==="render"?"true":void 0})});SR.displayName="Form";function AR(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function JT(s){let e=U.useContext(ml);return Et(e,AR(s)),e}function xR(s,{target:e,replace:t,state:r,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d,unstable_useTransitions:p}={}){let g=Ua(),v=Ci(),E=mc(s,{relative:l});return U.useCallback(S=>{if(rR(S,e)){S.preventDefault();let N=t!==void 0?t:Xu(v)===Xu(E),K=()=>g(s,{replace:N,state:r,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d});p?U.startTransition(()=>K()):K()}},[v,g,E,t,r,e,s,a,l,c,d,p])}var IR=0,RR=()=>`__${String(++IR)}__`;function CR(){let{router:s}=JT("useSubmit"),{basename:e}=U.useContext(er),t=QI(),r=s.fetch,a=s.navigate;return U.useCallback(async(l,c={})=>{let{action:d,method:p,encType:g,formData:v,body:E}=aR(l,e);if(c.navigate===!1){let S=c.fetcherKey||RR();await r(S,t,c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:v,body:E,formMethod:c.method||p,formEncType:c.encType||g,flushSync:c.flushSync})}else await a(c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:v,body:E,formMethod:c.method||p,formEncType:c.encType||g,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[r,a,e,t])}function NR(s,{relative:e}={}){let{basename:t}=U.useContext(er),r=U.useContext(Wr);Et(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={...mc(s||".",{relative:e})},c=Ci();if(s==null){l.search=c.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(v=>v==="")){d.delete("index"),p.filter(E=>E).forEach(E=>d.append("index",E));let v=d.toString();l.search=v?`?${v}`:""}}return(!s||s===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Ti([t,l.pathname])),Xu(l)}function DR(s,{relative:e}={}){let t=U.useContext(UT);Et(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=JT("useViewTransitionState"),a=mc(s,{relative:e});if(!t.isTransitioning)return!1;let l=Si(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=Si(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Cf(a.pathname,c)!=null||Cf(a.pathname,l)!=null}const WT=(...s)=>s.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();const VR=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const OR=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());const Db=s=>{const e=OR(s);return e.charAt(0).toUpperCase()+e.slice(1)};var MR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const kR=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const PR=U.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:a="",children:l,iconNode:c,...d},p)=>U.createElement("svg",{ref:p,...MR,width:e,height:e,stroke:s,strokeWidth:r?Number(t)*24/Number(e):t,className:WT("lucide",a),...!l&&!kR(d)&&{"aria-hidden":"true"},...d},[...c.map(([g,v])=>U.createElement(g,v)),...Array.isArray(l)?l:[l]]));const Tt=(s,e)=>{const t=U.forwardRef(({className:r,...a},l)=>U.createElement(PR,{ref:l,iconNode:e,className:WT(`lucide-${VR(Db(s))}`,`lucide-${s}`,r),...a}));return t.displayName=Db(s),t};const LR=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],zR=Tt("arrow-left-right",LR);const UR=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],sd=Tt("arrow-left",UR);const jR=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Vb=Tt("award",jR);const BR=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],ZT=Tt("book-open",BR);const qR=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Bo=Tt("circle-check-big",qR);const FR=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],HR=Tt("clock",FR);const GR=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],KR=Tt("funnel",GR);const QR=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],$R=Tt("github",QR);const YR=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],XR=Tt("key",YR);const JR=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Ob=Tt("log-out",JR);const WR=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],ZR=Tt("moon",WR);const e2=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],t2=Tt("party-popper",e2);const n2=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],kp=Tt("refresh-ccw",n2);const r2=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],i2=Tt("save",r2);const s2=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],a2=Tt("search",s2);const o2=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],l2=Tt("settings",o2);const u2=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],c2=Tt("sun",u2);const h2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Du=Tt("target",h2);const f2=[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]],d2=Tt("thumbs-up",f2);const m2=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],p2=Tt("triangle-alert",m2);const g2=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],ng=Tt("trophy",g2);const y2=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],e1=Tt("user",y2);const _2=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Pp=Tt("x",_2),v2=({sections:s,progress:e,onSelectTheme:t,onSelectLesson:r})=>{const[a,l]=U.useState(""),c=U.useMemo(()=>{const d=a.trim().toLowerCase();return d?(s||[]).map(p=>{const g=p.items.filter(v=>v.name.toLowerCase().includes(d));return{...p,items:g}}).filter(p=>p.items.length>0):s||[]},[s,a]);return x.jsxs("div",{className:"page container",children:[x.jsx("div",{style:{display:"flex",alignItems:"flex-start",marginTop:"60px"},children:x.jsxs("div",{children:[x.jsx("h1",{className:"page-title",children:"Entranement Code de la Route"}),x.jsx("p",{className:"muted",children:"Choisissez un sujet et lancez le Quiz."})]})}),x.jsxs("div",{className:"search",style:{position:"relative"},children:[x.jsx(a2,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--muted)"}}),x.jsx("input",{className:"input",type:"search",placeholder:"Rechercher un thme",value:a,onChange:d=>l(d.target.value),"aria-label":"Rechercher un thme",style:{paddingLeft:"40px"}})]}),c.map((d,p)=>x.jsxs("div",{className:"section mb-5",children:[d.title&&x.jsx("h2",{className:"mt-4 mb-3",style:{fontSize:"1.4rem"},children:d.title}),x.jsx("div",{className:"theme-grid",children:d.items.map(g=>{const v=e&&e[g.id],E=v?v.score:null,S=E!==null,N=g.id==="examen_B"||d.title==="Examen",K=g.lessonFile||!N&&g.file;return x.jsxs("div",{className:"theme-card card",style:{padding:"16px",display:"flex",flexDirection:"column",gap:"12px",position:"relative",overflow:"hidden",...N?{borderColor:"var(--warning)",background:"linear-gradient(to bottom right, var(--surface), rgba(245, 158, 11, 0.1))",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.15)"}:{}},children:[S&&x.jsxs("div",{style:{position:"absolute",top:0,right:0,background:"var(--primary)",color:"white",fontSize:"10px",padding:"2px 8px",borderBottomLeftRadius:"8px"},children:[E,"/",g.totalQuestions]}),x.jsxs("div",{style:{flex:1},children:[x.jsx("div",{className:"theme-name",style:{fontWeight:600,marginBottom:4,paddingRight:S?"40px":"0",...N?{color:"var(--warning)",fontSize:"1.1rem"}:{}},children:g.name}),g.totalQuestions>0&&x.jsxs("div",{className:"theme-meta",style:{color:"var(--muted)",fontSize:"13px"},children:[g.totalQuestions," questions"]})]}),x.jsxs("div",{style:{display:"flex",gap:"8px"},children:[g.file?x.jsx("button",{type:"button",className:`btn-primary ${N?"btn-exam":""}`,style:{flex:1,padding:"8px",display:"grid",placeItems:"center",...N?{background:"var(--warning)",borderColor:"var(--warning)",color:"#000"}:{}},onClick:()=>t(g),children:"Quiz"}):x.jsx("button",{type:"button",className:"btn-primary",style:{flex:1,padding:"8px",opacity:.5,cursor:"not-allowed",display:"grid",placeItems:"center"},disabled:!0,children:"Quiz"}),!N&&x.jsxs("button",{type:"button",className:"btn-ghost",style:{flex:1,padding:"8px",border:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",...K?{}:{opacity:.5,cursor:"not-allowed"}},disabled:!K,onClick:()=>{if(!K)return;const q=g.lessonFile||(g.file?g.file.replace(".json",".html"):null);q&&r(q)},children:[x.jsx(ZT,{size:16})," Leon"]})]})]},g.id)})})]},p)),c.length===0&&x.jsx("p",{className:"muted text-center mt-5",children:"Aucun rsultat trouv."})]})},Hg=({onOpenProfile:s,toggleTheme:e,isDarkMode:t,showProfileButton:r=!0})=>x.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",display:"flex",gap:"4px",zIndex:1e3,background:"var(--surface)",padding:"4px",borderRadius:"30px",border:"1px solid var(--border)",boxShadow:"var(--shadow-sm)"},children:[r&&x.jsx("button",{className:"btn-ghost",onClick:s,title:"Mon Profil",style:{width:"36px",height:"36px",display:"grid",placeItems:"center",padding:0,borderRadius:"50%"},children:x.jsx(e1,{size:20})}),x.jsx("button",{className:"theme-toggle btn-ghost",onClick:e,title:t?"Mode clair":"Mode sombre",style:{width:"36px",height:"36px",display:"grid",placeItems:"center",padding:0,borderRadius:"50%"},children:t?x.jsx(c2,{size:20}):x.jsx(ZR,{size:20})})]}),b2=({sections:s,progress:e,toggleTheme:t,isDarkMode:r})=>{const a=Ua(),l=d=>{a(`/quiz/${d.id}`)},c=d=>{a(`/lecon/${encodeURIComponent(d)}`)};return x.jsxs(x.Fragment,{children:[x.jsx(Hg,{onOpenProfile:()=>a("/profil"),toggleTheme:t,isDarkMode:r}),x.jsx(v2,{sections:s,progress:e,onSelectTheme:l,onSelectLesson:c})]})},E2="modulepreload",T2=function(s){return"/permis-online-free/"+s},Mb={},Lp=function(e,t,r){let a=Promise.resolve();if(t&&t.length>0){let p=function(g){return Promise.all(g.map(v=>Promise.resolve(v).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");a=p(t.map(g=>{if(g=T2(g),g in Mb)return;Mb[g]=!0;const v=g.endsWith(".css"),E=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${E}`))return;const S=document.createElement("link");if(S.rel=v?"stylesheet":E2,v||(S.as="script"),S.crossOrigin="",S.href=g,d&&S.setAttribute("nonce",d),document.head.appendChild(S),v)return new Promise((N,K)=>{S.addEventListener("load",N),S.addEventListener("error",()=>K(new Error(`Unable to preload CSS for ${g}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return a.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})},w2=({question:s,onAnswer:e,currentIndex:t,total:r,instantFeedback:a,autoPlayAudio:l,onNext:c,isLastQuestion:d,fileName:p,onQuestionUpdated:g})=>{const[v,E]=U.useState(null),[S,N]=U.useState(!1),[K,q]=U.useState(!1),[L,ne]=U.useState(""),[J,Z]=U.useState(null),[le,fe]=U.useState(!1),ce=3e4,[w,A]=U.useState(ce),R=U.useRef(null),M=U.useRef(null),O=U.useRef(!1),[k,C]=U.useState(!1),[Ae,je]=U.useState(null),[j,ae]=U.useState(null),[ee,ye]=U.useState(""),[xe,V]=U.useState(!1),[X,he]=U.useState(null),se=Ae||s,ue=!!Ae;U.useEffect(()=>{C(!1),je(null),ae(null),ye("")},[s?.id]),U.useEffect(()=>{const me=()=>{const De=window.speechSynthesis.getVoices().filter(vt=>vt.lang.startsWith("fr")),Ie=De.find(vt=>vt.name.includes("Google"))||De.find(vt=>vt.name.includes("Microsoft"))||De.find(vt=>vt.name.includes("Natural"))||De[0];he(Ie)};return me(),window.speechSynthesis.onvoiceschanged=me,()=>{window.speechSynthesis.onvoiceschanged=null}},[]),U.useEffect(()=>{if(l&&se){window.speechSynthesis.cancel();let me=se.question||"";if(se.propositions&&Array.isArray(se.propositions)){const De=se.propositions.map(Ie=>`${Ie.letter}... ${Ie.text}`).join(". ");me+=`. ${De}`}else se.type==="yes_no"&&(me+=". A... Oui. B... Non.");const Oe=new SpeechSynthesisUtterance(me);X&&(Oe.voice=X),Oe.lang="fr-FR",Oe.rate=1,window.speechSynthesis.speak(Oe)}else window.speechSynthesis.cancel();return()=>{window.speechSynthesis.cancel()}},[se,l,X]),U.useEffect(()=>{if(E(null),N(!1),ne(""),Z(null),fe(!1),A(ce),clearInterval(R.current),clearTimeout(M.current),ue&&(j===null||j==="error"))return;const Oe=Date.now();return R.current=setInterval(()=>{const De=Date.now()-Oe,Ie=Math.max(0,ce-De);A(Ie)},100),M.current=setTimeout(()=>{O.current||(fe(!0),E(null),N(!0),Z("incorrect"),e({isCorrect:!1,userAnswer:null,correctAnswer:se.correctAnswer,questionId:se.id}))},ce),()=>{clearInterval(R.current),clearTimeout(M.current)}},[se?.id,se?.question,ue,j]),U.useEffect(()=>{O.current=S},[S]);const Ce=U.useMemo(()=>{const me=se?.correctAnswer??"";return String(me).trim()},[se?.correctAnswer]),ze=me=>{const Oe=String(me??"").trim(),De=String(Ce??"").trim(),Ie=Number(Oe.replace(",",".")),vt=Number(De.replace(",","."));return!Number.isNaN(Ie)&&!Number.isNaN(vt)&&Oe!==""&&De!==""?Ie===vt:Oe.toUpperCase()===De.toUpperCase()},_t=me=>{if(S)return;E(me),N(!0);const Oe=me===se.correctAnswer;Z(Oe?"correct":"incorrect"),clearInterval(R.current),clearTimeout(M.current),e({isCorrect:Oe,userAnswer:me,correctAnswer:se.correctAnswer,questionId:se.id})},ct=()=>{if(S)return;const me=String(L??"").trim();if(!me)return;const Oe=ze(me);E(me),N(!0),Z(Oe?"correct":"incorrect"),clearInterval(R.current),clearTimeout(M.current),e({isCorrect:Oe,userAnswer:me,correctAnswer:se.correctAnswer,questionId:se.id})},tr=me=>le?"dimmed":S&&a?me===se.correctAnswer?"correct":me===v&&v!==se.correctAnswer?"incorrect":"dimmed":v==null?"":me===v?"selected":"dimmed",Vi=()=>{!Ae||!Ae.propositions||Ae.propositions.length<2||je(me=>{const Oe=[...me.propositions],De=Oe[0].text;Oe[0]={...Oe[0],text:Oe[1].text},Oe[1]={...Oe[1],text:De};let Ie=me.correctAnswer;return Ie===me.propositions[0].letter?Ie=me.propositions[1].letter:Ie===me.propositions[1].letter&&(Ie=me.propositions[0].letter),{...me,propositions:Oe,correctAnswer:Ie}})},Oi=async()=>{const me=localStorage.getItem("groq_api_key");if(!me){alert("Veuillez ajouter votre cl API Groq dans le Profil.");return}C(!0),ae(null);try{const{fixQuestionWithGroq:Oe}=await Lp(async()=>{const{fixQuestionWithGroq:Ie}=await import("./groq-BVVAa691-1771359537169.js");return{fixQuestionWithGroq:Ie}},[]),De=await Oe(s,me);je(De)}catch(Oe){console.error(Oe),alert("Erreur lors de la correction : "+Oe.message)}finally{C(!1)}},Mi=async()=>{if(!Ae)return;const{saveQuestionLocally:me}=await Lp(async()=>{const{saveQuestionLocally:zn}=await import("./api-Y8rDLHL4-1771359537169.js");return{saveQuestionLocally:zn}},[]),{saveQuestionToGitHub:Oe,getUser:De}=await Lp(async()=>{const{saveQuestionToGitHub:zn,getUser:ki}=await import("./githubClient-xPLM8aqf-1771359537169.js");return{saveQuestionToGitHub:zn,getUser:ki}},[]);ae("saving");const Ie=s.sourceFile||p;if(!Ie){ae("error"),ye("Erreur: Nom de fichier manquant");return}try{await me(Ie,s.id,Ae)}catch{}const vt=localStorage.getItem("github_token");if(!vt){navigator.clipboard.writeText(JSON.stringify(Ae,null,2)),ae("success"),ye("Copi (Pas de token GitHub)");return}try{const zn=await De(vt),ki="skyreks00",Xt="permis-online-free",Zr=`public/data/${Ie}`,zs=`fix(content): correct question ${s.id} in ${Ie} (Manual+AI)`,br=await Oe(vt,ki,Xt,Zr,s.id,Ae,zs,zn);ae("success"),br.type==="pr"?ye(x.jsx("a",{href:br.url,target:"_blank",rel:"noreferrer",children:"PR cre !"})):br.type==="commit"?ye(x.jsx("a",{href:br.url,target:"_blank",rel:"noreferrer",children:"Commit effectu !"})):ye("Sauvegard !"),g&&g(Ae),setTimeout(()=>{je(null),ae(null)},2e3)}catch(zn){ae("error"),ye("Erreur GitHub: "+(zn.message||"Problme de sauvegarde"))}},cn=(me,Oe)=>{je(De=>({...De,[me]:Oe}))},Ls=(me,Oe)=>{je(De=>{const Ie=[...De.propositions];return Ie[me]={...Ie[me],text:Oe},{...De,propositions:Ie}})},Ln=me=>{ue&&cn("correctAnswer",me)};return x.jsxs("div",{className:`question-card relative ${le?"timed-out":""} ${ue?"correction-mode":""}`,style:ue?{border:"2px solid var(--warning)",boxShadow:"0 0 15px rgba(255, 193, 7, 0.3)"}:{},children:[x.jsxs("div",{className:"question-header",children:[x.jsxs("div",{className:"question-progress","aria-live":"polite",children:["Question ",Math.min(t+1,r)," / ",r,ue&&x.jsx("span",{className:"text-warning font-bold ml-2",children:" CORRECTION SUGGRE"})]}),localStorage.getItem("groq_api_key")&&!ue&&x.jsx("button",{onClick:Oi,disabled:k,className:"btn-ghost",style:{fontSize:"12px",padding:"4px 8px",display:"flex",alignItems:"center",gap:"4px"},title:"Suggrer une correction",children:k?"...":" Corriger"}),ue&&x.jsxs("div",{className:"correction-toolbar-inline",children:[x.jsxs("div",{className:"correction-badge",children:[x.jsx("div",{className:"correction-badge-dot"}),x.jsx("span",{children:"MASTER"})]}),x.jsxs("div",{className:"correction-actions",children:[x.jsx("button",{onClick:Vi,className:"btn-cancel",title:"Inverser les rponses",disabled:j==="saving",style:{padding:"4px 8px"},children:x.jsx(zR,{size:16})}),x.jsx("button",{onClick:()=>je(null),className:"btn-cancel",disabled:j==="saving",children:"Annuler"}),x.jsx("button",{onClick:Mi,className:"btn-save",disabled:j==="saving",children:j==="saving"?"...":"Enregistrer"})]})]})]}),ue&&x.jsx("div",{className:"correction-floating-bar",children:xe?x.jsxs("div",{className:"correction-input-wrapper animate-in slide-in-from-bottom-2 fade-in duration-300",children:[x.jsxs("div",{className:"flex justify-between items-center px-4 py-2 border-b border-white/10",children:[x.jsx("span",{className:"text-xs font-semibold text-white/50",children:"Explication / Commit Message"}),x.jsx("button",{onClick:()=>V(!1),style:{background:"transparent",border:"none",color:"rgba(255,255,255,0.5)",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center"},className:"hover:text-white",children:x.jsx(Pp,{size:16})})]}),x.jsx("textarea",{className:"correction-explanation-input",rows:3,autoFocus:!0,placeholder:"Pourquoi cette correction est-elle ncessaire ?",value:Ae.explanation||"",onChange:me=>cn("explanation",me.target.value),disabled:!!j}),j==="error"&&x.jsxs("div",{className:"correction-error-msg",children:[x.jsx(Pp,{size:12})," ",ee]})]}):x.jsx("button",{className:"correction-edit-expl-btn",onClick:()=>V(!0),children:" Modifier l'explication"})}),(j==="success"||j==="saving")&&x.jsxs("div",{className:"toast-notification",children:[x.jsx(Bo,{size:24,className:j==="success"?"text-success":"text-muted"}),x.jsxs("div",{children:[x.jsx("div",{className:"font-bold text-sm",children:j==="success"?"Correction envoye !":"Envoi en cours..."}),j==="success"&&x.jsx("div",{className:"text-xs text-muted",children:ee}),j==="saving"&&x.jsx("div",{className:"text-xs text-muted",children:"Vous pouvez continuer  jouer"})]})]}),S&&x.jsxs("div",{className:"quiz-nav-buttons",children:[a&&s?.explanation&&x.jsxs("button",{onClick:()=>q(!0),className:"btn-explanation",children:[x.jsx(ZT,{size:20}),"Explication"]}),x.jsx("button",{type:"button",onClick:c,className:"btn-next",children:d?"Terminer":"Suivant"})]}),x.jsxs("div",{className:"question-main",style:{opacity:ue&&(j===null||j==="error")?.6:1,filter:ue&&(j===null||j==="error")?"grayscale(100%)":"none",transition:"all 0.3s ease"},children:[x.jsx("div",{className:"question-left",children:se.image?x.jsx("div",{className:"question-image",children:x.jsx("img",{src:se.image,alt:"Illustration"})}):x.jsx("div",{className:"question-image placeholder"})}),x.jsxs("div",{className:"question-right",children:[x.jsx("div",{className:"question-text",children:x.jsx("div",{children:ue?x.jsxs("div",{className:"correction-question-container",children:[x.jsx("textarea",{className:"correction-question-input",value:Ae.question,onChange:me=>cn("question",me.target.value),onInput:me=>{me.target.style.height="auto",me.target.style.height=me.target.scrollHeight+"px"},disabled:!!j}),x.jsx("div",{className:"correction-underline"})]}):x.jsx("div",{className:"question-text-inner",children:se.question})})}),x.jsx("div",{className:"answers",children:(se.type==="multiple_choice"||se.type==="single_choice")&&se.propositions?se.propositions.map((me,Oe)=>{const De=S&&a&&me.letter===se.correctAnswer;return x.jsxs("button",{className:`answer-btn transition-all duration-300 ${tr(me.letter)} 
                      ${ue?"!bg-transparent border-none shadow-none opacity-80 hover:opacity-100":""}
                      ${ue&&me.letter===Ae.correctAnswer?"scale-[1.02] !opacity-100":""}`,onClick:()=>ue?Ln(me.letter):_t(me.letter),disabled:j==="saving"||j==="success"&&ue,children:[x.jsx("div",{className:`answer-key shrink-0 transition-all !bg-transparent border border-white/10
                        ${ue?"hover:border-warning/50 hover:text-warning":""}
                        ${ue&&me.letter===Ae.correctAnswer?"border-warning text-warning bg-warning/10":""}`,onClick:Ie=>{ue&&(Ie.stopPropagation(),Ln(me.letter))},children:me.letter}),ue?x.jsxs("div",{className:"correction-answer-wrapper",children:[x.jsx("input",{className:"correction-answer-input",value:me.text,onChange:Ie=>Ls(Oe,Ie.target.value),onClick:Ie=>Ie.stopPropagation(),disabled:!!j,placeholder:"Texte de la rponse..."}),x.jsx("div",{className:"correction-answer-underline"})]}):x.jsx("div",{className:"answer-text",children:me.text}),(De||ue&&me.letter===Ae.correctAnswer)&&x.jsx(Bo,{size:18,className:`answer-check transition-all ${ue?"text-warning":"text-success"}`})]},`${me.letter}-${Oe}`)}):se.type==="yes_no"?x.jsxs(x.Fragment,{children:[x.jsxs("button",{className:`answer-btn ${tr("OUI")} ${ue&&Ae.correctAnswer==="OUI"?"border-warning border-2":""}`,onClick:()=>ue?Ln("OUI"):_t("OUI"),disabled:j==="saving",children:[x.jsx("div",{className:`answer-key ${ue?"cursor-pointer hover:bg-warning hover:text-black transition-colors":""}`,children:"A"}),x.jsx("div",{className:"answer-text",children:"Oui"}),S&&a&&se.correctAnswer==="OUI"||ue&&Ae.correctAnswer==="OUI"?x.jsx(Bo,{size:20,className:"answer-check text-warning"}):null]}),x.jsxs("button",{className:`answer-btn ${tr("NON")} ${ue&&Ae.correctAnswer==="NON"?"border-warning border-2":""}`,onClick:()=>ue?Ln("NON"):_t("NON"),disabled:j==="saving",children:[x.jsx("div",{className:`answer-key ${ue?"cursor-pointer hover:bg-warning hover:text-black transition-colors":""}`,children:"B"}),x.jsx("div",{className:"answer-text",children:"Non"}),S&&a&&se.correctAnswer==="NON"||ue&&Ae.correctAnswer==="NON"?x.jsx(Bo,{size:20,className:"answer-check text-warning"}):null]})]}):x.jsx("div",{className:"number-wrap",children:x.jsxs("div",{className:`number-field ${ue?"border-warning":S?a?J==="correct"?"correct":"incorrect":"selected":""}`,children:[x.jsx("input",{className:"number-input",type:"text",inputMode:"numeric",placeholder:ue?"Rponse correcte...":"Votre rponse",value:ue?Ae.correctAnswer:L,disabled:j==="saving",onChange:me=>ue?cn("correctAnswer",me.target.value):ne(me.target.value),onKeyDown:me=>{me.key==="Enter"&&!ue&&ct()}}),!ue&&x.jsx("button",{className:"number-submit",type:"button",onClick:ct,disabled:S||!String(L??"").trim(),children:"OK"})]})})}),x.jsx("div",{className:"countdown","aria-hidden":"true",children:x.jsx("div",{className:"countdown-track",children:x.jsx("div",{className:"countdown-fill",style:{width:`${Math.max(0,Math.min(100,w/ce*100))}%`}})})})]})]}),K&&x.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.75)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",backdropFilter:"blur(4px)"},onClick:()=>q(!1),children:x.jsxs("div",{style:{background:"var(--surface)",color:"var(--foreground)",padding:"24px",borderRadius:"16px",maxWidth:"600px",width:"100%",maxHeight:"90vh",overflowY:"auto",position:"relative",boxShadow:"var(--shadow-lg)",border:"1px solid var(--border)"},onClick:me=>me.stopPropagation(),className:"animate-in fade-in zoom-in-95 duration-200",children:[x.jsx("button",{onClick:()=>q(!1),style:{position:"absolute",top:"16px",right:"16px",background:"transparent",border:"none",color:"var(--muted-foreground)",cursor:"pointer",padding:"4px"},children:x.jsx(Pp,{size:24})}),x.jsx("div",{style:{lineHeight:"1.6",fontSize:"1.05rem"},children:s.explanation.replace(/^\s*INFO\W*PERMIS\W*DE\W*CONDUIRE\W*/i,"").replace(/^\s*Signification\W*/i,"").replace(/^\s*Explication\W*/i,"").replace(/^\s*LE(?:|C)ON\s*\d+(?:\s*[\-:]\s*[^.\n]*)?(?:[.\n]\s*)?/i,"").trim()})]})})]})},S2=({questions:s,themeName:e,onFinish:t,onExit:r,instantFeedback:a,autoPlayAudio:l,fileName:c})=>{const[d,p]=U.useState(0),[g,v]=U.useState(0),[E,S]=U.useState(!1),[N,K]=U.useState(s);U.useRef(0);const q=U.useRef([]);Lu.useEffect(()=>{const le=fe=>{fe.key==="Enter"&&E&&J()};return window.addEventListener("keydown",le),()=>window.removeEventListener("keydown",le)},[E,d]);const L=N[d],ne=({isCorrect:le,userAnswer:fe,correctAnswer:ce,questionId:w})=>{console.log("DEBUG: handleAnswer called",{currentQuestionIndex:d,questionId:w,isCorrect:le}),q.current[d]={questionId:w,userAnswer:fe,correctAnswer:ce,isCorrect:le},console.log("DEBUG: answersRef updated",JSON.stringify(q.current));const A=q.current.filter(R=>R&&R.isCorrect).length;console.log("DEBUG: newScore calculated",A),v(A),S(!0)},J=()=>{if(d<N.length-1)p(d+1),S(!1);else{const le=q.current.filter(fe=>fe&&fe.isCorrect).length;t({score:le,answers:q.current})}},Z=async le=>{const fe=[...N];fe[d]=le,K(fe)};return x.jsxs("div",{className:"quiz",children:[x.jsx("div",{className:"quiz-topbar",children:x.jsxs("button",{className:"exit-btn",onClick:r,style:{display:"flex",alignItems:"center",gap:"6px"},children:[x.jsx(sd,{size:18})," Retour"]})}),x.jsx("div",{className:"quiz-content",children:x.jsx(w2,{title:e,question:L,onAnswer:ne,currentIndex:d,total:N.length,instantFeedback:a,autoPlayAudio:l,onNext:J,isLastQuestion:d===N.length-1,fileName:c,onQuestionUpdated:Z},`${d}-${L?.id??"q"}`)})]})},A2="https://raw.githubusercontent.com/skyreks00/permis-online-free/main/public/data",t1=async(s,e=null)=>{try{console.log(`[ContentLoader] Fetching ${s} from local data...`);const r=await fetch(`/permis-online-free/data/${s}?_=${Date.now()}`);if(r.ok){const a=await r.json();return console.log(`[ContentLoader] Successfully loaded ${s} from local data`),a}}catch(r){console.warn(`[ContentLoader] Local fetch failed for ${s}`,r.message)}const t=`${A2}/${s}?_=${Date.now()}`;try{console.log(`[ContentLoader] Fetching ${s} from GitHub...`);const r=await fetch(t);if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);const a=await r.json();return console.log(`[ContentLoader] Successfully loaded ${s} from GitHub`),a}catch(r){console.warn(`[ContentLoader] Failed to load ${s} from GitHub:`,r.message),console.log(`[ContentLoader] Trying local fallback for ${s}...`)}try{console.log(`[ContentLoader] Fetching ${s} from local data...`);const r=await fetch(`data/${s}`);if(r.ok){const a=await r.json();return console.log(`[ContentLoader] Successfully loaded ${s} from local data`),a}}catch{console.warn(`[ContentLoader] Local fetch also failed for ${s}`)}if(e)return console.log(`[ContentLoader] Using bundled fallback for ${s}`),e;throw new Error(`Failed to load ${s} from all sources`)},rg=async(s,e=null)=>t1(s,e),x2=async(s=null)=>t1("themes.json",s),I2=({sections:s,onFinishQuiz:e,onPatchProgress:t,instantFeedback:r,autoPlayAudio:a,toggleTheme:l,isDarkMode:c,onMistakesCorrected:d})=>{const{themeId:p}=FT(),g=Ua(),v=Ci(),[E,S]=U.useState([]),[N,K]=U.useState(null),[q,L]=U.useState(!0),[ne,J]=U.useState(null);U.useEffect(()=>{const le=async()=>{if(v.state?.questions&&v.state?.theme){K(v.state.theme),S(v.state.questions),L(!1);return}if(!s||s.length===0)return;if(L(!0),J(null),v.state&&v.state.questions){K({id:"review",name:v.state.title||"Rvision des erreurs",file:null}),S(v.state.questions),L(!1);return}let fe=null;if(p==="examen_B")fe={id:"examen_B",name:"Examen Blanc",file:"examen_B.json"};else for(const ce of s){const A=(ce.items||ce.themes||[]).find(R=>R.id===p);if(A){fe=A;break}}if(!fe){J("Thme non trouv"),L(!1);return}K(fe);try{let w=(await rg(fe.file)).questions||[];w.length===0&&(w=(await(await fetch(`/permis-online-free/data/${fe.file}`)).json()).questions||[]);const A=[...w].sort(()=>Math.random()-.5);fe.id.includes("examen")?S(A.slice(0,50)):S(A)}catch(ce){console.error("Failed to load questions",ce),J("Erreur de chargement des questions")}finally{L(!1)}};(s.length>0||v.state&&v.state.questions)&&le()},[p,s,v.state]);const Z=le=>{const fe=typeof le=="number"?le:le.score,ce=typeof le=="object"?le.answers:[],w=v.state&&v.state.isReview;if(e&&!w)e(N.id,fe,E.length,le.answers);else if(w&&t){const R=(le.answers||[]).filter(M=>M&&M.isCorrect);if(R.length>0){const M={};E.forEach(k=>{k.originalThemeId&&(M[k.id]=k.originalThemeId)});const O={};R.forEach(k=>{const C=M[k.questionId];C&&(O[C]||(O[C]=[]),O[C].push(k))}),Object.keys(O).forEach(k=>{t(k,O[k])})}}g("/resultats",{state:{score:fe,total:E.length,questions:E,answers:ce,isExamMode:N.id.includes("examen"),isReviewSession:w}})};return q||!s||s.length===0?x.jsxs("div",{className:"p-8 text-center",children:[x.jsx("span",{className:"loading loading-spinner loading-lg"}),x.jsx("br",{}),"Chargement du quiz..."]}):ne?x.jsxs("div",{className:"p-8 text-center text-error",children:[ne," ",x.jsx("br",{}),x.jsx("button",{onClick:()=>g("/"),className:"btn mt-4",children:"Retour"})]}):x.jsxs(x.Fragment,{children:[x.jsx(Hg,{showProfileButton:!1,toggleTheme:l,isDarkMode:c}),N&&E.length>0&&x.jsx(S2,{questions:E,themeName:N.name,onFinish:Z,onExit:()=>g("/"),instantFeedback:r&&!N.id.includes("examen"),autoPlayAudio:a,fileName:N.file})]})},R2=({score:s,total:e,questions:t=[],answers:r=[],showReview:a=!1,onRestart:l,onBackToThemes:c,isExamMode:d,isReviewOnly:p=!1,customErrorItems:g=null,onBackToProfile:v})=>{const E=e>0?Math.round(s/e*100):0,N=p?{icon:x.jsx(Du,{size:48,className:"text-primary"}),text:"Mode Rvision",tone:"info"}:d?e-s>=9?{icon:x.jsx(Du,{size:48,className:"text-danger"}),text:"CHEC - 9 fautes ou plus",tone:"danger"}:{icon:x.jsx(ng,{size:48,className:"text-success"}),text:"RUSSI !",tone:"success"}:E>=90?{icon:x.jsx(ng,{size:48,className:"text-success"}),text:"Excellent !",tone:"success"}:E>=75?{icon:x.jsx(d2,{size:48,className:"text-success"}),text:"Trs bien !",tone:"success"}:E>=50?{icon:x.jsx(Vb,{size:48,className:"text-warning"}),text:"Pas mal !",tone:"warn"}:{icon:x.jsx(Du,{size:48,className:"text-danger"}),text:"Continue  t'entraner !",tone:"danger"},K=g||(t||[]).map((L,ne)=>({q:L,a:r?.[ne],idx:ne})).filter(({a:L})=>L&&L.isCorrect===!1),q=L=>L?L.replace(/^\s*INFO\W*PERMIS\W*DE\W*CONDUIRE\W*/i,"").replace(/^\s*Signification\W*/i,"").replace(/^\s*Explication\W*/i,"").replace(/^\s*LE(?:|C)ON\s*\d+(?:\s*[\-:]\s*[^.\n]*)?(?:[.\n]\s*)?/i,"").trim():"";return x.jsxs("div",{className:"results container",style:{textAlign:"center"},children:[p?x.jsxs("div",{style:{margin:"20px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[x.jsx(Du,{size:32,className:"text-primary"}),x.jsx("h1",{style:{margin:0},children:"Rvision des erreurs"})]}),x.jsx("p",{className:"text-muted",children:"Voici les points  retravailler. Prenez le temps de lire les explications."}),x.jsxs("button",{onClick:v,className:"btn-secondary flex items-center gap-2",children:[x.jsx(sd,{size:20})," Retour au profil"]})]}):x.jsxs(x.Fragment,{children:[x.jsxs("div",{style:{margin:"20px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[N.icon,x.jsx("h1",{style:{margin:0},children:N.text})]}),x.jsxs("p",{style:{fontSize:"1.2rem",marginBottom:"20px"},children:["Score: ",x.jsx("strong",{children:s})," / ",e," (",E,"%)"]}),x.jsxs("p",{children:["Correctes: ",x.jsx("strong",{children:s})," | Incorrectes: ",x.jsx("strong",{children:e-s})]}),x.jsxs("div",{className:"results-actions",style:{justifyContent:"center"},children:[x.jsx("button",{type:"button",className:"btn-primary",onClick:l,children:"Recommencer"}),x.jsx("button",{type:"button",onClick:c,children:"Choisir un autre thme"}),x.jsx("button",{type:"button",className:"btn-secondary",onClick:v,children:"Retour au profil"})]})]}),(a||p)&&x.jsx("div",{style:{marginTop:"30px",textAlign:"left",display:"flex",flexDirection:"column",gap:"32px"},children:K.length===0?x.jsxs("div",{className:"card",style:{padding:"32px",textAlign:"center"},children:[x.jsxs("p",{className:"muted",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"1.2rem",margin:0},children:[x.jsx(t2,{size:24})," Aucune erreur  rviser. Bravo !"]}),p&&x.jsx("button",{onClick:v,className:"btn-primary mt-4",children:"Retour au profil"})]}):K.map(({q:L,a:ne,idx:J})=>x.jsxs("div",{className:"question-card card",children:[x.jsx("div",{className:"question-header",children:x.jsxs("div",{className:"question-progress",style:{color:"var(--danger)"},children:["Question ",J+1]})}),x.jsxs("div",{className:"question-main",children:[x.jsx("div",{className:"question-left",children:L.image?x.jsx("div",{className:"question-image",children:x.jsx("img",{src:L.image,alt:"Illustration"})}):x.jsx("div",{className:"question-image placeholder"})}),x.jsxs("div",{className:"question-right",children:[x.jsx("div",{className:"question-text",children:x.jsx("div",{className:"question-text-inner",children:L.question})}),x.jsx("div",{className:"answers",children:L.type==="multiple_choice"&&L.propositions?L.propositions.map(Z=>{const le=Z.letter===L.correctAnswer,fe=ne?.userAnswer===Z.letter;let ce="";return le?ce="correct":fe?ce="incorrect":ce="dimmed",x.jsxs("button",{className:`answer-btn ${ce}`,disabled:!0,style:{opacity:1,cursor:"default"},children:[x.jsx("div",{className:"answer-key",children:Z.letter}),x.jsx("div",{className:"answer-text",children:Z.text}),le&&x.jsx(Bo,{size:20,className:"text-success"})]},Z.letter)}):L.type==="yes_no"?x.jsx(x.Fragment,{children:["OUI","NON"].map((Z,le)=>{const fe=le===0?"A":"B",ce=le===0?"Oui":"Non",w=Z===L.correctAnswer,A=ne?.userAnswer===Z;let R="";return w?R="correct":A?R="incorrect":R="dimmed",x.jsxs("button",{className:`answer-btn ${R}`,disabled:!0,style:{opacity:1,cursor:"default"},children:[x.jsx("div",{className:"answer-key",children:fe}),x.jsx("div",{className:"answer-text",children:ce}),w&&x.jsx(Bo,{size:20,className:"text-success"})]},Z)})}):x.jsxs("div",{className:"p-4 border rounded bg-surface-2",children:[x.jsxs("p",{children:[x.jsx("strong",{children:"Votre rponse:"})," ",ne?.userAnswer||""]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Rponse attendue:"})," ",L.correctAnswer]})]})})]})]}),L.explanation&&x.jsxs("div",{className:"explanation animate-fade-in",children:[x.jsxs("div",{className:"explanation-title",style:{display:"flex",alignItems:"center",gap:"8px"},children:[x.jsx(Vb,{size:20,className:"text-primary"}),"Conseil"]}),x.jsx("div",{className:"explanation-text",style:{fontSize:"1.05rem",lineHeight:1.6},children:q(L.explanation)})]})]},`${L.id}-${J}`))})]})},kb=({toggleTheme:s,isDarkMode:e})=>{const t=Ci(),r=Ua(),a=t.state||{};U.useEffect(()=>{t.state||console.warn("No state found in ResultsPage, redirecting to home.")},[t.state]);const l=()=>{const g=a.results?{...a,...a.results}:a;if(g.isReviewSession){const v=(g.questions||[]).filter((E,S)=>{const N=g.answers?.[S];return N&&N.isCorrect===!1});if(v.length>0){r("/quiz/review",{state:{questions:v,title:g.title||"Rvision des erreurs",isReview:!0}});return}}if(g.questions&&g.questions.length>0){const E=g.questions[0].originalThemeId||g.themeId;r(E?`/quiz/${E}`:"/")}else r("/")},c=()=>{r("/")},d=()=>{r("/profil")},p=a.results?{...a,...a.results}:a;return x.jsx("div",{className:"page animate-fade-in",children:x.jsx(R2,{...p,onRestart:l,onBackToThemes:c,onBackToProfile:d,toggleTheme:s,isDarkMode:e,showReview:!0})})},C2=()=>{};var Pb={};const n1=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let a=s.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},N2=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const a=s[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=s[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=s[t++],c=s[t++],d=s[t++],p=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const l=s[t++],c=s[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},r1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<s.length;a+=3){const l=s[a],c=a+1<s.length,d=c?s[a+1]:0,p=a+2<s.length,g=p?s[a+2]:0,v=l>>2,E=(l&3)<<4|d>>4;let S=(d&15)<<2|g>>6,N=g&63;p||(N=64,c||(S=64)),r.push(t[v],t[E],t[S],t[N])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(n1(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):N2(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<s.length;){const l=t[s.charAt(a++)],d=a<s.length?t[s.charAt(a)]:0;++a;const g=a<s.length?t[s.charAt(a)]:64;++a;const E=a<s.length?t[s.charAt(a)]:64;if(++a,l==null||d==null||g==null||E==null)throw new D2;const S=l<<2|d>>4;if(r.push(S),g!==64){const N=d<<4&240|g>>2;if(r.push(N),E!==64){const K=g<<6&192|E;r.push(K)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class D2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const V2=function(s){const e=n1(s);return r1.encodeByteArray(e,!0)},i1=function(s){return V2(s).replace(/\./g,"")},s1=function(s){try{return r1.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function a1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const O2=()=>a1().__FIREBASE_DEFAULTS__,M2=()=>{if(typeof process>"u"||typeof Pb>"u")return;const s=Pb.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},k2=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&s1(s[1]);return e&&JSON.parse(e)},ad=()=>{try{return C2()||O2()||M2()||k2()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},P2=s=>ad()?.emulatorHosts?.[s],o1=()=>ad()?.config,l1=s=>ad()?.[`_${s}`];class L2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function pl(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function u1(s){return(await fetch(s,{credentials:"include"})).ok}const zu={};function z2(){const s={prod:[],emulator:[]};for(const e of Object.keys(zu))zu[e]?s.emulator.push(e):s.prod.push(e);return s}function U2(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let Lb=!1;function j2(s,e){if(typeof window>"u"||typeof document>"u"||!pl(window.location.host)||zu[s]===e||zu[s]||Lb)return;zu[s]=e;function t(S){return`__firebase__banner__${S}`}const r="__firebase__banner",l=z2().prod.length>0;function c(){const S=document.getElementById(r);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,N){S.setAttribute("width","24"),S.setAttribute("id",N),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Lb=!0,c()},S}function v(S,N){S.setAttribute("id",N),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=U2(r),N=t("text"),K=document.getElementById(N)||document.createElement("span"),q=t("learnmore"),L=document.getElementById(q)||document.createElement("a"),ne=t("preprendIcon"),J=document.getElementById(ne)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const Z=S.element;d(Z),v(L,q);const le=g();p(J,ne),Z.append(J,K,L,le),document.body.appendChild(Z)}l?(K.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,K.innerText="Preview backend running in this workspace."),K.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function Ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function B2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ft())}function c1(){const s=ad()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function q2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function F2(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function H2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function G2(){const s=Ft();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function h1(){return!c1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function f1(){return!c1()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function d1(){try{return typeof indexedDB=="object"}catch{return!1}}function K2(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const Q2="FirebaseError";class Ni extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Q2,Object.setPrototypeOf(this,Ni.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pc.prototype.create)}}class pc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?$2(l,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Ni(a,d,r)}}function $2(s,e){return s.replace(Y2,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const Y2=/\{\$([^}]+)}/g;function X2(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Ca(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=s[a],c=e[a];if(zb(l)&&zb(c)){if(!Ca(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function zb(s){return s!==null&&typeof s=="object"}function gc(s){const e=[];for(const[t,r]of Object.entries(s))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function J2(s,e){const t=new W2(s,e);return t.subscribe.bind(t)}class W2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Z2(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=zp),a.error===void 0&&(a.error=zp),a.complete===void 0&&(a.complete=zp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Z2(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function zp(){}function vr(s){return s&&s._delegate?s._delegate:s}class Na{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const pa="[DEFAULT]";class eC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new L2;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nC(e))try{this.getOrInitializeService({instanceIdentifier:pa})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=pa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pa){return this.instances.has(e)}getOptions(e=pa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tC(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=pa){return this.component?this.component.multipleInstances?e:pa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tC(s){return s===pa?void 0:s}function nC(s){return s.instantiationMode==="EAGER"}class rC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new eC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ge;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ge||(Ge={}));const iC={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},sC=Ge.INFO,aC={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},oC=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),a=aC[e];if(a)console[a](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gg{constructor(e){this.name=e,this._logLevel=sC,this._logHandler=oC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const lC=(s,e)=>e.some(t=>s instanceof t);let Ub,jb;function uC(){return Ub||(Ub=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cC(){return jb||(jb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const m1=new WeakMap,ig=new WeakMap,p1=new WeakMap,Up=new WeakMap,Kg=new WeakMap;function hC(s){const e=new Promise((t,r)=>{const a=()=>{s.removeEventListener("success",l),s.removeEventListener("error",c)},l=()=>{t(Ss(s.result)),a()},c=()=>{r(s.error),a()};s.addEventListener("success",l),s.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&m1.set(t,s)}).catch(()=>{}),Kg.set(e,s),e}function fC(s){if(ig.has(s))return;const e=new Promise((t,r)=>{const a=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",c),s.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{r(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",l),s.addEventListener("error",c),s.addEventListener("abort",c)});ig.set(s,e)}let sg={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return ig.get(s);if(e==="objectStoreNames")return s.objectStoreNames||p1.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ss(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function dC(s){sg=s(sg)}function mC(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(jp(this),e,...t);return p1.set(r,e.sort?e.sort():[e]),Ss(r)}:cC().includes(s)?function(...e){return s.apply(jp(this),e),Ss(m1.get(this))}:function(...e){return Ss(s.apply(jp(this),e))}}function pC(s){return typeof s=="function"?mC(s):(s instanceof IDBTransaction&&fC(s),lC(s,uC())?new Proxy(s,sg):s)}function Ss(s){if(s instanceof IDBRequest)return hC(s);if(Up.has(s))return Up.get(s);const e=pC(s);return e!==s&&(Up.set(s,e),Kg.set(e,s)),e}const jp=s=>Kg.get(s);function gC(s,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(s,e),d=Ss(c);return r&&c.addEventListener("upgradeneeded",p=>{r(Ss(c.result),p.oldVersion,p.newVersion,Ss(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const yC=["get","getKey","getAll","getAllKeys","count"],_C=["put","add","delete","clear"],Bp=new Map;function Bb(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Bp.get(e))return Bp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=_C.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||yC.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,a?"readwrite":"readonly");let g=p.store;return r&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&p.done]))[0]};return Bp.set(e,l),l}dC(s=>({...s,get:(e,t,r)=>Bb(e,t)||s.get(e,t,r),has:(e,t)=>!!Bb(e,t)||s.has(e,t)}));class vC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(bC(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function bC(s){return s.getComponent()?.type==="VERSION"}const ag="@firebase/app",qb="0.14.8";const Ai=new Gg("@firebase/app"),EC="@firebase/app-compat",TC="@firebase/analytics-compat",wC="@firebase/analytics",SC="@firebase/app-check-compat",AC="@firebase/app-check",xC="@firebase/auth",IC="@firebase/auth-compat",RC="@firebase/database",CC="@firebase/data-connect",NC="@firebase/database-compat",DC="@firebase/functions",VC="@firebase/functions-compat",OC="@firebase/installations",MC="@firebase/installations-compat",kC="@firebase/messaging",PC="@firebase/messaging-compat",LC="@firebase/performance",zC="@firebase/performance-compat",UC="@firebase/remote-config",jC="@firebase/remote-config-compat",BC="@firebase/storage",qC="@firebase/storage-compat",FC="@firebase/firestore",HC="@firebase/ai",GC="@firebase/firestore-compat",KC="firebase",QC="12.9.0";const og="[DEFAULT]",$C={[ag]:"fire-core",[EC]:"fire-core-compat",[wC]:"fire-analytics",[TC]:"fire-analytics-compat",[AC]:"fire-app-check",[SC]:"fire-app-check-compat",[xC]:"fire-auth",[IC]:"fire-auth-compat",[RC]:"fire-rtdb",[CC]:"fire-data-connect",[NC]:"fire-rtdb-compat",[DC]:"fire-fn",[VC]:"fire-fn-compat",[OC]:"fire-iid",[MC]:"fire-iid-compat",[kC]:"fire-fcm",[PC]:"fire-fcm-compat",[LC]:"fire-perf",[zC]:"fire-perf-compat",[UC]:"fire-rc",[jC]:"fire-rc-compat",[BC]:"fire-gcs",[qC]:"fire-gcs-compat",[FC]:"fire-fst",[GC]:"fire-fst-compat",[HC]:"fire-vertex","fire-js":"fire-js",[KC]:"fire-js-all"};const Nf=new Map,YC=new Map,lg=new Map;function Fb(s,e){try{s.container.addComponent(e)}catch(t){Ai.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Qo(s){const e=s.name;if(lg.has(e))return Ai.debug(`There were multiple attempts to register component ${e}.`),!1;lg.set(e,s);for(const t of Nf.values())Fb(t,s);for(const t of YC.values())Fb(t,s);return!0}function Qg(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function pr(s){return s==null?!1:s.settings!==void 0}const XC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},As=new pc("app","Firebase",XC);class JC{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Na("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw As.create("app-deleted",{appName:this._name})}}const gl=QC;function g1(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r={name:og,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw As.create("bad-app-name",{appName:String(a)});if(t||(t=o1()),!t)throw As.create("no-options");const l=Nf.get(a);if(l){if(Ca(t,l.options)&&Ca(r,l.config))return l;throw As.create("duplicate-app",{appName:a})}const c=new rC(a);for(const p of lg.values())c.addComponent(p);const d=new JC(t,r,c);return Nf.set(a,d),d}function WC(s=og){const e=Nf.get(s);if(!e&&s===og&&o1())return g1();if(!e)throw As.create("no-app",{appName:s});return e}function xs(s,e,t){let r=$C[s]??s;t&&(r+=`-${t}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${r}" with version "${e}":`];a&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ai.warn(c.join(" "));return}Qo(new Na(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const ZC="firebase-heartbeat-database",eN=1,Ju="firebase-heartbeat-store";let qp=null;function y1(){return qp||(qp=gC(ZC,eN,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Ju)}catch(t){console.warn(t)}}}}).catch(s=>{throw As.create("idb-open",{originalErrorMessage:s.message})})),qp}async function tN(s){try{const t=(await y1()).transaction(Ju),r=await t.objectStore(Ju).get(_1(s));return await t.done,r}catch(e){if(e instanceof Ni)Ai.warn(e.message);else{const t=As.create("idb-get",{originalErrorMessage:e?.message});Ai.warn(t.message)}}}async function Hb(s,e){try{const r=(await y1()).transaction(Ju,"readwrite");await r.objectStore(Ju).put(e,_1(s)),await r.done}catch(t){if(t instanceof Ni)Ai.warn(t.message);else{const r=As.create("idb-set",{originalErrorMessage:t?.message});Ai.warn(r.message)}}}function _1(s){return`${s.name}!${s.options.appId}`}const nN=1024,rN=30;class iN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new aN(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Gb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>rN){const a=oN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ai.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Gb(),{heartbeatsToSend:t,unsentEntries:r}=sN(this._heartbeatsCache.heartbeats),a=i1(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Ai.warn(e),""}}}function Gb(){return new Date().toISOString().substring(0,10)}function sN(s,e=nN){const t=[];let r=s.slice();for(const a of s){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),Kb(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),Kb(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class aN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return d1()?K2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await tN(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Hb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Hb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Kb(s){return i1(JSON.stringify({version:2,heartbeats:s})).length}function oN(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}function lN(s){Qo(new Na("platform-logger",e=>new vC(e),"PRIVATE")),Qo(new Na("heartbeat",e=>new iN(e),"PRIVATE")),xs(ag,qb,s),xs(ag,qb,"esm2020"),xs("fire-js","")}lN("");var uN="firebase",cN="12.9.0";xs(uN,cN,"app");function v1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hN=v1,b1=new pc("auth","Firebase",v1());const Df=new Gg("@firebase/auth");function fN(s,...e){Df.logLevel<=Ge.WARN&&Df.warn(`Auth (${gl}): ${s}`,...e)}function df(s,...e){Df.logLevel<=Ge.ERROR&&Df.error(`Auth (${gl}): ${s}`,...e)}function Xr(s,...e){throw Yg(s,...e)}function yr(s,...e){return Yg(s,...e)}function $g(s,e,t){const r={...hN(),[e]:t};return new pc("auth","Firebase",r).create(e,{appName:s.name})}function Sa(s){return $g(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dN(s,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Xr(s,"argument-error"),$g(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Yg(s,...e){if(typeof s!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(t,...r)}return b1.create(s,...e)}function Ne(s,e,...t){if(!s)throw Yg(e,...t)}function vi(s){const e="INTERNAL ASSERTION FAILED: "+s;throw df(e),new Error(e)}function xi(s,e){s||vi(e)}function ug(){return typeof self<"u"&&self.location?.href||""}function mN(){return Qb()==="http:"||Qb()==="https:"}function Qb(){return typeof self<"u"&&self.location?.protocol||null}function pN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mN()||F2()||"connection"in navigator)?navigator.onLine:!0}function gN(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class yc{constructor(e,t){this.shortDelay=e,this.longDelay=t,xi(t>e,"Short delay should be less than long delay!"),this.isMobile=B2()||H2()}get(){return pN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Xg(s,e){xi(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class E1{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const yN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const _N=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],vN=new yc(3e4,6e4);function Jg(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function yl(s,e,t,r,a={}){return T1(s,a,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const d=gc({key:s.config.apiKey,...c}).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const g={method:e,headers:p,...l};return q2()||(g.referrerPolicy="no-referrer"),s.emulatorConfig&&pl(s.emulatorConfig.host)&&(g.credentials="include"),E1.fetch()(await w1(s,s.config.apiHost,t,d),g)})}async function T1(s,e,t){s._canInitEmulator=!1;const r={...yN,...e};try{const a=new EN(s),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw nf(s,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw nf(s,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw nf(s,"email-already-in-use",c);if(p==="USER_DISABLED")throw nf(s,"user-disabled",c);const v=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw $g(s,v,g);Xr(s,v)}}catch(a){if(a instanceof Ni)throw a;Xr(s,"network-request-failed",{message:String(a)})}}async function bN(s,e,t,r,a={}){const l=await yl(s,e,t,r,a);return"mfaPendingCredential"in l&&Xr(s,"multi-factor-auth-required",{_serverResponse:l}),l}async function w1(s,e,t,r){const a=`${e}${t}?${r}`,l=s,c=l.config.emulator?Xg(s.config,a):`${s.config.apiScheme}://${a}`;return _N.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class EN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(yr(this.auth,"network-request-failed")),vN.get())})}}function nf(s,e,t){const r={appName:s.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=yr(s,e,r);return a.customData._tokenResponse=t,a}async function TN(s,e){return yl(s,"POST","/v1/accounts:delete",e)}async function Vf(s,e){return yl(s,"POST","/v1/accounts:lookup",e)}function Uu(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wN(s,e=!1){const t=vr(s),r=await t.getIdToken(e),a=Wg(r);Ne(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:r,authTime:Uu(Fp(a.auth_time)),issuedAtTime:Uu(Fp(a.iat)),expirationTime:Uu(Fp(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Fp(s){return Number(s)*1e3}function Wg(s){const[e,t,r]=s.split(".");if(e===void 0||t===void 0||r===void 0)return df("JWT malformed, contained fewer than 3 sections"),null;try{const a=s1(t);return a?JSON.parse(a):(df("Failed to decode base64 JWT payload"),null)}catch(a){return df("Caught error parsing JWT payload as JSON",a?.toString()),null}}function $b(s){const e=Wg(s);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Wu(s,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ni&&SN(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function SN({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class AN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class cg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Uu(this.lastLoginAt),this.creationTime=Uu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Of(s){const e=s.auth,t=await s.getIdToken(),r=await Wu(s,Vf(e,{idToken:t}));Ne(r?.users.length,e,"internal-error");const a=r.users[0];s._notifyReloadListener(a);const l=a.providerUserInfo?.length?S1(a.providerUserInfo):[],c=IN(s.providerData,l),d=s.isAnonymous,p=!(s.email&&a.passwordHash)&&!c?.length,g=d?p:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new cg(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(s,v)}async function xN(s){const e=vr(s);await Of(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function IN(s,e){return[...s.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function S1(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function RN(s,e){const t=await T1(s,{},async()=>{const r=gc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=s.config,c=await w1(s,a,"/v1/token",`key=${l}`),d=await s._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:r};return s.emulatorConfig&&pl(s.emulatorConfig.host)&&(p.credentials="include"),E1.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function CN(s,e){return yl(s,"POST","/v2/accounts:revokeToken",Jg(s,e))}class qo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$b(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const t=$b(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await RN(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,c=new qo;return r&&(Ne(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(Ne(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Ne(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qo,this.toJSON())}_performRefresh(){return vi("not implemented")}}function ms(s,e){Ne(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class gr{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new AN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new cg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Wu(this,this.stsTokenManager.getToken(this.auth,e));return Ne(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return wN(this,e)}reload(){return xN(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new gr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Of(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pr(this.auth.app))return Promise.reject(Sa(this.auth));const e=await this.getIdToken();return await Wu(this,TN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:N,providerData:K,stsTokenManager:q}=t;Ne(E&&q,e,"internal-error");const L=qo.fromJSON(this.name,q);Ne(typeof E=="string",e,"internal-error"),ms(r,e.name),ms(a,e.name),Ne(typeof S=="boolean",e,"internal-error"),Ne(typeof N=="boolean",e,"internal-error"),ms(l,e.name),ms(c,e.name),ms(d,e.name),ms(p,e.name),ms(g,e.name),ms(v,e.name);const ne=new gr({uid:E,auth:e,email:a,emailVerified:S,displayName:r,isAnonymous:N,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:L,createdAt:g,lastLoginAt:v});return K&&Array.isArray(K)&&(ne.providerData=K.map(J=>({...J}))),p&&(ne._redirectEventId=p),ne}static async _fromIdTokenResponse(e,t,r=!1){const a=new qo;a.updateFromServerResponse(t);const l=new gr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await Of(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];Ne(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?S1(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new qo;d.updateFromIdToken(r);const p=new gr({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new cg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(p,g),p}}const Yb=new Map;function bi(s){xi(s instanceof Function,"Expected a class definition");let e=Yb.get(s);return e?(xi(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,Yb.set(s,e),e)}class A1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}A1.type="NONE";const Xb=A1;function mf(s,e,t){return`firebase:${s}:${e}:${t}`}class Fo{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=mf(this.userKey,a.apiKey,l),this.fullPersistenceKey=mf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Vf(this.auth,{idToken:e}).catch(()=>{});return t?gr._fromGetAccountInfoResponse(this.auth,t,e):null}return gr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Fo(bi(Xb),e,r);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||bi(Xb);const c=mf(r,e.config.apiKey,e.name);let d=null;for(const g of t)try{const v=await g._get(c);if(v){let E;if(typeof v=="string"){const S=await Vf(e,{idToken:v}).catch(()=>{});if(!S)break;E=await gr._fromGetAccountInfoResponse(e,S,v)}else E=gr._fromJSON(e,v);g!==l&&(d=E),l=g;break}}catch{}const p=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Fo(l,e,r):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Fo(l,e,r))}}function Jb(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(C1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(x1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(D1(e))return"Blackberry";if(V1(e))return"Webos";if(I1(e))return"Safari";if((e.includes("chrome/")||R1(e))&&!e.includes("edge/"))return"Chrome";if(N1(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(t);if(r?.length===2)return r[1]}return"Other"}function x1(s=Ft()){return/firefox\//i.test(s)}function I1(s=Ft()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function R1(s=Ft()){return/crios\//i.test(s)}function C1(s=Ft()){return/iemobile/i.test(s)}function N1(s=Ft()){return/android/i.test(s)}function D1(s=Ft()){return/blackberry/i.test(s)}function V1(s=Ft()){return/webos/i.test(s)}function Zg(s=Ft()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function NN(s=Ft()){return Zg(s)&&!!window.navigator?.standalone}function DN(){return G2()&&document.documentMode===10}function O1(s=Ft()){return Zg(s)||N1(s)||V1(s)||D1(s)||/windows phone/i.test(s)||C1(s)}function M1(s,e=[]){let t;switch(s){case"Browser":t=Jb(Ft());break;case"Worker":t=`${Jb(Ft())}-${s}`;break;default:t=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${gl}/${r}`}class VN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function ON(s,e={}){return yl(s,"GET","/v2/passwordPolicy",Jg(s,e))}const MN=6;class kN{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??MN,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class PN{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wb(this),this.idTokenSubscription=new Wb(this),this.beforeStateQueue=new VN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=b1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=bi(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Fo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Vf(this,{idToken:e}),r=await gr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(pr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=r?._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&d?.user&&(r=d.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Of(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pr(this.app))return Promise.reject(Sa(this));const t=e?vr(e):null;return t&&Ne(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pr(this.app)?Promise.reject(Sa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pr(this.app)?Promise.reject(Sa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ON(this),t=new kN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new pc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await CN(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&bi(e)||this._popupRedirectResolver;Ne(t,this,"argument-error"),this.redirectPersistenceManager=await Fo.create(this,[bi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,a);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=M1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(pr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&fN(`Error while retrieving App Check token: ${e.error}`),e?.token}}function od(s){return vr(s)}class Wb{constructor(e){this.auth=e,this.observer=null,this.addObserver=J2(t=>this.observer=t)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ey={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function LN(s){ey=s}function zN(s){return ey.loadJS(s)}function UN(){return ey.gapiScript}function jN(s){return`__${s}${Math.floor(Math.random()*1e6)}`}function BN(s,e){const t=Qg(s,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Ca(l,e??{}))return a;Xr(a,"already-initialized")}return t.initialize({options:e})}function qN(s,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(bi);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function FN(s,e,t){const r=od(s);Ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=k1(e),{host:c,port:d}=HN(e),p=d===null?"":`:${d}`,g={url:`${l}//${c}${p}/`},v=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){Ne(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ne(Ca(g,r.config.emulator)&&Ca(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,pl(c)?(u1(`${l}//${c}${p}`),j2("Auth",!0)):GN()}function k1(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function HN(s){const e=k1(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:Zb(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:Zb(c)}}}function Zb(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function GN(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class P1{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return vi("not implemented")}_getIdTokenResponse(e){return vi("not implemented")}_linkToIdToken(e,t){return vi("not implemented")}_getReauthenticationResolver(e){return vi("not implemented")}}async function Ho(s,e){return bN(s,"POST","/v1/accounts:signInWithIdp",Jg(s,e))}const KN="http://localhost";class Da extends P1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Da(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Xr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=t;if(!r||!a)return null;const c=new Da(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Ho(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ho(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ho(e,t)}buildRequest(){const e={requestUri:KN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=gc(t)}return e}}class ty{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class _c extends ty{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class _s extends _c{constructor(){super("facebook.com")}static credential(e){return Da._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _s.credential(e.oauthAccessToken)}catch{return null}}}_s.FACEBOOK_SIGN_IN_METHOD="facebook.com";_s.PROVIDER_ID="facebook.com";class vs extends _c{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Da._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return vs.credential(t,r)}catch{return null}}}vs.GOOGLE_SIGN_IN_METHOD="google.com";vs.PROVIDER_ID="google.com";class Hr extends _c{constructor(){super("github.com")}static credential(e){return Da._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hr.credential(e.oauthAccessToken)}catch{return null}}}Hr.GITHUB_SIGN_IN_METHOD="github.com";Hr.PROVIDER_ID="github.com";class bs extends _c{constructor(){super("twitter.com")}static credential(e,t){return Da._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return bs.credentialFromTaggedObject(e)}static credentialFromError(e){return bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return bs.credential(t,r)}catch{return null}}}bs.TWITTER_SIGN_IN_METHOD="twitter.com";bs.PROVIDER_ID="twitter.com";class $o{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await gr._fromIdTokenResponse(e,r,a),c=eE(r);return new $o({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=eE(r);return new $o({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function eE(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class Mf extends Ni{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Mf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new Mf(e,t,r,a)}}function L1(s,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Mf._fromErrorAndOperation(s,l,e,r):l})}async function QN(s,e,t=!1){const r=await Wu(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return $o._forOperation(s,"link",r)}async function $N(s,e,t=!1){const{auth:r}=s;if(pr(r.app))return Promise.reject(Sa(r));const a="reauthenticate";try{const l=await Wu(s,L1(r,a,e,s),t);Ne(l.idToken,r,"internal-error");const c=Wg(l.idToken);Ne(c,r,"internal-error");const{sub:d}=c;return Ne(s.uid===d,r,"user-mismatch"),$o._forOperation(s,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Xr(r,"user-mismatch"),l}}async function YN(s,e,t=!1){if(pr(s.app))return Promise.reject(Sa(s));const r="signIn",a=await L1(s,r,e),l=await $o._fromIdTokenResponse(s,r,a);return t||await s._updateCurrentUser(l.user),l}function XN(s,e,t,r){return vr(s).onIdTokenChanged(e,t,r)}function JN(s,e,t){return vr(s).beforeAuthStateChanged(e,t)}function WN(s){return vr(s).signOut()}const kf="__sak";class z1{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(kf,"1"),this.storage.removeItem(kf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const ZN=1e3,eD=10;class U1 extends z1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=O1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);DN()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,eD):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},ZN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}U1.type="LOCAL";const tD=U1;class j1 extends z1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}j1.type="SESSION";const B1=j1;function nD(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class ld{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new ld(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const d=Array.from(c).map(async g=>g(t.origin,l)),p=await nD(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ld.receivers=[];function ny(s="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return s+t}class rD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const g=ny("",20);a.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(E){const S=E;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(S.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Qr(){return window}function iD(s){Qr().location.href=s}function q1(){return typeof Qr().WorkerGlobalScope<"u"&&typeof Qr().importScripts=="function"}async function sD(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function aD(){return navigator?.serviceWorker?.controller||null}function oD(){return q1()?self:null}const F1="firebaseLocalStorageDb",lD=1,Pf="firebaseLocalStorage",H1="fbase_key";class vc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ud(s,e){return s.transaction([Pf],e?"readwrite":"readonly").objectStore(Pf)}function uD(){const s=indexedDB.deleteDatabase(F1);return new vc(s).toPromise()}function hg(){const s=indexedDB.open(F1,lD);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(Pf,{keyPath:H1})}catch(a){t(a)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(Pf)?e(r):(r.close(),await uD(),e(await hg()))})})}async function tE(s,e,t){const r=ud(s,!0).put({[H1]:e,value:t});return new vc(r).toPromise()}async function cD(s,e){const t=ud(s,!1).get(e),r=await new vc(t).toPromise();return r===void 0?null:r.value}function nE(s,e){const t=ud(s,!0).delete(e);return new vc(t).toPromise()}const hD=800,fD=3;class G1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>fD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return q1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ld._getInstance(oD()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await sD(),!this.activeServiceWorker)return;this.sender=new rD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||aD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hg();return await tE(e,kf,"1"),await nE(e,kf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>tE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>cD(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>nE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=ud(a,!1).getAll();return new vc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}G1.type="LOCAL";const dD=G1;new yc(3e4,6e4);function K1(s,e){return e?bi(e):(Ne(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class ry extends P1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ho(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ho(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ho(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function mD(s){return YN(s.auth,new ry(s),s.bypassAuthState)}function pD(s){const{auth:e,user:t}=s;return Ne(t,e,"internal-error"),$N(t,new ry(s),s.bypassAuthState)}async function gD(s){const{auth:e,user:t}=s;return Ne(t,e,"internal-error"),QN(t,new ry(s),s.bypassAuthState)}class Q1{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mD;case"linkViaPopup":case"linkViaRedirect":return gD;case"reauthViaPopup":case"reauthViaRedirect":return pD;default:Xr(this.auth,"internal-error")}}resolve(e){xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const yD=new yc(2e3,1e4);async function _D(s,e,t){if(pr(s.app))return Promise.reject(yr(s,"operation-not-supported-in-this-environment"));const r=od(s);dN(s,e,ty);const a=K1(r,t);return new Ta(r,"signInViaPopup",e,a).executeNotNull()}class Ta extends Q1{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,Ta.currentPopupAction&&Ta.currentPopupAction.cancel(),Ta.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){xi(this.filter.length===1,"Popup operations only handle one event");const e=ny();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(yr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(yr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ta.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yD.get())};e()}}Ta.currentPopupAction=null;const vD="pendingRedirect",pf=new Map;class bD extends Q1{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=pf.get(this.auth._key());if(!e){try{const r=await ED(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}pf.set(this.auth._key(),e)}return this.bypassAuthState||pf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ED(s,e){const t=SD(e),r=wD(s);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function TD(s,e){pf.set(s._key(),e)}function wD(s){return bi(s._redirectPersistence)}function SD(s){return mf(vD,s.config.apiKey,s.name)}async function AD(s,e,t=!1){if(pr(s.app))return Promise.reject(Sa(s));const r=od(s),a=K1(r,e),c=await new bD(r,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const xD=600*1e3;class ID{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!RD(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!$1(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(yr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xD&&this.cachedEventUids.clear(),this.cachedEventUids.has(rE(e))}saveEventToCache(e){this.cachedEventUids.add(rE(e)),this.lastProcessedEventTime=Date.now()}}function rE(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function $1({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function RD(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $1(s);default:return!1}}async function CD(s,e={}){return yl(s,"GET","/v1/projects",e)}const ND=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DD=/^https?/;async function VD(s){if(s.config.emulator)return;const{authorizedDomains:e}=await CD(s);for(const t of e)try{if(OD(t))return}catch{}Xr(s,"unauthorized-domain")}function OD(s){const e=ug(),{protocol:t,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const c=new URL(s);return c.hostname===""&&r===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!DD.test(t))return!1;if(ND.test(s))return r===s;const a=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const MD=new yc(3e4,6e4);function iE(){const s=Qr().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function kD(s){return new Promise((e,t)=>{function r(){iE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{iE(),t(yr(s,"network-request-failed"))},timeout:MD.get()})}if(Qr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Qr().gapi?.load)r();else{const a=jN("iframefcb");return Qr()[a]=()=>{gapi.load?r():t(yr(s,"network-request-failed"))},zN(`${UN()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw gf=null,e})}let gf=null;function PD(s){return gf=gf||kD(s),gf}const LD=new yc(5e3,15e3),zD="__/auth/iframe",UD="emulator/auth/iframe",jD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qD(s){const e=s.config;Ne(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?Xg(e,UD):`https://${s.config.authDomain}/${zD}`,r={apiKey:e.apiKey,appName:s.name,v:gl},a=BD.get(s.config.apiHost);a&&(r.eid=a);const l=s._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${gc(r).slice(1)}`}async function FD(s){const e=await PD(s),t=Qr().gapi;return Ne(t,s,"internal-error"),e.open({where:document.body,url:qD(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jD,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=yr(s,"network-request-failed"),d=Qr().setTimeout(()=>{l(c)},LD.get());function p(){Qr().clearTimeout(d),a(r)}r.ping(p).then(p,()=>{l(c)})}))}const HD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},GD=500,KD=600,QD="_blank",$D="http://localhost";class sE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YD(s,e,t,r=GD,a=KD){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const p={...HD,width:r.toString(),height:a.toString(),top:l,left:c},g=Ft().toLowerCase();t&&(d=R1(g)?QD:t),x1(g)&&(e=e||$D,p.scrollbars="yes");const v=Object.entries(p).reduce((S,[N,K])=>`${S}${N}=${K},`,"");if(NN(g)&&d!=="_self")return XD(e||"",d),new sE(null);const E=window.open(e||"",d,v);Ne(E,s,"popup-blocked");try{E.focus()}catch{}return new sE(E)}function XD(s,e){const t=document.createElement("a");t.href=s,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const JD="__/auth/handler",WD="emulator/auth/handler",ZD=encodeURIComponent("fac");async function aE(s,e,t,r,a,l){Ne(s.config.authDomain,s,"auth-domain-config-required"),Ne(s.config.apiKey,s,"invalid-api-key");const c={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:r,v:gl,eventId:a};if(e instanceof ty){e.setDefaultLanguage(s.languageCode),c.providerId=e.providerId||"",X2(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(e instanceof _c){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}s.tenantId&&(c.tid=s.tenantId);const d=c;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const p=await s._getAppCheckToken(),g=p?`#${ZD}=${encodeURIComponent(p)}`:"";return`${eV(s)}?${gc(d).slice(1)}${g}`}function eV({config:s}){return s.emulator?Xg(s,WD):`https://${s.authDomain}/${JD}`}const Hp="webStorageSupport";class tV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=B1,this._completeRedirectFn=AD,this._overrideRedirectResult=TD}async _openPopup(e,t,r,a){xi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await aE(e,t,r,ug(),a);return YD(e,l,ny())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await aE(e,t,r,ug(),a);return iD(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(xi(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await FD(e),r=new ID(e);return t.register("authEvent",a=>(Ne(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Hp,{type:Hp},a=>{const l=a?.[0]?.[Hp];l!==void 0&&t(!!l),Xr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=VD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return O1()||I1()||Zg()}}const nV=tV;var oE="@firebase/auth",lE="1.12.0";class rV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function iV(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sV(s){Qo(new Na("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;Ne(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:c,authDomain:d,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:M1(s)},g=new PN(r,a,l,p);return qN(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Qo(new Na("auth-internal",e=>{const t=od(e.getProvider("auth").getImmediate());return(r=>new rV(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),xs(oE,lE,iV(s)),xs(oE,lE,"esm2020")}const aV=300,oV=l1("authIdTokenMaxAge")||aV;let uE=null;const lV=s=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>oV)return;const a=t?.token;uE!==a&&(uE=a,await fetch(s,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function uV(s=WC()){const e=Qg(s,"auth");if(e.isInitialized())return e.getImmediate();const t=BN(s,{popupRedirectResolver:nV,persistence:[dD,tD,B1]}),r=l1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=lV(l.toString());JN(t,c,()=>c(t.currentUser)),XN(t,d=>c(d))}}const a=P2("auth");return a&&FN(t,`http://${a}`),t}function cV(){return document.getElementsByTagName("head")?.[0]??document}LN({loadJS(s){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=a=>{const l=yr("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",cV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sV("Browser");var cE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Is,Y1;(function(){var s;function e(w,A){function R(){}R.prototype=A.prototype,w.F=A.prototype,w.prototype=new R,w.prototype.constructor=w,w.D=function(M,O,k){for(var C=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)C[Ae-2]=arguments[Ae];return A.prototype[O].apply(M,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(w,A,R){R||(R=0);const M=Array(16);if(typeof A=="string")for(var O=0;O<16;++O)M[O]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(O=0;O<16;++O)M[O]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=w.g[0],R=w.g[1],O=w.g[2];let k=w.g[3],C;C=A+(k^R&(O^k))+M[0]+3614090360&4294967295,A=R+(C<<7&4294967295|C>>>25),C=k+(O^A&(R^O))+M[1]+3905402710&4294967295,k=A+(C<<12&4294967295|C>>>20),C=O+(R^k&(A^R))+M[2]+606105819&4294967295,O=k+(C<<17&4294967295|C>>>15),C=R+(A^O&(k^A))+M[3]+3250441966&4294967295,R=O+(C<<22&4294967295|C>>>10),C=A+(k^R&(O^k))+M[4]+4118548399&4294967295,A=R+(C<<7&4294967295|C>>>25),C=k+(O^A&(R^O))+M[5]+1200080426&4294967295,k=A+(C<<12&4294967295|C>>>20),C=O+(R^k&(A^R))+M[6]+2821735955&4294967295,O=k+(C<<17&4294967295|C>>>15),C=R+(A^O&(k^A))+M[7]+4249261313&4294967295,R=O+(C<<22&4294967295|C>>>10),C=A+(k^R&(O^k))+M[8]+1770035416&4294967295,A=R+(C<<7&4294967295|C>>>25),C=k+(O^A&(R^O))+M[9]+2336552879&4294967295,k=A+(C<<12&4294967295|C>>>20),C=O+(R^k&(A^R))+M[10]+4294925233&4294967295,O=k+(C<<17&4294967295|C>>>15),C=R+(A^O&(k^A))+M[11]+2304563134&4294967295,R=O+(C<<22&4294967295|C>>>10),C=A+(k^R&(O^k))+M[12]+1804603682&4294967295,A=R+(C<<7&4294967295|C>>>25),C=k+(O^A&(R^O))+M[13]+4254626195&4294967295,k=A+(C<<12&4294967295|C>>>20),C=O+(R^k&(A^R))+M[14]+2792965006&4294967295,O=k+(C<<17&4294967295|C>>>15),C=R+(A^O&(k^A))+M[15]+1236535329&4294967295,R=O+(C<<22&4294967295|C>>>10),C=A+(O^k&(R^O))+M[1]+4129170786&4294967295,A=R+(C<<5&4294967295|C>>>27),C=k+(R^O&(A^R))+M[6]+3225465664&4294967295,k=A+(C<<9&4294967295|C>>>23),C=O+(A^R&(k^A))+M[11]+643717713&4294967295,O=k+(C<<14&4294967295|C>>>18),C=R+(k^A&(O^k))+M[0]+3921069994&4294967295,R=O+(C<<20&4294967295|C>>>12),C=A+(O^k&(R^O))+M[5]+3593408605&4294967295,A=R+(C<<5&4294967295|C>>>27),C=k+(R^O&(A^R))+M[10]+38016083&4294967295,k=A+(C<<9&4294967295|C>>>23),C=O+(A^R&(k^A))+M[15]+3634488961&4294967295,O=k+(C<<14&4294967295|C>>>18),C=R+(k^A&(O^k))+M[4]+3889429448&4294967295,R=O+(C<<20&4294967295|C>>>12),C=A+(O^k&(R^O))+M[9]+568446438&4294967295,A=R+(C<<5&4294967295|C>>>27),C=k+(R^O&(A^R))+M[14]+3275163606&4294967295,k=A+(C<<9&4294967295|C>>>23),C=O+(A^R&(k^A))+M[3]+4107603335&4294967295,O=k+(C<<14&4294967295|C>>>18),C=R+(k^A&(O^k))+M[8]+1163531501&4294967295,R=O+(C<<20&4294967295|C>>>12),C=A+(O^k&(R^O))+M[13]+2850285829&4294967295,A=R+(C<<5&4294967295|C>>>27),C=k+(R^O&(A^R))+M[2]+4243563512&4294967295,k=A+(C<<9&4294967295|C>>>23),C=O+(A^R&(k^A))+M[7]+1735328473&4294967295,O=k+(C<<14&4294967295|C>>>18),C=R+(k^A&(O^k))+M[12]+2368359562&4294967295,R=O+(C<<20&4294967295|C>>>12),C=A+(R^O^k)+M[5]+4294588738&4294967295,A=R+(C<<4&4294967295|C>>>28),C=k+(A^R^O)+M[8]+2272392833&4294967295,k=A+(C<<11&4294967295|C>>>21),C=O+(k^A^R)+M[11]+1839030562&4294967295,O=k+(C<<16&4294967295|C>>>16),C=R+(O^k^A)+M[14]+4259657740&4294967295,R=O+(C<<23&4294967295|C>>>9),C=A+(R^O^k)+M[1]+2763975236&4294967295,A=R+(C<<4&4294967295|C>>>28),C=k+(A^R^O)+M[4]+1272893353&4294967295,k=A+(C<<11&4294967295|C>>>21),C=O+(k^A^R)+M[7]+4139469664&4294967295,O=k+(C<<16&4294967295|C>>>16),C=R+(O^k^A)+M[10]+3200236656&4294967295,R=O+(C<<23&4294967295|C>>>9),C=A+(R^O^k)+M[13]+681279174&4294967295,A=R+(C<<4&4294967295|C>>>28),C=k+(A^R^O)+M[0]+3936430074&4294967295,k=A+(C<<11&4294967295|C>>>21),C=O+(k^A^R)+M[3]+3572445317&4294967295,O=k+(C<<16&4294967295|C>>>16),C=R+(O^k^A)+M[6]+76029189&4294967295,R=O+(C<<23&4294967295|C>>>9),C=A+(R^O^k)+M[9]+3654602809&4294967295,A=R+(C<<4&4294967295|C>>>28),C=k+(A^R^O)+M[12]+3873151461&4294967295,k=A+(C<<11&4294967295|C>>>21),C=O+(k^A^R)+M[15]+530742520&4294967295,O=k+(C<<16&4294967295|C>>>16),C=R+(O^k^A)+M[2]+3299628645&4294967295,R=O+(C<<23&4294967295|C>>>9),C=A+(O^(R|~k))+M[0]+4096336452&4294967295,A=R+(C<<6&4294967295|C>>>26),C=k+(R^(A|~O))+M[7]+1126891415&4294967295,k=A+(C<<10&4294967295|C>>>22),C=O+(A^(k|~R))+M[14]+2878612391&4294967295,O=k+(C<<15&4294967295|C>>>17),C=R+(k^(O|~A))+M[5]+4237533241&4294967295,R=O+(C<<21&4294967295|C>>>11),C=A+(O^(R|~k))+M[12]+1700485571&4294967295,A=R+(C<<6&4294967295|C>>>26),C=k+(R^(A|~O))+M[3]+2399980690&4294967295,k=A+(C<<10&4294967295|C>>>22),C=O+(A^(k|~R))+M[10]+4293915773&4294967295,O=k+(C<<15&4294967295|C>>>17),C=R+(k^(O|~A))+M[1]+2240044497&4294967295,R=O+(C<<21&4294967295|C>>>11),C=A+(O^(R|~k))+M[8]+1873313359&4294967295,A=R+(C<<6&4294967295|C>>>26),C=k+(R^(A|~O))+M[15]+4264355552&4294967295,k=A+(C<<10&4294967295|C>>>22),C=O+(A^(k|~R))+M[6]+2734768916&4294967295,O=k+(C<<15&4294967295|C>>>17),C=R+(k^(O|~A))+M[13]+1309151649&4294967295,R=O+(C<<21&4294967295|C>>>11),C=A+(O^(R|~k))+M[4]+4149444226&4294967295,A=R+(C<<6&4294967295|C>>>26),C=k+(R^(A|~O))+M[11]+3174756917&4294967295,k=A+(C<<10&4294967295|C>>>22),C=O+(A^(k|~R))+M[2]+718787259&4294967295,O=k+(C<<15&4294967295|C>>>17),C=R+(k^(O|~A))+M[9]+3951481745&4294967295,w.g[0]=w.g[0]+A&4294967295,w.g[1]=w.g[1]+(O+(C<<21&4294967295|C>>>11))&4294967295,w.g[2]=w.g[2]+O&4294967295,w.g[3]=w.g[3]+k&4294967295}r.prototype.v=function(w,A){A===void 0&&(A=w.length);const R=A-this.blockSize,M=this.C;let O=this.h,k=0;for(;k<A;){if(O==0)for(;k<=R;)a(this,w,k),k+=this.blockSize;if(typeof w=="string"){for(;k<A;)if(M[O++]=w.charCodeAt(k++),O==this.blockSize){a(this,M),O=0;break}}else for(;k<A;)if(M[O++]=w[k++],O==this.blockSize){a(this,M),O=0;break}}this.h=O,this.o+=A},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var A=1;A<w.length-8;++A)w[A]=0;A=this.o*8;for(var R=w.length-8;R<w.length;++R)w[R]=A&255,A/=256;for(this.v(w),w=Array(16),A=0,R=0;R<4;++R)for(let M=0;M<32;M+=8)w[A++]=this.g[R]>>>M&255;return w};function l(w,A){var R=d;return Object.prototype.hasOwnProperty.call(R,w)?R[w]:R[w]=A(w)}function c(w,A){this.h=A;const R=[];let M=!0;for(let O=w.length-1;O>=0;O--){const k=w[O]|0;M&&k==A||(R[O]=k,M=!1)}this.g=R}var d={};function p(w){return-128<=w&&w<128?l(w,function(A){return new c([A|0],A<0?-1:0)}):new c([w|0],w<0?-1:0)}function g(w){if(isNaN(w)||!isFinite(w))return E;if(w<0)return L(g(-w));const A=[];let R=1;for(let M=0;w>=R;M++)A[M]=w/R|0,R*=4294967296;return new c(A,0)}function v(w,A){if(w.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(w.charAt(0)=="-")return L(v(w.substring(1),A));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=g(Math.pow(A,8));let M=E;for(let k=0;k<w.length;k+=8){var O=Math.min(8,w.length-k);const C=parseInt(w.substring(k,k+O),A);O<8?(O=g(Math.pow(A,O)),M=M.j(O).add(g(C))):(M=M.j(R),M=M.add(g(C)))}return M}var E=p(0),S=p(1),N=p(16777216);s=c.prototype,s.m=function(){if(q(this))return-L(this).m();let w=0,A=1;for(let R=0;R<this.g.length;R++){const M=this.i(R);w+=(M>=0?M:4294967296+M)*A,A*=4294967296}return w},s.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(K(this))return"0";if(q(this))return"-"+L(this).toString(w);const A=g(Math.pow(w,6));var R=this;let M="";for(;;){const O=le(R,A).g;R=ne(R,O.j(A));let k=((R.g.length>0?R.g[0]:R.h)>>>0).toString(w);if(R=O,K(R))return k+M;for(;k.length<6;)k="0"+k;M=k+M}},s.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function K(w){if(w.h!=0)return!1;for(let A=0;A<w.g.length;A++)if(w.g[A]!=0)return!1;return!0}function q(w){return w.h==-1}s.l=function(w){return w=ne(this,w),q(w)?-1:K(w)?0:1};function L(w){const A=w.g.length,R=[];for(let M=0;M<A;M++)R[M]=~w.g[M];return new c(R,~w.h).add(S)}s.abs=function(){return q(this)?L(this):this},s.add=function(w){const A=Math.max(this.g.length,w.g.length),R=[];let M=0;for(let O=0;O<=A;O++){let k=M+(this.i(O)&65535)+(w.i(O)&65535),C=(k>>>16)+(this.i(O)>>>16)+(w.i(O)>>>16);M=C>>>16,k&=65535,C&=65535,R[O]=C<<16|k}return new c(R,R[R.length-1]&-2147483648?-1:0)};function ne(w,A){return w.add(L(A))}s.j=function(w){if(K(this)||K(w))return E;if(q(this))return q(w)?L(this).j(L(w)):L(L(this).j(w));if(q(w))return L(this.j(L(w)));if(this.l(N)<0&&w.l(N)<0)return g(this.m()*w.m());const A=this.g.length+w.g.length,R=[];for(var M=0;M<2*A;M++)R[M]=0;for(M=0;M<this.g.length;M++)for(let O=0;O<w.g.length;O++){const k=this.i(M)>>>16,C=this.i(M)&65535,Ae=w.i(O)>>>16,je=w.i(O)&65535;R[2*M+2*O]+=C*je,J(R,2*M+2*O),R[2*M+2*O+1]+=k*je,J(R,2*M+2*O+1),R[2*M+2*O+1]+=C*Ae,J(R,2*M+2*O+1),R[2*M+2*O+2]+=k*Ae,J(R,2*M+2*O+2)}for(w=0;w<A;w++)R[w]=R[2*w+1]<<16|R[2*w];for(w=A;w<2*A;w++)R[w]=0;return new c(R,0)};function J(w,A){for(;(w[A]&65535)!=w[A];)w[A+1]+=w[A]>>>16,w[A]&=65535,A++}function Z(w,A){this.g=w,this.h=A}function le(w,A){if(K(A))throw Error("division by zero");if(K(w))return new Z(E,E);if(q(w))return A=le(L(w),A),new Z(L(A.g),L(A.h));if(q(A))return A=le(w,L(A)),new Z(L(A.g),A.h);if(w.g.length>30){if(q(w)||q(A))throw Error("slowDivide_ only works with positive integers.");for(var R=S,M=A;M.l(w)<=0;)R=fe(R),M=fe(M);var O=ce(R,1),k=ce(M,1);for(M=ce(M,2),R=ce(R,2);!K(M);){var C=k.add(M);C.l(w)<=0&&(O=O.add(R),k=C),M=ce(M,1),R=ce(R,1)}return A=ne(w,O.j(A)),new Z(O,A)}for(O=E;w.l(A)>=0;){for(R=Math.max(1,Math.floor(w.m()/A.m())),M=Math.ceil(Math.log(R)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),k=g(R),C=k.j(A);q(C)||C.l(w)>0;)R-=M,k=g(R),C=k.j(A);K(k)&&(k=S),O=O.add(k),w=ne(w,C)}return new Z(O,w)}s.B=function(w){return le(this,w).h},s.and=function(w){const A=Math.max(this.g.length,w.g.length),R=[];for(let M=0;M<A;M++)R[M]=this.i(M)&w.i(M);return new c(R,this.h&w.h)},s.or=function(w){const A=Math.max(this.g.length,w.g.length),R=[];for(let M=0;M<A;M++)R[M]=this.i(M)|w.i(M);return new c(R,this.h|w.h)},s.xor=function(w){const A=Math.max(this.g.length,w.g.length),R=[];for(let M=0;M<A;M++)R[M]=this.i(M)^w.i(M);return new c(R,this.h^w.h)};function fe(w){const A=w.g.length+1,R=[];for(let M=0;M<A;M++)R[M]=w.i(M)<<1|w.i(M-1)>>>31;return new c(R,w.h)}function ce(w,A){const R=A>>5;A%=32;const M=w.g.length-R,O=[];for(let k=0;k<M;k++)O[k]=A>0?w.i(k+R)>>>A|w.i(k+R+1)<<32-A:w.i(k+R);return new c(O,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Y1=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=v,Is=c}).apply(typeof cE<"u"?cE:typeof self<"u"?self:typeof window<"u"?window:{});var rf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var X1,Vu,J1,yf,fg,W1,Z1,ew;(function(){var s,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof rf=="object"&&rf];for(var y=0;y<h.length;++y){var b=h[y];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=t(this);function a(h,y){if(y)e:{var b=r;h=h.split(".");for(var I=0;I<h.length-1;I++){var F=h[I];if(!(F in b))break e;b=b[F]}h=h[h.length-1],I=b[h],y=y(I),y!=I&&y!=null&&e(b,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var b=[],I;for(I in y)Object.prototype.hasOwnProperty.call(y,I)&&b.push([I,y[I]]);return b}});var l=l||{},c=this||self;function d(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function p(h,y,b){return h.call.apply(h.bind,arguments)}function g(h,y,b){return g=p,g.apply(null,arguments)}function v(h,y){var b=Array.prototype.slice.call(arguments,1);return function(){var I=b.slice();return I.push.apply(I,arguments),h.apply(this,I)}}function E(h,y){function b(){}b.prototype=y.prototype,h.Z=y.prototype,h.prototype=new b,h.prototype.constructor=h,h.Ob=function(I,F,$){for(var de=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)de[ke-2]=arguments[ke];return y.prototype[F].apply(I,de)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function N(h){const y=h.length;if(y>0){const b=Array(y);for(let I=0;I<y;I++)b[I]=h[I];return b}return[]}function K(h,y){for(let I=1;I<arguments.length;I++){const F=arguments[I];var b=typeof F;if(b=b!="object"?b:F?Array.isArray(F)?"array":b:"null",b=="array"||b=="object"&&typeof F.length=="number"){b=h.length||0;const $=F.length||0;h.length=b+$;for(let de=0;de<$;de++)h[b+de]=F[de]}else h.push(F)}}class q{constructor(y,b){this.i=y,this.j=b,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function L(h){c.setTimeout(()=>{throw h},0)}function ne(){var h=w;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class J{constructor(){this.h=this.g=null}add(y,b){const I=Z.get();I.set(y,b),this.h?this.h.next=I:this.g=I,this.h=I}}var Z=new q(()=>new le,h=>h.reset());class le{constructor(){this.next=this.g=this.h=null}set(y,b){this.h=y,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,ce=!1,w=new J,A=()=>{const h=Promise.resolve(void 0);fe=()=>{h.then(R)}};function R(){for(var h;h=ne();){try{h.h.call(h.g)}catch(b){L(b)}var y=Z;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}ce=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};c.addEventListener("test",b,y),c.removeEventListener("test",b,y)}catch{}return h})();function C(h){return/^[\s\xa0]*$/.test(h)}function Ae(h,y){O.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}E(Ae,O),Ae.prototype.init=function(h,y){const b=this.type=h.type,I=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(b=="mouseover"?y=h.fromElement:b=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ae.Z.h.call(this)},Ae.prototype.h=function(){Ae.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var je="closure_listenable_"+(Math.random()*1e6|0),j=0;function ae(h,y,b,I,F){this.listener=h,this.proxy=null,this.src=y,this.type=b,this.capture=!!I,this.ha=F,this.key=++j,this.da=this.fa=!1}function ee(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ye(h,y,b){for(const I in h)y.call(b,h[I],I,h)}function xe(h,y){for(const b in h)y.call(void 0,h[b],b,h)}function V(h){const y={};for(const b in h)y[b]=h[b];return y}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(h,y){let b,I;for(let F=1;F<arguments.length;F++){I=arguments[F];for(b in I)h[b]=I[b];for(let $=0;$<X.length;$++)b=X[$],Object.prototype.hasOwnProperty.call(I,b)&&(h[b]=I[b])}}function se(h){this.src=h,this.g={},this.h=0}se.prototype.add=function(h,y,b,I,F){const $=h.toString();h=this.g[$],h||(h=this.g[$]=[],this.h++);const de=Ce(h,y,I,F);return de>-1?(y=h[de],b||(y.fa=!1)):(y=new ae(y,this.src,$,!!I,F),y.fa=b,h.push(y)),y};function ue(h,y){const b=y.type;if(b in h.g){var I=h.g[b],F=Array.prototype.indexOf.call(I,y,void 0),$;($=F>=0)&&Array.prototype.splice.call(I,F,1),$&&(ee(y),h.g[b].length==0&&(delete h.g[b],h.h--))}}function Ce(h,y,b,I){for(let F=0;F<h.length;++F){const $=h[F];if(!$.da&&$.listener==y&&$.capture==!!b&&$.ha==I)return F}return-1}var ze="closure_lm_"+(Math.random()*1e6|0),_t={};function ct(h,y,b,I,F){if(Array.isArray(y)){for(let $=0;$<y.length;$++)ct(h,y[$],b,I,F);return null}return b=Oe(b),h&&h[je]?h.J(y,b,d(I)?!!I.capture:!1,F):tr(h,y,b,!1,I,F)}function tr(h,y,b,I,F,$){if(!y)throw Error("Invalid event type");const de=d(F)?!!F.capture:!!F;let ke=Ln(h);if(ke||(h[ze]=ke=new se(h)),b=ke.add(y,b,I,de,$),b.proxy)return b;if(I=Vi(),b.proxy=I,I.src=h,I.listener=b,h.addEventListener)k||(F=de),F===void 0&&(F=!1),h.addEventListener(y.toString(),I,F);else if(h.attachEvent)h.attachEvent(cn(y.toString()),I);else if(h.addListener&&h.removeListener)h.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Vi(){function h(b){return y.call(h.src,h.listener,b)}const y=Ls;return h}function Oi(h,y,b,I,F){if(Array.isArray(y))for(var $=0;$<y.length;$++)Oi(h,y[$],b,I,F);else I=d(I)?!!I.capture:!!I,b=Oe(b),h&&h[je]?(h=h.i,$=String(y).toString(),$ in h.g&&(y=h.g[$],b=Ce(y,b,I,F),b>-1&&(ee(y[b]),Array.prototype.splice.call(y,b,1),y.length==0&&(delete h.g[$],h.h--)))):h&&(h=Ln(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ce(y,b,I,F)),(b=h>-1?y[h]:null)&&Mi(b))}function Mi(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[je])ue(y.i,h);else{var b=h.type,I=h.proxy;y.removeEventListener?y.removeEventListener(b,I,h.capture):y.detachEvent?y.detachEvent(cn(b),I):y.addListener&&y.removeListener&&y.removeListener(I),(b=Ln(y))?(ue(b,h),b.h==0&&(b.src=null,y[ze]=null)):ee(h)}}}function cn(h){return h in _t?_t[h]:_t[h]="on"+h}function Ls(h,y){if(h.da)h=!0;else{y=new Ae(y,this);const b=h.listener,I=h.ha||h.src;h.fa&&Mi(h),h=b.call(I,y)}return h}function Ln(h){return h=h[ze],h instanceof se?h:null}var me="__closure_events_fn_"+(Math.random()*1e9>>>0);function Oe(h){return typeof h=="function"?h:(h[me]||(h[me]=function(y){return h.handleEvent(y)}),h[me])}function De(){M.call(this),this.i=new se(this),this.M=this,this.G=null}E(De,M),De.prototype[je]=!0,De.prototype.removeEventListener=function(h,y,b,I){Oi(this,h,y,b,I)};function Ie(h,y){var b,I=h.G;if(I)for(b=[];I;I=I.G)b.push(I);if(h=h.M,I=y.type||y,typeof y=="string")y=new O(y,h);else if(y instanceof O)y.target=y.target||h;else{var F=y;y=new O(I,h),he(y,F)}F=!0;let $,de;if(b)for(de=b.length-1;de>=0;de--)$=y.g=b[de],F=vt($,I,!0,y)&&F;if($=y.g=h,F=vt($,I,!0,y)&&F,F=vt($,I,!1,y)&&F,b)for(de=0;de<b.length;de++)$=y.g=b[de],F=vt($,I,!1,y)&&F}De.prototype.N=function(){if(De.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const b=h.g[y];for(let I=0;I<b.length;I++)ee(b[I]);delete h.g[y],h.h--}}this.G=null},De.prototype.J=function(h,y,b,I){return this.i.add(String(h),y,!1,b,I)},De.prototype.K=function(h,y,b,I){return this.i.add(String(h),y,!0,b,I)};function vt(h,y,b,I){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let F=!0;for(let $=0;$<y.length;++$){const de=y[$];if(de&&!de.da&&de.capture==b){const ke=de.listener,It=de.ha||de.src;de.fa&&ue(h.i,de),F=ke.call(It,I)!==!1&&F}}return F&&!I.defaultPrevented}function zn(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function ki(h){h.g=zn(()=>{h.g=null,h.i&&(h.i=!1,ki(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Xt extends M{constructor(y,b){super(),this.m=y,this.l=b,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ki(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zr(h){M.call(this),this.h=h,this.g={}}E(Zr,M);var zs=[];function br(h){ye(h.g,function(y,b){this.g.hasOwnProperty(b)&&Mi(y)},h),h.g={}}Zr.prototype.N=function(){Zr.Z.N.call(this),br(this)},Zr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pi=c.JSON.stringify,Cd=c.JSON.parse,Ic=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Rc(){}function Cc(){}var nr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Jt(){O.call(this,"d")}E(Jt,O);function Un(){O.call(this,"c")}E(Un,O);var xt={},Nc=null;function qa(){return Nc=Nc||new De}xt.Ia="serverreachability";function Dc(h){O.call(this,xt.Ia,h)}E(Dc,O);function Er(h){const y=qa();Ie(y,new Dc(y))}xt.STAT_EVENT="statevent";function Us(h,y){O.call(this,xt.STAT_EVENT,h),this.stat=y}E(Us,O);function Vt(h){const y=qa();Ie(y,new Us(y,h))}xt.Ja="timingevent";function Tr(h,y){O.call(this,xt.Ja,h),this.size=y}E(Tr,O);function wr(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function rr(){this.g=!0}rr.prototype.ua=function(){this.g=!1};function Nd(h,y,b,I,F,$){h.info(function(){if(h.g)if($){var de="",ke=$.split("&");for(let Je=0;Je<ke.length;Je++){var It=ke[Je].split("=");if(It.length>1){const pt=It[0];It=It[1];const Fn=pt.split("_");de=Fn.length>=2&&Fn[1]=="type"?de+(pt+"="+It+"&"):de+(pt+"=redacted&")}}}else de=null;else de=$;return"XMLHTTP REQ ("+I+") [attempt "+F+"]: "+y+`
`+b+`
`+de})}function Vc(h,y,b,I,F,$,de){h.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+F+"]: "+y+`
`+b+`
`+$+" "+de})}function Sr(h,y,b,I){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Dd(h,b)+(I?" "+I:"")})}function js(h,y){h.info(function(){return"TIMEOUT: "+y})}rr.prototype.info=function(){};function Dd(h,y){if(!h.g)return y;if(!y)return null;try{const $=JSON.parse(y);if($){for(h=0;h<$.length;h++)if(Array.isArray($[h])){var b=$[h];if(!(b.length<2)){var I=b[1];if(Array.isArray(I)&&!(I.length<1)){var F=I[0];if(F!="noop"&&F!="stop"&&F!="close")for(let de=1;de<I.length;de++)I[de]=""}}}}return Pi($)}catch{return y}}var Bs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},wl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Sl;function qs(){}E(qs,Rc),qs.prototype.g=function(){return new XMLHttpRequest},Sl=new qs;function ei(h){return encodeURIComponent(String(h))}function Oc(h){var y=1;h=h.split(":");const b=[];for(;y>0&&h.length;)b.push(h.shift()),y--;return h.length&&b.push(h.join(":")),b}function ir(h,y,b,I){this.j=h,this.i=y,this.l=b,this.S=I||1,this.V=new Zr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new sr}function sr(){this.i=null,this.g="",this.h=!1}var Ot={},Gt={};function Ar(h,y,b){h.M=1,h.A=Fs(kt(y)),h.u=b,h.R=!0,Fa(h,null)}function Fa(h,y){h.F=Date.now(),xr(h),h.B=kt(h.A);var b=h.B,I=h.S;Array.isArray(I)||(I=[String(I)]),Qa(b.i,"t",I),h.C=0,b=h.j.L,h.h=new sr,h.g=$c(h.j,b?y:null,!h.u),h.P>0&&(h.O=new Xt(g(h.Y,h,h.g),h.P)),y=h.V,b=h.g,I=h.ba;var F="readystatechange";Array.isArray(F)||(F&&(zs[0]=F.toString()),F=zs);for(let $=0;$<F.length;$++){const de=ct(b,F[$],I||y.handleEvent,!1,y.h||y);if(!de)break;y.g[de.key]=de}y=h.J?V(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Er(),Nd(h.i,h.v,h.B,h.l,h.S,h.u)}ir.prototype.ba=function(h){h=h.target;const y=this.O;y&&lr(h)==3?y.j():this.Y(h)},ir.prototype.Y=function(h){try{if(h==this.g)e:{const ke=lr(this.g),It=this.g.ya(),Je=this.g.ca();if(!(ke<3)&&(ke!=3||this.g&&(this.h.h||this.g.la()||Wt(this.g)))){this.K||ke!=4||It==7||(It==8||Je<=0?Er(3):Er(2)),Ir(this);var y=this.g.ca();this.X=y;var b=Vd(this);if(this.o=y==200,Vc(this.i,this.v,this.B,this.l,this.S,ke,y),this.o){if(this.U&&!this.L){t:{if(this.g){var I,F=this.g;if((I=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(I)){var $=I;break t}}$=null}if(h=$)Sr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Rr(this,h);else{this.o=!1,this.m=3,Vt(12),wn(this),jn(this);break e}}if(this.R){h=!0;let pt;for(;!this.K&&this.C<b.length;)if(pt=kc(this,b),pt==Gt){ke==4&&(this.m=4,Vt(14),h=!1),Sr(this.i,this.l,null,"[Incomplete Response]");break}else if(pt==Ot){this.m=4,Vt(15),Sr(this.i,this.l,b,"[Invalid Chunk]"),h=!1;break}else Sr(this.i,this.l,pt,null),Rr(this,pt);if(Mc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ke!=4||b.length!=0||this.h.h||(this.m=1,Vt(16),h=!1),this.o=this.o&&h,!h)Sr(this.i,this.l,b,"[Invalid Chunked Response]"),wn(this),jn(this);else if(b.length>0&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.aa&&!de.P&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),Ul(de),de.P=!0,Vt(11))}}else Sr(this.i,this.l,b,null),Rr(this,b);ke==4&&wn(this),this.o&&!this.K&&(ke==4?Hc(this.j,this):(this.o=!1,xr(this)))}else ni(this.g),y==400&&b.indexOf("Unknown SID")>0?(this.m=3,Vt(12)):(this.m=0,Vt(13)),wn(this),jn(this)}}}catch{}};function Vd(h){if(!Mc(h))return h.g.la();const y=Wt(h.g);if(y==="")return"";let b="";const I=y.length,F=lr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return wn(h),jn(h),"";h.h.i=new c.TextDecoder}for(let $=0;$<I;$++)h.h.h=!0,b+=h.h.i.decode(y[$],{stream:!(F&&$==I-1)});return y.length=0,h.h.g+=b,h.C=0,h.h.g}function Mc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function kc(h,y){var b=h.C,I=y.indexOf(`
`,b);return I==-1?Gt:(b=Number(y.substring(b,I)),isNaN(b)?Ot:(I+=1,I+b>y.length?Gt:(y=y.slice(I,I+b),h.C=I+b,y)))}ir.prototype.cancel=function(){this.K=!0,wn(this)};function xr(h){h.T=Date.now()+h.H,Ha(h,h.H)}function Ha(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=wr(g(h.aa,h),y)}function Ir(h){h.D&&(c.clearTimeout(h.D),h.D=null)}ir.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(js(this.i,this.B),this.M!=2&&(Er(),Vt(17)),wn(this),this.m=2,jn(this)):Ha(this,this.T-h)};function jn(h){h.j.I==0||h.K||Hc(h.j,h)}function wn(h){Ir(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,br(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Rr(h,y){try{var b=h.j;if(b.I!=0&&(b.g==h||Nr(b.h,h))){if(!h.L&&Nr(b.h,h)&&b.I==3){try{var I=b.Ba.g.parse(y)}catch{I=null}if(Array.isArray(I)&&I.length==3){var F=I;if(F[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<h.F)Wa(b),Hi(b);else break e;Xs(b),Vt(18)}}else b.xa=F[1],0<b.xa-b.K&&F[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=wr(g(b.Va,b),6e3));Cr(b.h)<=1&&b.ta&&(b.ta=void 0)}else Pr(b,11)}else if((h.L||b.g==h)&&Wa(b),!C(y))for(F=b.Ba.g.parse(y),y=0;y<F.length;y++){let Je=F[y];const pt=Je[0];if(!(pt<=b.K))if(b.K=pt,Je=Je[1],b.I==2)if(Je[0]=="c"){b.M=Je[1],b.ba=Je[2];const Fn=Je[3];Fn!=null&&(b.ka=Fn,b.j.info("VER="+b.ka));const Lr=Je[4];Lr!=null&&(b.za=Lr,b.j.info("SVER="+b.za));const ur=Je[5];ur!=null&&typeof ur=="number"&&ur>0&&(I=1.5*ur,b.O=I,b.j.info("backChannelRequestTimeoutMs_="+I)),I=b;const cr=h.g;if(cr){const Js=cr.g?cr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Js){var $=I.h;$.g||Js.indexOf("spdy")==-1&&Js.indexOf("quic")==-1&&Js.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Il($,$.h),$.h=null))}if(I.G){const Za=cr.g?cr.g.getResponseHeader("X-HTTP-Session-Id"):null;Za&&(I.wa=Za,Ze(I.J,I.G,Za))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-h.F,b.j.info("Handshake RTT: "+b.T+"ms")),I=b;var de=h;if(I.na=Qc(I,I.L?I.ba:null,I.W),de.L){Rl(I.h,de);var ke=de,It=I.O;It&&(ke.H=It),ke.D&&(Ir(ke),xr(ke)),I.g=de}else qc(I);b.i.length>0&&kr(b)}else Je[0]!="stop"&&Je[0]!="close"||Pr(b,7);else b.I==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?Pr(b,7):Ll(b):Je[0]!="noop"&&b.l&&b.l.qa(Je),b.A=0)}}Er(4)}catch{}}var Mt=class{constructor(h,y){this.g=h,this.map=y}};function Al(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function xl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Cr(h){return h.h?1:h.g?h.g.size:0}function Nr(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Il(h,y){h.g?h.g.add(y):h.h=y}function Rl(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Al.prototype.cancel=function(){if(this.i=Cl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Cl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const b of h.g.values())y=y.concat(b.G);return y}return N(h.i)}var Pc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ga(h,y){if(h){h=h.split("&");for(let b=0;b<h.length;b++){const I=h[b].indexOf("=");let F,$=null;I>=0?(F=h[b].substring(0,I),$=h[b].substring(I+1)):F=h[b],y(F,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Sn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof Sn?(this.l=h.l,Kt(this,h.j),this.o=h.o,this.g=h.g,Li(this,h.u),this.h=h.h,Nl(this,jc(h.i)),this.m=h.m):h&&(y=String(h).match(Pc))?(this.l=!1,Kt(this,y[1]||"",!0),this.o=Dr(y[2]||""),this.g=Dr(y[3]||"",!0),Li(this,y[4]),this.h=Dr(y[5]||"",!0),Nl(this,y[6]||"",!0),this.m=Dr(y[7]||"")):(this.l=!1,this.i=new Ui(null,this.l))}Sn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Hs(y,Ka,!0),":");var b=this.g;return(b||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Hs(y,Ka,!0),"@"),h.push(ei(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&h.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push(Hs(b,b.charAt(0)=="/"?Dl:Lc,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",Hs(b,zc)),h.join("")},Sn.prototype.resolve=function(h){const y=kt(this);let b=!!h.j;b?Kt(y,h.j):b=!!h.o,b?y.o=h.o:b=!!h.g,b?y.g=h.g:b=h.u!=null;var I=h.h;if(b)Li(y,h.u);else if(b=!!h.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var F=y.h.lastIndexOf("/");F!=-1&&(I=y.h.slice(0,F+1)+I)}if(F=I,F==".."||F==".")I="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){I=F.lastIndexOf("/",0)==0,F=F.split("/");const $=[];for(let de=0;de<F.length;){const ke=F[de++];ke=="."?I&&de==F.length&&$.push(""):ke==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),I&&de==F.length&&$.push("")):($.push(ke),I=!0)}I=$.join("/")}else I=F}return b?y.h=I:b=h.i.toString()!=="",b?Nl(y,jc(h.i)):b=!!h.m,b&&(y.m=h.m),y};function kt(h){return new Sn(h)}function Kt(h,y,b){h.j=b?Dr(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Li(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Nl(h,y,b){y instanceof Ui?(h.i=y,$a(h.i,h.l)):(b||(y=Hs(y,zi)),h.i=new Ui(y,h.l))}function Ze(h,y,b){h.i.set(y,b)}function Fs(h){return Ze(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Dr(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Hs(h,y,b){return typeof h=="string"?(h=encodeURI(h).replace(y,mn),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function mn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ka=/[#\/\?@]/g,Lc=/[#\?:]/g,Dl=/[#\?]/g,zi=/[#\?@]/g,zc=/#/g;function Ui(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function pn(h){h.g||(h.g=new Map,h.h=0,h.i&&Ga(h.i,function(y,b){h.add(decodeURIComponent(y.replace(/\+/g," ")),b)}))}s=Ui.prototype,s.add=function(h,y){pn(this),this.i=null,h=ji(this,h);let b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(y),this.h+=1,this};function Uc(h,y){pn(h),y=ji(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Vl(h,y){return pn(h),y=ji(h,y),h.g.has(y)}s.forEach=function(h,y){pn(this),this.g.forEach(function(b,I){b.forEach(function(F){h.call(y,F,I,this)},this)},this)};function Ol(h,y){pn(h);let b=[];if(typeof y=="string")Vl(h,y)&&(b=b.concat(h.g.get(ji(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)b=b.concat(h[y]);return b}s.set=function(h,y){return pn(this),this.i=null,h=ji(this,h),Vl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=Ol(this,h),h.length>0?String(h[0]):y):y};function Qa(h,y,b){Uc(h,y),b.length>0&&(h.i=null,h.g.set(ji(h,y),N(b)),h.h+=b.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let I=0;I<y.length;I++){var b=y[I];const F=ei(b);b=Ol(this,b);for(let $=0;$<b.length;$++){let de=F;b[$]!==""&&(de+="="+ei(b[$])),h.push(de)}}return this.i=h.join("&")};function jc(h){const y=new Ui;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function ji(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function $a(h,y){y&&!h.j&&(pn(h),h.i=null,h.g.forEach(function(b,I){const F=I.toLowerCase();I!=F&&(Uc(this,I),Qa(this,F,b))},h)),h.j=y}function ar(h,y){const b=new rr;if(c.Image){const I=new Image;I.onload=v(Bn,b,"TestLoadImage: loaded",!0,y,I),I.onerror=v(Bn,b,"TestLoadImage: error",!1,y,I),I.onabort=v(Bn,b,"TestLoadImage: abort",!1,y,I),I.ontimeout=v(Bn,b,"TestLoadImage: timeout",!1,y,I),c.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=h}else y(!1)}function Ml(h,y){const b=new rr,I=new AbortController,F=setTimeout(()=>{I.abort(),Bn(b,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:I.signal}).then($=>{clearTimeout(F),$.ok?Bn(b,"TestPingServer: ok",!0,y):Bn(b,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(F),Bn(b,"TestPingServer: error",!1,y)})}function Bn(h,y,b,I,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),I(b)}catch{}}function Bi(){this.g=new Ic}function Vr(h){this.i=h.Sb||null,this.h=h.ab||!1}E(Vr,Rc),Vr.prototype.g=function(){return new Gs(this.i,this.h)};function Gs(h,y){De.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Gs,De),s=Gs.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,or(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,qi(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,or(this)),this.g&&(this.readyState=3,or(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ya(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ya(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?qi(this):or(this),this.readyState==3&&Ya(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,qi(this))},s.Na=function(h){this.g&&(this.response=h,qi(this))},s.ga=function(){this.g&&qi(this)};function qi(h){h.readyState=4,h.l=null,h.j=null,h.B=null,or(h)}s.setRequestHeader=function(h,y){this.A.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var b=y.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=y.next();return h.join(`\r
`)};function or(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Gs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function qn(h){let y="";return ye(h,function(b,I){y+=I,y+=":",y+=b,y+=`\r
`}),y}function Ks(h,y,b){e:{for(I in b){var I=!1;break e}I=!0}I||(b=qn(b),typeof h=="string"?b!=null&&ei(b):Ze(h,y,b))}function it(h){De.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(it,De);var Or=/^https?$/i,kl=["POST","PUT"];s=it.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,y,b,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Sl.g(),this.g.onreadystatechange=S(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch($){Qs(this,$);return}if(h=b||"",b=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var F in I)b.set(F,I[F]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const $ of I.keys())b.set($,I.get($));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(b.keys()).find($=>$.toLowerCase()=="content-type"),F=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(kl,y,void 0)>=0)||I||F||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,de]of b)this.g.setRequestHeader($,de);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch($){Qs(this,$)}};function Qs(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Pl(h),ti(h)}function Pl(h){h.A||(h.A=!0,Ie(h,"complete"),Ie(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ie(this,"complete"),Ie(this,"abort"),ti(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ti(this,!0)),it.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?$s(this):this.Xa())},s.Xa=function(){$s(this)};function $s(h){if(h.h&&typeof l<"u"){if(h.v&&lr(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ie(h,"readystatechange"),lr(h)==4){h.h=!1;try{const $=h.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var b;if(!(b=y)){var I;if(I=$===0){let de=String(h.D).match(Pc)[1]||null;!de&&c.self&&c.self.location&&(de=c.self.location.protocol.slice(0,-1)),I=!Or.test(de?de.toLowerCase():"")}b=I}if(b)Ie(h,"complete"),Ie(h,"success");else{h.o=6;try{var F=lr(h)>2?h.g.statusText:""}catch{F=""}h.l=F+" ["+h.ca()+"]",Pl(h)}}finally{ti(h)}}}}function ti(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const b=h.g;h.g=null,y||Ie(h,"ready");try{b.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function lr(h){return h.g?h.g.readyState:0}s.ca=function(){try{return lr(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Cd(y)}};function Wt(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ni(h){const y={};h=(h.g&&lr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<h.length;I++){if(C(h[I]))continue;var b=Oc(h[I]);const F=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const $=y[F]||[];y[F]=$,$.push(b)}xe(y,function(I){return I.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mr(h,y,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||y}function Fi(h){this.za=0,this.i=[],this.j=new rr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Mr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Mr("baseRetryDelayMs",5e3,h),this.Za=Mr("retryDelaySeedMs",1e4,h),this.Ta=Mr("forwardChannelMaxRetries",2,h),this.va=Mr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Al(h&&h.concurrentRequestLimit),this.Ba=new Bi,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Fi.prototype,s.ka=8,s.I=1,s.connect=function(h,y,b,I){Vt(0),this.W=h,this.H=y||{},b&&I!==void 0&&(this.H.OSID=b,this.H.OAID=I),this.F=this.X,this.J=Qc(this,null,this.W),kr(this)};function Ll(h){if(Xa(h),h.I==3){var y=h.V++,b=kt(h.J);if(Ze(b,"SID",h.M),Ze(b,"RID",y),Ze(b,"TYPE","terminate"),Ys(h,b),y=new ir(h,h.j,y),y.M=2,y.A=Fs(kt(b)),b=!1,c.navigator&&c.navigator.sendBeacon)try{b=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!b&&c.Image&&(new Image().src=y.A,b=!0),b||(y.g=$c(y.j,null),y.g.ea(y.A)),y.F=Date.now(),xr(y)}Kc(h)}function Hi(h){h.g&&(Ul(h),h.g.cancel(),h.g=null)}function Xa(h){Hi(h),h.v&&(c.clearTimeout(h.v),h.v=null),Wa(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function kr(h){if(!xl(h.h)&&!h.m){h.m=!0;var y=h.Ea;fe||A(),ce||(fe(),ce=!0),w.add(y,h),h.D=0}}function Ja(h,y){return Cr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=wr(g(h.Ea,h,y),Gc(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const F=new ir(this,this.j,h);let $=this.o;if(this.U&&($?($=V($),he($,this.U)):$=this.U),this.u!==null||this.R||(F.J=$,$=null),this.S)e:{for(var y=0,b=0;b<this.i.length;b++){t:{var I=this.i[b];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(y+=I,y>4096){y=b;break e}if(y===4096||b===this.i.length-1){y=b+1;break e}}y=1e3}else y=1e3;y=Bc(this,F,y),b=kt(this.J),Ze(b,"RID",h),Ze(b,"CVER",22),this.G&&Ze(b,"X-HTTP-Session-Id",this.G),Ys(this,b),$&&(this.R?y="headers="+ei(qn($))+"&"+y:this.u&&Ks(b,this.u,$)),Il(this.h,F),this.Ra&&Ze(b,"TYPE","init"),this.S?(Ze(b,"$req",y),Ze(b,"SID","null"),F.U=!0,Ar(F,b,null)):Ar(F,b,y),this.I=2}}else this.I==3&&(h?zl(this,h):this.i.length==0||xl(this.h)||zl(this))};function zl(h,y){var b;y?b=y.l:b=h.V++;const I=kt(h.J);Ze(I,"SID",h.M),Ze(I,"RID",b),Ze(I,"AID",h.K),Ys(h,I),h.u&&h.o&&Ks(I,h.u,h.o),b=new ir(h,h.j,b,h.D+1),h.u===null&&(b.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Bc(h,b,1e3),b.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Il(h.h,b),Ar(b,I,y)}function Ys(h,y){h.H&&ye(h.H,function(b,I){Ze(y,I,b)}),h.l&&ye({},function(b,I){Ze(y,I,b)})}function Bc(h,y,b){b=Math.min(h.i.length,b);const I=h.l?g(h.l.Ka,h.l,h):null;e:{var F=h.i;let ke=-1;for(;;){const It=["count="+b];ke==-1?b>0?(ke=F[0].g,It.push("ofs="+ke)):ke=0:It.push("ofs="+ke);let Je=!0;for(let pt=0;pt<b;pt++){var $=F[pt].g;const Fn=F[pt].map;if($-=ke,$<0)ke=Math.max(0,F[pt].g-100),Je=!1;else try{$="req"+$+"_"||"";try{var de=Fn instanceof Map?Fn:Object.entries(Fn);for(const[Lr,ur]of de){let cr=ur;d(ur)&&(cr=Pi(ur)),It.push($+Lr+"="+encodeURIComponent(cr))}}catch(Lr){throw It.push($+"type="+encodeURIComponent("_badmap")),Lr}}catch{I&&I(Fn)}}if(Je){de=It.join("&");break e}}de=void 0}return h=h.i.splice(0,b),y.G=h,de}function qc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;fe||A(),ce||(fe(),ce=!0),w.add(y,h),h.A=0}}function Xs(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=wr(g(h.Da,h),Gc(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,Fc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=wr(g(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Vt(10),Hi(this),Fc(this))};function Ul(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Fc(h){h.g=new ir(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=kt(h.na);Ze(y,"RID","rpc"),Ze(y,"SID",h.M),Ze(y,"AID",h.K),Ze(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ze(y,"TO",h.ia),Ze(y,"TYPE","xmlhttp"),Ys(h,y),h.u&&h.o&&Ks(y,h.u,h.o),h.O&&(h.g.H=h.O);var b=h.g;h=h.ba,b.M=1,b.A=Fs(kt(y)),b.u=null,b.R=!0,Fa(b,h)}s.Va=function(){this.C!=null&&(this.C=null,Hi(this),Xs(this),Vt(19))};function Wa(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Hc(h,y){var b=null;if(h.g==y){Wa(h),Ul(h),h.g=null;var I=2}else if(Nr(h.h,y))b=y.G,Rl(h.h,y),I=1;else return;if(h.I!=0){if(y.o)if(I==1){b=y.u?y.u.length:0,y=Date.now()-y.F;var F=h.D;I=qa(),Ie(I,new Tr(I,b)),kr(h)}else qc(h);else if(F=y.m,F==3||F==0&&y.X>0||!(I==1&&Ja(h,y)||I==2&&Xs(h)))switch(b&&b.length>0&&(y=h.h,y.i=y.i.concat(b)),F){case 1:Pr(h,5);break;case 4:Pr(h,10);break;case 3:Pr(h,6);break;default:Pr(h,2)}}}function Gc(h,y){let b=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(b*=2),b*y}function Pr(h,y){if(h.j.info("Error code "+y),y==2){var b=g(h.bb,h),I=h.Ua;const F=!I;I=new Sn(I||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Kt(I,"https"),Fs(I),F?ar(I.toString(),b):Ml(I.toString(),b)}else Vt(2);h.I=0,h.l&&h.l.pa(y),Kc(h),Xa(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function Kc(h){if(h.I=0,h.ja=[],h.l){const y=Cl(h.h);(y.length!=0||h.i.length!=0)&&(K(h.ja,y),K(h.ja,h.i),h.h.i.length=0,N(h.i),h.i.length=0),h.l.oa()}}function Qc(h,y,b){var I=b instanceof Sn?kt(b):new Sn(b);if(I.g!="")y&&(I.g=y+"."+I.g),Li(I,I.u);else{var F=c.location;I=F.protocol,y=y?y+"."+F.hostname:F.hostname,F=+F.port;const $=new Sn(null);I&&Kt($,I),y&&($.g=y),F&&Li($,F),b&&($.h=b),I=$}return b=h.G,y=h.wa,b&&y&&Ze(I,b,y),Ze(I,"VER",h.ka),Ys(h,I),I}function $c(h,y,b){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new it(new Vr({ab:b})):new it(h.ma),y.Fa(h.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yc(){}s=Yc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Gi(){}Gi.prototype.g=function(h,y){return new hn(h,y)};function hn(h,y){De.call(this),this.g=new Fi(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!C(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!C(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new ri(this)}E(hn,De),hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){Ll(this.g)},hn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.v&&(b={},b.__data__=Pi(h),h=b);y.i.push(new Mt(y.Ya++,h)),y.I==3&&kr(y)},hn.prototype.N=function(){this.g.l=null,delete this.j,Ll(this.g),delete this.g,hn.Z.N.call(this)};function Xc(h){Jt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const b in y){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(Xc,Jt);function Jc(){Un.call(this),this.status=1}E(Jc,Un);function ri(h){this.g=h}E(ri,Yc),ri.prototype.ra=function(){Ie(this.g,"a")},ri.prototype.qa=function(h){Ie(this.g,new Xc(h))},ri.prototype.pa=function(h){Ie(this.g,new Jc)},ri.prototype.oa=function(){Ie(this.g,"b")},Gi.prototype.createWebChannel=Gi.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,ew=function(){return new Gi},Z1=function(){return qa()},W1=xt,fg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Bs.NO_ERROR=0,Bs.TIMEOUT=8,Bs.HTTP_ERROR=6,yf=Bs,wl.COMPLETE="complete",J1=wl,Cc.EventType=nr,nr.OPEN="a",nr.CLOSE="b",nr.ERROR="c",nr.MESSAGE="d",De.prototype.listen=De.prototype.J,Vu=Cc,it.prototype.listenOnce=it.prototype.K,it.prototype.getLastError=it.prototype.Ha,it.prototype.getLastErrorCode=it.prototype.ya,it.prototype.getStatus=it.prototype.ca,it.prototype.getResponseJson=it.prototype.La,it.prototype.getResponseText=it.prototype.la,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Fa,X1=it}).apply(typeof rf<"u"?rf:typeof self<"u"?self:typeof window<"u"?window:{});class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");let _l="12.9.0";function hV(s){_l=s}const Va=new Gg("@firebase/firestore");function Po(){return Va.logLevel}function oe(s,...e){if(Va.logLevel<=Ge.DEBUG){const t=e.map(iy);Va.debug(`Firestore (${_l}): ${s}`,...t)}}function Nt(s,...e){if(Va.logLevel<=Ge.ERROR){const t=e.map(iy);Va.error(`Firestore (${_l}): ${s}`,...t)}}function Yo(s,...e){if(Va.logLevel<=Ge.WARN){const t=e.map(iy);Va.warn(`Firestore (${_l}): ${s}`,...t)}}function iy(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function _e(s,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,tw(s,r,t)}function tw(s,e,t){let r=`FIRESTORE (${_l}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Nt(r),new Error(r)}function Te(s,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,s||tw(e,a,r)}function be(s,e){return s}const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Ni{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class wi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class fV{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(on.UNAUTHENTICATED)))}shutdown(){}}class mV{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Te(this.o===void 0,42304);let r=this.i;const a=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let l=new wi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new wi,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},d=p=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new wi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string",31837,{l:r}),new fV(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string",2055,{h:e}),new on(e)}}class pV{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=on.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class gV{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new pV(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(on.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class hE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yV{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,pr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Te(this.o===void 0,3512);const r=l=>{l.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,oe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new hE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Te(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new hE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function _V(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<s;r++)t[r]=Math.floor(256*Math.random());return t}class sy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=_V(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function Ve(s,e){return s<e?-1:s>e?1:0}function dg(s,e){const t=Math.min(s.length,e.length);for(let r=0;r<t;r++){const a=s.charAt(r),l=e.charAt(r);if(a!==l)return Gp(a)===Gp(l)?Ve(a,l):Gp(a)?1:-1}return Ve(s.length,e.length)}const vV=55296,bV=57343;function Gp(s){const e=s.charCodeAt(0);return e>=vV&&e<=bV}function Xo(s,e,t){return s.length===e.length&&s.every(((r,a)=>t(r,e[a])))}function nw(s){return s+"\0"}const fE="__name__";class qr{constructor(e,t,r){t===void 0?t=0:t>e.length&&_e(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&_e(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return qr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof qr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=qr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Ve(e.length,t.length)}static compareSegments(e,t){const r=qr.isNumericId(e),a=qr.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?qr.extractNumericId(e).compare(qr.extractNumericId(t)):dg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Is.fromString(e.substring(4,e.length-2))}}class lt extends qr{construct(e,t,r){return new lt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new lt(t)}static emptyPath(){return new lt([])}}const EV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bt extends qr{construct(e,t,r){return new bt(e,t,r)}static isValidIdentifier(e){return EV.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fE}static keyField(){return new bt([fE])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new ge(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new ge(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ge(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(l(),a++)}if(l(),c)throw new ge(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bt(t)}static emptyPath(){return new bt([])}}class pe{constructor(e){this.path=e}static fromPath(e){return new pe(lt.fromString(e))}static fromName(e){return new pe(lt.fromString(e).popFirst(5))}static empty(){return new pe(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new lt(e.slice()))}}function TV(s,e,t){if(!t)throw new ge(ie.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function wV(s,e,t,r){if(e===!0&&r===!0)throw new ge(ie.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function dE(s){if(!pe.isDocumentKey(s))throw new ge(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function rw(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function ay(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":_e(12329,{type:typeof s})}function Lf(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ge(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ay(s);throw new ge(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function Bt(s,e){const t={typeString:s};return e&&(t.value=e),t}function bc(s,e){if(!rw(s))throw new ge(ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){t=`JSON missing required field: '${r}'`;break}const c=s[r];if(a&&typeof c!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new ge(ie.INVALID_ARGUMENT,t);return!0}const mE=-62135596800,pE=1e6;class nt{static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*pE);return new nt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<mE)throw new ge(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/pE}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bc(e,nt._jsonSchema))return new nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-mE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nt._jsonSchemaVersion="firestore/timestamp/1.0",nt._jsonSchema={type:Bt("string",nt._jsonSchemaVersion),seconds:Bt("number"),nanoseconds:Bt("number")};class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new nt(0,0))}static max(){return new Se(new nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Jo=-1;class zf{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function mg(s){return s.fields.find((e=>e.kind===2))}function ga(s){return s.fields.filter((e=>e.kind!==2))}zf.UNKNOWN_ID=-1;class _f{constructor(e,t){this.fieldPath=e,this.kind=t}}class Zu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Zu(0,Pn.min())}}function iw(s,e){const t=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,a=Se.fromTimestamp(r===1e9?new nt(t+1,0):new nt(t,r));return new Pn(a,pe.empty(),e)}function sw(s){return new Pn(s.readTime,s.key,Jo)}class Pn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Pn(Se.min(),pe.empty(),Jo)}static max(){return new Pn(Se.max(),pe.empty(),Jo)}}function oy(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=pe.comparator(s.documentKey,e.documentKey),t!==0?t:Ve(s.largestBatchId,e.largestBatchId))}const aw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ow{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Os(s){if(s.code!==ie.FAILED_PRECONDITION||s.message!==aw)throw s;oe("LocalStore","Unexpectedly lost primary lease")}class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new B(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof B?t:B.resolve(t)}catch(t){return B.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):B.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):B.reject(t)}static resolve(e){return new B(((t,r)=>{t(e)}))}static reject(e){return new B(((t,r)=>{r(e)}))}static waitFor(e){return new B(((t,r)=>{let a=0,l=0,c=!1;e.forEach((d=>{++a,d.next((()=>{++l,c&&l===a&&t()}),(p=>r(p)))})),c=!0,l===a&&t()}))}static or(e){let t=B.resolve(!1);for(const r of e)t=t.next((a=>a?B.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new B(((r,a)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((v=>{c[g]=v,++d,d===l&&r(c)}),(v=>a(v)))}}))}static doWhile(e,t){return new B(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}const Vn="SimpleDb";class cd{static open(e,t,r,a){try{return new cd(t,e.transaction(a,r))}catch(l){throw new ju(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new wi,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new ju(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const a=ly(r.target.error);this.S.reject(new ju(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(oe(Vn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new AV(t)}}class Rs{static delete(e){return oe(Vn,"Removing database:",e),_a(a1().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!d1())return!1;if(Rs.F())return!0;const e=Ft(),t=Rs.M(e),r=0<t&&t<10,a=lw(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Rs.M(Ft())===12.2&&Nt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(oe(Vn,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{r(new ju(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?r(new ge(ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new ge(ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new ju(e,c))},a.onupgradeneeded=l=>{oe(Vn,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.N.k(c,a.transaction,l.oldVersion,this.version).next((()=>{oe(Vn,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const d=cd.open(this.db,e,l?"readonly":"readwrite",r),p=a(d).next((g=>(d.C(),g))).catch((g=>(d.abort(g),B.reject(g)))).toPromise();return p.catch((()=>{})),await d.D,p}catch(d){const p=d,g=p.name!=="FirebaseError"&&c<3;if(oe(Vn,"Transaction failed with error:",p.message,"Retrying:",g),this.close(),!g)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function lw(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class SV{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return _a(this.U.delete())}}class ju extends ge{constructor(e,t){super(ie.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ms(s){return s.name==="IndexedDbTransactionError"}class AV{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(oe(Vn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(oe(Vn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),_a(r)}add(e){return oe(Vn,"ADD",this.store.name,e,e),_a(this.store.add(e))}get(e){return _a(this.store.get(e)).next((t=>(t===void 0&&(t=null),oe(Vn,"GET",this.store.name,e,t),t)))}delete(e){return oe(Vn,"DELETE",this.store.name,e),_a(this.store.delete(e))}count(){return oe(Vn,"COUNT",this.store.name),_a(this.store.count())}H(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(r.range);return new B(((c,d)=>{l.onerror=p=>{d(p.target.error)},l.onsuccess=p=>{c(p.target.result)}}))}{const l=this.cursor(r),c=[];return this.J(l,((d,p)=>{c.push(p)})).next((()=>c))}}Z(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new B(((a,l)=>{r.onerror=c=>{l(c.target.error)},r.onsuccess=c=>{a(c.target.result)}}))}X(e,t){oe(Vn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const a=this.cursor(r);return this.J(a,((l,c,d)=>d.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.J(a,t)}te(e){const t=this.cursor({});return new B(((r,a)=>{t.onerror=l=>{const c=ly(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next((d=>{d?c.continue():r()})):r()}}))}J(e,t){const r=[];return new B(((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const p=new SV(d),g=t(d.primaryKey,d.value,p);if(g instanceof B){const v=g.catch((E=>(p.done(),B.reject(E))));r.push(v)}p.isDone?a():p.G===null?d.continue():d.continue(p.G)}})).next((()=>B.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function _a(s){return new B(((e,t)=>{s.onsuccess=r=>{const a=r.target.result;e(a)},s.onerror=r=>{const a=ly(r.target.error);t(a)}}))}let gE=!1;function ly(s){const e=Rs.M(Ft());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(t)>=0){const r=new ge("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return gE||(gE=!0,setTimeout((()=>{throw r}),0)),r}}return s}const Bu="IndexBackfiller";class xV{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){oe(Bu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();oe(Bu,`Documents written: ${t}`)}catch(t){Ms(t)?oe(Bu,"Ignoring IndexedDB error during index backfill: ",t):await Os(t)}await this.re(6e4)}))}}class IV{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let a=t,l=!0;return B.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!r.has(c))return oe(Bu,`Processing collection: ${c}`),this.oe(e,c,a).next((d=>{a-=d,r.add(c)}));l=!1})))).next((()=>t-a))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(a,l))).next((d=>(oe(Bu,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d)))).next((()=>c.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((a,l)=>{const c=sw(l);oy(c,r)>0&&(r=c)})),new Pn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Tn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Tn.ce=-1;const Aa=-1;function hd(s){return s==null}function ec(s){return s===0&&1/s==-1/0}function uw(s){return typeof s=="number"&&Number.isInteger(s)&&!ec(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const Uf="";function un(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=yE(e)),e=RV(s.get(t),e);return yE(e)}function RV(s,e){let t=e;const r=s.length;for(let a=0;a<r;a++){const l=s.charAt(a);switch(l){case"\0":t+="";break;case Uf:t+="";break;default:t+=l}}return t}function yE(s){return s+Uf+""}function Gr(s){const e=s.length;if(Te(e>=2,64408,{path:s}),e===2)return Te(s.charAt(0)===Uf&&s.charAt(1)==="",56145,{path:s}),lt.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const c=s.indexOf(Uf,l);switch((c<0||c>t)&&_e(50515,{path:s}),s.charAt(c+1)){case"":const d=s.substring(l,c);let p;a.length===0?p=d:(a+=d,p=a,a=""),r.push(p);break;case"":a+=s.substring(l,c),a+="\0";break;case"":a+=s.substring(l,c+1);break;default:_e(61167,{path:s})}l=c+2}return new lt(r)}const ya="remoteDocuments",Ec="owner",No="owner",tc="mutationQueues",CV="userId",mr="mutations",_E="batchId",wa="userMutationsIndex",vE=["userId","batchId"];function vf(s,e){return[s,un(e)]}function cw(s,e,t){return[s,un(e),t]}const NV={},Wo="documentMutations",jf="remoteDocumentsV14",DV=["prefixPath","collectionGroup","readTime","documentId"],bf="documentKeyIndex",VV=["prefixPath","collectionGroup","documentId"],hw="collectionGroupIndex",OV=["collectionGroup","readTime","prefixPath","documentId"],nc="remoteDocumentGlobal",pg="remoteDocumentGlobalKey",Zo="targets",fw="queryTargetsIndex",MV=["canonicalId","targetId"],el="targetDocuments",kV=["targetId","path"],uy="documentTargetsIndex",PV=["path","targetId"],Bf="targetGlobalKey",xa="targetGlobal",rc="collectionParents",LV=["collectionId","parent"],tl="clientMetadata",zV="clientId",fd="bundles",UV="bundleId",dd="namedQueries",jV="name",cy="indexConfiguration",BV="indexId",gg="collectionGroupIndex",qV="collectionGroup",qu="indexState",FV=["indexId","uid"],dw="sequenceNumberIndex",HV=["uid","sequenceNumber"],Fu="indexEntries",GV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],mw="documentKeyIndex",KV=["indexId","uid","orderedDocumentKey"],md="documentOverlays",QV=["userId","collectionPath","documentId"],yg="collectionPathOverlayIndex",$V=["userId","collectionPath","largestBatchId"],pw="collectionGroupOverlayIndex",YV=["userId","collectionGroup","largestBatchId"],hy="globals",XV="name",gw=[tc,mr,Wo,ya,Zo,Ec,xa,el,tl,nc,rc,fd,dd],JV=[...gw,md],yw=[tc,mr,Wo,jf,Zo,Ec,xa,el,tl,nc,rc,fd,dd,md],_w=yw,fy=[..._w,cy,qu,Fu],WV=fy,vw=[...fy,hy],ZV=vw;class _g extends ow{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Ht(s,e){const t=be(s);return Rs.O(t.le,e)}function bE(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function ja(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function bw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class ft{constructor(e,t){this.comparator=e,this.root=t||rn.EMPTY}insert(e,t){return new ft(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(e){return new ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sf(this.root,e,this.comparator,!1)}getReverseIterator(){return new sf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sf(this.root,e,this.comparator,!0)}}class sf{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rn{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??rn.RED,this.left=a??rn.EMPTY,this.right=l??rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new rn(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return rn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1;rn.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new rn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class rt{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new EE(this.data.getIterator())}getIteratorFrom(e){return new EE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof rt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new rt(this.comparator);return t.data=e,t}}class EE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Do(s){return s.hasNext()?s.getNext():void 0}class Zn{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new Zn([])}unionWith(e){let t=new rt(bt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Zn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xo(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class Ew extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Dt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Ew("Invalid base64 string: "+l):l}})(e);return new Dt(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new Dt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dt.EMPTY_BYTE_STRING=new Dt("");const e4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ii(s){if(Te(!!s,39018),typeof s=="string"){let e=0;const t=e4.exec(s);if(Te(!!t,46558,{timestamp:s}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yt(s.seconds),nanos:yt(s.nanos)}}function yt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Ri(s){return typeof s=="string"?Dt.fromBase64String(s):Dt.fromUint8Array(s)}const Tw="server_timestamp",ww="__type__",Sw="__previous_value__",Aw="__local_write_time__";function dy(s){return(s?.mapValue?.fields||{})[ww]?.stringValue===Tw}function pd(s){const e=s.mapValue.fields[Sw];return dy(e)?pd(e):e}function ic(s){const e=Ii(s.mapValue.fields[Aw].timestampValue);return new nt(e.seconds,e.nanos)}class t4{constructor(e,t,r,a,l,c,d,p,g,v,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=v,this.apiKey=E}}const qf="(default)";class Oa{constructor(e,t){this.projectId=e,this.database=t||qf}static empty(){return new Oa("","")}get isDefaultDatabase(){return this.database===qf}isEqual(e){return e instanceof Oa&&e.projectId===this.projectId&&e.database===this.database}}function n4(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new ge(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oa(s.options.projectId,e)}const my="__type__",xw="__max__",Ts={mapValue:{fields:{__type__:{stringValue:xw}}}},py="__vector__",nl="value",Ef={nullValue:"NULL_VALUE"};function Cs(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?dy(s)?4:Iw(s)?9007199254740991:gd(s)?10:11:_e(28295,{value:s})}function Jr(s,e){if(s===e)return!0;const t=Cs(s);if(t!==Cs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return ic(s).isEqual(ic(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Ii(a.timestampValue),d=Ii(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(a,l){return Ri(a.bytesValue).isEqual(Ri(l.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(a,l){return yt(a.geoPointValue.latitude)===yt(l.geoPointValue.latitude)&&yt(a.geoPointValue.longitude)===yt(l.geoPointValue.longitude)})(s,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return yt(a.integerValue)===yt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=yt(a.doubleValue),d=yt(l.doubleValue);return c===d?ec(c)===ec(d):isNaN(c)&&isNaN(d)}return!1})(s,e);case 9:return Xo(s.arrayValue.values||[],e.arrayValue.values||[],Jr);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(bE(c)!==bE(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Jr(c[p],d[p])))return!1;return!0})(s,e);default:return _e(52216,{left:s})}}function sc(s,e){return(s.values||[]).find((t=>Jr(t,e)))!==void 0}function Ns(s,e){if(s===e)return 0;const t=Cs(s),r=Cs(e);if(t!==r)return Ve(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ve(s.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=yt(l.integerValue||l.doubleValue),p=yt(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(s,e);case 3:return TE(s.timestampValue,e.timestampValue);case 4:return TE(ic(s),ic(e));case 5:return dg(s.stringValue,e.stringValue);case 6:return(function(l,c){const d=Ri(l),p=Ri(c);return d.compareTo(p)})(s.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let g=0;g<d.length&&g<p.length;g++){const v=Ve(d[g],p[g]);if(v!==0)return v}return Ve(d.length,p.length)})(s.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Ve(yt(l.latitude),yt(c.latitude));return d!==0?d:Ve(yt(l.longitude),yt(c.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return wE(s.arrayValue,e.arrayValue);case 10:return(function(l,c){const d=l.fields||{},p=c.fields||{},g=d[nl]?.arrayValue,v=p[nl]?.arrayValue,E=Ve(g?.values?.length||0,v?.values?.length||0);return E!==0?E:wE(g,v)})(s.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Ts.mapValue&&c===Ts.mapValue)return 0;if(l===Ts.mapValue)return 1;if(c===Ts.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),g=c.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let E=0;E<p.length&&E<v.length;++E){const S=dg(p[E],v[E]);if(S!==0)return S;const N=Ns(d[p[E]],g[v[E]]);if(N!==0)return N}return Ve(p.length,v.length)})(s.mapValue,e.mapValue);default:throw _e(23264,{he:t})}}function TE(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ve(s,e);const t=Ii(s),r=Ii(e),a=Ve(t.seconds,r.seconds);return a!==0?a:Ve(t.nanos,r.nanos)}function wE(s,e){const t=s.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=Ns(t[a],r[a]);if(l)return l}return Ve(t.length,r.length)}function rl(s){return vg(s)}function vg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const r=Ii(t);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return Ri(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return pe.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=vg(l);return r+"]"})(s.arrayValue):"mapValue"in s?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${vg(t.fields[c])}`;return a+"}"})(s.mapValue):_e(61005,{value:s})}function Tf(s){switch(Cs(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=pd(s);return e?16+Tf(e):16;case 5:return 2*s.stringValue.length;case 6:return Ri(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+Tf(l)),0)})(s.arrayValue);case 10:case 11:return(function(r){let a=0;return ja(r.fields,((l,c)=>{a+=l.length+Tf(c)})),a})(s.mapValue);default:throw _e(13486,{value:s})}}function gy(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function bg(s){return!!s&&"integerValue"in s}function ac(s){return!!s&&"arrayValue"in s}function SE(s){return!!s&&"nullValue"in s}function AE(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function wf(s){return!!s&&"mapValue"in s}function gd(s){return(s?.mapValue?.fields||{})[my]?.stringValue===py}function Hu(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return ja(s.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Hu(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hu(s.arrayValue.values[t]);return e}return{...s}}function Iw(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===xw}const Rw={mapValue:{fields:{[my]:{stringValue:py},[nl]:{arrayValue:{}}}}};function r4(s){return"nullValue"in s?Ef:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?gy(Oa.empty(),pe.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?gd(s)?Rw:{mapValue:{}}:_e(35942,{value:s})}function i4(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?gy(Oa.empty(),pe.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?Rw:"mapValue"in s?gd(s)?{mapValue:{}}:Ts:_e(61959,{value:s})}function xE(s,e){const t=Ns(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function IE(s,e){const t=Ns(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}class En{constructor(e){this.value=e}static empty(){return new En({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!wf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hu(t)}setAll(e){let t=bt.emptyPath(),r={},a=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,a),r={},a=[],t=d.popLast()}c?r[d.lastSegment()]=Hu(c):a.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());wf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Jr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];wf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){ja(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new En(Hu(this.value))}}function Cw(s){const e=[];return ja(s.fields,((t,r)=>{const a=new bt([t]);if(wf(r)){const l=Cw(r.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new Zn(e)}class At{constructor(e,t,r,a,l,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new At(e,0,Se.min(),Se.min(),Se.min(),En.empty(),0)}static newFoundDocument(e,t,r,a){return new At(e,1,t,Se.min(),r,a,0)}static newNoDocument(e,t){return new At(e,2,t,Se.min(),Se.min(),En.empty(),0)}static newUnknownDocument(e,t){return new At(e,3,t,Se.min(),Se.min(),En.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=En.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=En.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof At&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new At(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class il{constructor(e,t){this.position=e,this.inclusive=t}}function RE(s,e,t){let r=0;for(let a=0;a<s.position.length;a++){const l=e[a],c=s.position[a];if(l.field.isKeyField()?r=pe.comparator(pe.fromName(c.referenceValue),t.key):r=Ns(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function CE(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Jr(s.position[t],e.position[t]))return!1;return!0}class Ff{constructor(e,t="asc"){this.field=e,this.dir=t}}function s4(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class Nw{}class Qe extends Nw{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new a4(e,t,r):t==="array-contains"?new u4(e,r):t==="in"?new Pw(e,r):t==="not-in"?new c4(e,r):t==="array-contains-any"?new h4(e,r):new Qe(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new o4(e,r):new l4(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ns(t,this.value)):t!==null&&Cs(this.value)===Cs(t)&&this.matchesComparison(Ns(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ut extends Nw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ut(e,t)}matches(e){return sl(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function sl(s){return s.op==="and"}function Eg(s){return s.op==="or"}function yy(s){return Dw(s)&&sl(s)}function Dw(s){for(const e of s.filters)if(e instanceof ut)return!1;return!0}function Tg(s){if(s instanceof Qe)return s.field.canonicalString()+s.op.toString()+rl(s.value);if(yy(s))return s.filters.map((e=>Tg(e))).join(",");{const e=s.filters.map((t=>Tg(t))).join(",");return`${s.op}(${e})`}}function Vw(s,e){return s instanceof Qe?(function(r,a){return a instanceof Qe&&r.op===a.op&&r.field.isEqual(a.field)&&Jr(r.value,a.value)})(s,e):s instanceof ut?(function(r,a){return a instanceof ut&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,c,d)=>l&&Vw(c,a.filters[d])),!0):!1})(s,e):void _e(19439)}function Ow(s,e){const t=s.filters.concat(e);return ut.create(t,s.op)}function Mw(s){return s instanceof Qe?(function(t){return`${t.field.canonicalString()} ${t.op} ${rl(t.value)}`})(s):s instanceof ut?(function(t){return t.op.toString()+" {"+t.getFilters().map(Mw).join(" ,")+"}"})(s):"Filter"}class a4 extends Qe{constructor(e,t,r){super(e,t,r),this.key=pe.fromName(r.referenceValue)}matches(e){const t=pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class o4 extends Qe{constructor(e,t){super(e,"in",t),this.keys=kw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class l4 extends Qe{constructor(e,t){super(e,"not-in",t),this.keys=kw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function kw(s,e){return(e.arrayValue?.values||[]).map((t=>pe.fromName(t.referenceValue)))}class u4 extends Qe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ac(t)&&sc(t.arrayValue,this.value)}}class Pw extends Qe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&sc(this.value.arrayValue,t)}}class c4 extends Qe{constructor(e,t){super(e,"not-in",t)}matches(e){if(sc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!sc(this.value.arrayValue,t)}}class h4 extends Qe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ac(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>sc(this.value.arrayValue,r)))}}class f4{constructor(e,t=null,r=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function wg(s,e=null,t=[],r=[],a=null,l=null,c=null){return new f4(s,e,t,r,a,l,c)}function Ma(s){const e=be(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Tg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),hd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>rl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>rl(r))).join(",")),e.Te=t}return e.Te}function Tc(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!s4(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!Vw(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!CE(s.startAt,e.startAt)&&CE(s.endAt,e.endAt)}function Hf(s){return pe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Gf(s,e){return s.filters.filter((t=>t instanceof Qe&&t.field.isEqual(e)))}function NE(s,e,t){let r=Ef,a=!0;for(const l of Gf(s,e)){let c=Ef,d=!0;switch(l.op){case"<":case"<=":c=r4(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=Ef}xE({value:r,inclusive:a},{value:c,inclusive:d})<0&&(r=c,a=d)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const c=t.position[l];xE({value:r,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}function DE(s,e,t){let r=Ts,a=!0;for(const l of Gf(s,e)){let c=Ts,d=!0;switch(l.op){case">=":case">":c=i4(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=Ts}IE({value:r,inclusive:a},{value:c,inclusive:d})>0&&(r=c,a=d)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const c=t.position[l];IE({value:r,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}class yd{constructor(e,t=null,r=[],a=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Lw(s,e,t,r,a,l,c,d){return new yd(s,e,t,r,a,l,c,d)}function _d(s){return new yd(s)}function VE(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function d4(s){return pe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function m4(s){return s.collectionGroup!==null}function Gu(s){const e=be(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new rt(bt.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Ff(l,r))})),t.has(bt.keyField().canonicalString())||e.Ie.push(new Ff(bt.keyField(),r))}return e.Ie}function kn(s){const e=be(s);return e.Ee||(e.Ee=p4(e,Gu(s))),e.Ee}function p4(s,e){if(s.limitType==="F")return wg(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Ff(a.field,l)}));const t=s.endAt?new il(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new il(s.startAt.position,s.startAt.inclusive):null;return wg(s.path,s.collectionGroup,e,s.filters,s.limit,t,r)}}function Sg(s,e,t){return new yd(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function vd(s,e){return Tc(kn(s),kn(e))&&s.limitType===e.limitType}function zw(s){return`${Ma(kn(s))}|lt:${s.limitType}`}function Lo(s){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>Mw(a))).join(", ")}]`),hd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>rl(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>rl(a))).join(",")),`Target(${r})`})(kn(s))}; limitType=${s.limitType})`}function wc(s,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):pe.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(s,e)&&(function(r,a){for(const l of Gu(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(s,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(s,e)&&(function(r,a){return!(r.startAt&&!(function(c,d,p){const g=RE(c,d,p);return c.inclusive?g<=0:g<0})(r.startAt,Gu(r),a)||r.endAt&&!(function(c,d,p){const g=RE(c,d,p);return c.inclusive?g>=0:g>0})(r.endAt,Gu(r),a))})(s,e)}function Uw(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function jw(s){return(e,t)=>{let r=!1;for(const a of Gu(s)){const l=g4(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function g4(s,e,t){const r=s.field.isKeyField()?pe.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),g=d.data.field(l);return p!==null&&g!==null?Ns(p,g):_e(42886)})(s.field,e,t);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return _e(19790,{direction:s.dir})}}class Di{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ja(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return bw(this.inner)}size(){return this.innerSize}}const y4=new ft(pe.comparator);function On(){return y4}const Bw=new ft(pe.comparator);function Ou(...s){let e=Bw;for(const t of s)e=e.insert(t.key,t);return e}function qw(s){let e=Bw;return s.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Kr(){return Ku()}function Fw(){return Ku()}function Ku(){return new Di((s=>s.toString()),((s,e)=>s.isEqual(e)))}const _4=new ft(pe.comparator),v4=new rt(pe.comparator);function Ue(...s){let e=v4;for(const t of s)e=e.add(t);return e}const b4=new rt(Ve);function _y(){return b4}function vy(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ec(e)?"-0":e}}function Hw(s){return{integerValue:""+s}}function E4(s,e){return uw(e)?Hw(e):vy(s,e)}class bd{constructor(){this._=void 0}}function T4(s,e,t){return s instanceof oc?(function(a,l){const c={fields:{[ww]:{stringValue:Tw},[Aw]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&dy(l)&&(l=pd(l)),l&&(c.fields[Sw]=l),{mapValue:c}})(t,e):s instanceof al?Kw(s,e):s instanceof ol?Qw(s,e):(function(a,l){const c=Gw(a,l),d=OE(c)+OE(a.Ae);return bg(c)&&bg(a.Ae)?Hw(d):vy(a.serializer,d)})(s,e)}function w4(s,e,t){return s instanceof al?Kw(s,e):s instanceof ol?Qw(s,e):t}function Gw(s,e){return s instanceof lc?(function(r){return bg(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class oc extends bd{}class al extends bd{constructor(e){super(),this.elements=e}}function Kw(s,e){const t=$w(e);for(const r of s.elements)t.some((a=>Jr(a,r)))||t.push(r);return{arrayValue:{values:t}}}class ol extends bd{constructor(e){super(),this.elements=e}}function Qw(s,e){let t=$w(e);for(const r of s.elements)t=t.filter((a=>!Jr(a,r)));return{arrayValue:{values:t}}}class lc extends bd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function OE(s){return yt(s.integerValue||s.doubleValue)}function $w(s){return ac(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class S4{constructor(e,t){this.field=e,this.transform=t}}function A4(s,e){return s.field.isEqual(e.field)&&(function(r,a){return r instanceof al&&a instanceof al||r instanceof ol&&a instanceof ol?Xo(r.elements,a.elements,Jr):r instanceof lc&&a instanceof lc?Jr(r.Ae,a.Ae):r instanceof oc&&a instanceof oc})(s.transform,e.transform)}class x4{constructor(e,t){this.version=e,this.transformResults=t}}class Mn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mn}static exists(e){return new Mn(void 0,e)}static updateTime(e){return new Mn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sf(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Ed{}function Yw(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new by(s.key,Mn.none()):new vl(s.key,s.data,Mn.none());{const t=s.data,r=En.empty();let a=new rt(bt.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new ks(s.key,r,new Zn(a.toArray()),Mn.none())}}function I4(s,e,t){s instanceof vl?(function(a,l,c){const d=a.value.clone(),p=kE(a.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(s,e,t):s instanceof ks?(function(a,l,c){if(!Sf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=kE(a.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(Xw(a)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(s,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Qu(s,e,t,r){return s instanceof vl?(function(l,c,d,p){if(!Sf(l.precondition,c))return d;const g=l.value.clone(),v=PE(l.fieldTransforms,p,c);return g.setAll(v),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(s,e,t,r):s instanceof ks?(function(l,c,d,p){if(!Sf(l.precondition,c))return d;const g=PE(l.fieldTransforms,p,c),v=c.data;return v.setAll(Xw(l)),v.setAll(g),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(s,e,t,r):(function(l,c,d){return Sf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(s,e,t)}function R4(s,e){let t=null;for(const r of s.fieldTransforms){const a=e.data.field(r.field),l=Gw(r.transform,a||null);l!=null&&(t===null&&(t=En.empty()),t.set(r.field,l))}return t||null}function ME(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&Xo(r,a,((l,c)=>A4(l,c)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class vl extends Ed{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ks extends Ed{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Xw(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=s.data.field(t);e.set(t,r)}})),e}function kE(s,e,t){const r=new Map;Te(s.length===t.length,32656,{Ve:t.length,de:s.length});for(let a=0;a<t.length;a++){const l=s[a],c=l.transform,d=e.data.field(l.field);r.set(l.field,w4(c,d,t[a]))}return r}function PE(s,e,t){const r=new Map;for(const a of s){const l=a.transform,c=t.data.field(a.field);r.set(a.field,T4(l,c,e))}return r}class by extends Ed{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Jw extends Ed{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ey{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&I4(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Qu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Qu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Fw();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const p=Yw(c,d);p!==null&&r.set(a.key,p),c.isValidDocument()||c.convertToNoDocument(Se.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ue())}isEqual(e){return this.batchId===e.batchId&&Xo(this.mutations,e.mutations,((t,r)=>ME(t,r)))&&Xo(this.baseMutations,e.baseMutations,((t,r)=>ME(t,r)))}}class Ty{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){Te(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return _4})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new Ty(e,t,r,a)}}class wy{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class C4{constructor(e,t){this.count=e,this.unchangedNames=t}}var jt,$e;function N4(s){switch(s){case ie.OK:return _e(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return _e(15467,{code:s})}}function Ww(s){if(s===void 0)return Nt("GRPC error has no .code"),ie.UNKNOWN;switch(s){case jt.OK:return ie.OK;case jt.CANCELLED:return ie.CANCELLED;case jt.UNKNOWN:return ie.UNKNOWN;case jt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case jt.INTERNAL:return ie.INTERNAL;case jt.UNAVAILABLE:return ie.UNAVAILABLE;case jt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case jt.NOT_FOUND:return ie.NOT_FOUND;case jt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case jt.ABORTED:return ie.ABORTED;case jt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case jt.DATA_LOSS:return ie.DATA_LOSS;default:return _e(39323,{code:s})}}($e=jt||(jt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";function D4(){return new TextEncoder}const V4=new Is([4294967295,4294967295],0);function LE(s){const e=D4().encode(s),t=new Y1;return t.update(e),new Uint8Array(t.digest())}function zE(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Is([t,r],0),new Is([a,l],0)]}class Sy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Mu(`Invalid padding: ${t}`);if(r<0)throw new Mu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Mu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Mu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Is.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(Is.fromNumber(r)));return a.compare(V4)===1&&(a=new Is([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=LE(e),[r,a]=zE(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);if(!this.we(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Sy(l,a,t);return r.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=LE(e),[r,a]=zE(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);this.be(c)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Mu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Sc{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Ac.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Sc(Se.min(),a,new ft(Ve),On(),Ue())}}class Ac{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ac(r,t,Ue(),Ue(),Ue())}}class Af{constructor(e,t,r,a){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=a}}class Zw{constructor(e,t){this.targetId=e,this.Ce=t}}class eS{constructor(e,t,r=Dt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class UE{constructor(){this.ve=0,this.Fe=jE(),this.Me=Dt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ue(),t=Ue(),r=Ue();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:_e(38017,{changeType:l})}})),new Ac(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=jE()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Te(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class O4{constructor(e){this.Ge=e,this.ze=new Map,this.je=On(),this.He=af(),this.Je=af(),this.Ze=new ft(Ve)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:_e(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Hf(l))if(r===0){const c=new pe(l.path);this.et(t,c,At.newNoDocument(c,Se.min()))}else Te(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const d=this.ut(e),p=d?this.ct(d,e,c):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=Ri(r).toUint8Array()}catch(p){if(p instanceof Ew)return Yo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Sy(c,a,l)}catch(p){return Yo(p instanceof Mu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Hf(d.target)){const p=new pe(d.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,At.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let r=Ue();this.Je.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new Sc(e,t,this.Ze,this.je,r);return this.je=On(),this.He=af(),this.Je=af(),this.Ze=new ft(Ve),a}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new UE,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new rt(Ve),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new rt(Ve),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new UE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function af(){return new ft(pe.comparator)}function jE(){return new ft(pe.comparator)}const M4={asc:"ASCENDING",desc:"DESCENDING"},k4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},P4={and:"AND",or:"OR"};class L4{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ag(s,e){return s.useProto3Json||hd(e)?e:{value:e}}function ll(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tS(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function z4(s,e){return ll(s,e.toTimestamp())}function dn(s){return Te(!!s,49232),Se.fromTimestamp((function(t){const r=Ii(t);return new nt(r.seconds,r.nanos)})(s))}function Ay(s,e){return xg(s,e).canonicalString()}function xg(s,e){const t=(function(a){return new lt(["projects",a.projectId,"databases",a.database])})(s).child("documents");return e===void 0?t:t.child(e)}function nS(s){const e=lt.fromString(s);return Te(hS(e),10190,{key:e.toString()}),e}function Kf(s,e){return Ay(s.databaseId,e.path)}function Ia(s,e){const t=nS(e);if(t.get(1)!==s.databaseId.projectId)throw new ge(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new ge(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new pe(sS(t))}function rS(s,e){return Ay(s.databaseId,e)}function iS(s){const e=nS(s);return e.length===4?lt.emptyPath():sS(e)}function Ig(s){return new lt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function sS(s){return Te(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function BE(s,e,t){return{name:Kf(s,e),fields:t.value.mapValue.fields}}function U4(s,e,t){const r=Ia(s,e.name),a=dn(e.updateTime),l=e.createTime?dn(e.createTime):Se.min(),c=new En({mapValue:{fields:e.fields}}),d=At.newFoundDocument(r,a,l,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function j4(s,e){let t;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:_e(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,v){return g.useProto3Json?(Te(v===void 0||typeof v=="string",58123),Dt.fromBase64String(v||"")):(Te(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Dt.fromUint8Array(v||new Uint8Array))})(s,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const v=g.code===void 0?ie.UNKNOWN:Ww(g.code);return new ge(v,g.message||"")})(c);t=new eS(r,a,l,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=Ia(s,r.document.name),l=dn(r.document.updateTime),c=r.document.createTime?dn(r.document.createTime):Se.min(),d=new En({mapValue:{fields:r.document.fields}}),p=At.newFoundDocument(a,l,c,d),g=r.targetIds||[],v=r.removedTargetIds||[];t=new Af(g,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=Ia(s,r.document),l=r.readTime?dn(r.readTime):Se.min(),c=At.newNoDocument(a,l),d=r.removedTargetIds||[];t=new Af([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=Ia(s,r.document),l=r.removedTargetIds||[];t=new Af([],l,a,null)}else{if(!("filter"in e))return _e(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new C4(a,l),d=r.targetId;t=new Zw(d,c)}}return t}function Qf(s,e){let t;if(e instanceof vl)t={update:BE(s,e.key,e.value)};else if(e instanceof by)t={delete:Kf(s,e.key)};else if(e instanceof ks)t={update:BE(s,e.key,e.data),updateMask:K4(e.fieldMask)};else{if(!(e instanceof Jw))return _e(16599,{dt:e.type});t={verify:Kf(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const d=c.transform;if(d instanceof oc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof al)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ol)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof lc)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw _e(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:z4(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:_e(27497)})(s,e.precondition)),t}function Rg(s,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?Mn.updateTime(dn(l.updateTime)):l.exists!==void 0?Mn.exists(l.exists):Mn.none()})(e.currentDocument):Mn.none(),r=e.updateTransforms?e.updateTransforms.map((a=>(function(c,d){let p=null;if("setToServerValue"in d)Te(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),p=new oc;else if("appendMissingElements"in d){const v=d.appendMissingElements.values||[];p=new al(v)}else if("removeAllFromArray"in d){const v=d.removeAllFromArray.values||[];p=new ol(v)}else"increment"in d?p=new lc(c,d.increment):_e(16584,{proto:d});const g=bt.fromServerFormat(d.fieldPath);return new S4(g,p)})(s,a))):[];if(e.update){e.update.name;const a=Ia(s,e.update.name),l=new En({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(p){const g=p.fieldPaths||[];return new Zn(g.map((v=>bt.fromServerFormat(v))))})(e.updateMask);return new ks(a,l,c,t,r)}return new vl(a,l,t,r)}if(e.delete){const a=Ia(s,e.delete);return new by(a,t)}if(e.verify){const a=Ia(s,e.verify);return new Jw(a,t)}return _e(1463,{proto:e})}function B4(s,e){return s&&s.length>0?(Te(e!==void 0,14353),s.map((t=>(function(a,l){let c=a.updateTime?dn(a.updateTime):dn(l);return c.isEqual(Se.min())&&(c=dn(l)),new x4(c,a.transformResults||[])})(t,e)))):[]}function aS(s,e){return{documents:[rS(s,e.path)]}}function oS(s,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=rS(s,a);const l=(function(g){if(g.length!==0)return cS(ut.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((v=>(function(S){return{field:zo(S.field),direction:F4(S.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Ag(s,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function lS(s){let e=iS(s.parent);const t=s.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){Te(r===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const S=uS(E);return S instanceof ut&&yy(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((S=>(function(K){return new Ff(Uo(K.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(K.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,hd(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(E){const S=!!E.before,N=E.values||[];return new il(N,S)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const S=!E.before,N=E.values||[];return new il(N,S)})(t.endAt)),Lw(e,a,c,l,d,"F",p,g)}function q4(s,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function uS(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Uo(t.unaryFilter.field);return Qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Uo(t.unaryFilter.field);return Qe.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Uo(t.unaryFilter.field);return Qe.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Uo(t.unaryFilter.field);return Qe.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}})(s):s.fieldFilter!==void 0?(function(t){return Qe.create(Uo(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return ut.create(t.compositeFilter.filters.map((r=>uS(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return _e(1026)}})(t.compositeFilter.op))})(s):_e(30097,{filter:s})}function F4(s){return M4[s]}function H4(s){return k4[s]}function G4(s){return P4[s]}function zo(s){return{fieldPath:s.canonicalString()}}function Uo(s){return bt.fromServerFormat(s.fieldPath)}function cS(s){return s instanceof Qe?(function(t){if(t.op==="=="){if(AE(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NAN"}};if(SE(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(AE(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NOT_NAN"}};if(SE(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zo(t.field),op:H4(t.op),value:t.value}}})(s):s instanceof ut?(function(t){const r=t.getFilters().map((a=>cS(a)));return r.length===1?r[0]:{compositeFilter:{op:G4(t.op),filters:r}}})(s):_e(54877,{filter:s})}function K4(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function hS(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function fS(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class Ei{constructor(e,t,r,a,l=Se.min(),c=Se.min(),d=Dt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Ei(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class dS{constructor(e){this.yt=e}}function Q4(s,e){let t;if(e.document)t=U4(s.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=pe.fromSegments(e.noDocument.path),a=Pa(e.noDocument.readTime);t=At.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return _e(56709);{const r=pe.fromSegments(e.unknownDocument.path),a=Pa(e.unknownDocument.version);t=At.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime((function(a){const l=new nt(a[0],a[1]);return Se.fromTimestamp(l)})(e.readTime)),t}function qE(s,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:$f(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(l,c){return{name:Kf(l,c.key),fields:c.data.value.mapValue.fields,updateTime:ll(l,c.version.toTimestamp()),createTime:ll(l,c.createTime.toTimestamp())}})(s.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ka(e.version)};else{if(!e.isUnknownDocument())return _e(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:ka(e.version)}}return r}function $f(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function ka(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Pa(s){const e=new nt(s.seconds,s.nanoseconds);return Se.fromTimestamp(e)}function va(s,e){const t=(e.baseMutations||[]).map((l=>Rg(s.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map((l=>Rg(s.yt,l))),a=nt.fromMillis(e.localWriteTimeMs);return new Ey(e.batchId,a,t,r)}function ku(s){const e=Pa(s.readTime),t=s.lastLimboFreeSnapshotVersion!==void 0?Pa(s.lastLimboFreeSnapshotVersion):Se.min();let r;return r=(function(l){return l.documents!==void 0})(s.query)?(function(l){const c=l.documents.length;return Te(c===1,1966,{count:c}),kn(_d(iS(l.documents[0])))})(s.query):(function(l){return kn(lS(l))})(s.query),new Ei(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,e,t,Dt.fromBase64String(s.resumeToken))}function mS(s,e){const t=ka(e.snapshotVersion),r=ka(e.lastLimboFreeSnapshotVersion);let a;a=Hf(e.target)?aS(s.yt,e.target):oS(s.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ma(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function pS(s){const e=lS({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Sg(e,e.limit,"L"):e}function Kp(s,e){return new wy(e.largestBatchId,Rg(s.yt,e.overlayMutation))}function FE(s,e){const t=e.path.lastSegment();return[s,un(e.path.popLast()),t]}function HE(s,e,t,r){return{indexId:s,uid:e,sequenceNumber:t,readTime:ka(r.readTime),documentKey:un(r.documentKey.path),largestBatchId:r.largestBatchId}}class $4{getBundleMetadata(e,t){return GE(e).get(t).next((r=>{if(r)return(function(l){return{id:l.bundleId,createTime:Pa(l.createTime),version:l.version}})(r)}))}saveBundleMetadata(e,t){return GE(e).put((function(a){return{bundleId:a.id,createTime:ka(dn(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return KE(e).get(t).next((r=>{if(r)return(function(l){return{name:l.name,query:pS(l.bundledQuery),readTime:Pa(l.readTime)}})(r)}))}saveNamedQuery(e,t){return KE(e).put((function(a){return{name:a.name,readTime:ka(dn(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function GE(s){return Ht(s,fd)}function KE(s){return Ht(s,dd)}class Td{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new Td(e,r)}getOverlay(e,t){return Au(e).get(FE(this.userId,t)).next((r=>r?Kp(this.serializer,r):null))}getOverlays(e,t){const r=Kr();return B.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){const a=[];return r.forEach(((l,c)=>{const d=new wy(t,c);a.push(this.bt(e,d))})),B.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach((c=>a.add(un(c.getCollectionPath()))));const l=[];return a.forEach((c=>{const d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);l.push(Au(e).X(yg,d))})),B.waitFor(l)}getOverlaysForCollection(e,t,r){const a=Kr(),l=un(t),c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Au(e).H(yg,c).next((d=>{for(const p of d){const g=Kp(this.serializer,p);a.set(g.getKey(),g)}return a}))}getOverlaysForCollectionGroup(e,t,r,a){const l=Kr();let c;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Au(e).ee({index:pw,range:d},((p,g,v)=>{const E=Kp(this.serializer,g);l.size()<a||E.largestBatchId===c?(l.set(E.getKey(),E),c=E.largestBatchId):v.done()})).next((()=>l))}bt(e,t){return Au(e).put((function(a,l,c){const[d,p,g]=FE(l,c.mutation.key);return{userId:l,collectionPath:p,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Qf(a.yt,c.mutation)}})(this.serializer,this.userId,t))}}function Au(s){return Ht(s,md)}class Y4{St(e){return Ht(e,hy)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const r=t?.value;return r?Dt.fromUint8Array(r):Dt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}class ba{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(yt(e.integerValue));else if("doubleValue"in e){const r=yt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),ec(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Ii(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Ri(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?Iw(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):gd(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):_e(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const r=e.fields||{};this.Ft(t,55);for(const a of Object.keys(r))this.Ot(a,t),this.Ct(r[a],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const a=nl,l=r[a].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(yt(l)),this.Ot(a,t),this.Ct(r[a],t)}qt(e,t){const r=e.values||[];this.Ft(t,50);for(const a of r)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),pe.fromName(e).path.forEach((r=>{this.Ft(t,60),this.$t(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}ba.Wt=new ba;const Vo=255;function X4(s){if(s===0)return 8;let e=0;return s>>4||(e+=4,s<<=4),s>>6||(e+=2,s<<=2),s>>7||(e+=1),e}function QE(s){const e=64-(function(r){let a=0;for(let l=0;l<8;++l){const c=X4(255&r[l]);if(a+=c,c!==8)break}return a})(s);return Math.ceil(e/8)}class J4{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ht(r.value),r=t.next();this.Jt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const a=t.codePointAt(0);this.Ht(240|a>>>18),this.Ht(128|63&a>>>12),this.Ht(128|63&a>>>6),this.Ht(128|63&a)}}this.Jt()}Yt(e){const t=this.en(e),r=QE(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),r=QE(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(Vo),this.sn(255)}_n(){this.an(Vo),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Vo?(this.sn(Vo),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Vo?(this.an(Vo),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class W4{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class Z4{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class xu{constructor(){this.cn=new J4,this.ascending=new W4(this.cn),this.descending=new Z4(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class Ea{constructor(e,t,r,a){this.hn=e,this.Pn=t,this.Tn=r,this.In=a}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.In,0),t!==e?r.set([0],this.In.length):++r[r.length-1],new Ea(this.hn,this.Pn,this.Tn,r)}Rn(e,t,r){return{indexId:this.hn,uid:e,arrayValue:xf(this.Tn),directionalValue:xf(this.In),orderedDocumentKey:xf(t),documentKey:r.path.toArray()}}An(e,t,r){const a=this.Rn(e,t,r);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function ps(s,e){let t=s.hn-e.hn;return t!==0?t:(t=$E(s.Tn,e.Tn),t!==0?t:(t=$E(s.In,e.In),t!==0?t:pe.comparator(s.Pn,e.Pn)))}function $E(s,e){for(let t=0;t<s.length&&t<e.length;++t){const r=s[t]-e[t];if(r!==0)return r}return s.length-e.length}function xf(s){return f1()?(function(t){let r="";for(let a=0;a<t.length;a++)r+=String.fromCharCode(t[a]);return r})(s):s}function YE(s){return typeof s!="string"?s:(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(s)}class XE{constructor(e){this.Vn=new rt(((t,r)=>bt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(Te(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=mg(e);if(t!==void 0&&!this.pn(t))return!1;const r=ga(e);let a=new Set,l=0,c=0;for(;l<r.length&&this.pn(r[l]);++l)a=a.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.Vn.size>0){const d=this.Vn.getIterator().getNext();if(!a.has(d.field.canonicalString())){const p=r[l];if(!this.yn(d,p)||!this.wn(this.dn[c++],p))return!1}++l}for(;l<r.length;++l){const d=r[l];if(c>=this.dn.length||!this.wn(this.dn[c++],d))return!1}return!0}bn(){if(this.fn)return null;let e=new rt(bt.comparator);const t=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new _f(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new _f(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new _f(r.field,r.dir==="asc"?0:1)));return new zf(zf.UNKNOWN_ID,this.collectionId,t,Zu.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function gS(s){if(Te(s instanceof Qe||s instanceof ut,20012),s instanceof Qe){if(s instanceof Pw){const t=s.value.arrayValue?.values?.map((r=>Qe.create(s.field,"==",r)))||[];return ut.create(t,"or")}return s}const e=s.filters.map((t=>gS(t)));return ut.create(e,s.op)}function eO(s){if(s.getFilters().length===0)return[];const e=Dg(gS(s));return Te(yS(e),7391),Cg(e)||Ng(e)?[e]:e.getFilters()}function Cg(s){return s instanceof Qe}function Ng(s){return s instanceof ut&&yy(s)}function yS(s){return Cg(s)||Ng(s)||(function(t){if(t instanceof ut&&Eg(t)){for(const r of t.getFilters())if(!Cg(r)&&!Ng(r))return!1;return!0}return!1})(s)}function Dg(s){if(Te(s instanceof Qe||s instanceof ut,34018),s instanceof Qe)return s;if(s.filters.length===1)return Dg(s.filters[0]);const e=s.filters.map((r=>Dg(r)));let t=ut.create(e,s.op);return t=Yf(t),yS(t)?t:(Te(t instanceof ut,64498),Te(sl(t),40251),Te(t.filters.length>1,57927),t.filters.reduce(((r,a)=>xy(r,a))))}function xy(s,e){let t;return Te(s instanceof Qe||s instanceof ut,38388),Te(e instanceof Qe||e instanceof ut,25473),t=s instanceof Qe?e instanceof Qe?(function(a,l){return ut.create([a,l],"and")})(s,e):JE(s,e):e instanceof Qe?JE(e,s):(function(a,l){if(Te(a.filters.length>0&&l.filters.length>0,48005),sl(a)&&sl(l))return Ow(a,l.getFilters());const c=Eg(a)?a:l,d=Eg(a)?l:a,p=c.filters.map((g=>xy(g,d)));return ut.create(p,"or")})(s,e),Yf(t)}function JE(s,e){if(sl(e))return Ow(e,s.getFilters());{const t=e.filters.map((r=>xy(s,r)));return ut.create(t,"or")}}function Yf(s){if(Te(s instanceof Qe||s instanceof ut,11850),s instanceof Qe)return s;const e=s.getFilters();if(e.length===1)return Yf(e[0]);if(Dw(s))return s;const t=e.map((a=>Yf(a))),r=[];return t.forEach((a=>{a instanceof Qe?r.push(a):a instanceof ut&&(a.op===s.op?r.push(...a.filters):r.push(a))})),r.length===1?r[0]:ut.create(r,s.op)}class tO{constructor(){this.Sn=new Iy}addToCollectionParentIndex(e,t){return this.Sn.add(t),B.resolve()}getCollectionParents(e,t){return B.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return B.resolve()}deleteFieldIndex(e,t){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,t){return B.resolve()}getDocumentsMatchingTarget(e,t){return B.resolve(null)}getIndexType(e,t){return B.resolve(0)}getFieldIndexes(e,t){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,t){return B.resolve(Pn.min())}getMinOffsetFromCollectionGroup(e,t){return B.resolve(Pn.min())}updateCollectionGroup(e,t,r){return B.resolve()}updateIndexEntries(e,t){return B.resolve()}}class Iy{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new rt(lt.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new rt(lt.comparator)).toArray()}}const WE="IndexedDbIndexManager",of=new Uint8Array(0);class nO{constructor(e,t){this.databaseId=t,this.Dn=new Iy,this.Cn=new Di((r=>Ma(r)),((r,a)=>Tc(r,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const l={collectionId:r,parent:un(a)};return ZE(e).put(l)}return B.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[nw(t),""],!1,!0);return ZE(e).H(a).next((l=>{for(const c of l){if(c.collectionId!==t)break;r.push(Gr(c.parent))}return r}))}addFieldIndex(e,t){const r=Iu(e),a=(function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map((p=>[p.fieldPath.canonicalString(),p.kind]))}})(t);delete a.indexId;const l=r.add(a);if(t.indexState){const c=Mo(e);return l.next((d=>{c.put(HE(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const r=Iu(e),a=Mo(e),l=Oo(e);return r.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Iu(e),r=Oo(e),a=Mo(e);return t.X().next((()=>r.X())).next((()=>a.X()))}createTargetIndexes(e,t){return B.forEach(this.vn(t),(r=>this.getIndexType(e,r).next((a=>{if(a===0||a===1){const l=new XE(r).bn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const r=Oo(e);let a=!0;const l=new Map;return B.forEach(this.vn(t),(c=>this.Fn(e,c).next((d=>{a&&(a=!!d),l.set(c,d)})))).next((()=>{if(a){let c=Ue();const d=[];return B.forEach(l,((p,g)=>{oe(WE,`Using index ${(function(Z){return`id=${Z.indexId}|cg=${Z.collectionGroup}|f=${Z.fields.map((le=>`${le.fieldPath}:${le.kind}`)).join(",")}`})(p)} to execute ${Ma(t)}`);const v=(function(Z,le){const fe=mg(le);if(fe===void 0)return null;for(const ce of Gf(Z,fe.fieldPath))switch(ce.op){case"array-contains-any":return ce.value.arrayValue.values||[];case"array-contains":return[ce.value]}return null})(g,p),E=(function(Z,le){const fe=new Map;for(const ce of ga(le))for(const w of Gf(Z,ce.fieldPath))switch(w.op){case"==":case"in":fe.set(ce.fieldPath.canonicalString(),w.value);break;case"not-in":case"!=":return fe.set(ce.fieldPath.canonicalString(),w.value),Array.from(fe.values())}return null})(g,p),S=(function(Z,le){const fe=[];let ce=!0;for(const w of ga(le)){const A=w.kind===0?NE(Z,w.fieldPath,Z.startAt):DE(Z,w.fieldPath,Z.startAt);fe.push(A.value),ce&&(ce=A.inclusive)}return new il(fe,ce)})(g,p),N=(function(Z,le){const fe=[];let ce=!0;for(const w of ga(le)){const A=w.kind===0?DE(Z,w.fieldPath,Z.endAt):NE(Z,w.fieldPath,Z.endAt);fe.push(A.value),ce&&(ce=A.inclusive)}return new il(fe,ce)})(g,p),K=this.Mn(p,g,S),q=this.Mn(p,g,N),L=this.xn(p,g,E),ne=this.On(p.indexId,v,K,S.inclusive,q,N.inclusive,L);return B.forEach(ne,(J=>r.Z(J,t.limit).next((Z=>{Z.forEach((le=>{const fe=pe.fromSegments(le.documentKey);c.has(fe)||(c=c.add(fe),d.push(fe))}))}))))})).next((()=>d))}return B.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=eO(ut.create(e.filters,"and")).map((r=>wg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,r,a,l,c,d){const p=(t!=null?t.length:1)*Math.max(r.length,l.length),g=p/(t!=null?t.length:1),v=[];for(let E=0;E<p;++E){const S=t?this.Nn(t[E/g]):of,N=this.Bn(e,S,r[E%g],a),K=this.Ln(e,S,l[E%g],c),q=d.map((L=>this.Bn(e,S,L,!0)));v.push(...this.createRange(N,K,q))}return v}Bn(e,t,r,a){const l=new Ea(e,pe.empty(),t,r);return a?l:l.En()}Ln(e,t,r,a){const l=new Ea(e,pe.empty(),t,r);return a?l.En():l}Fn(e,t){const r=new XE(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let c=null;for(const d of l)r.gn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c}))}getIndexType(e,t){let r=2;const a=this.vn(t);return B.forEach(a,(l=>this.Fn(e,l).next((c=>{c?r!==0&&c.fields.length<(function(p){let g=new rt(bt.comparator),v=!1;for(const E of p.filters)for(const S of E.getFlattenedFilters())S.field.isKeyField()||(S.op==="array-contains"||S.op==="array-contains-any"?v=!0:g=g.add(S.field));for(const E of p.orderBy)E.field.isKeyField()||(g=g.add(E.field));return g.size+(v?1:0)})(l)&&(r=1):r=0})))).next((()=>(function(c){return c.limit!==null})(t)&&a.length>1&&r===2?1:r))}kn(e,t){const r=new xu;for(const a of ga(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=r.ln(a.kind);ba.Wt.Dt(l,c)}return r.un()}Nn(e){const t=new xu;return ba.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const r=new xu;return ba.Wt.Dt(gy(this.databaseId,t),r.ln((function(l){const c=ga(l);return c.length===0?0:c[c.length-1].kind})(e))),r.un()}xn(e,t,r){if(r===null)return[];let a=[];a.push(new xu);let l=0;for(const c of ga(e)){const d=r[l++];for(const p of a)if(this.qn(t,c.fieldPath)&&ac(d))a=this.Un(a,c,d);else{const g=p.ln(c.kind);ba.Wt.Dt(d,g)}}return this.$n(a)}Mn(e,t,r){return this.xn(e,t,r.position)}$n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Un(e,t,r){const a=[...e],l=[];for(const c of r.arrayValue.values||[])for(const d of a){const p=new xu;p.seed(d.un()),ba.Wt.Dt(c,p.ln(t.kind)),l.push(p)}return l}qn(e,t){return!!e.filters.find((r=>r instanceof Qe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Iu(e),a=Mo(e);return(t?r.H(gg,IDBKeyRange.bound(t,t)):r.H()).next((l=>{const c=[];return B.forEach(l,(d=>a.get([d.indexId,this.uid]).next((p=>{c.push((function(v,E){const S=E?new Zu(E.sequenceNumber,new Pn(Pa(E.readTime),new pe(Gr(E.documentKey)),E.largestBatchId)):Zu.empty(),N=v.fields.map((([K,q])=>new _f(bt.fromServerFormat(K),q)));return new zf(v.indexId,v.collectionGroup,N,S)})(d,p))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Ve(r.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const a=Iu(e),l=Mo(e);return this.Wn(e).next((c=>a.H(gg,IDBKeyRange.bound(t,t)).next((d=>B.forEach(d,(p=>l.put(HE(p.indexId,this.uid,c,r))))))))}updateIndexEntries(e,t){const r=new Map;return B.forEach(t,((a,l)=>{const c=r.get(a.collectionGroup);return(c?B.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next((d=>(r.set(a.collectionGroup,d),B.forEach(d,(p=>this.Qn(e,a,p).next((g=>{const v=this.Gn(l,p);return g.isEqual(v)?B.resolve():this.zn(e,l,p,g,v)})))))))}))}jn(e,t,r,a){return Oo(e).put(a.Rn(this.uid,this.Kn(r,t.key),t.key))}Hn(e,t,r,a){return Oo(e).delete(a.An(this.uid,this.Kn(r,t.key),t.key))}Qn(e,t,r){const a=Oo(e);let l=new rt(ps);return a.ee({index:mw,range:IDBKeyRange.only([r.indexId,this.uid,xf(this.Kn(r,t))])},((c,d)=>{l=l.add(new Ea(r.indexId,t,YE(d.arrayValue),YE(d.directionalValue)))})).next((()=>l))}Gn(e,t){let r=new rt(ps);const a=this.kn(t,e);if(a==null)return r;const l=mg(t);if(l!=null){const c=e.data.field(l.fieldPath);if(ac(c))for(const d of c.arrayValue.values||[])r=r.add(new Ea(t.indexId,e.key,this.Nn(d),a))}else r=r.add(new Ea(t.indexId,e.key,of,a));return r}zn(e,t,r,a,l){oe(WE,"Updating index entries for document '%s'",t.key);const c=[];return(function(p,g,v,E,S){const N=p.getIterator(),K=g.getIterator();let q=Do(N),L=Do(K);for(;q||L;){let ne=!1,J=!1;if(q&&L){const Z=v(q,L);Z<0?J=!0:Z>0&&(ne=!0)}else q!=null?J=!0:ne=!0;ne?(E(L),L=Do(K)):J?(S(q),q=Do(N)):(q=Do(N),L=Do(K))}})(a,l,ps,(d=>{c.push(this.jn(e,t,r,d))}),(d=>{c.push(this.Hn(e,t,r,d))})),B.waitFor(c)}Wn(e){let t=1;return Mo(e).ee({index:dw,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((c,d)=>ps(c,d))).filter(((c,d,p)=>!d||ps(c,p[d-1])!==0));const a=[];a.push(e);for(const c of r){const d=ps(c,e),p=ps(c,t);if(d===0)a[0]=e.En();else if(d>0&&p<0)a.push(c),a.push(c.En());else if(p>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Jn(a[c],a[c+1]))return[];const d=a[c].An(this.uid,of,pe.empty()),p=a[c+1].An(this.uid,of,pe.empty());l.push(IDBKeyRange.bound(d,p))}return l}Jn(e,t){return ps(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(eT)}getMinOffset(e,t){return B.mapArray(this.vn(t),(r=>this.Fn(e,r).next((a=>a||_e(44426))))).next(eT)}}function ZE(s){return Ht(s,rc)}function Oo(s){return Ht(s,Fu)}function Iu(s){return Ht(s,cy)}function Mo(s){return Ht(s,qu)}function eT(s){Te(s.length!==0,28825);let e=s[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<s.length;r++){const a=s[r].indexState.offset;oy(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Pn(e.readTime,e.documentKey,t)}const tT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_S=41943040;class ln{static withCacheSize(e){return new ln(e,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function vS(s,e,t){const r=s.store(mr),a=s.store(Wo),l=[],c=IDBKeyRange.only(t.batchId);let d=0;const p=r.ee({range:c},((v,E,S)=>(d++,S.delete())));l.push(p.next((()=>{Te(d===1,47070,{batchId:t.batchId})})));const g=[];for(const v of t.mutations){const E=cw(e,v.key.path,t.batchId);l.push(a.delete(E)),g.push(v.key)}return B.waitFor(l).next((()=>g))}function Xf(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw _e(14731);e=s.noDocument}return JSON.stringify(e).length}ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(_S,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);class wd{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Zn={}}static wt(e,t,r,a){Te(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new wd(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return gs(e).ee({index:wa,range:r},((a,l,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,r,a){const l=jo(e),c=gs(e);return c.add({}).next((d=>{Te(typeof d=="number",49019);const p=new Ey(d,t,r,a),g=(function(N,K,q){const L=q.baseMutations.map((J=>Qf(N.yt,J))),ne=q.mutations.map((J=>Qf(N.yt,J)));return{userId:K,batchId:q.batchId,localWriteTimeMs:q.localWriteTime.toMillis(),baseMutations:L,mutations:ne}})(this.serializer,this.userId,p),v=[];let E=new rt(((S,N)=>Ve(S.canonicalString(),N.canonicalString())));for(const S of a){const N=cw(this.userId,S.key.path,d);E=E.add(S.key.path.popLast()),v.push(c.put(g)),v.push(l.put(N,NV))}return E.forEach((S=>{v.push(this.indexManager.addToCollectionParentIndex(e,S))})),e.addOnCommittedListener((()=>{this.Zn[d]=p.keys()})),B.waitFor(v).next((()=>p))}))}lookupMutationBatch(e,t){return gs(e).get(t).next((r=>r?(Te(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),va(this.serializer,r)):null))}Xn(e,t){return this.Zn[t]?B.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const a=r.keys();return this.Zn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return gs(e).ee({index:wa,range:a},((c,d,p)=>{d.userId===this.userId&&(Te(d.batchId>=r,47524,{Yn:r}),l=va(this.serializer,d)),p.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Aa;return gs(e).ee({index:wa,range:t,reverse:!0},((a,l,c)=>{r=l.batchId,c.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Aa],[this.userId,Number.POSITIVE_INFINITY]);return gs(e).H(wa,t).next((r=>r.map((a=>va(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=vf(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return jo(e).ee({range:a},((c,d,p)=>{const[g,v,E]=c,S=Gr(v);if(g===this.userId&&t.path.isEqual(S))return gs(e).get(E).next((N=>{if(!N)throw _e(61480,{er:c,batchId:E});Te(N.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:N.userId,batchId:E}),l.push(va(this.serializer,N))}));p.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rt(Ve);const a=[];return t.forEach((l=>{const c=vf(this.userId,l.path),d=IDBKeyRange.lowerBound(c),p=jo(e).ee({range:d},((g,v,E)=>{const[S,N,K]=g,q=Gr(N);S===this.userId&&l.path.isEqual(q)?r=r.add(K):E.done()}));a.push(p)})),B.waitFor(a).next((()=>this.tr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=vf(this.userId,r),c=IDBKeyRange.lowerBound(l);let d=new rt(Ve);return jo(e).ee({range:c},((p,g,v)=>{const[E,S,N]=p,K=Gr(S);E===this.userId&&r.isPrefixOf(K)?K.length===a&&(d=d.add(N)):v.done()})).next((()=>this.tr(e,d)))}tr(e,t){const r=[],a=[];return t.forEach((l=>{a.push(gs(e).get(l).next((c=>{if(c===null)throw _e(35274,{batchId:l});Te(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),r.push(va(this.serializer,c))})))})),B.waitFor(a).next((()=>r))}removeMutationBatch(e,t){return vS(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),B.forEach(r,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return B.resolve();const r=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),a=[];return jo(e).ee({range:r},((l,c,d)=>{if(l[0]===this.userId){const p=Gr(l[1]);a.push(p)}else d.done()})).next((()=>{Te(a.length===0,56720,{rr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return bS(e,this.userId,t)}ir(e){return ES(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Aa,lastStreamToken:""}))}}function bS(s,e,t){const r=vf(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let c=!1;return jo(s).ee({range:l,Y:!0},((d,p,g)=>{const[v,E,S]=d;v===e&&E===a&&(c=!0),g.done()})).next((()=>c))}function gs(s){return Ht(s,mr)}function jo(s){return Ht(s,Wo)}function ES(s){return Ht(s,tc)}class La{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new La(0)}static ar(){return new La(-1)}}class rO{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const r=new La(t.highestTargetId);return t.highestTargetId=r.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>Se.fromTimestamp(new nt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.ur(e).next((a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.cr(e,a))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((r=>(r.targetCount+=1,this.hr(t,r),this.cr(e,r))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>ko(e).delete(t.targetId))).next((()=>this.ur(e))).next((r=>(Te(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r))))}removeTargets(e,t,r){let a=0;const l=[];return ko(e).ee(((c,d)=>{const p=ku(d);p.sequenceNumber<=t&&r.get(p.targetId)===null&&(a++,l.push(this.removeTargetData(e,p)))})).next((()=>B.waitFor(l))).next((()=>a))}forEachTarget(e,t){return ko(e).ee(((r,a)=>{const l=ku(a);t(l)}))}ur(e){return nT(e).get(Bf).next((t=>(Te(t!==null,2888),t)))}cr(e,t){return nT(e).put(Bf,t)}lr(e,t){return ko(e).put(mS(this.serializer,t))}hr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Ma(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return ko(e).ee({range:a,index:fw},((c,d,p)=>{const g=ku(d);Tc(t,g.target)&&(l=g,p.done())})).next((()=>l))}addMatchingKeys(e,t,r){const a=[],l=Es(e);return t.forEach((c=>{const d=un(c.path);a.push(l.put({targetId:r,path:d})),a.push(this.referenceDelegate.addReference(e,r,c))})),B.waitFor(a)}removeMatchingKeys(e,t,r){const a=Es(e);return B.forEach(t,(l=>{const c=un(l.path);return B.waitFor([a.delete([r,c]),this.referenceDelegate.removeReference(e,r,l)])}))}removeMatchingKeysForTargetId(e,t){const r=Es(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=Es(e);let l=Ue();return a.ee({range:r,Y:!0},((c,d,p)=>{const g=Gr(c[1]),v=new pe(g);l=l.add(v)})).next((()=>l))}containsKey(e,t){const r=un(t.path),a=IDBKeyRange.bound([r],[nw(r)],!1,!0);let l=0;return Es(e).ee({index:uy,Y:!0,range:a},(([c,d],p,g)=>{c!==0&&(l++,g.done())})).next((()=>l>0))}At(e,t){return ko(e).get(t).next((r=>r?ku(r):null))}}function ko(s){return Ht(s,Zo)}function nT(s){return Ht(s,xa)}function Es(s){return Ht(s,el)}const rT="LruGarbageCollector",TS=1048576;function iT([s,e],[t,r]){const a=Ve(s,t);return a===0?Ve(e,r):a}class iO{constructor(e){this.Pr=e,this.buffer=new rt(iT),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();iT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class wS{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){oe(rT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ms(t)?oe(rT,"Ignoring IndexedDB error during garbage collection: ",t):await Os(t)}await this.Ar(3e5)}))}}class sO{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return B.resolve(Tn.ce);const r=new iO(t);return this.Vr.forEachTarget(e,(a=>r.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>r.Er(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(tT)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tT):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,a,l,c,d,p,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,c=Date.now(),this.nthSequenceNumber(e,a)))).next((E=>(r=E,d=Date.now(),this.removeTargets(e,r,t)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(g=Date.now(),Po()<=Ge.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(g-p)+`ms
Total Duration: ${g-v}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:E}))))}}function SS(s,e){return new sO(s,e)}class aO{constructor(e,t){this.db=e,this.garbageCollector=SS(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((r,a)=>t(a)))}addReference(e,t,r){return lf(e,r)}removeReference(e,t,r){return lf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return lf(e,t)}wr(e,t){return(function(a,l){let c=!1;return ES(a).te((d=>bS(a,d,l).next((p=>(p&&(c=!0),B.resolve(!p)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.yr(e,((c,d)=>{if(d<=t){const p=this.wr(e,c).next((g=>{if(!g)return l++,r.getEntry(e,c).next((()=>(r.removeEntry(c,Se.min()),Es(e).delete((function(E){return[0,un(E.path)]})(c)))))}));a.push(p)}})).next((()=>B.waitFor(a))).next((()=>r.apply(e))).next((()=>l))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return lf(e,t)}yr(e,t){const r=Es(e);let a,l=Tn.ce;return r.ee({index:uy},(([c,d],{path:p,sequenceNumber:g})=>{c===0?(l!==Tn.ce&&t(new pe(Gr(a)),l),l=g,a=p):l=Tn.ce})).next((()=>{l!==Tn.ce&&t(new pe(Gr(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function lf(s,e){return Es(s).put((function(r,a){return{targetId:0,path:un(r.path),sequenceNumber:a}})(e,s.currentSequenceNumber))}class AS{constructor(){this.changes=new Di((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,At.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?B.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class oO{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return da(e).put(r)}removeEntry(e,t,r){return da(e).delete((function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],$f(c),d[d.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.br(e,r))))}getEntry(e,t){let r=At.newInvalidDocument(t);return da(e).ee({index:bf,range:IDBKeyRange.only(Ru(t))},((a,l)=>{r=this.Sr(t,l)})).next((()=>r))}Dr(e,t){let r={size:0,document:At.newInvalidDocument(t)};return da(e).ee({index:bf,range:IDBKeyRange.only(Ru(t))},((a,l)=>{r={document:this.Sr(t,l),size:Xf(l)}})).next((()=>r))}getEntries(e,t){let r=On();return this.Cr(e,t,((a,l)=>{const c=this.Sr(a,l);r=r.insert(a,c)})).next((()=>r))}vr(e,t){let r=On(),a=new ft(pe.comparator);return this.Cr(e,t,((l,c)=>{const d=this.Sr(l,c);r=r.insert(l,d),a=a.insert(l,Xf(c))})).next((()=>({documents:r,Fr:a})))}Cr(e,t,r){if(t.isEmpty())return B.resolve();let a=new rt(oT);t.forEach((p=>a=a.add(p)));const l=IDBKeyRange.bound(Ru(a.first()),Ru(a.last())),c=a.getIterator();let d=c.getNext();return da(e).ee({index:bf,range:l},((p,g,v)=>{const E=pe.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;d&&oT(d,E)<0;)r(d,null),d=c.getNext();d&&d.isEqual(E)&&(r(d,g),d=c.hasNext()?c.getNext():null),d?v.j(Ru(d)):v.done()})).next((()=>{for(;d;)r(d,null),d=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,r,a,l){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),$f(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],p=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return da(e).H(IDBKeyRange.bound(d,p,!0)).next((g=>{l?.incrementDocumentReadCount(g.length);let v=On();for(const E of g){const S=this.Sr(pe.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);S.isFoundDocument()&&(wc(t,S)||a.has(S.key))&&(v=v.insert(S.key,S))}return v}))}getAllFromCollectionGroup(e,t,r,a){let l=On();const c=aT(t,r),d=aT(t,Pn.max());return da(e).ee({index:hw,range:IDBKeyRange.bound(c,d,!0)},((p,g,v)=>{const E=this.Sr(pe.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);l=l.insert(E.key,E),l.size===a&&v.done()})).next((()=>l))}newChangeBuffer(e){return new lO(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return sT(e).get(pg).next((t=>(Te(!!t,20021),t)))}br(e,t){return sT(e).put(pg,t)}Sr(e,t){if(t){const r=Q4(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Se.min())))return r}return At.newInvalidDocument(e)}}function xS(s){return new oO(s)}class lO extends AS{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new Di((r=>r.toString()),((r,a)=>r.isEqual(a)))}applyChanges(e){const t=[];let r=0,a=new rt(((l,c)=>Ve(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const d=this.Or.get(l);if(t.push(this.Mr.removeEntry(e,l,d.readTime)),c.isValidDocument()){const p=qE(this.Mr.serializer,c);a=a.add(l.path.popLast());const g=Xf(p);r+=g-d.size,t.push(this.Mr.addEntry(e,l,p))}else if(r-=d.size,this.trackRemovals){const p=qE(this.Mr.serializer,c.convertToNoDocument(Se.min()));t.push(this.Mr.addEntry(e,l,p))}})),a.forEach((l=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Mr.updateMetadata(e,r)),B.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((r=>(this.Or.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:r,Fr:a})=>(a.forEach(((l,c)=>{this.Or.set(l,{size:c,readTime:r.get(l).readTime})})),r)))}}function sT(s){return Ht(s,nc)}function da(s){return Ht(s,jf)}function Ru(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function aT(s,e){const t=e.documentKey.path.toArray();return[s,$f(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function oT(s,e){const t=s.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=Ve(t[l],r[l]),a)return a;return a=Ve(t.length,r.length),a||(a=Ve(t[t.length-2],r[r.length-2]),a||Ve(t[t.length-1],r[r.length-1]))}class uO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class IS{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&Qu(r.mutation,a,Zn.empty(),nt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ue()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ue()){const a=Kr();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let c=Ou();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=Kr();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ue())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,r,a){let l=On();const c=Ku(),d=(function(){return Ku()})();return t.forEach(((p,g)=>{const v=r.get(g.key);a.has(g.key)&&(v===void 0||v.mutation instanceof ks)?l=l.insert(g.key,g):v!==void 0?(c.set(g.key,v.mutation.getFieldMask()),Qu(v.mutation,g,v.mutation.getFieldMask(),nt.now())):c.set(g.key,Zn.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,v)=>c.set(g,v))),t.forEach(((g,v)=>d.set(g,new uO(v,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const r=Ku();let a=new ft(((c,d)=>c-d)),l=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let v=r.get(p)||Zn.empty();v=d.applyToLocalView(g,v),r.set(p,v);const E=(a.get(d.batchId)||Ue()).add(p);a=a.insert(d.batchId,E)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,v=p.value,E=Fw();v.forEach((S=>{if(!l.has(S)){const N=Yw(t.get(S),r.get(S));N!==null&&E.set(S,N),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return B.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return d4(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):m4(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):B.resolve(Kr());let d=Jo,p=l;return c.next((g=>B.forEach(g,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(v)?B.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{p=p.insert(v,S)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,Ue()))).next((v=>({batchId:d,changes:qw(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pe(t)).next((r=>{let a=Ou();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let c=Ou();return this.indexManager.getCollectionParents(e,l).next((d=>B.forEach(d,(p=>{const g=(function(E,S){return new yd(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,r,a).next((v=>{v.forEach(((E,S)=>{c=c.insert(E,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((c=>{l.forEach(((p,g)=>{const v=g.getKey();c.get(v)===null&&(c=c.insert(v,At.newInvalidDocument(v)))}));let d=Ou();return c.forEach(((p,g)=>{const v=l.get(p);v!==void 0&&Qu(v.mutation,g,Zn.empty(),nt.now()),wc(t,g)&&(d=d.insert(p,g))})),d}))}}class cO{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return B.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:dn(a.createTime)}})(t)),B.resolve()}getNamedQuery(e,t){return B.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:pS(a.bundledQuery),readTime:dn(a.readTime)}})(t)),B.resolve()}}class hO{constructor(){this.overlays=new ft(pe.comparator),this.Lr=new Map}getOverlay(e,t){return B.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Kr();return B.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.bt(e,t,l)})),B.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Lr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(r)),B.resolve()}getOverlaysForCollection(e,t,r){const a=Kr(),l=t.length+1,c=new pe(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>r&&a.set(p.getKey(),p)}return B.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new ft(((g,v)=>g-v));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let v=l.get(g.largestBatchId);v===null&&(v=Kr(),l=l.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const d=Kr(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,v)=>d.set(g,v))),!(d.size()>=a)););return B.resolve(d)}bt(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.Lr.get(a.largestBatchId).delete(r.key);this.Lr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new wy(t,r));let l=this.Lr.get(t);l===void 0&&(l=Ue(),this.Lr.set(t,l)),this.Lr.set(t,l.add(r.key))}}class fO{constructor(){this.sessionToken=Dt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,B.resolve()}}class Ry{constructor(){this.kr=new rt($t.Kr),this.qr=new rt($t.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new $t(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new $t(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new pe(new lt([])),r=new $t(t,e),a=new $t(t,e+1),l=[];return this.qr.forEachInRange([r,a],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new pe(new lt([])),r=new $t(t,e),a=new $t(t,e+1);let l=Ue();return this.qr.forEachInRange([r,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new $t(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class $t{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return pe.comparator(e.key,t.key)||Ve(e.Hr,t.Hr)}static Ur(e,t){return Ve(e.Hr,t.Hr)||pe.comparator(e.key,t.key)}}class dO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new rt($t.Kr)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Ey(l,t,r,a);this.mutationQueue.push(c);for(const d of a)this.Jr=this.Jr.add(new $t(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return B.resolve(c)}lookupMutationBatch(e,t){return B.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Xr(r),l=a<0?0:a;return B.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?Aa:this.Yn-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new $t(t,0),a=new $t(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([r,a],(c=>{const d=this.Zr(c.Hr);l.push(d)})),B.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rt(Ve);return t.forEach((a=>{const l=new $t(a,0),c=new $t(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(d=>{r=r.add(d.Hr)}))})),B.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;pe.isDocumentKey(l)||(l=l.child(""));const c=new $t(new pe(l),0);let d=new rt(Ve);return this.Jr.forEachWhile((p=>{const g=p.key.path;return!!r.isPrefixOf(g)&&(g.length===a&&(d=d.add(p.Hr)),!0)}),c),B.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((r=>{const a=this.Zr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Te(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return B.forEach(t.mutations,(a=>{const l=new $t(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new $t(t,0),a=this.Jr.firstAfterOrEqual(r);return B.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class mO{constructor(e){this.ti=e,this.docs=(function(){return new ft(pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,c=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return B.resolve(r?r.document.mutableCopy():At.newInvalidDocument(t))}getEntries(e,t){let r=On();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():At.newInvalidDocument(a))})),B.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=On();const c=t.path,d=new pe(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||oy(sw(v),r)<=0||(a.has(v.key)||wc(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return B.resolve(l)}getAllFromCollectionGroup(e,t,r,a){_e(9500)}ni(e,t){return B.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new pO(this)}getSize(e){return B.resolve(this.size)}}class pO extends AS{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(r)})),B.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class gO{constructor(e){this.persistence=e,this.ri=new Di((t=>Ma(t)),Tc),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.ii=0,this.si=new Ry,this.targetCount=0,this.oi=La._r()}forEachTarget(e,t){return this.ri.forEach(((r,a)=>t(a))),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),B.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new La(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,B.resolve()}updateTargetData(e,t){return this.lr(t),B.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.ri.forEach(((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),B.waitFor(l).next((()=>a))}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return B.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),B.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),B.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),B.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return B.resolve(r)}containsKey(e,t){return B.resolve(this.si.containsKey(t))}}class Cy{constructor(e,t){this._i={},this.overlays={},this.ai=new Tn(0),this.ui=!1,this.ui=!0,this.ci=new fO,this.referenceDelegate=e(this),this.li=new gO(this),this.indexManager=new tO,this.remoteDocumentCache=(function(a){return new mO(a)})((r=>this.referenceDelegate.hi(r))),this.serializer=new dS(t),this.Pi=new cO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new dO(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){oe("MemoryPersistence","Starting transaction:",e);const a=new yO(this.ai.next());return this.referenceDelegate.Ti(),r(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return B.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class yO extends ow{constructor(e){super(),this.currentSequenceNumber=e}}class Sd{constructor(e){this.persistence=e,this.Ri=new Ry,this.Ai=null}static Vi(e){return new Sd(e)}get di(){if(this.Ai)return this.Ai;throw _e(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),B.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),B.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.di,(r=>{const a=pe.fromPath(r);return this.mi(e,a).next((l=>{l||t.removeEntry(a,Se.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return B.or([()=>B.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Jf{constructor(e,t){this.persistence=e,this.fi=new Di((r=>un(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=SS(this,t)}static Vi(e,t){return new Jf(e,t)}Ti(){}Ii(e){return B.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return B.forEach(this.fi,((r,a)=>this.wr(e,r,a).next((l=>l?B.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(c=>this.wr(e,c,t).next((d=>{d||(r++,l.removeEntry(c,Se.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),B.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),B.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Tf(e.data.value)),t}wr(e,t,r){return B.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return B.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class _O{constructor(e){this.serializer=e}k(e,t,r,a){const l=new cd("createOrUpgrade",t);r<1&&a>=1&&((function(p){p.createObjectStore(Ec)})(e),(function(p){p.createObjectStore(tc,{keyPath:CV}),p.createObjectStore(mr,{keyPath:_E,autoIncrement:!0}).createIndex(wa,vE,{unique:!0}),p.createObjectStore(Wo)})(e),lT(e),(function(p){p.createObjectStore(ya)})(e));let c=B.resolve();return r<3&&a>=3&&(r!==0&&((function(p){p.deleteObjectStore(el),p.deleteObjectStore(Zo),p.deleteObjectStore(xa)})(e),lT(e)),c=c.next((()=>(function(p){const g=p.store(xa),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Se.min().toTimestamp(),targetCount:0};return g.put(Bf,v)})(l)))),r<4&&a>=4&&(r!==0&&(c=c.next((()=>(function(p,g){return g.store(mr).H().next((E=>{p.deleteObjectStore(mr),p.createObjectStore(mr,{keyPath:_E,autoIncrement:!0}).createIndex(wa,vE,{unique:!0});const S=g.store(mr),N=E.map((K=>S.put(K)));return B.waitFor(N)}))})(e,l)))),c=c.next((()=>{(function(p){p.createObjectStore(tl,{keyPath:zV})})(e)}))),r<5&&a>=5&&(c=c.next((()=>this.gi(l)))),r<6&&a>=6&&(c=c.next((()=>((function(p){p.createObjectStore(nc)})(e),this.pi(l))))),r<7&&a>=7&&(c=c.next((()=>this.yi(l)))),r<8&&a>=8&&(c=c.next((()=>this.wi(e,l)))),r<9&&a>=9&&(c=c.next((()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&a>=10&&(c=c.next((()=>this.bi(l)))),r<11&&a>=11&&(c=c.next((()=>{(function(p){p.createObjectStore(fd,{keyPath:UV})})(e),(function(p){p.createObjectStore(dd,{keyPath:jV})})(e)}))),r<12&&a>=12&&(c=c.next((()=>{(function(p){const g=p.createObjectStore(md,{keyPath:QV});g.createIndex(yg,$V,{unique:!1}),g.createIndex(pw,YV,{unique:!1})})(e)}))),r<13&&a>=13&&(c=c.next((()=>(function(p){const g=p.createObjectStore(jf,{keyPath:DV});g.createIndex(bf,VV),g.createIndex(hw,OV)})(e))).next((()=>this.Si(e,l))).next((()=>e.deleteObjectStore(ya)))),r<14&&a>=14&&(c=c.next((()=>this.Di(e,l)))),r<15&&a>=15&&(c=c.next((()=>(function(p){p.createObjectStore(cy,{keyPath:BV,autoIncrement:!0}).createIndex(gg,qV,{unique:!1}),p.createObjectStore(qu,{keyPath:FV}).createIndex(dw,HV,{unique:!1}),p.createObjectStore(Fu,{keyPath:GV}).createIndex(mw,KV,{unique:!1})})(e)))),r<16&&a>=16&&(c=c.next((()=>{t.objectStore(qu).clear()})).next((()=>{t.objectStore(Fu).clear()}))),r<17&&a>=17&&(c=c.next((()=>{(function(p){p.createObjectStore(hy,{keyPath:XV})})(e)}))),r<18&&a>=18&&f1()&&(c=c.next((()=>{t.objectStore(qu).clear()})).next((()=>{t.objectStore(Fu).clear()}))),c}pi(e){let t=0;return e.store(ya).ee(((r,a)=>{t+=Xf(a)})).next((()=>{const r={byteSize:t};return e.store(nc).put(pg,r)}))}gi(e){const t=e.store(tc),r=e.store(mr);return t.H().next((a=>B.forEach(a,(l=>{const c=IDBKeyRange.bound([l.userId,Aa],[l.userId,l.lastAcknowledgedBatchId]);return r.H(wa,c).next((d=>B.forEach(d,(p=>{Te(p.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const g=va(this.serializer,p);return vS(e,l.userId,g).next((()=>{}))}))))}))))}yi(e){const t=e.store(el),r=e.store(ya);return e.store(xa).get(Bf).next((a=>{const l=[];return r.ee(((c,d)=>{const p=new lt(c),g=(function(E){return[0,un(E)]})(p);l.push(t.get(g).next((v=>v?B.resolve():(E=>t.put({targetId:0,path:un(E),sequenceNumber:a.highestListenSequenceNumber}))(p))))})).next((()=>B.waitFor(l)))}))}wi(e,t){e.createObjectStore(rc,{keyPath:LV});const r=t.store(rc),a=new Iy,l=c=>{if(a.add(c)){const d=c.lastSegment(),p=c.popLast();return r.put({collectionId:d,parent:un(p)})}};return t.store(ya).ee({Y:!0},((c,d)=>{const p=new lt(c);return l(p.popLast())})).next((()=>t.store(Wo).ee({Y:!0},(([c,d,p],g)=>{const v=Gr(d);return l(v.popLast())}))))}bi(e){const t=e.store(Zo);return t.ee(((r,a)=>{const l=ku(a),c=mS(this.serializer,l);return t.put(c)}))}Si(e,t){const r=t.store(ya),a=[];return r.ee(((l,c)=>{const d=t.store(jf),p=(function(E){return E.document?new pe(lt.fromString(E.document.name).popFirst(5)):E.noDocument?pe.fromSegments(E.noDocument.path):E.unknownDocument?pe.fromSegments(E.unknownDocument.path):_e(36783)})(c).path.toArray(),g={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(g))})).next((()=>B.waitFor(a)))}Di(e,t){const r=t.store(mr),a=xS(this.serializer),l=new Cy(Sd.Vi,this.serializer.yt);return r.H().next((c=>{const d=new Map;return c.forEach((p=>{let g=d.get(p.userId)??Ue();va(this.serializer,p).keys().forEach((v=>g=g.add(v))),d.set(p.userId,g)})),B.forEach(d,((p,g)=>{const v=new on(g),E=Td.wt(this.serializer,v),S=l.getIndexManager(v),N=wd.wt(v,this.serializer,S,l.referenceDelegate);return new IS(a,N,E,S).recalculateAndSaveOverlaysForDocumentKeys(new _g(t,Tn.ce),p).next()}))}))}}function lT(s){s.createObjectStore(el,{keyPath:kV}).createIndex(uy,PV,{unique:!0}),s.createObjectStore(Zo,{keyPath:"targetId"}).createIndex(fw,MV,{unique:!0}),s.createObjectStore(xa)}const ys="IndexedDbPersistence",Qp=18e5,$p=5e3,Yp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",vO="main";class Ny{constructor(e,t,r,a,l,c,d,p,g,v,E=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ci=l,this.window=c,this.document=d,this.Fi=g,this.Mi=v,this.xi=E,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=S=>Promise.resolve(),!Ny.v())throw new ge(ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new aO(this,a),this.Ki=t+vO,this.serializer=new dS(p),this.qi=new Rs(this.Ki,this.xi,new _O(this.serializer)),this.ci=new Y4,this.li=new rO(this.referenceDelegate,this.serializer),this.remoteDocumentCache=xS(this.serializer),this.Pi=new $4,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,v===!1&&Nt(ys,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ge(ie.FAILED_PRECONDITION,Yp);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new Tn(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>uf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(Ms(e))return oe(ys,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return oe(ys,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return Cu(e).get(No).next((t=>B.resolve(this.Xi(t))))}Yi(e){return uf(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,Qp)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=Ht(t,tl);return r.H().next((a=>{const l=this.ns(a,Qp),c=a.filter((d=>l.indexOf(d)===-1));return B.forEach(c,(d=>r.delete(d.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?B.resolve(!0):Cu(e).get(No).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,$p)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new ge(ie.FAILED_PRECONDITION,Yp);return!1}}return!(!this.networkEnabled||!this.inForeground)||uf(e).H().next((r=>this.ns(r,$p).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||c&&d)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&oe(ys,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[Ec,tl],(e=>{const t=new _g(e,Tn.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((r=>this.ts(r.updateTimeMs,t)&&!this.ss(r.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>uf(e).H().next((t=>this.ns(t,Qp).map((r=>r.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return wd.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new nO(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Td.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,r){oe(ys,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(p){return p===18?ZV:p===17?vw:p===16?WV:p===15?fy:p===14?_w:p===13?yw:p===12?JV:p===11?gw:void _e(60245)})(this.xi);let c;return this.qi.runTransaction(e,a,l,(d=>(c=new _g(d,this.ai?this.ai.next():Tn.ce),t==="readwrite-primary"?this.ji(c).next((p=>!!p||this.Hi(c))).next((p=>{if(!p)throw Nt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new ge(ie.FAILED_PRECONDITION,aw);return r(c)})).next((p=>this.Zi(c).next((()=>p)))):this.Ps(c).next((()=>r(c)))))).then((d=>(c.raiseOnCommittedEvent(),d)))}Ps(e){return Cu(e).get(No).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,$p)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ge(ie.FAILED_PRECONDITION,Yp)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Cu(e).put(No,t)}static v(){return Rs.v()}Ji(e){const t=Cu(e);return t.get(No).next((r=>this.Xi(r)?(oe(ys,"Releasing primary lease."),t.delete(No)):B.resolve()))}ts(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Nt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;h1()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{const t=this.Ui?.getItem(this.rs(e))!==null;return oe(ys,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Nt(ys,"Failed to get zombied client id.",t),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){Nt("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Cu(s){return Ht(s,Ec)}function uf(s){return Ht(s,tl)}function RS(s,e){let t=s.projectId;return s.isDefaultDatabase||(t+="."+s.database),"firestore/"+e+"/"+t+"/"}class Dy{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=a}static Es(e,t){let r=Ue(),a=Ue();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Dy(e,t.fromCache,r,a)}}class bO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class CS{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return h1()?8:lw(Ft())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,a,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new bO;return this.ys(e,t,c).next((d=>{if(l.result=d,this.As)return this.ws(e,t,c,d.size)}))})).next((()=>l.result))}ws(e,t,r,a){return r.documentReadCount<this.Vs?(Po()<=Ge.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",Lo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),B.resolve()):(Po()<=Ge.DEBUG&&oe("QueryEngine","Query:",Lo(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ds*a?(Po()<=Ge.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",Lo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kn(t))):B.resolve())}gs(e,t){if(VE(t))return B.resolve(null);let r=kn(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Sg(t,null,"F"),r=kn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=Ue(...l);return this.fs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,r).next((p=>{const g=this.bs(t,d);return this.Ss(t,g,c,p.readTime)?this.gs(e,Sg(t,null,"F")):this.Ds(e,g,t,p)}))))})))))}ps(e,t,r,a){return VE(t)||a.isEqual(Se.min())?B.resolve(null):this.fs.getDocuments(e,r).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,r,a)?B.resolve(null):(Po()<=Ge.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Lo(t)),this.Ds(e,c,t,iw(a,Jo)).next((d=>d)))}))}bs(e,t){let r=new rt(jw(e));return t.forEach(((a,l)=>{wc(e,l)&&(r=r.add(l))})),r}Ss(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,t,r){return Po()<=Ge.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",Lo(t)),this.fs.getDocumentsMatchingQuery(e,t,Pn.min(),r)}Ds(e,t,r,a){return this.fs.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const Vy="LocalStore",EO=3e8;class TO{constructor(e,t,r,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new ft(Ve),this.Fs=new Di((l=>Ma(l)),Tc),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new IS(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function NS(s,e,t,r){return new TO(s,e,t,r)}async function DS(s,e){const t=be(s);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],d=[];let p=Ue();for(const g of a){c.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of l){d.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(r,p).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function wO(s,e){const t=be(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,p,g,v){const E=g.batch,S=E.keys();let N=B.resolve();return S.forEach((K=>{N=N.next((()=>v.getEntry(p,K))).next((q=>{const L=g.docVersions.get(K);Te(L!==null,48541),q.version.compareTo(L)<0&&(E.applyToRemoteDocument(q,g),q.isValidDocument()&&(q.setReadTime(g.commitVersion),v.addEntry(q)))}))})),N.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let p=Ue();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function VS(s){const e=be(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function SO(s,e){const t=be(s),r=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const d=[];e.targetChanges.forEach(((v,E)=>{const S=a.get(E);if(!S)return;d.push(t.li.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.li.addMatchingKeys(l,v.addedDocuments,E))));let N=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?N=N.withResumeToken(Dt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):v.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(v.resumeToken,r)),a=a.insert(E,N),(function(q,L,ne){return q.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=EO?!0:ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0})(S,N,v)&&d.push(t.li.updateTargetData(l,N))}));let p=On(),g=Ue();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(AO(l,c,e.documentUpdates).next((v=>{p=v.Bs,g=v.Ls}))),!r.isEqual(Se.min())){const v=t.li.getLastRemoteSnapshotVersion(l).next((E=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,r)));d.push(v)}return B.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.vs=a,l)))}function AO(s,e,t){let r=Ue(),a=Ue();return t.forEach((l=>r=r.add(l))),e.getEntries(s,r).next((l=>{let c=On();return t.forEach(((d,p)=>{const g=l.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),p.isNoDocument()&&p.version.isEqual(Se.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):oe(Vy,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)})),{Bs:c,Ls:a}}))}function xO(s,e){const t=be(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Aa),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Wf(s,e){const t=be(s);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.li.getTargetData(r,e).next((l=>l?(a=l,B.resolve(a)):t.li.allocateTargetId(r).next((c=>(a=new Ei(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.vs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function ul(s,e,t){const r=be(s),a=r.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!Ms(c))throw c;oe(Vy,`Failed to update sequence numbers for target ${e}: ${c}`)}r.vs=r.vs.remove(e),r.Fs.delete(a.target)}function Vg(s,e,t){const r=be(s);let a=Se.min(),l=Ue();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,v){const E=be(p),S=E.Fs.get(v);return S!==void 0?B.resolve(E.vs.get(S)):E.li.getTargetData(g,v)})(r,c,kn(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>r.Cs.getDocumentsMatchingQuery(c,e,t?a:Se.min(),t?l:Ue()))).next((d=>(kS(r,Uw(e),d),{documents:d,ks:l})))))}function OS(s,e){const t=be(s),r=be(t.li),a=t.vs.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(l=>r.At(l,e).next((c=>c?c.target:null))))}function MS(s,e){const t=be(s),r=t.Ms.get(e)||Se.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.xs.getAllFromCollectionGroup(a,e,iw(r,Jo),Number.MAX_SAFE_INTEGER))).then((a=>(kS(t,e,a),a)))}function kS(s,e,t){let r=s.Ms.get(e)||Se.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),s.Ms.set(e,r)}const PS="firestore_clients";function uT(s,e){return`${PS}_${s}_${e}`}const LS="firestore_mutations";function cT(s,e,t){let r=`${LS}_${s}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const zS="firestore_targets";function Xp(s,e){return`${zS}_${s}_${e}`}const Fr="SharedClientState";class Zf{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static $s(e,t,r){const a=JSON.parse(r);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new ge(a.error.code,a.error.message))),c?new Zf(e,t,a.state,l):(Nt(Fr,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $u{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static $s(e,t){const r=JSON.parse(t);let a,l=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(a=new ge(r.error.code,r.error.message))),l?new $u(e,r.state,a):(Nt(Fr,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ed{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,l=_y();for(let c=0;a&&c<r.activeTargetIds.length;++c)a=uw(r.activeTargetIds[c]),l=l.add(r.activeTargetIds[c]);return a?new ed(e,l):(Nt(Fr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class Oy{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new Oy(t.clientId,t.onlineState):(Nt(Fr,`Failed to parse online state: ${e}`),null)}}class Og{constructor(){this.activeTargetIds=_y()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Jp{constructor(e,t,r,a,l){this.window=e,this.Ci=t,this.persistenceKey=r,this.zs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new ft(Ve),this.started=!1,this.Zs=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Xs=uT(this.persistenceKey,this.zs),this.Ys=(function(p){return`firestore_sequence_number_${p}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new Og),this.eo=new RegExp(`^${PS}_${c}_([^_]*)$`),this.no=new RegExp(`^${LS}_${c}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${zS}_${c}_(\\d+)$`),this.io=(function(p){return`firestore_online_state_${p}`})(this.persistenceKey),this.so=(function(p){return`firestore_bundle_loaded_v2_${p}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const r of e){if(r===this.zs)continue;const a=this.getItem(uT(this.persistenceKey,r));if(a){const l=ed.$s(r,a);l&&(this.Js=this.Js.insert(l.clientId,l))}}this.oo();const t=this.storage.getItem(this.io);if(t){const r=this._o(t);r&&this.ao(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let t=!1;return this.Js.forEach(((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,t,r){this.co(e,t,r),this.lo(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Xp(this.persistenceKey,e));if(a){const l=$u.$s(e,a);l&&(r=l.state)}}return t&&this.ho.Qs(e),this.oo(),r}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Xp(this.persistenceKey,e))}updateQueryState(e,t,r){this.Po(e,t,r)}handleUserChange(e,t,r){t.forEach((a=>{this.lo(a)})),this.currentUser=e,r.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return oe(Fr,"READ",e,t),t}setItem(e,t){oe(Fr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){oe(Fr,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(oe(Fr,"EVENT",t.key,t.newValue),t.key===this.Xs)return void Nt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.eo.test(t.key)){if(t.newValue==null){const r=this.Eo(t.key);return this.Ro(r,null)}{const r=this.Ao(t.key,t.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.no.test(t.key)){if(t.newValue!==null){const r=this.Vo(t.key,t.newValue);if(r)return this.mo(r)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(t.key===this.io){if(t.newValue!==null){const r=this._o(t.newValue);if(r)return this.ao(r)}}else if(t.key===this.Ys){const r=(function(l){let c=Tn.ce;if(l!=null)try{const d=JSON.parse(l);Te(typeof d=="number",30636,{yo:l}),c=d}catch(d){Nt(Fr,"Failed to read sequence number from WebStorage",d)}return c})(t.newValue);r!==Tn.ce&&this.sequenceNumberHandler(r)}else if(t.key===this.so){const r=this.wo(t.newValue);await Promise.all(r.map((a=>this.syncEngine.bo(a))))}}}else this.Zs.push(t)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,t,r){const a=new Zf(this.currentUser,e,t,r),l=cT(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Ws())}lo(e){const t=cT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}To(e){const t={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(t))}Po(e,t,r){const a=Xp(this.persistenceKey,e),l=new $u(e,t,r);this.setItem(a,l.Ws())}Io(e){const t=JSON.stringify(Array.from(e));this.setItem(this.so,t)}Eo(e){const t=this.eo.exec(e);return t?t[1]:null}Ao(e,t){const r=this.Eo(e);return ed.$s(r,t)}Vo(e,t){const r=this.no.exec(e),a=Number(r[1]),l=r[2]!==void 0?r[2]:null;return Zf.$s(new on(l),a,t)}fo(e,t){const r=this.ro.exec(e),a=Number(r[1]);return $u.$s(a,t)}_o(e){return Oy.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);oe(Fr,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,t){const r=t?this.Js.insert(e,t):this.Js.remove(e),a=this.uo(this.Js),l=this.uo(r),c=[],d=[];return l.forEach((p=>{a.has(p)||c.push(p)})),a.forEach((p=>{l.has(p)||d.push(p)})),this.syncEngine.Co(c,d).then((()=>{this.Js=r}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let t=_y();return e.forEach(((r,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class US{constructor(){this.vo=new Og,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Og,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class IO{Mo(e){}shutdown(){}}const hT="ConnectivityMonitor";class fT{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){oe(hT,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){oe(hT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let cf=null;function Mg(){return cf===null?cf=(function(){return 268435456+Math.round(2147483648*Math.random())})():cf++,"0x"+cf.toString(16)}const Wp="RestConnection",RO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class CO{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${a}`,this.$o=this.databaseId.database===qf?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Wo(e,t,r,a,l){const c=Mg(),d=this.Qo(e,t.toUriEncodedString());oe(Wp,`Sending RPC '${e}' ${c}:`,d,r);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,a,l);const{host:g}=new URL(d),v=pl(g);return this.zo(e,d,p,r,v).then((E=>(oe(Wp,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw Yo(Wp,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",r),E}))}jo(e,t,r,a,l,c){return this.Wo(e,t,r,a,l)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+_l})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}Qo(e,t){const r=RO[e];let a=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}class NO{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const an="WebChannelConnection",Nu=(s,e,t)=>{s.listen(e,(r=>{try{t(r)}catch(a){setTimeout((()=>{throw a}),0)}}))};class Go extends CO{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Go.c_){const e=Z1();Nu(e,W1.STAT_EVENT,(t=>{t.stat===fg.PROXY?oe(an,"STAT_EVENT: detected buffering proxy"):t.stat===fg.NOPROXY&&oe(an,"STAT_EVENT: detected no buffering proxy")})),Go.c_=!0}}zo(e,t,r,a,l){const c=Mg();return new Promise(((d,p)=>{const g=new X1;g.setWithCredentials(!0),g.listenOnce(J1.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case yf.NO_ERROR:const E=g.getResponseJson();oe(an,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case yf.TIMEOUT:oe(an,`RPC '${e}' ${c} timed out`),p(new ge(ie.DEADLINE_EXCEEDED,"Request time out"));break;case yf.HTTP_ERROR:const S=g.getStatus();if(oe(an,`RPC '${e}' ${c} failed with status:`,S,"response text:",g.getResponseText()),S>0){let N=g.getResponseJson();Array.isArray(N)&&(N=N[0]);const K=N?.error;if(K&&K.status&&K.message){const q=(function(ne){const J=ne.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(J)>=0?J:ie.UNKNOWN})(K.status);p(new ge(q,K.message))}else p(new ge(ie.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new ge(ie.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{oe(an,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(a);oe(an,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",v,r,15)}))}T_(e,t,r){const a=Mg(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const g=l.join("");oe(an,`Creating RPC '${e}' stream ${a}: ${g}`,d);const v=c.createWebChannel(g,d);this.I_(v);let E=!1,S=!1;const N=new NO({Ho:K=>{S?oe(an,`Not sending because RPC '${e}' stream ${a} is closed:`,K):(E||(oe(an,`Opening RPC '${e}' stream ${a} transport.`),v.open(),E=!0),oe(an,`RPC '${e}' stream ${a} sending:`,K),v.send(K))},Jo:()=>v.close()});return Nu(v,Vu.EventType.OPEN,(()=>{S||(oe(an,`RPC '${e}' stream ${a} transport opened.`),N.i_())})),Nu(v,Vu.EventType.CLOSE,(()=>{S||(S=!0,oe(an,`RPC '${e}' stream ${a} transport closed`),N.o_(),this.E_(v))})),Nu(v,Vu.EventType.ERROR,(K=>{S||(S=!0,Yo(an,`RPC '${e}' stream ${a} transport errored. Name:`,K.name,"Message:",K.message),N.o_(new ge(ie.UNAVAILABLE,"The operation could not be completed")))})),Nu(v,Vu.EventType.MESSAGE,(K=>{if(!S){const q=K.data[0];Te(!!q,16349);const L=q,ne=L?.error||L[0]?.error;if(ne){oe(an,`RPC '${e}' stream ${a} received error:`,ne);const J=ne.status;let Z=(function(ce){const w=jt[ce];if(w!==void 0)return Ww(w)})(J),le=ne.message;J==="NOT_FOUND"&&le.includes("database")&&le.includes("does not exist")&&le.includes(this.databaseId.database)&&Yo(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),Z===void 0&&(Z=ie.INTERNAL,le="Unknown error status: "+J+" with message "+ne.message),S=!0,N.o_(new ge(Z,le)),v.close()}else oe(an,`RPC '${e}' stream ${a} received:`,q),N.__(q)}})),Go.u_(),setTimeout((()=>{N.s_()}),0),N}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return ew()}}function DO(s){return new Go(s)}function jS(){return typeof window<"u"?window:null}function If(){return typeof document<"u"?document:null}function Ad(s){return new L4(s,!0)}Go.c_=!1;class BS{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&oe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const dT="PersistentStream";class qS{constructor(e,t,r,a,l,c,d,p){this.Ci=e,this.b_=r,this.S_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new BS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(Nt(t.toString()),Nt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new ge(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return oe(dT,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(oe(dT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class VO extends qS{constructor(e,t,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=j4(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Se.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Se.min():c.readTime?dn(c.readTime):Se.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=Ig(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=Hf(p)?{documents:aS(l,p)}:{query:oS(l,p).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=tS(l,c.resumeToken);const g=Ag(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Se.min())>0){d.readTime=ll(l,c.snapshotVersion.toTimestamp());const g=Ag(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const r=q4(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=Ig(this.serializer),t.removeTarget=e,this.K_(t)}}class OO extends qS{constructor(e,t,r,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Te(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Te(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=B4(e.writeResults,e.commitTime),r=dn(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Ig(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Qf(this.serializer,r)))};this.K_(t)}}class MO{}class kO extends MO{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new ge(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,xg(t,r),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(ie.UNKNOWN,l.toString())}))}jo(e,t,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.jo(e,xg(t,r),a,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ge(ie.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function PO(s,e,t,r){return new kO(s,e,t,r)}class LO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Nt(t),this.aa=!1):oe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const za="RemoteStore";class zO{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{r.enqueueAndForget((async()=>{Ba(this)&&(oe(za,"Restarting streams for network reachability change."),await(async function(p){const g=be(p);g.Ea.add(4),await xc(g),g.Va.set("Unknown"),g.Ea.delete(4),await xd(g)})(this))}))})),this.Va=new LO(r,a)}}async function xd(s){if(Ba(s))for(const e of s.Ra)await e(!0)}async function xc(s){for(const e of s.Ra)await e(!1)}function Id(s,e){const t=be(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Py(t)?ky(t):El(t).O_()&&My(t,e))}function cl(s,e){const t=be(s),r=El(t);t.Ia.delete(e),r.O_()&&FS(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ba(t)&&t.Va.set("Unknown"))}function My(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}El(s).Z_(e)}function FS(s,e){s.da.$e(e),El(s).X_(e)}function ky(s){s.da=new O4({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),El(s).start(),s.Va.ua()}function Py(s){return Ba(s)&&!El(s).x_()&&s.Ia.size>0}function Ba(s){return be(s).Ea.size===0}function HS(s){s.da=void 0}async function UO(s){s.Va.set("Online")}async function jO(s){s.Ia.forEach(((e,t)=>{My(s,e)}))}async function BO(s,e){HS(s),Py(s)?(s.Va.ha(e),ky(s)):s.Va.set("Unknown")}async function qO(s,e,t){if(s.Va.set("Online"),e instanceof eS&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.da.removeTarget(d))})(s,e)}catch(r){oe(za,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await td(s,r)}else if(e instanceof Af?s.da.Xe(e):e instanceof Zw?s.da.st(e):s.da.tt(e),!t.isEqual(Se.min()))try{const r=await VS(s.localStore);t.compareTo(r)>=0&&await(function(l,c){const d=l.da.Tt(c);return d.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ia.get(g);v&&l.Ia.set(g,v.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,g)=>{const v=l.Ia.get(p);if(!v)return;l.Ia.set(p,v.withResumeToken(Dt.EMPTY_BYTE_STRING,v.snapshotVersion)),FS(l,p);const E=new Ei(v.target,p,g,v.sequenceNumber);My(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(s,t)}catch(r){oe(za,"Failed to raise snapshot:",r),await td(s,r)}}async function td(s,e,t){if(!Ms(e))throw e;s.Ea.add(1),await xc(s),s.Va.set("Offline"),t||(t=()=>VS(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{oe(za,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await xd(s)}))}function GS(s,e){return e().catch((t=>td(s,t,e)))}async function bl(s){const e=be(s),t=Ds(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Aa;for(;FO(e);)try{const a=await xO(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,HO(e,a)}catch(a){await td(e,a)}KS(e)&&QS(e)}function FO(s){return Ba(s)&&s.Ta.length<10}function HO(s,e){s.Ta.push(e);const t=Ds(s);t.O_()&&t.Y_&&t.ea(e.mutations)}function KS(s){return Ba(s)&&!Ds(s).x_()&&s.Ta.length>0}function QS(s){Ds(s).start()}async function GO(s){Ds(s).ra()}async function KO(s){const e=Ds(s);for(const t of s.Ta)e.ea(t.mutations)}async function QO(s,e,t){const r=s.Ta.shift(),a=Ty.from(r,e,t);await GS(s,(()=>s.remoteSyncer.applySuccessfulWrite(a))),await bl(s)}async function $O(s,e){e&&Ds(s).Y_&&await(async function(r,a){if((function(c){return N4(c)&&c!==ie.ABORTED})(a.code)){const l=r.Ta.shift();Ds(r).B_(),await GS(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await bl(r)}})(s,e),KS(s)&&QS(s)}async function mT(s,e){const t=be(s);t.asyncQueue.verifyOperationInProgress(),oe(za,"RemoteStore received new credentials");const r=Ba(t);t.Ea.add(3),await xc(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await xd(t)}async function kg(s,e){const t=be(s);e?(t.Ea.delete(2),await xd(t)):e||(t.Ea.add(2),await xc(t),t.Va.set("Unknown"))}function El(s){return s.ma||(s.ma=(function(t,r,a){const l=be(t);return l.sa(),new VO(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(s.datastore,s.asyncQueue,{Zo:UO.bind(null,s),Yo:jO.bind(null,s),t_:BO.bind(null,s),J_:qO.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),Py(s)?ky(s):s.Va.set("Unknown")):(await s.ma.stop(),HS(s))}))),s.ma}function Ds(s){return s.fa||(s.fa=(function(t,r,a){const l=be(t);return l.sa(),new OO(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:GO.bind(null,s),t_:$O.bind(null,s),ta:KO.bind(null,s),na:QO.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await bl(s)):(await s.fa.stop(),s.Ta.length>0&&(oe(za,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class Ly{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new wi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const c=Date.now()+r,d=new Ly(e,t,c,a,l);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zy(s,e){if(Nt("AsyncQueue",`${e}: ${s}`),Ms(s))return new ge(ie.UNAVAILABLE,`${e}: ${s}`);throw s}class Ko{static emptySet(e){return new Ko(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||pe.comparator(t.key,r.key):(t,r)=>pe.comparator(t.key,r.key),this.keyedMap=Ou(),this.sortedSet=new ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ko)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ko;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class pT{constructor(){this.ga=new ft(pe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):_e(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class hl{constructor(e,t,r,a,l,c,d,p,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,a,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new hl(e,t,Ko.emptySet(t),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class YO{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class XO{constructor(){this.queries=gT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=be(t),l=a.queries;a.queries=gT(),l.forEach(((c,d)=>{for(const p of d.ba)p.onError(r)}))})(this,new ge(ie.ABORTED,"Firestore shutting down"))}}function gT(){return new Di((s=>zw(s)),vd)}async function JO(s,e){const t=be(s);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.Da()&&(r=2):(l=new YO,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=zy(c,`Initialization of query '${Lo(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Uy(t)}async function WO(s,e){const t=be(s),r=e.query;let a=3;const l=t.queries.get(r);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function ZO(s,e){const t=be(s);let r=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.ba)d.Fa(a)&&(r=!0);c.wa=a}}r&&Uy(t)}function eM(s,e,t){const r=be(s),a=r.queries.get(e);if(a)for(const l of a.ba)l.onError(t);r.queries.delete(e)}function Uy(s){s.Ca.forEach((e=>{e.next()}))}var Pg,yT;(yT=Pg||(Pg={})).Ma="default",yT.Cache="cache";class tM{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new hl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=hl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Pg.Cache}}class $S{constructor(e){this.key=e}}class YS{constructor(e){this.key=e}}class nM{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ue(),this.mutatedKeys=Ue(),this.eu=jw(e),this.tu=new Ko(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new pT,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,E)=>{const S=a.get(v),N=wc(this.query,E)?E:null,K=!!S&&this.mutatedKeys.has(S.key),q=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let L=!1;S&&N?S.data.isEqual(N.data)?K!==q&&(r.track({type:3,doc:N}),L=!0):this.su(S,N)||(r.track({type:2,doc:N}),L=!0,(p&&this.eu(N,p)>0||g&&this.eu(N,g)<0)&&(d=!0)):!S&&N?(r.track({type:0,doc:N}),L=!0):S&&!N&&(r.track({type:1,doc:S}),L=!0,(p||g)&&(d=!0)),L&&(N?(c=c.add(N),l=q?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),r.track({type:1,doc:v})}return{tu:c,iu:r,Ss:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,E)=>(function(N,K){const q=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{Vt:L})}};return q(N)-q(K)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(r),a=a??!1;const d=t&&!a?this._u():[],p=this.Ya.size===0&&this.current&&!a?1:0,g=p!==this.Xa;return this.Xa=p,c.length!==0||g?{snapshot:new hl(this.query,e.tu,l,c,e.mutatedKeys,p===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new pT,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Ue(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new YS(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new $S(r))})),t}cu(e){this.Za=e.ks,this.Ya=Ue();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return hl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Tl="SyncEngine";class rM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class iM{constructor(e){this.key=e,this.hu=!1}}class sM{constructor(e,t,r,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Di((d=>zw(d)),vd),this.Iu=new Map,this.Eu=new Set,this.Ru=new ft(pe.comparator),this.Au=new Map,this.Vu=new Ry,this.du={},this.mu=new Map,this.fu=La.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function aM(s,e,t=!0){const r=Rd(s);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await XS(r,e,t,!0),a}async function oM(s,e){const t=Rd(s);await XS(t,e,!0,!1)}async function XS(s,e,t,r){const a=await Wf(s.localStore,kn(e)),l=a.targetId,c=s.sharedClientState.addLocalQueryTarget(l,t);let d;return r&&(d=await jy(s,e,l,c==="current",a.resumeToken)),s.isPrimaryClient&&t&&Id(s.remoteStore,a),d}async function jy(s,e,t,r,a){s.pu=(E,S,N)=>(async function(q,L,ne,J){let Z=L.view.ru(ne);Z.Ss&&(Z=await Vg(q.localStore,L.query,!1).then((({documents:w})=>L.view.ru(w,Z))));const le=J&&J.targetChanges.get(L.targetId),fe=J&&J.targetMismatches.get(L.targetId)!=null,ce=L.view.applyChanges(Z,q.isPrimaryClient,le,fe);return Lg(q,L.targetId,ce.au),ce.snapshot})(s,E,S,N);const l=await Vg(s.localStore,e,!0),c=new nM(e,l.ks),d=c.ru(l.documents),p=Ac.createSynthesizedTargetChangeForCurrentChange(t,r&&s.onlineState!=="Offline",a),g=c.applyChanges(d,s.isPrimaryClient,p);Lg(s,t,g.au);const v=new rM(e,t,c);return s.Tu.set(e,v),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),g.snapshot}async function lM(s,e,t){const r=be(s),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter((c=>!vd(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await ul(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&cl(r.remoteStore,a.targetId),fl(r,a.targetId)})).catch(Os)):(fl(r,a.targetId),await ul(r.localStore,a.targetId,!0))}async function uM(s,e){const t=be(s),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),cl(t.remoteStore,r.targetId))}async function cM(s,e,t){const r=Hy(s);try{const a=await(function(c,d){const p=be(c),g=nt.now(),v=d.reduce(((N,K)=>N.add(K.key)),Ue());let E,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let K=On(),q=Ue();return p.xs.getEntries(N,v).next((L=>{K=L,K.forEach(((ne,J)=>{J.isValidDocument()||(q=q.add(ne))}))})).next((()=>p.localDocuments.getOverlayedDocuments(N,K))).next((L=>{E=L;const ne=[];for(const J of d){const Z=R4(J,E.get(J.key).overlayedDocument);Z!=null&&ne.push(new ks(J.key,Z,Cw(Z.value.mapValue),Mn.exists(!0)))}return p.mutationQueue.addMutationBatch(N,g,ne,d)})).next((L=>{S=L;const ne=L.applyToLocalDocumentSet(E,q);return p.documentOverlayCache.saveOverlays(N,L.batchId,ne)}))})).then((()=>({batchId:S.batchId,changes:qw(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(c,d,p){let g=c.du[c.currentUser.toKey()];g||(g=new ft(Ve)),g=g.insert(d,p),c.du[c.currentUser.toKey()]=g})(r,a.batchId,t),await Ps(r,a.changes),await bl(r.remoteStore)}catch(a){const l=zy(a,"Failed to persist write");t.reject(l)}}async function JS(s,e){const t=be(s);try{const r=await SO(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(Te(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?Te(c.hu,14607):a.removedDocuments.size>0&&(Te(c.hu,42227),c.hu=!1))})),await Ps(t,r,e)}catch(r){await Os(r)}}function _T(s,e,t){const r=be(s);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const p=be(c);p.onlineState=d;let g=!1;p.queries.forEach(((v,E)=>{for(const S of E.ba)S.va(d)&&(g=!0)})),g&&Uy(p)})(r.eventManager,e),a.length&&r.Pu.J_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function hM(s,e,t){const r=be(s);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),l=a&&a.key;if(l){let c=new ft(pe.comparator);c=c.insert(l,At.newNoDocument(l,Se.min()));const d=Ue().add(l),p=new Sc(Se.min(),new Map,new ft(Ve),c,d);await JS(r,p),r.Ru=r.Ru.remove(l),r.Au.delete(e),Fy(r)}else await ul(r.localStore,e,!1).then((()=>fl(r,e,t))).catch(Os)}async function fM(s,e){const t=be(s),r=e.batch.batchId;try{const a=await wO(t.localStore,e);qy(t,r,null),By(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ps(t,a)}catch(a){await Os(a)}}async function dM(s,e,t){const r=be(s);try{const a=await(function(c,d){const p=be(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return p.mutationQueue.lookupMutationBatch(g,d).next((E=>(Te(E!==null,37113),v=E.keys(),p.mutationQueue.removeMutationBatch(g,E)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,v,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>p.localDocuments.getDocuments(g,v)))}))})(r.localStore,e);qy(r,e,t),By(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ps(r,a)}catch(a){await Os(a)}}function By(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function qy(s,e,t){const r=be(s);let a=r.du[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.du[r.currentUser.toKey()]=a}}function fl(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),t&&s.Pu.yu(r,t);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((r=>{s.Vu.containsKey(r)||WS(s,r)}))}function WS(s,e){s.Eu.delete(e.path.canonicalString());const t=s.Ru.get(e);t!==null&&(cl(s.remoteStore,t),s.Ru=s.Ru.remove(e),s.Au.delete(t),Fy(s))}function Lg(s,e,t){for(const r of t)r instanceof $S?(s.Vu.addReference(r.key,e),mM(s,r)):r instanceof YS?(oe(Tl,"Document no longer in limbo: "+r.key),s.Vu.removeReference(r.key,e),s.Vu.containsKey(r.key)||WS(s,r.key)):_e(19791,{wu:r})}function mM(s,e){const t=e.key,r=t.path.canonicalString();s.Ru.get(t)||s.Eu.has(r)||(oe(Tl,"New document in limbo: "+t),s.Eu.add(r),Fy(s))}function Fy(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new pe(lt.fromString(e)),r=s.fu.next();s.Au.set(r,new iM(t)),s.Ru=s.Ru.insert(t,r),Id(s.remoteStore,new Ei(kn(_d(t.path)),r,"TargetPurposeLimboResolution",Tn.ce))}}async function Ps(s,e,t){const r=be(s),a=[],l=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((d,p)=>{c.push(r.pu(p,e,t).then((g=>{if((g||t)&&r.isPrimaryClient){const v=g?!g.fromCache:t?.targetChanges.get(p.targetId)?.current;r.sharedClientState.updateQueryState(p.targetId,v?"current":"not-current")}if(g){a.push(g);const v=Dy.Es(p.targetId,g);l.push(v)}})))})),await Promise.all(c),r.Pu.J_(a),await(async function(p,g){const v=be(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>B.forEach(g,(S=>B.forEach(S.Ts,(N=>v.persistence.referenceDelegate.addReference(E,S.targetId,N))).next((()=>B.forEach(S.Is,(N=>v.persistence.referenceDelegate.removeReference(E,S.targetId,N)))))))))}catch(E){if(!Ms(E))throw E;oe(Vy,"Failed to update sequence numbers: "+E)}for(const E of g){const S=E.targetId;if(!E.fromCache){const N=v.vs.get(S),K=N.snapshotVersion,q=N.withLastLimboFreeSnapshotVersion(K);v.vs=v.vs.insert(S,q)}}})(r.localStore,l))}async function pM(s,e){const t=be(s);if(!t.currentUser.isEqual(e)){oe(Tl,"User change. New user:",e.toKey());const r=await DS(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((p=>{p.reject(new ge(ie.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ps(t,r.Ns)}}function gM(s,e){const t=be(s),r=t.Au.get(e);if(r&&r.hu)return Ue().add(r.key);{let a=Ue();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const d=t.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}async function yM(s,e){const t=be(s),r=await Vg(t.localStore,e.query,!0),a=e.view.cu(r);return t.isPrimaryClient&&Lg(t,e.targetId,a.au),a}async function _M(s,e){const t=be(s);return MS(t.localStore,e).then((r=>Ps(t,r)))}async function vM(s,e,t,r){const a=be(s),l=await(function(d,p){const g=be(d),v=be(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",(E=>v.Xn(E,p).next((S=>S?g.localDocuments.getDocuments(E,S):B.resolve(null)))))})(a.localStore,e);l!==null?(t==="pending"?await bl(a.remoteStore):t==="acknowledged"||t==="rejected"?(qy(a,e,r||null),By(a,e),(function(d,p){be(be(d).mutationQueue).nr(p)})(a.localStore,e)):_e(6720,"Unknown batchState",{bu:t}),await Ps(a,l)):oe(Tl,"Cannot apply mutation batch with id: "+e)}async function bM(s,e){const t=be(s);if(Rd(t),Hy(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await vT(t,r.toArray());t.gu=!0,await kg(t.remoteStore,!0);for(const l of a)Id(t.remoteStore,l)}else if(e===!1&&t.gu!==!1){const r=[];let a=Promise.resolve();t.Iu.forEach(((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):a=a.then((()=>(fl(t,c),ul(t.localStore,c,!0)))),cl(t.remoteStore,c)})),await a,await vT(t,r),(function(c){const d=be(c);d.Au.forEach(((p,g)=>{cl(d.remoteStore,g)})),d.Vu.zr(),d.Au=new Map,d.Ru=new ft(pe.comparator)})(t),t.gu=!1,await kg(t.remoteStore,!1)}}async function vT(s,e,t){const r=be(s),a=[],l=[];for(const c of e){let d;const p=r.Iu.get(c);if(p&&p.length!==0){d=await Wf(r.localStore,kn(p[0]));for(const g of p){const v=r.Tu.get(g),E=await yM(r,v);E.snapshot&&l.push(E.snapshot)}}else{const g=await OS(r.localStore,c);d=await Wf(r.localStore,g),await jy(r,ZS(g),c,!1,d.resumeToken)}a.push(d)}return r.Pu.J_(l),a}function ZS(s){return Lw(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function EM(s){return(function(t){return be(be(t).persistence).hs()})(be(s).localStore)}async function TM(s,e,t,r){const a=be(s);if(a.gu)return void oe(Tl,"Ignoring unexpected query state notification.");const l=a.Iu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=await MS(a.localStore,Uw(l[0])),d=Sc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Dt.EMPTY_BYTE_STRING);await Ps(a,c,d);break}case"rejected":await ul(a.localStore,e,!0),fl(a,e,r);break;default:_e(64155,t)}}async function wM(s,e,t){const r=Rd(s);if(r.gu){for(const a of e){if(r.Iu.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){oe(Tl,"Adding an already active target "+a);continue}const l=await OS(r.localStore,a),c=await Wf(r.localStore,l);await jy(r,ZS(l),c.targetId,!1,c.resumeToken),Id(r.remoteStore,c)}for(const a of t)r.Iu.has(a)&&await ul(r.localStore,a,!1).then((()=>{cl(r.remoteStore,a),fl(r,a)})).catch(Os)}}function Rd(s){const e=be(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=JS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hM.bind(null,e),e.Pu.J_=ZO.bind(null,e.eventManager),e.Pu.yu=eM.bind(null,e.eventManager),e}function Hy(s){const e=be(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dM.bind(null,e),e}class uc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ad(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return NS(this.persistence,new CS,e.initialUser,this.serializer)}Cu(e){return new Cy(Sd.Vi,this.serializer)}Du(e){return new US}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uc.provider={build:()=>new uc};class SM extends uc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Te(this.persistence.referenceDelegate instanceof Jf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new wS(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new Cy((r=>Jf.Vi(r,t)),this.serializer)}}class eA extends uc{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Hy(this.xu.syncEngine),await bl(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return NS(this.persistence,new CS,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new wS(r,e.asyncQueue,t)}Mu(e,t){const r=new IV(t,this.persistence);return new xV(e.asyncQueue,r)}Cu(e){const t=RS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new Ny(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,jS(),If(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new US}}class AM extends eA{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof Jp&&(this.sharedClientState.syncEngine={So:vM.bind(null,t),Do:TM.bind(null,t),Co:wM.bind(null,t),hs:EM.bind(null,t),bo:_M.bind(null,t)},await this.sharedClientState.start()),await this.persistence.zi((async r=>{await bM(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=jS();if(!Jp.v(t))throw new ge(ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=RS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Jp(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class cc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_T(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=pM.bind(null,this.syncEngine),await kg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new XO})()}createDatastore(e){const t=Ad(e.databaseInfo.databaseId),r=DO(e.databaseInfo);return PO(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,c,d){return new zO(r,a,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>_T(this.syncEngine,t,0)),(function(){return fT.v()?new fT:new IO})())}createSyncEngine(e,t){return(function(a,l,c,d,p,g,v){const E=new sM(a,l,c,d,p,g);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=be(t);oe(za,"RemoteStore shutting down."),r.Ea.add(5),await xc(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}cc.provider={build:()=>new cc};class xM{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Nt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Vs="FirestoreClient";class IM{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=a,this.user=on.UNAUTHENTICATED,this.clientId=sy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{oe(Vs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(oe(Vs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=zy(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Zp(s,e){s.asyncQueue.verifyOperationInProgress(),oe(Vs,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let r=t.initialUser;s.setCredentialChangeListener((async a=>{r.isEqual(a)||(await DS(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function bT(s,e){s.asyncQueue.verifyOperationInProgress();const t=await RM(s);oe(Vs,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((r=>mT(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,a)=>mT(e.remoteStore,a))),s._onlineComponents=e}async function RM(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){oe(Vs,"Using user provided OfflineComponentProvider");try{await Zp(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ie.FAILED_PRECONDITION||a.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Yo("Error using user provided cache. Falling back to memory cache: "+t),await Zp(s,new uc)}}else oe(Vs,"Using default OfflineComponentProvider"),await Zp(s,new SM(void 0));return s._offlineComponents}async function tA(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(oe(Vs,"Using user provided OnlineComponentProvider"),await bT(s,s._uninitializedComponentsProvider._online)):(oe(Vs,"Using default OnlineComponentProvider"),await bT(s,new cc))),s._onlineComponents}function CM(s){return tA(s).then((e=>e.syncEngine))}async function NM(s){const e=await tA(s),t=e.eventManager;return t.onListen=aM.bind(null,e.syncEngine),t.onUnlisten=lM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=oM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=uM.bind(null,e.syncEngine),t}function DM(s,e,t={}){const r=new wi;return s.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const v=new xM({next:S=>{v.Nu(),c.enqueueAndForget((()=>WO(l,E)));const N=S.docs.has(d);!N&&S.fromCache?g.reject(new ge(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&S.fromCache&&p&&p.source==="server"?g.reject(new ge(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),E=new tM(_d(d.path),v,{includeMetadataChanges:!0,Ka:!0});return JO(l,E)})(await NM(s),s.asyncQueue,e,t,r))),r.promise}function VM(s,e){const t=new wi;return s.asyncQueue.enqueueAndForget((async()=>cM(await CM(s),e,t))),t.promise}function nA(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const OM="ComponentProvider",ET=new Map;function MM(s,e,t,r,a){return new t4(s,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,nA(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,r)}const kM="firestore.googleapis.com",TT=!0;class wT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kM,this.ssl=TT}else this.host=e.host,this.ssl=e.ssl??TT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_S;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<TS)throw new ge(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nA(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ge(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ge(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ge(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rA{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new dV;switch(r.type){case"firstParty":return new gV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=ET.get(t);r&&(oe(OM,"Removing Datastore"),ET.delete(t),r.terminate())})(this),Promise.resolve()}}class Gy{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Gy(this.firestore,e,this._query)}}class Yt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yt(this.firestore,e,this._key)}toJSON(){return{type:Yt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(bc(t,Yt._jsonSchema))return new Yt(e,r||null,new pe(lt.fromString(t.referencePath)))}}Yt._jsonSchemaVersion="firestore/documentReference/1.0",Yt._jsonSchema={type:Bt("string",Yt._jsonSchemaVersion),referencePath:Bt("string")};class hc extends Gy{constructor(e,t,r){super(e,t,_d(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yt(this.firestore,null,new pe(e))}withConverter(e){return new hc(this.firestore,e,this._path)}}function ST(s,e,...t){if(s=vr(s),arguments.length===1&&(e=sy.newId()),TV("doc","path",e),s instanceof rA){const r=lt.fromString(e,...t);return dE(r),new Yt(s,null,new pe(r))}{if(!(s instanceof Yt||s instanceof hc))throw new ge(ie.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(lt.fromString(e,...t));return dE(r),new Yt(s.firestore,s instanceof hc?s.converter:null,new pe(r))}}const AT="AsyncQueue";class xT{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new BS(this,"async_queue_retry"),this._c=()=>{const r=If();r&&oe(AT,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=If();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=If();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new wi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ms(e))throw e;oe(AT,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Nt("INTERNAL UNHANDLED ERROR: ",IT(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Ly.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&_e(47125,{Pc:IT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function IT(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Ky extends rA{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new xT,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xT(e),this._firestoreClient=void 0,await e}}}function PM(s,e,t){t||(t=qf);const r=Qg(s,"firestore");if(r.isInitialized(t)){const a=r.getImmediate({identifier:t}),l=r.getOptions(t);if(Ca(l,e))return a;throw new ge(ie.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ge(ie.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<TS)throw new ge(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&pl(e.host)&&u1(e.host),r.initialize({options:e,instanceIdentifier:t})}function iA(s){if(s._terminated)throw new ge(ie.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||LM(s),s._firestoreClient}function LM(s){const e=s._freezeSettings(),t=MM(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new IM(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(s._componentsProvider))}class Wn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wn(Dt.fromBase64String(e))}catch(t){throw new ge(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Wn(Dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Wn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bc(e,Wn._jsonSchema))return Wn.fromBase64String(e.bytes)}}Wn._jsonSchemaVersion="firestore/bytes/1.0",Wn._jsonSchema={type:Bt("string",Wn._jsonSchemaVersion),bytes:Bt("string")};class sA{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class aA{constructor(e){this._methodName=e}}class $r{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:$r._jsonSchemaVersion}}static fromJSON(e){if(bc(e,$r._jsonSchema))return new $r(e.latitude,e.longitude)}}$r._jsonSchemaVersion="firestore/geoPoint/1.0",$r._jsonSchema={type:Bt("string",$r._jsonSchemaVersion),latitude:Bt("number"),longitude:Bt("number")};class _r{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:_r._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bc(e,_r._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new _r(e.vectorValues);throw new ge(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_r._jsonSchemaVersion="firestore/vectorValue/1.0",_r._jsonSchema={type:Bt("string",_r._jsonSchemaVersion),vectorValues:Bt("object")};const zM=/^__.*__$/;class UM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ks(e,this.data,this.fieldMask,t,this.fieldTransforms):new vl(e,this.data,t,this.fieldTransforms)}}function oA(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{dataSource:s})}}class Qy{constructor(e,t,r,a,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Qy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return nd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(oA(this.dataSource)&&zM.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class jM{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ad(e)}createContext(e,t,r,a=!1){return new Qy({dataSource:e,methodName:t,targetDoc:r,path:bt.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function BM(s){const e=s._freezeSettings(),t=Ad(s._databaseId);return new jM(s._databaseId,!!e.ignoreUndefinedProperties,t)}function qM(s,e,t,r,a,l={}){const c=s.createContext(l.merge||l.mergeFields?2:0,e,t,a);hA("Data must be an object, but it was:",c,r);const d=uA(r,c);let p,g;if(l.merge)p=new Zn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const S=$y(e,E,t);if(!c.contains(S))throw new ge(ie.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);GM(v,S)||v.push(S)}p=new Zn(v),g=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,g=c.fieldTransforms;return new UM(new En(d),p,g)}function lA(s,e){if(cA(s=vr(s)))return hA("Unsupported field value:",e,s),uA(s,e);if(s instanceof aA)return(function(r,a){if(!oA(a.dataSource))throw a.createError(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,a){const l=[];let c=0;for(const d of r){let p=lA(d,a.childContextForArray(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(s,e)}return(function(r,a){if((r=vr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return E4(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=nt.fromDate(r);return{timestampValue:ll(a.serializer,l)}}if(r instanceof nt){const l=new nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ll(a.serializer,l)}}if(r instanceof $r)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wn)return{bytesValue:tS(a.serializer,r._byteString)};if(r instanceof Yt){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Ay(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof _r)return(function(c,d){const p=c instanceof _r?c.toArray():c;return{mapValue:{fields:{[my]:{stringValue:py},[nl]:{arrayValue:{values:p.map((v=>{if(typeof v!="number")throw d.createError("VectorValues must only contain numeric values.");return vy(d.serializer,v)}))}}}}}})(r,a);if(fS(r))return r._toProto(a.serializer);throw a.createError(`Unsupported field value: ${ay(r)}`)})(s,e)}function uA(s,e){const t={};return bw(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ja(s,((r,a)=>{const l=lA(a,e.childContextForField(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function cA(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof nt||s instanceof $r||s instanceof Wn||s instanceof Yt||s instanceof aA||s instanceof _r||fS(s))}function hA(s,e,t){if(!cA(t)||!rw(t)){const r=ay(t);throw r==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+r)}}function $y(s,e,t){if((e=vr(e))instanceof sA)return e._internalPath;if(typeof e=="string")return HM(s,e);throw nd("Field path arguments must be of type string or ",s,!1,void 0,t)}const FM=new RegExp("[~\\*/\\[\\]]");function HM(s,e,t){if(e.search(FM)>=0)throw nd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new sA(...e.split("."))._internalPath}catch{throw nd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function nd(s,e,t,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${r}`),c&&(p+=` in document ${a}`),p+=")"),new ge(ie.INVALID_ARGUMENT,d+s+p)}function GM(s,e){return s.some((t=>t.isEqual(e)))}class KM{convertValue(e,t="none"){switch(Cs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ri(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ja(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){const t=e.fields?.[nl].arrayValue?.values?.map((r=>yt(r.doubleValue)));return new _r(t)}convertGeoPoint(e){return new $r(yt(e.latitude),yt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=pd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ic(e));default:return null}}convertTimestamp(e){const t=Ii(e);return new nt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=lt.fromString(e);Te(hS(r),9688,{name:e});const a=new Oa(r.get(1),r.get(3)),l=new pe(r.popFirst(5));return a.isEqual(t)||Nt(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}class QM extends KM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yt(this.firestore,null,t)}}const RT="@firebase/firestore",CT="4.11.0";class fA{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $M(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field($y("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class $M extends fA{data(){return super.data()}}function YM(s,e,t){let r;return r=s?s.toFirestore(e):e,r}class XM{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=ek(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function JM(s){return new XM(s)}class WM{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=cc.provider,this._offlineComponentProvider={build:t=>new eA(t,e?.cacheSizeBytes,this.forceOwnership)}}}class ZM{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=cc.provider,this._offlineComponentProvider={build:t=>new AM(t,e?.cacheSizeBytes)}}}function ek(s){return new WM(s?.forceOwnership)}function tk(){return new ZM}class Pu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ra extends fA{constructor(e,t,r,a,l,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Rf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field($y("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ra._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ra._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ra._jsonSchema={type:Bt("string",Ra._jsonSchemaVersion),bundleSource:Bt("string","DocumentSnapshot"),bundleName:Bt("string"),bundle:Bt("string")};class Rf extends Ra{data(e={}){return super.data(e)}}class Yu{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Pu(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Rf(this._firestore,this._userDataWriter,r.key,r,new Pu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const p=new Rf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Pu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new Rf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Pu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,v=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:nk(d.type),doc:p,oldIndex:g,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Yu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=sy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function nk(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:s})}}Yu._jsonSchemaVersion="firestore/querySnapshot/1.0",Yu._jsonSchema={type:Bt("string",Yu._jsonSchemaVersion),bundleSource:Bt("string","QuerySnapshot"),bundleName:Bt("string"),bundle:Bt("string")};function rk(s){s=Lf(s,Yt);const e=Lf(s.firestore,Ky),t=iA(e);return DM(t,s._key).then((r=>ak(e,s,r)))}function ik(s,e,t){s=Lf(s,Yt);const r=Lf(s.firestore,Ky),a=YM(s.converter,e),l=BM(r);return sk(r,[qM(l,"setDoc",s._key,a,s.converter!==null,t).toMutation(s._key,Mn.none())])}function sk(s,e){const t=iA(s);return VM(t,e)}function ak(s,e,t){const r=t.docs.get(e._key),a=new QM(s);return new Ra(s,a,e._key,r,new Pu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){hV(gl),Qo(new Na("firestore",((r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new Ky(new mV(r.getProvider("auth-internal")),new yV(c,r.getProvider("app-check-internal")),n4(c,a),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),xs(RT,CT,e),xs(RT,CT,"esm2020")})();const ok={apiKey:"AIzaSyBZncs5t7a9dDcSFBWDI2q3SDlf2E5j8V0",authDomain:"permis-online-sync.firebaseapp.com",projectId:"permis-online-sync",storageBucket:"permis-online-sync.firebasestorage.app",messagingSenderId:"653028638132",appId:"1:653028638132:web:028b727230365733a846e1"},dA=g1(ok),ws=uV(dA),NT=PM(dA,{localCache:JM({tabManager:tk()})}),mA=new Hr;mA.addScope("repo");const lk=()=>_D(ws,mA),uk=()=>WN(ws),ck=({progress:s,themesData:e,onBack:t,onReset:r,instantFeedback:a,onToggleInstantFeedback:l,autoPlayAudio:c,onToggleAutoPlayAudio:d})=>{const p=Ua(),[g,v]=U.useState(!1),[E,S]=U.useState(!1),N=ee=>{const ye=ee.bestScore!==void 0?ee.bestScore:ee.score||0,xe=ee.totalQuestions!==void 0?ee.totalQuestions:ee.total||0;return{score:ye,total:xe}},K=Object.entries(s).filter(([ee])=>ee!=="metadata").map(([,ee])=>ee),q=K.length,L=K.reduce((ee,ye)=>{const{score:xe,total:V}=N(ye);return{bestScore:ee.bestScore+xe,totalQuestions:ee.totalQuestions+V}},{bestScore:0,totalQuestions:0}),ne=L.bestScore,J=L.totalQuestions,Z=J>0?Math.round(ne/J*100):0,le=J-ne,fe=(e.sections||[]).flatMap(ee=>ee.items||ee.themes||[]).filter(ee=>ee&&ee.id&&ee.id!=="metadata"&&s[ee.id]),ce=g?fe.filter(ee=>{const{score:ye,total:xe}=N(s[ee.id]);return ye<xe}):fe,[w,A]=U.useState(()=>localStorage.getItem("groq_api_key")||""),[R,M]=U.useState(ws.currentUser),[O,k]=U.useState(!1);U.useEffect(()=>{const ee=ws.onAuthStateChanged(ye=>{M(ye)});return()=>ee()},[]);const C=async()=>{try{S(!0);const ee=await lk(),xe=Hr.credentialFromResult(ee).accessToken;xe&&localStorage.setItem("github_token",xe)}catch(ee){console.error("Login failed:",ee),alert("Erreur de connexion : "+ee.message)}finally{S(!1)}},Ae=async()=>{try{await uk(),localStorage.removeItem("github_token")}catch(ee){console.error("Logout failed:",ee)}},je=()=>{w?localStorage.setItem("groq_api_key",w):localStorage.removeItem("groq_api_key"),alert("Cl IA sauvegarde !")},j=async ee=>{S(!0);try{let ye=[];try{ye=(await rg(ee.file)).questions||[]}catch{ye=(await(await fetch(`data/${ee.file}`)).json()).questions||[]}if(ye.length===0){alert("Impossible de charger les questions pour la rvision.");return}const V=s[ee.id].answers||[],X=[];if(V.length>0&&V.forEach(he=>{if(he&&he.isCorrect===!1){const se=ye.find(ue=>ue.id==he.questionId);se&&X.push({...se,originalThemeId:ee.id,sourceFile:ee.file})}}),X.length===0){alert("Erreur: Impossible de retrouver les questions.");return}p("/quiz/review",{state:{questions:X,title:`Rvision: ${ee.name}`,isReview:!0}})}catch(ye){console.error("Erreur rvision:",ye),alert("Erreur lors du chargement de la rvision.")}finally{S(!1)}},ae=async()=>{S(!0);try{const ee=[],ye=fe.filter(V=>{const{score:X,total:he}=N(s[V.id]);return X<he});if(ye.length===0){alert("Aucune faute  rviser !"),S(!1);return}for(const V of ye){let X=[];try{X=(await rg(V.file)).questions||[]}catch{X=(await(await fetch(`data/${V.file}`)).json()).questions||[]}const se=s[V.id].answers||[];se.length>0&&se.forEach(ue=>{if(ue&&ue.isCorrect===!1){const Ce=X.find(ze=>ze.id==ue.questionId);Ce&&ee.push({q:Ce,a:ue,idx:ee.length,themeId:V.id,sourceFile:V.file})}})}if(ee.length===0){alert("Aucune erreur trouve dans les sauvegardes.");return}const xe=ee.map(V=>({...V.q,originalThemeId:V.themeId,sourceFile:V.sourceFile}));p("/quiz/review",{state:{questions:xe,title:"Rvision des fautes (Global)",isReview:!0}})}catch(ee){console.error(ee),alert("Erreur lors de la prparation de la rvision globale.")}finally{S(!1)}};return E?x.jsx("div",{className:"page container flex items-center justify-center h-screen",children:"Chargement de la rvision..."}):x.jsxs("div",{className:"page container animate-fade-in",style:{maxWidth:"1200px"},children:[x.jsx("div",{className:"mb-6",children:x.jsxs("button",{onClick:t,className:"btn-ghost flex items-center gap-2",children:[x.jsx(sd,{size:20})," Retour"]})}),x.jsxs("div",{className:"profile-stats-grid",children:[x.jsxs("div",{className:"stat-card",children:[x.jsx("div",{className:"stat-icon primary",children:x.jsx(ng,{size:24})}),x.jsxs("div",{className:"stat-content",children:[x.jsx("div",{className:"stat-label",children:"Moyenne Globale"}),x.jsxs("div",{className:"stat-value",children:[Z,"%"]})]})]}),x.jsxs("div",{className:"stat-card",children:[x.jsx("div",{className:"stat-icon info",children:x.jsx(Du,{size:24})}),x.jsxs("div",{className:"stat-content",children:[x.jsx("div",{className:"stat-label",children:"Quiz Termins"}),x.jsx("div",{className:"stat-value",children:q})]})]}),x.jsxs("div",{className:"stat-card relative overflow-hidden",children:[x.jsx("div",{className:"stat-icon danger",children:x.jsx(p2,{size:24})}),x.jsxs("div",{className:"stat-content z-10 relative w-full",children:[x.jsx("div",{className:"stat-label",children:"Fautes  revoir"}),x.jsx("div",{className:"stat-value",children:le}),x.jsxs("div",{className:"flex flex-row items-center justify-between w-full mt-1",children:[x.jsxs("div",{className:"stat-sub",children:[le," erreurs au total"]}),le>0&&x.jsxs("button",{onClick:ae,className:"btn-primary btn-sm flex items-center gap-1 px-3 py-2",children:[x.jsx(kp,{size:16})," Rviser"]})]})]})]})]}),x.jsxs("div",{className:"profile-content-grid",children:[x.jsxs("div",{className:"card p-6 bg-surface-1 border border-border",children:[x.jsxs("div",{className:"flex items-center justify-between mb-6",children:[x.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[x.jsx(HR,{size:20})," Historique"]}),x.jsxs("button",{onClick:()=>v(!g),className:`btn-sm flex items-center gap-2 ${g?"btn-danger":"btn-ghost"}`,children:[x.jsx(KR,{size:16})," ",g?"Tout voir":"Voir les fautes"]})]}),x.jsx("div",{className:"theme-history-list",children:ce.length===0?x.jsx("div",{className:"text-center text-muted py-8",children:g?"Aucune faute trouve ! Bravo ! ":"Aucun historique disponible. Commencez un quiz !"}):ce.map(ee=>{const ye=s[ee.id],{score:xe,total:V}=N(ye),X=V>0?Math.round(xe/V*100):0;let he;return X===100?he="text-success":X>=50?he="text-warning":he="text-danger",x.jsxs("div",{className:"theme-history-item flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("div",{className:"font-medium",children:ee.name}),x.jsxs("div",{className:`font-mono font-bold ${he}`,children:[xe," / ",V," (",X,"%)"]})]}),xe<V&&x.jsxs("button",{onClick:()=>j(ee),className:"btn-ghost text-primary btn-sm flex items-center gap-1 hover:bg-primary/10",children:[x.jsx(kp,{size:14})," Rviser"]})]},ee.id)})}),Object.keys(s).length>0&&x.jsx("div",{className:"mt-8 pt-6 border-t border-border",children:O?x.jsxs("div",{className:"p-4 border border-danger rounded bg-danger/10 animate-fade-in",children:[x.jsx("p",{className:"text-center mb-3 text-danger font-medium",children:"tes-vous sr ?"}),x.jsxs("div",{className:"flex gap-3",children:[x.jsx("button",{onClick:()=>k(!1),className:"btn-ghost flex-1 text-sm",children:"Annuler"}),x.jsx("button",{onClick:()=>{r(),k(!1)},className:"btn-primary bg-danger border-danger hover:bg-danger/90 flex-1 text-white text-sm",children:"Confirmer"})]})]}):x.jsxs("button",{onClick:()=>k(!0),className:"btn-ghost text-danger w-full flex items-center justify-center gap-2",children:[x.jsx(Ob,{size:16})," Rinitialiser la progression"]})})]}),x.jsxs("div",{className:"settings-list",children:[x.jsxs("div",{className:"card p-6 bg-surface-1 border border-border",children:[x.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[x.jsx(l2,{size:20})," Prfrences"]}),x.jsxs("div",{className:"flex items-center justify-between mb-6",children:[x.jsxs("div",{children:[x.jsx("div",{className:"font-semibold",children:"Correction Instantane"}),x.jsx("div",{className:"text-sm text-muted",children:"Voir la rponse juste aprs le clic."})]}),x.jsxs("label",{className:"switch",children:[x.jsx("input",{type:"checkbox",checked:a,onChange:l}),x.jsx("span",{className:"slider round"})]})]}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("div",{className:"font-semibold",children:"Lecture Audio Auto"}),x.jsx("div",{className:"text-sm text-muted",children:"Lire la question automatiquement."})]}),x.jsxs("label",{className:"switch",children:[x.jsx("input",{type:"checkbox",checked:c,onChange:d}),x.jsx("span",{className:"slider round"})]})]})]}),x.jsxs("div",{className:"card p-6 border-2 border-primary/20 bg-surface-1",children:[x.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2 text-primary",children:[x.jsx(XR,{size:20})," Mode Contributeur"]}),x.jsxs("div",{className:"mb-5",children:[x.jsx("label",{className:"block mb-1.5 font-semibold text-sm",children:"Groq API Key"}),x.jsxs("p",{className:"text-xs text-muted mb-2",children:["Requise pour corrections IA (Llama 3). ",x.jsx("a",{href:"https://console.groq.com/keys",target:"_blank",rel:"noreferrer",className:"text-primary underline",children:"Obtenir une cl"})]}),x.jsx("input",{type:"password",className:"input w-full",value:w,onChange:ee=>A(ee.target.value),placeholder:"gsk_..."})]}),x.jsxs("div",{className:"mb-6",children:[x.jsxs("label",{className:"block mb-1.5 font-semibold text-sm flex items-center gap-2",children:[x.jsx(kp,{size:16})," Synchronisation Cloud"]}),x.jsx("p",{className:"text-xs text-muted mb-4",children:"Sauvegardez votre progression automatiquement dans le cloud pour la retrouver sur tous vos appareils."}),R?x.jsx("div",{className:"space-y-3",children:x.jsxs("div",{className:"flex items-center justify-between p-3 bg-success/10 rounded-lg text-success text-sm border border-success/20",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[R.photoURL?x.jsx("img",{src:R.photoURL,alt:"",style:{width:"32px",height:"32px",borderRadius:"50%"}}):x.jsx(e1,{size:24}),x.jsxs("div",{className:"flex flex-col",children:[x.jsx("span",{className:"font-bold",children:R.displayName||R.email}),x.jsx("span",{className:"text-[10px] opacity-70",children:"Connect via Firebase"})]})]}),x.jsx("button",{onClick:Ae,className:"p-1 hover:bg-danger/20 rounded-full text-danger transition-colors",title:"Se dconnecter",children:x.jsx(Ob,{size:18})})]})}):x.jsxs("button",{onClick:C,className:"btn-secondary w-full flex items-center justify-center gap-2 py-3 border-2 border-primary/20 hover:border-primary/50 transition-all",children:[x.jsx($R,{size:20})," Se connecter avec GitHub"]})]}),x.jsxs("button",{onClick:je,className:"btn-primary w-full flex items-center justify-center gap-2",children:[x.jsx(i2,{size:18})," Enregistrer les cls"]})]})]})]}),x.jsx("div",{className:"h-10"})]})},hk=({progress:s,themesData:e,onReset:t,instantFeedback:r,onToggleInstantFeedback:a,autoPlayAudio:l,onToggleAutoPlayAudio:c,toggleTheme:d,isDarkMode:p})=>{const g=Ua();return x.jsxs(x.Fragment,{children:[x.jsx(Hg,{showProfileButton:!1,toggleTheme:d,isDarkMode:p}),x.jsx(ck,{progress:s,themesData:e,onBack:()=>g("/"),onReset:t,instantFeedback:r,onToggleInstantFeedback:a,autoPlayAudio:l,onToggleAutoPlayAudio:c})]})},fk='.quiz-next-row{display:grid;grid-template-columns:1fr 1.2fr;gap:18px;margin-top:18px}@media(max-width:880px){.quiz-next-row{grid-template-columns:1fr}}*,*:before,*:after{box-sizing:border-box}html:focus-within{scroll-behavior:smooth}body,#root{height:100%;overflow-x:hidden}body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,Arial,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,sans-serif;line-height:1.5;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}img,picture,video,canvas,svg{display:block;max-width:100%}input,button,textarea,select{font:inherit}:root{--bg: #0b1020;--bg-elev: #121832;--surface: #151b3a;--surface-2: #1a2248;--text: #e6e9f5;--muted: #aab0c0;--primary: #0ea5e9;--primary-700: #0284c7;--success: #22c55e;--warning: #f59e0b;--danger: #ef4444;--border: #273056;--radius: 12px;--space-1: 6px;--space-2: 10px;--space-3: 14px;--space-4: 18px;--space-5: 24px;--space-6: 32px}[data-theme=light]{--bg: #f7f8fb;--bg-elev: #ffffff;--surface: #ffffff;--surface-2: #f2f4f8;--text: #0f172a;--muted: #475569;--border: #e2e8f0}@media(prefers-color-scheme:light){:root:not([data-theme]){color-scheme:light}}@media(prefers-color-scheme:dark){:root:not([data-theme]){color-scheme:dark}}body{color:var(--text);background:var(--bg);background-attachment:fixed;transition:background-color .3s ease,color .3s ease}#root{display:grid;grid-template-rows:auto 1fr}.container{width:min(1250px,calc(100% - 32px));margin-inline:auto;padding:var(--space-5) 0 var(--space-6)}@media(max-width:600px){.container{padding:var(--space-3) 0 var(--space-4);width:min(1250px,calc(100% - 16px))}}h1,h2,h3{margin:0 0 var(--space-3);letter-spacing:-.01em}h1{font-size:clamp(26px,2.4vw,36px);font-weight:700}h2{font-size:clamp(20px,2vw,28px);font-weight:600}p{margin:0 0 var(--space-3);color:var(--muted)}.card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)}button{--bpad-x: 14px;--bpad-y: 10px;appearance:none;border:1px solid var(--border);background:var(--surface);color:var(--text);padding:var(--bpad-y) var(--bpad-x);border-radius:8px;cursor:pointer;transition:background .15s ease,border-color .15s ease}button:hover{background:var(--bg-elev);border-color:var(--muted)}button:active{background:var(--surface-2)}.btn-primary{background:var(--primary);border-color:var(--primary);color:#fff}.btn-primary:hover{background:var(--primary-700);border-color:var(--primary-700)}.btn-ghost{background:transparent;border-color:transparent;color:var(--muted)}.btn-ghost:hover{color:var(--text);background:var(--surface-2)}.btn-danger{border-color:var(--danger);color:#fff;background:var(--danger)}.btn-danger:hover{background:color-mix(in oklab,var(--danger) 80%,black)}.input,input[type=text],input[type=search]{width:100%;padding:12px 14px;border-radius:8px;border:1px solid var(--border);background:var(--bg-elev);color:var(--text);outline:none}.input::placeholder,input::placeholder{color:var(--muted)}input:focus{border-color:var(--primary)}input[type=checkbox]{accent-color:var(--primary)}.page{padding-top:var(--space-6)}.page .page-title{margin-bottom:var(--space-2)}.search{margin:var(--space-3) 0 var(--space-4)}.search .input{max-width:520px}.actions{display:flex;gap:10px;align-items:center;margin-bottom:var(--space-3)}.theme-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px}.theme-btn{width:100%;display:flex;flex-direction:column;align-items:flex-start;padding:14px 16px;text-align:left;gap:4px}.theme-btn .theme-name{font-weight:600}.theme-btn .theme-meta{color:var(--muted);font-size:13px}.quiz{width:min(1250px,calc(100% - 32px));margin:24px auto}@media(max-width:600px){.quiz{width:min(1250px,calc(100% - 16px));margin:16px auto}}.quiz-topbar{display:flex;align-items:center;gap:12px;margin-bottom:var(--space-3)}.quiz-topbar .exit-btn{padding-left:10px;padding-right:10px}.toggle{display:inline-flex;align-items:center;gap:8px;padding:8px 10px;border-radius:8px;color:var(--muted);border:1px solid transparent}.toggle:hover{border-color:var(--border);background:var(--surface);color:var(--text)}.toggle span{font-size:14px}.question-card{padding:var(--space-5);display:flex;flex-direction:column}@media(max-width:600px){.question-card{padding:var(--space-3)}}.question-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:var(--space-3);order:1}.question-title{font-weight:700;color:var(--text)}.question-progress{color:var(--muted);font-weight:600}.question-main{display:grid;grid-template-columns:1fr 1.5fr;gap:18px;order:2}@media(max-width:880px){.question-main{grid-template-columns:1fr;order:3}}.question-image{border-radius:var(--radius);overflow:hidden;border:1px solid var(--border);background:var(--surface);min-height:180px;display:grid;place-items:center}@media(max-width:600px){.question-image{min-height:140px}}.question-image img{width:100%;height:100%;object-fit:cover;transform:scale(1.08)}.question-image.placeholder{background:var(--surface-2)}.question-text{margin-bottom:var(--space-3);padding:0}.question-text-inner{font-size:1.35rem;font-weight:700;line-height:1.4}@media(max-width:600px){.question-text-inner{font-size:1.1rem}}.answers{display:grid;gap:10px}.answer-btn{display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:16px;text-align:left;padding:12px 16px;border-radius:12px;background:var(--surface);border:2px solid var(--border);color:var(--text);transition:all .2s ease}@media(max-width:600px){.answer-btn{padding:10px 14px;gap:12px;border-radius:10px}}.answer-btn:hover{background:var(--bg-elev);border-color:var(--muted)}.answer-key{display:grid;place-items:center;width:32px;height:32px;border-radius:8px;background:var(--surface-2);color:var(--muted);font-weight:700;font-size:16px;transition:all .2s ease}.answer-text{font-size:1.05rem;font-weight:500}.answer-check{color:var(--success)}@keyframes pop{0%{transform:scale(1)}50%{transform:scale(1.02)}to{transform:scale(1)}}.answer-btn:active{transform:scale(.97)}.answer-btn.correct,.answer-btn.correct.selected{border-color:var(--success);background:#22c55e26;animation:pop .2s cubic-bezier(.175,.885,.32,1.275)}.answer-btn.correct .answer-key,.answer-btn.correct.selected .answer-key{background:var(--success);color:#fff}.answer-btn.correct .answer-text{color:var(--success);font-weight:600}.answer-btn.incorrect{border-color:var(--danger);background:#ef444426;animation:pop .2s cubic-bezier(.175,.885,.32,1.275)}.answer-btn.incorrect .answer-key{background:var(--danger);color:#fff}.answer-btn.selected{border-color:var(--primary);background:#0ea5e926;animation:pop .2s cubic-bezier(.175,.885,.32,1.275)}.answer-btn.selected .answer-key{background:var(--primary);color:#fff}.answer-btn.selected{border-color:var(--primary);background:color-mix(in oklab,var(--primary) 10%,var(--surface))}.answer-btn.dimmed{opacity:.5}.number-wrap{display:grid;gap:8px}.number-field{display:flex;gap:8px;align-items:center}.number-input{flex:1}.number-submit{min-width:64px}.number-field.selected .number-input{border-color:var(--primary)}.number-field.correct .number-input{border-color:var(--success);background:color-mix(in oklab,var(--success) 10%,var(--bg-elev))}.number-field.incorrect .number-input{border-color:var(--danger);background:color-mix(in oklab,var(--danger) 10%,var(--bg-elev))}.number-feedback{color:var(--muted);font-size:14px}.dots-bar{display:grid;place-items:center;margin-top:var(--space-3);color:var(--muted)}.dots{letter-spacing:6px}.explanation{margin-top:var(--space-4);background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:var(--space-4)}.explanation-title{font-weight:600;margin-bottom:6px}.explanation-text{color:var(--muted)}.results{width:min(900px,calc(100% - 32px));margin:24px auto}.results .results-actions{display:flex;gap:10px;margin:12px 0 var(--space-3)}.review .review-item{padding:12px 0}.review hr{border:none;height:1px;background:var(--border);margin:12px 0}.mt-1{margin-top:var(--space-1)}.mt-2{margin-top:var(--space-2)}.mt-3{margin-top:var(--space-3)}.mt-4{margin-top:var(--space-4)}.mt-5{margin-top:var(--space-5)}.muted{color:var(--muted)}.countdown{margin-top:var(--space-3)}.countdown-track{position:relative;height:6px;border-radius:999px;background:var(--surface-2);overflow:hidden}.countdown-fill{position:absolute;inset:0 auto 0 0;width:100%;background:var(--primary);transition:width .1s linear}.question-card.timed-out .answers .answer-btn{opacity:.5;filter:grayscale(1)}.question-card.timed-out .answers .answer-btn:hover{background:var(--surface);border-color:var(--border)}.question-card.timed-out .number-field{opacity:.6}::-webkit-scrollbar{width:10px;height:10px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:var(--border);border-radius:5px;border:2px solid var(--bg)}::-webkit-scrollbar-thumb:hover{background:var(--muted)}@keyframes fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in{animation:fadeIn .3s ease-out forwards}.quiz-nav-buttons{display:flex;justify-content:flex-end;gap:16px;align-items:center;margin-top:20px;order:3}@media(max-width:880px){.quiz-nav-buttons{justify-content:space-between;flex-wrap:wrap;order:2;margin-top:0;margin-bottom:20px}}@media(max-width:600px){.quiz-nav-buttons{margin-top:12px;gap:10px}}.btn-explanation{display:flex;align-items:center;gap:8px;padding:10px 20px;border-radius:8px;font-size:1rem;font-weight:500;cursor:pointer;background:var(--surface-2);color:var(--primary);border:1px solid var(--border)}.btn-explanation:hover{background:var(--bg-elev);border-color:var(--primary)}.btn-next{padding:10px 24px;font-size:1rem;font-weight:600;background:var(--surface);color:var(--text);border:1px solid var(--border)}.btn-next:hover{background:var(--bg-elev);border-color:var(--muted)}.profile-stats-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;grid-auto-flow:dense;margin-bottom:40px}@media(max-width:768px){.profile-stats-grid{grid-template-columns:1fr}}.stat-card{background:var(--surface-2);border-radius:var(--radius);padding:24px;display:flex;align-items:center;gap:20px}.stat-icon{width:56px;height:56px;border-radius:16px;display:grid;place-items:center;flex-shrink:0}.stat-icon.primary{background:#0ea5e926;color:var(--primary)}.stat-icon.info{background:#3b82f626;color:#60a5fa}.stat-icon.danger{background:#ef444426;color:var(--danger)}.stat-content{flex:1}.stat-label{font-size:.9rem;color:var(--muted);margin-bottom:4px;font-weight:500}.stat-value{font-size:2.2rem;font-weight:700;line-height:1;color:var(--text)}.stat-sub{font-size:.85rem;color:var(--muted);margin-top:4px}.profile-content-grid{display:grid;grid-template-columns:1fr 380px;gap:40px;align-items:start}@media(max-width:1024px){.profile-content-grid{grid-template-columns:1fr}}.theme-history-list{display:flex;flex-direction:column;gap:12px}.theme-history-item{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;background:var(--surface-2);border-radius:var(--radius);transition:transform .2s ease}.theme-history-item:hover{transform:translate(4px);background:var(--bg-elev)}.settings-list{display:flex;flex-direction:column;gap:24px}.switch{position:relative;display:inline-block;width:44px;height:24px}.switch input{opacity:0;width:0;height:0}.slider{position:absolute;cursor:pointer;inset:0;background-color:var(--surface-2);border:1px solid var(--border);transition:.4s;border-radius:34px}.slider:before{position:absolute;content:"";height:18px;width:18px;left:2px;bottom:2px;background-color:var(--muted);transition:.4s;border-radius:50%}input:checked+.slider{background-color:var(--primary);border-color:var(--primary)}input:checked+.slider:before{transform:translate(20px);background-color:#fff}.flex{display:flex}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-between{justify-content:space-between}.justify-center{justify-content:center}.gap-2{gap:8px}.gap-3{gap:12px}.gap-4{gap:16px}.gap-6{gap:24px}.gap-8{gap:32px}.p-4{padding:16px}.p-5{padding:20px}.p-6{padding:24px}.p-8{padding:32px}.pt-6{padding-top:24px}.m-0{margin:0}.mb-1{margin-bottom:4px}.mb-2{margin-bottom:8px}.mb-3{margin-bottom:12px}.mb-4{margin-bottom:16px}.mb-5{margin-bottom:20px}.mb-6{margin-bottom:24px}.mt-8{margin-top:32px}.ml-2{margin-left:8px}.w-full{width:100%}.h-10{height:40px}.text-center{text-align:center}.text-sm{font-size:.875rem}.text-xs{font-size:.75rem}.text-xl{font-size:1.25rem}.text-2xl{font-size:1.5rem}.text-3xl{font-size:1.875rem}.font-bold{font-weight:700}.font-semibold{font-weight:600}.font-medium{font-weight:500}.border-none{border:none}.border-t{border-top:1px solid var(--border)}.text-primary{color:var(--primary)}.text-danger{color:var(--danger)}.text-success{color:var(--success)}.text-warning{color:var(--warning)}.text-muted{color:var(--muted)}.text-white{color:#fff}.underline{text-decoration:underline}.block{display:block}.toast-notification{position:fixed;top:24px;left:50%;transform:translate(-50%);background:var(--surface-1);border:1px solid var(--border);border-left:4px solid var(--success);padding:16px 20px;border-radius:8px;box-shadow:0 4px 12px #00000026;display:flex;align-items:center;gap:12px;z-index:9999;animation:slideDown .3s ease-out forwards;max-width:90%;width:max-content}.toast-notification a{color:var(--primary);text-decoration:underline;font-weight:500}@keyframes slideDown{0%{transform:translate(-50%,-100%);opacity:0}to{transform:translate(-50%);opacity:1}}.correction-toolbar{position:absolute;top:16px;right:16px;z-index:50;display:flex;align-items:center;gap:8px;animation:fadeIn .3s ease-out}.correction-badge{padding:6px 12px;border-radius:9999px;background:color-mix(in sRGB,var(--warning) 10%,transparent);border:1px solid color-mix(in sRGB,var(--warning) 20%,transparent);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);display:flex;align-items:center;gap:8px;box-shadow:0 4px 6px -1px #0000001a}.correction-badge span{font-size:10px;font-weight:700;color:var(--warning);text-transform:uppercase;letter-spacing:.1em}.correction-badge-dot{width:6px;height:6px;border-radius:50%;background-color:var(--warning);animation:pulse 2s cubic-bezier(.4,0,.6,1) infinite}@keyframes pulse{0%,to{opacity:1}50%{opacity:.5}}.correction-actions{display:flex;align-items:center;gap:4px;padding:4px;border-radius:9999px;background:#18181be6;border:1px solid rgba(255,255,255,.1);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);box-shadow:0 10px 15px -3px #0000001a}.btn-cancel{padding:6px 12px;border-radius:9999px;font-size:12px;font-weight:500;color:#a1a1aa;background:transparent;border:none;transition:all .2s;cursor:pointer}.btn-cancel:hover{color:#fff;background:#ffffff1a}.btn-save{padding:6px 12px;border-radius:9999px;font-size:12px;font-weight:700;color:#000;background:var(--warning);border:none;transition:all .2s;cursor:pointer}.btn-save:hover{filter:brightness(1.1);box-shadow:0 0 15px color-mix(in sRGB,var(--warning),transparent 60%)}.btn-save:disabled{opacity:.5;cursor:not-allowed}.correction-floating-bar{position:absolute;bottom:16px;left:0;right:0;margin:0 auto;width:fit-content;max-width:90%;z-index:40;animation:slideUp .5s ease-out}@keyframes slideUp{0%{transform:translateY(10px);opacity:0}to{transform:translateY(0);opacity:1}}.correction-input-wrapper{position:relative;background:#18181be6;border:1px solid rgba(255,255,255,.1);border-radius:12px;backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);box-shadow:0 20px 25px -5px #0000001a;display:flex;flex-direction:column}.correction-explanation-input{width:400px;max-width:100%;background:transparent;border:none;color:#ffffffe6;font-size:12px;padding:12px;outline:none;resize:none;border-radius:12px;transition:all .2s;min-height:44px;font-family:inherit}.correction-explanation-input:focus{box-shadow:0 0 0 1px color-mix(in sRGB,var(--warning) 20%,transparent)}.correction-question-input{width:100%;background:transparent;border:none;outline:none;padding:0;color:#fff;font-weight:500;font-size:1.35rem;line-height:1.4;resize:none;overflow:hidden;text-shadow:0 0 20px rgba(0,0,0,.5);font-family:inherit}.correction-question-container{position:relative}.correction-underline{height:2px;width:0;background:linear-gradient(90deg,transparent,var(--warning),transparent);margin:4px auto 0;transition:width .5s ease}.correction-question-container:hover .correction-underline{width:100%}.correction-answer-wrapper{flex:1;margin-left:4px;position:relative;display:flex;flex-direction:column}.correction-answer-input{width:100%;background:transparent;border:none;outline:none;color:#ffffffe6;font-weight:500;padding:4px 0;font-size:1.05rem;font-family:inherit}.correction-answer-input::placeholder{color:#fff3}.correction-answer-underline{height:1px;width:0;background:linear-gradient(90deg,transparent,var(--warning),transparent);transition:width .5s ease}.correction-answer-wrapper:hover .correction-answer-underline{width:100%}.correction-error-msg{position:absolute;top:-30px;left:0;right:0;text-align:center;color:var(--danger);font-size:10px;background:color-mix(in sRGB,var(--danger) 10%,transparent);border:1px solid color-mix(in sRGB,var(--danger) 20%,transparent);padding:2px 8px;border-radius:99px;width:fit-content;margin:0 auto;backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);display:flex;align-items:center;gap:4px}.correction-edit-expl-btn{background:#18181be6;border:1px solid rgba(255,255,255,.1);color:#ffffffe6;padding:8px 16px;border-radius:9999px;font-size:12px;font-weight:600;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);cursor:pointer;transition:all .2s;box-shadow:0 4px 6px -1px #0000001a;display:flex;align-items:center;gap:6px}.correction-edit-expl-btn:hover{background:#ffffff1a;transform:translateY(-1px)}.correction-toolbar-inline{display:flex;align-items:center;gap:8px;margin-left:auto}@media(max-width:640px){.correction-badge{display:none!important}.correction-toolbar-inline{gap:4px}.correction-actions{transform:scale(.9);transform-origin:right center}.question-header{flex-wrap:wrap;gap:8px}}@media(max-width:640px){.question-progress{font-size:12px}.question-progress span{font-size:10px;margin-left:4px;letter-spacing:0}.correction-actions{margin-left:0}.correction-toolbar-inline{width:100%;justify-content:flex-end;margin-top:4px}}',dk=({lessonFile:s,quizId:e,onBack:t,onStartQuiz:r,theme:a})=>{const[l,c]=Lu.useState(""),[d,p]=Lu.useState(!0);return Lu.useEffect(()=>{const g=async()=>{p(!0);try{const N=await(await fetch(`/permis-online-free/lecon/${s}`)).text(),q=new DOMParser().parseFromString(N,"text/html");q.documentElement.setAttribute("data-theme",a);const L=q.createElement("style");L.textContent=fk+`
                    /* Ensure text color is inherited everywhere */
                    body, p, h1, h2, h3, h4, h5, h6, li, td, span, div {
                        color: inherit;
                    }
                    /* Custom classes from lessons */
                    .box-yellow {
                        background-color: color-mix(in oklab, var(--warning) 10%, transparent);
                        border: 1px solid var(--warning);
                        padding: 15px;
                        border-radius: 8px;
                        margin: 15px 0;
                    }
                    .red, .text-red {
                        color: var(--danger) !important;
                    }
                    .subtitle {
                        color: var(--primary);
                        font-weight: 600;
                        margin-bottom: 5px;
                    }

                    .lesson-video {
                        width: 100%;
                        aspect-ratio: 16 / 9;
                        height: auto;
                        border-radius: 8px;
                        display: block;
                        margin: 20px 0;
                        border: none;
                    }

                    /* Scrollbar styling */
                    ::-webkit-scrollbar {
                        width: 10px;
                        height: 10px;
                    }
                    ::-webkit-scrollbar-track {
                        background: transparent;
                    }
                    ::-webkit-scrollbar-thumb {
                        background: var(--border);
                        border-radius: 5px;
                        border: 2px solid var(--bg);
                    }
                    ::-webkit-scrollbar-thumb:hover {
                        background: var(--muted);
                    }

                    img {
                        max-width: 100%;
                        height: auto;
                        display: inline-block;
                        border-radius: 8px;
                        margin-right: 4px;
                        vertical-align: middle;
                    }
                    /* Use specific styling for the layout tables */
                    .lesson-detail-table {
                        width: 100%;
                        border-collapse: separate;
                        border-spacing: 0 10px;
                    }
                    .lesson-detail-table td {
                        vertical-align: top;
                        padding: 10px;
                        background: color-mix(in oklab, var(--surface) 50%, transparent);
                        border-radius: 8px;
                    }
                    /* Force the image column (first column) to a fixed width container */
                    .lesson-detail-table td:first-child {
                        width: 280px;
                        min-width: 280px;
                        vertical-align: top;
                    }
                    /* Use flexbox on P tags to handle multiple images side-by-side in the first column */
                    .lesson-detail-table td:first-child p {
                        display: flex;
                        flex-wrap: wrap;
                        justify-content: center;
                        gap: 8px;
                        margin: 0 0 8px 0;
                    }
                    /* Images are flex items in first col, but inline-block elsewhere */
                    .lesson-detail-table img {
                        flex: 1 1 120px; 
                        max-width: 100%;
                        width: auto;
                        height: auto;
                        max-height: 180px; 
                        object-fit: contain;
                        background-color: transparent;
                        display: inline-block;
                        margin-right: 4px;
                    }
                    /* Clean up paragraphs with no images if needed, or links */
                    .lesson-detail-table td:first-child a {
                        display: contents; 
                    }
                    /* Sign tables (usually 3 columns) should not be forced */
                    .lesson-signs-3-columns td {
                        text-align: center;
                        padding: 10px;
                    }
                    .lesson-signs-3-columns img {
                        max-height: 150px;
                        width: auto;
                        margin: 0 auto;
                    }
                    
                    /* Body styling */
                    body {
                        max-width: 1100px;
                        margin: 0 auto;
                        padding: 20px;
                        background-color: var(--bg);
                        color: var(--text);
                        overflow-y: auto; /* Allow scrolling inside iframe body */
                    }

                    /* Mobile Responsive for Lesson Content */
                    @media (max-width: 600px) {
                        body {
                            padding: 12px;
                        }
                        .lesson-detail-table, .lesson-detail-table tbody, .lesson-detail-table tr, .lesson-detail-table td {
                            display: block;
                            width: 100% !important;
                            min-width: 0 !important;
                            box-sizing: border-box;
                        }
                        .lesson-detail-table td:first-child {
                            width: 100%;
                            min-width: 0;
                            margin-bottom: 15px;
                            border-bottom: 1px solid var(--border);
                            padding-bottom: 15px;
                        }
                        .lesson-detail-table img {
                            max-height: 200px;
                            width: auto;
                            margin: 0 auto;
                            display: block;
                        }
                        .lesson-detail-table td:first-child p {
                            justify-content: center;
                        }
                    }
                `,q.head.appendChild(L);const ne=q.body.getElementsByTagName("img");for(let w of ne){const A=w.getAttribute("src");A&&A.startsWith("uploads/")&&(w.src=`https://www.permisdeconduire-online.be/${A}`)}const J=q.body.getElementsByTagName("iframe");for(let w of J)w.setAttribute("allowfullscreen","true"),w.setAttribute("mozallowfullscreen","true"),w.setAttribute("webkitallowfullscreen","true"),w.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"),w.classList.contains("lesson-video")||w.classList.add("lesson-video");const le=Array.from(q.body.getElementsByTagName("h2")).find(w=>w.textContent.trim()==="Exercices"||w.textContent.trim()==="Les examens");if(le){const w=le.previousElementSibling;w&&w.tagName==="HR"&&w.remove();let A=le;for(;A;){const R=A.nextElementSibling;A.remove(),A=R}}const ce=Array.from(q.body.getElementsByTagName("a")).find(w=>w.textContent.includes("Retour  la page prcdente"));if(ce&&(ce.closest("div.align-center")||ce).remove(),e){const w=q.createElement("div");w.style.marginTop="40px",w.style.paddingTop="20px",w.style.borderTop="1px solid var(--border)",w.style.textAlign="center",w.style.marginBottom="60px";const A=q.createElement("button");A.textContent="Dmarrer le Quiz sur ce thme",A.style.backgroundColor="var(--primary)",A.style.color="white",A.style.border="none",A.style.padding="14px 28px",A.style.borderRadius="8px",A.style.fontSize="1.1rem",A.style.fontWeight="600",A.style.cursor="pointer",A.style.boxShadow="0 4px 12px rgba(var(--primary-rgb), 0.3)",A.setAttribute("onclick",`window.parent.postMessage({ type: 'START_QUIZ', quizId: '${e}' }, '*')`),w.appendChild(A),q.body.appendChild(w)}c(q.documentElement.outerHTML),p(!1)}catch(E){console.error("Failed to load lesson:",E),c("<p>Erreur lors du chargement de la leon.</p>"),p(!1)}},v=E=>{E.data&&E.data.type==="START_QUIZ"&&E.data.quizId===e&&r(e)};return window.addEventListener("message",v),g(),document.body.style.overflow="hidden",()=>{document.body.style.overflow="",window.removeEventListener("message",v)}},[s,a,e,r]),x.jsxs("div",{className:"lesson-viewer",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:100,backgroundColor:"var(--bg)",display:"flex",flexDirection:"column"},children:[x.jsxs("div",{className:"actions",style:{padding:"12px 20px",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",backgroundColor:"var(--surface)",gap:"16px"},children:[x.jsxs("button",{className:"btn-ghost",onClick:t,style:{border:"1px solid var(--border)",display:"flex",alignItems:"center",gap:"6px"},children:[x.jsx(sd,{size:16})," Retour"]}),x.jsx("span",{style:{fontWeight:600,fontSize:"1.1rem",flex:1},children:"Leon"})]}),x.jsxs("div",{style:{flex:1,display:"flex",overflow:"hidden",position:"relative"},children:[x.jsx("div",{style:{opacity:d?1:0,position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",transition:"opacity 0.2s"},children:"Chargement..."}),x.jsx("iframe",{srcDoc:l,title:"Leon",style:{width:"100%",height:"100%",border:"none",opacity:d?0:1,transition:"opacity 0.3s ease-in-out"}})]})]})},mk=({themeMode:s,sections:e})=>{const{lessonId:t}=FT(),r=Ua(),a=decodeURIComponent(t),l=Lu.useMemo(()=>{if(!e)return null;for(const c of e){const d=c.items.find(p=>p.lessonFile===a||p.file&&p.file.replace(".json",".html")===a);if(d)return d}return null},[e,a]);return x.jsx(dk,{lessonFile:a,quizId:l?.file?l.id:null,onBack:()=>r("/"),onStartQuiz:c=>r(`/quiz/${c}`),theme:s})};function pk(){U.useEffect(()=>{console.log(" Permis Online Free - Version 1.5 (Score Fix + Interaction Lock)")},[]);const[s,e]=U.useState([]),[t,r]=U.useState({}),[a,l]=U.useState("light"),[c,d]=U.useState(!1),[p,g]=U.useState(!1),[v,E]=U.useState(null),S=U.useRef(!1),N=U.useRef(null);U.useEffect(()=>{const w=localStorage.getItem("theme");if(w){l(w),document.documentElement.setAttribute("data-theme",w);return}const A=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";l(A),document.documentElement.setAttribute("data-theme",A)},[]),U.useEffect(()=>{const w=window.location.hash.replace("#","")||"/";let A="Permis Online Free";w.startsWith("/quiz")?A="Quiz - Permis Online Free":w.startsWith("/resultats")?A="Rsultats - Permis Online Free":w==="/profil"?A="Mon Profil - Permis Online Free":w.startsWith("/lecon")&&(A="Leon - Permis Online Free"),document.title=A},[]);const K=()=>{const w=a==="light"?"dark":"light";l(w),document.documentElement.setAttribute("data-theme",w),localStorage.setItem("theme",w)},q=()=>{const w=!c;d(w),localStorage.setItem("instantFeedback",JSON.stringify(w))},L=()=>{const w=!p;g(w),localStorage.setItem("autoPlayAudio",JSON.stringify(w))};U.useEffect(()=>{(async()=>{try{const k=await x2();k&&k.sections&&e(k.sections)}catch(k){console.error("Failed to load themes index",k)}})();const A=localStorage.getItem("quizProgress");A&&r(JSON.parse(A));const R=localStorage.getItem("instantFeedback");R&&d(JSON.parse(R));const M=localStorage.getItem("autoPlayAudio");M&&g(JSON.parse(M));const O=ws.onAuthStateChanged(async k=>{k&&(console.log(" User logged in:",k.displayName||k.email),le())});return()=>O()},[]),U.useEffect(()=>{if(localStorage.setItem("quizProgress",JSON.stringify(t)),S.current){S.current=!1;const w=ws.onAuthStateChanged(A=>{A&&(N.current&&clearTimeout(N.current),E("pending"),N.current=setTimeout(()=>{Z(t)},2500)),w()})}},[t]);const ne=(w,A,R,M)=>{S.current=!0,r(O=>{const{metadata:k,...C}=O;return{...C,metadata:k||{},[w]:{score:A,total:R,date:new Date().toISOString(),answers:M}}})},J=(w,A)=>{S.current=!0,r(R=>{if(!R[w])return R;const M=R[w],k=(M.answers||[]).map(j=>{const ae=A.find(ee=>ee.questionId==j.questionId);return ae||j});A.forEach(j=>{k.find(ae=>ae.questionId==j.questionId)||k.push(j)});const C=k.filter(j=>j.isCorrect).length,{metadata:Ae,...je}=R;return{...je,metadata:Ae||{},[w]:{...M,answers:k,score:C,date:new Date().toISOString()}}})},Z=async w=>{try{const A=ws.currentUser;if(!A)return;E("syncing"),console.log(` Firestore Sync: Saving to users/${A.uid}...`),await ik(ST(NT,"users",A.uid),w),console.log(" Firestore Sync: Success!"),E("success"),setTimeout(()=>E(null),3e3)}catch(A){console.error(" Firestore Sync Error:",A.code,A.message),A.code==="permission-denied"?console.warn(" ACTION REQUIRED: Check Firestore Rules in Firebase Console!"):A.code==="not-found"&&console.warn(" ACTION REQUIRED: Create 'Cloud Firestore' database in Firebase Console!"),E("error"),setTimeout(()=>E(null),5e3)}},le=async()=>{try{const w=ws.currentUser;if(!w)return;E("syncing"),console.log(` Firestore Pull: Fetching users/${w.uid}...`);const A=await rk(ST(NT,"users",w.uid));if(!A.exists()){console.log(" Firestore Pull: No remote data found."),E(null);return}const R=A.data(),M=JSON.parse(localStorage.getItem("quizProgress")||"{}"),O=R.metadata?.lastResetAll,k=M.metadata?.lastResetAll;if(O){const j=new Date(O).getTime(),ae=k?new Date(k).getTime():0,ee=Object.entries(M).reduce((ye,[xe,V])=>{if(xe==="metadata"||!V||!V.date)return ye;const X=new Date(V.date).getTime();return Math.max(ye,X)},0);if(j>ae&&j>ee){console.log(" Remote Reset detected. Clearing local progress."),r(R),localStorage.setItem("quizProgress",JSON.stringify(R)),E("success"),setTimeout(()=>E(null),3e3);return}}const{metadata:C,...Ae}=R,je={...M};if(O){const j=new Date(O).getTime(),ae=k?new Date(k).getTime():0;j>ae&&(je.metadata={...je.metadata,lastResetAll:O})}Object.keys(Ae).forEach(j=>{const ae=Ae[j],ee=je[j];if(!ae)return;const ye=ae.date?new Date(ae.date).getTime():0,xe=ee&&ee.date?new Date(ee.date).getTime():0;(!ee||ye>xe||ye===xe&&ae.score>(ee.score||0))&&(je[j]=ae)}),r(je),localStorage.setItem("quizProgress",JSON.stringify(je)),E("success"),console.log(" Auto-pull complete!"),setTimeout(()=>E(null),3e3)}catch(w){console.error(" Auto-pull failed:",w),E("error"),setTimeout(()=>E(null),5e3)}},fe=()=>{if(window.confirm("tes-vous sr de vouloir rinitialiser toute votre progression sur TOUS vos appareils ?")){const w={metadata:{lastResetAll:new Date().toISOString()}};S.current=!0,r(w),localStorage.setItem("quizProgress",JSON.stringify(w))}};window.debugApp={sections:s,progress:t,resetProgress:()=>{r({}),localStorage.removeItem("quizProgress"),console.log("Progress reset")}};const ce=a==="dark";return x.jsxs(TR,{basename:"/permis-online-free/",children:[v&&x.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",background:v==="error"?"var(--danger)":"var(--surface-1)",color:v==="error"?"white":"var(--foreground)",padding:"12px 20px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",zIndex:1e4,display:"flex",alignItems:"center",gap:"10px",border:"1px solid var(--border)",fontWeight:"500",animation:"slideUp 0.3s ease-out"},children:[v==="syncing"&&x.jsx("span",{children:" Synchronisation..."}),v==="pending"&&x.jsx("span",{style:{opacity:.7},children:" En attente..."}),v==="success"&&x.jsx("span",{style:{color:"var(--success)"},children:" Synchronis !"}),v==="error"&&x.jsx("span",{children:" Erreur de synchronisation"})]}),x.jsxs(WI,{children:[x.jsx(ma,{path:"/",element:x.jsx(b2,{sections:s,progress:t,toggleTheme:K,isDarkMode:ce})}),x.jsx(ma,{path:"/profil",element:x.jsx(hk,{progress:t,themesData:{sections:s},onReset:fe,instantFeedback:c,onToggleInstantFeedback:q,autoPlayAudio:p,onToggleAutoPlayAudio:L,toggleTheme:K,isDarkMode:ce})}),x.jsx(ma,{path:"/lecon/:lessonId",element:x.jsx(mk,{themeMode:a,sections:s})}),x.jsx(ma,{path:"/quiz/:themeId",element:x.jsx(I2,{sections:s,onFinishQuiz:ne,onPatchProgress:J,instantFeedback:c,autoPlayAudio:p,toggleTheme:K,isDarkMode:ce})}),x.jsx(ma,{path:"/revision",element:x.jsx(kb,{toggleTheme:K,isDarkMode:ce})}),x.jsx(ma,{path:"/resultats",element:x.jsx(kb,{toggleTheme:K,isDarkMode:ce})})]})]})}console.log("APP VERSION: 2026-02-10 14:30 - Fixed single_choice & Logic");tI.createRoot(document.getElementById("root")).render(x.jsx(U.StrictMode,{children:x.jsx(pk,{})}));export{gk as c,Gx as g};
